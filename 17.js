(window.webpackJsonp=window.webpackJsonp||[]).push([[17],{1096:function(t,e){t.exports='<h1 id="protvista-structure">protvista-structure</h1>\n<p><a href="https://www.npmjs.com/package/protvista-structure"><img src="https://img.shields.io/npm/v/protvista-structure.svg" alt="Published on NPM"></a></p>\n<p>A native web component wrapper around Mol*</p>\n<h2 id="usage">Usage</h2>\n<pre><code class="language-html">&lt;!-- With UniProt Accession --&gt;\n&lt;protvista-structure accession=&quot;P06493&quot; pdb-id=&quot;4YC3&quot; /&gt;\n&lt;!-- With a specific PDBe entry selected and the entrie table being hidden --&gt;\n&lt;protvista-structure\n  accession=&quot;P06493&quot;\n  highlight=&quot;209:220&quot;\n  pdb-id=&quot;4YC3&quot;\n  hide-table\n/&gt;</code></pre>\n<h2 id="api-reference">API Reference</h2>\n<h3 id="properties">Properties</h3>\n<h4 id="accession"><code>accession</code></h4>\n<p>A UniProt protein accession.</p>\n<h4 id="highlight"><code>highlight</code></h4>\n<p>This is a comma separated list of numerical ranges represented as a string e.g. &quot;1-5,10-20&quot;. When available, it will highlight all the residues corresponding to the given sequence positions.</p>\n<h4 id="pdb-id"><code>pdb-id</code></h4>\n<p>The id of the structure to display for the provided accession.</p>\n<h4 id="height"><code>height</code></h4>\n<p>The optional height of both table -- if visible, and the 3D structure. By default the value is set to <code>480px</code>. This should be a string value, representing a valid CSS value for an element&#39;s height property.</p>\n'},1097:function(t){t.exports=JSON.parse('[{"databaseType":"PDB","id":"1AAP","properties":{"Method":"X-ray","Resolution":"1.50 A","Chains":"A/B=287-344"}},{"databaseType":"PDB","id":"1AMB","properties":{"Method":"NMR","Resolution":"-","Chains":"A=672-699"}},{"databaseType":"PDB","id":"1AMC","properties":{"Method":"NMR","Resolution":"-","Chains":"A=672-699"}},{"databaseType":"PDB","id":"1AML","properties":{"Method":"NMR","Resolution":"-","Chains":"A=672-711"}},{"databaseType":"PDB","id":"1BA4","properties":{"Method":"NMR","Resolution":"-","Chains":"A=672-711"}},{"databaseType":"PDB","id":"1BA6","properties":{"Method":"NMR","Resolution":"-","Chains":"A=672-711"}},{"databaseType":"PDB","id":"1BJB","properties":{"Method":"NMR","Resolution":"-","Chains":"A=672-699"}},{"databaseType":"PDB","id":"1BJC","properties":{"Method":"NMR","Resolution":"-","Chains":"A=672-699"}},{"databaseType":"PDB","id":"1BRC","properties":{"Method":"X-ray","Resolution":"2.50 A","Chains":"I=287-342"}},{"databaseType":"PDB","id":"1CA0","properties":{"Method":"X-ray","Resolution":"2.10 A","Chains":"D/I=289-342"}},{"databaseType":"PDB","id":"1HZ3","properties":{"Method":"NMR","Resolution":"-","Chains":"A=681-706"}},{"databaseType":"PDB","id":"1IYT","properties":{"Method":"NMR","Resolution":"-","Chains":"A=672-713"}},{"databaseType":"PDB","id":"1MWP","properties":{"Method":"X-ray","Resolution":"1.80 A","Chains":"A=28-123"}},{"databaseType":"PDB","id":"1OWT","properties":{"Method":"NMR","Resolution":"-","Chains":"A=124-189"}},{"databaseType":"PDB","id":"1QCM","properties":{"Method":"NMR","Resolution":"-","Chains":"A=696-706"}},{"databaseType":"PDB","id":"1QWP","properties":{"Method":"NMR","Resolution":"-","Chains":"A=696-706"}},{"databaseType":"PDB","id":"1QXC","properties":{"Method":"NMR","Resolution":"-","Chains":"A=696-706"}},{"databaseType":"PDB","id":"1QYT","properties":{"Method":"NMR","Resolution":"-","Chains":"A=696-706"}},{"databaseType":"PDB","id":"1TAW","properties":{"Method":"X-ray","Resolution":"1.80 A","Chains":"B=287-344"}},{"databaseType":"PDB","id":"1TKN","properties":{"Method":"NMR","Resolution":"-","Chains":"A=460-569"}},{"databaseType":"PDB","id":"1UO7","properties":{"Method":"Model","Resolution":"-","Chains":"A=672-713"}},{"databaseType":"PDB","id":"1UO8","properties":{"Method":"Model","Resolution":"-","Chains":"A=672-713"}},{"databaseType":"PDB","id":"1UOA","properties":{"Method":"Model","Resolution":"-","Chains":"A=672-713"}},{"databaseType":"PDB","id":"1UOI","properties":{"Method":"Model","Resolution":"-","Chains":"A=672-713"}},{"databaseType":"PDB","id":"1X11","properties":{"Method":"X-ray","Resolution":"2.50 A","Chains":"C/D=754-766"}},{"databaseType":"PDB","id":"1Z0Q","properties":{"Method":"NMR","Resolution":"-","Chains":"A=672-713"}},{"databaseType":"PDB","id":"1ZE7","properties":{"Method":"NMR","Resolution":"-","Chains":"A=672-687"}},{"databaseType":"PDB","id":"1ZE9","properties":{"Method":"NMR","Resolution":"-","Chains":"A=672-687"}},{"databaseType":"PDB","id":"1ZJD","properties":{"Method":"X-ray","Resolution":"2.60 A","Chains":"B=289-344"}},{"databaseType":"PDB","id":"2BEG","properties":{"Method":"NMR","Resolution":"-","Chains":"A/B/C/D/E=672-713"}},{"databaseType":"PDB","id":"2BOM","properties":{"Method":"Model","Resolution":"-","Chains":"A/B=681-713"}},{"databaseType":"PDB","id":"2BP4","properties":{"Method":"NMR","Resolution":"-","Chains":"A=672-687"}},{"databaseType":"PDB","id":"2FJZ","properties":{"Method":"X-ray","Resolution":"1.61 A","Chains":"A=133-189"}},{"databaseType":"PDB","id":"2FK1","properties":{"Method":"X-ray","Resolution":"1.60 A","Chains":"A=133-189"}},{"databaseType":"PDB","id":"2FK2","properties":{"Method":"X-ray","Resolution":"1.65 A","Chains":"A=133-189"}},{"databaseType":"PDB","id":"2FK3","properties":{"Method":"X-ray","Resolution":"2.40 A","Chains":"A/B/C/D/E/F/G/H=133-189"}},{"databaseType":"PDB","id":"2FKL","properties":{"Method":"X-ray","Resolution":"2.50 A","Chains":"A/B=124-189"}},{"databaseType":"PDB","id":"2FMA","properties":{"Method":"X-ray","Resolution":"0.85 A","Chains":"A=133-189"}},{"databaseType":"PDB","id":"2G47","properties":{"Method":"X-ray","Resolution":"2.10 A","Chains":"C/D=672-711"}},{"databaseType":"PDB","id":"2IPU","properties":{"Method":"X-ray","Resolution":"1.65 A","Chains":"P/Q=672-679"}},{"databaseType":"PDB","id":"2LFM","properties":{"Method":"NMR","Resolution":"-","Chains":"A=672-711"}},{"databaseType":"PDB","id":"2LLM","properties":{"Method":"NMR","Resolution":"-","Chains":"A=686-726"}},{"databaseType":"PDB","id":"2LMN","properties":{"Method":"NMR","Resolution":"-","Chains":"A/B/C/D/E/F/G/H/I/J/K/L=672-711"}},{"databaseType":"PDB","id":"2LMO","properties":{"Method":"NMR","Resolution":"-","Chains":"A/B/C/D/E/F/G/H/I/J/K/L=672-711"}}]')},170:function(t,e,r){"use strict";r.r(e);var n=r(0),i=r.n(n),o=r(618),a=(r(1076),r(1123)),u=r(1023),s=r(1013),c=r(900),l=r(653),h=r(574),f=r(719),p=r(592),d=r(580),y=r(575),b=r(572),v=r(636),g=r(579),m=r(835),w=r(632),_=r(920),A=r(607),S=r(995),k=r(586),O=function(t,e,r,n){return new(r||(r=Promise))((function(i,o){function a(t){try{s(n.next(t))}catch(t){o(t)}}function u(t){try{s(n.throw(t))}catch(t){o(t)}}function s(t){var e;t.done?i(t.value):(e=t.value,e instanceof r?e:new r((function(t){t(e)}))).then(a,u)}s((n=n.apply(t,e||[])).next())}))},R=function(t){return!!t&&h.d.isFromPdbArchive(t)},P={local_metric_values:{label_asym_id:g.a.Schema.str,label_comp_id:g.a.Schema.str,label_seq_id:g.a.Schema.int,metric_id:g.a.Schema.int,metric_value:g.a.Schema.float,model_id:g.a.Schema.int,ordinal_id:g.a.Schema.int}},C=function(t,e){var r=function(t,e){if(w.a.is(e.sourceData)&&e.sourceData.data.frame.categoryNames.includes(t)){var r=e.sourceData.data.frame.categories[t].getField("metric_value");if(r&&0!==r.rowCount)return{timestamp_utc:r.str(0)||Object(S.a)(new Date)}}}("ma_qa_metric_local",e);if(r)return{info:r,data:function(t,e){for(var r=new Map,n=e.label_asym_id,i=e.label_seq_id,o=e.metric_value,a=e._rowCount,u=[],s=0;s<a;s++){var c=o.value(s),l=t.atomicHierarchy.index.findResidue("1",n.value(s),i.value(s),""),f="Very low";c>50&&c<=70?f="Low":c>70&&c<=90?f="Medium":c>90&&(f="High"),r.set(l,[c,f]),Object(k.k)(u,f)}return{score:h.c.fromResidueMap(r),category:u}}(e,function(t){if(!w.a.is(t.sourceData))throw new Error("Data format must be mmCIF.");return{residues:Object(m.c)(P.local_metric_values,t.sourceData.data.frame.categories.ma_qa_metric_local)}}(e).residues)}};function j(t,e,r){return O(this,void 0,void 0,regeneratorRuntime.mark((function t(){var r;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=C(0,e),t.abrupt("return",{value:r});case 2:case"end":return t.stop()}}),t)})))}function E(t){if(!h.n.isAtomic(t.unit))return[-1,"No Score"];var e=x.get(t.unit.model).value;if(!e||!e.data)return[-1,"No Score"];var r=t.unit.residueIndex[t.element];return e.data.score.has(r)?e.data.score.get(r):[-1,"No Score"]}var M=[];var T={serverUrl:b.a.Text("",{description:"JSON API Server URL"})},x=_.a.createProvider({label:"AF Confidence Score",descriptor:Object(A.b)({name:"af_confidence_score"}),type:"static",defaultParams:T,getParams:function(t){return T},isApplicable:function(t){return R(t)},obtain:function(t,e,r){return O(void 0,void 0,void 0,regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return Object.assign(Object.assign({},b.a.getDefaultValues(T)),r),t.next=3,j(0,e);case 3:return n=t.sent,t.abrupt("return",n);case 5:case"end":return t.stop()}}),t)})))}});var B={"No Score":d.a.fromRgb(170,170,170),"Very low":d.a.fromRgb(255,125,69),Low:d.a.fromRgb(255,219,19),Medium:d.a.fromRgb(101,203,243),High:d.a.fromRgb(0,83,214)},D={type:b.a.MappedStatic("score",{score:b.a.Group({}),category:b.a.Group({kind:b.a.Text()})})};var N={name:"af-confidence",label:"AF Confidence",category:"Validation",factory:function t(e,r){var n;if(e.structure&&!e.structure.isEmpty&&e.structure.models[0].customProperties.has(x.descriptor))if("score"===r.type.name)n=function(t){if(h.h.Location.is(t)){var e=E(t);return B[e[1]]}return B["No Score"]};else{var i=r.type.params.kind;n=function(t){if(h.h.Location.is(t)){var e=E(t);return e[1]===i?B[e[1]]:B["No Score"]}return B["No Score"]}}else n=function(){return B["No Score"]};return{factory:t,granularity:"group",color:n,props:r,description:"Assigns residue colors according to the AF Confidence score"}},getParams:function(t){var e=function(t){if(!t)return M;var e=x.get(t.models[0]).value;return e&&e.data?e.data.category:M}(t.structure);return 0===e.length?{type:b.a.MappedStatic("score",{score:b.a.Group({})})}:{type:b.a.MappedStatic("score",{score:b.a.Group({}),category:b.a.Group({kind:b.a.Select(e[0],b.a.arrayToOptions(e))},{isFlat:!0})})}},defaultValues:b.a.getDefaultValues(D),isApplicable:function(t){var e;return R(null===(e=t.structure)||void 0===e?void 0:e.models[0])},ensureCustomProperties:{attach:function(t,e){return e.structure?x.attach(t,e.structure.models[0],void 0,!0):Promise.resolve()},detach:function(t){return t.structure&&t.structure.models[0].customProperties.reference(x.descriptor,!1)}}};function I(t){return(I="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function F(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function V(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function L(t,e){return(L=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function H(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var r,n=q(t);if(e){var i=q(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return U(this,r)}}function U(t,e){return!e||"object"!==I(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function q(t){return(q=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var W=v.a.create({name:"af-confidence-prop",category:"custom-props",display:{name:"AlphaFold Confidence Score",description:"AlphaFold Confidence Score."},ctor:function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&L(t,e)}(o,t);var e,r,n,i=H(o);function o(){var t;return F(this,o),(t=i.apply(this,arguments)).provider=x,t.labelAfConfScore={label:function(e){if(t.params.showTooltip&&"element-loci"===e.kind&&0!==e.elements.length){var r=e.elements[0],n=r.unit;if(!n.model.customProperties.hasReference(x.descriptor))return;var i=E(h.h.Location.create(e.structure,n,n.elements[y.d.getAt(r.indices,0)]));return i&&i[0]>0?"Confidence score: ".concat(i[0]," <small>( ").concat(i[1]," )</small>"):""}}},t}return e=o,(r=[{key:"register",value:function(){this.ctx.customModelProperties.register(this.provider,this.params.autoAttach),this.ctx.managers.lociLabels.addProvider(this.labelAfConfScore),this.ctx.representation.structure.themes.colorThemeRegistry.add(N)}},{key:"update",value:function(t){var e=this.params.autoAttach!==t.autoAttach;return this.params.autoAttach=t.autoAttach,this.params.showTooltip=t.showTooltip,this.ctx.customModelProperties.setDefaultAutoAttach(this.provider.descriptor.name,this.params.autoAttach),e}},{key:"unregister",value:function(){this.ctx.customModelProperties.unregister(x.descriptor.name),this.ctx.managers.lociLabels.removeProvider(this.labelAfConfScore),this.ctx.representation.structure.themes.colorThemeRegistry.remove(N)}}])&&V(e.prototype,r),n&&V(e,n),o}(v.a.Handler),params:function(){return{autoAttach:b.a.Boolean(!1),showTooltip:b.a.Boolean(!0)}}});r(1094);function X(t){return function(t){if(Array.isArray(t))return G(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(!t)return;if("string"==typeof t)return G(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return G(t,e)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function G(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function z(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var J=function(t,e,r,n){return new(r||(r=Promise))((function(i,o){function a(t){try{s(n.next(t))}catch(t){o(t)}}function u(t){try{s(n.throw(t))}catch(t){o(t)}}function s(t){var e;t.done?i(t.value):(e=t.value,e instanceof r?e:new r((function(t){t(e)}))).then(a,u)}s((n=n.apply(t,e||[])).next())}))},$=!1,K=!1,Q="reactive",Z=!1,Y=1,tt=!1,et=!0,rt=!1,nt="pdbe",it=(l.a.Viewport.ShowControls.defaultValue,l.a.Viewport.ShowSettings.defaultValue,function(){function t(e,r){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t);var n=Object(u.a)(),i={actions:n.actions,behaviors:[].concat(X(n.behaviors),[s.b.Behavior(W,{autoAttach:!0,showTooltip:!0})]),layout:{initial:{isExpanded:$,showControls:K,controlsDisplay:Q}},config:[[l.a.General.DisableAntialiasing,Z],[l.a.General.PixelScale,Y],[l.a.General.EnableWboit,tt],[l.a.Viewport.ShowExpand,et],[l.a.Viewport.ShowSelectionMode,rt],[l.a.Download.DefaultPdbProvider,nt],[l.a.Structure.DefaultRepresentationPresetParams,{theme:{globalName:"af-confidence",carbonByChainId:!1,focus:{name:"element-symbol",params:{carbonByChainId:!1}}}}]]},o="string"==typeof e?document.getElementById(e):e;if(!o)throw new Error("Could not get element with id '".concat(e,"'"));this.plugin=Object(a.a)(o,i),this.plugin.behaviors.interaction.click.subscribe((function(t){if(h.h.Loci.is(t.current.loci)){var e=h.h.Location.create();h.h.Loci.getFirstLocation(t.current.loci,e);var n=h.i.residue.label_seq_id(e);r([n])}})),p.a.Canvas3D.SetSettings(this.plugin,{settings:function(t){t.renderer.backgroundColor=Object(d.a)(16777215)}})}var e,r,n;return e=t,(r=[{key:"clear",value:function(t){this.plugin.clear(),t&&this.showMessage("Loading",t)}},{key:"loadPdb",value:function(t,e){var r=this,n=c.DownloadStructure.createDefaultParams(this.plugin.state.data.root.obj,this.plugin),i=this.plugin.config.get(l.a.Download.DefaultPdbProvider);return this.plugin.runTask(this.plugin.state.data.applyAction(c.DownloadStructure,{source:{name:"pdb",params:{provider:{id:t,server:{name:i,params:c.PdbDownloadProvider[i].defaultValue}},options:Object.assign(Object.assign({},n.source.params.options),{representationParams:null==e?void 0:e.representationParams})}}})).then((function(){r.clearMessages()}))}},{key:"loadAF",value:function(t,e){return J(this,void 0,void 0,regeneratorRuntime.mark((function t(){var r,n,i,o=this;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=this.plugin,t.next=3,r.builders.data.download({url:e,isBinary:!1},{state:{isGhost:!0}});case 3:return n=t.sent,t.next=6,r.builders.structure.parseTrajectory(n,"mmcif");case 6:return i=t.sent,t.abrupt("return",this.plugin.builders.structure.hierarchy.applyPreset(i,"all-models",{useDefaultIfSingleModel:!0}).then((function(){return o.clearMessages()})));case 8:case"end":return t.stop()}}),t,this)})))}},{key:"highlight",value:function(t){var e,r,n=null===(r=null===(e=this.plugin.managers.structure.hierarchy.current.structures[0])||void 0===e?void 0:e.cell.obj)||void 0===r?void 0:r.data;if(n){var i=f.a.getStructureSelection((function(e){return e.struct.generator.atomGroups({"residue-test":e.core.logic.or(t.map((function(t){var r=t.start,n=t.end;return e.core.rel.inRange([e.struct.atomProperty.macromolecular.label_seq_id(),r,n])})))})}),n),o=h.k.toLociWithSourceUnits(i);this.plugin.managers.camera.focusLoci(o),this.plugin.managers.interactivity.lociSelects.selectOnly({loci:o})}}},{key:"clearHighlight",value:function(){this.plugin.managers.interactivity.lociSelects.deselectAll(),p.a.Camera.Reset(this.plugin,{})}},{key:"showMessage",value:function(t,e,r){this.clearMessages(),p.a.Toast.Show(this.plugin,{title:t,message:e,timeoutMs:r})}},{key:"clearMessages",value:function(){p.a.Toast.Hide(this.plugin)}},{key:"handleResize",value:function(){this.plugin.layout.events.updated.next()}}])&&z(e.prototype,r),n&&z(e,n),t}());function ot(t){return(ot="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function at(t,e){var r="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!r){if(Array.isArray(t)||(r=function(t,e){if(!t)return;if("string"==typeof t)return ut(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return ut(t,e)}(t))||e&&t&&"number"==typeof t.length){r&&(t=r);var n=0,i=function(){};return{s:i,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,u=!1;return{s:function(){r=r.call(t)},n:function(){var t=r.next();return a=t.done,t},e:function(t){u=!0,o=t},f:function(){try{a||null==r.return||r.return()}finally{if(u)throw o}}}}function ut(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function st(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function ct(t,e){return!e||"object"!==ot(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function lt(t){var e="function"==typeof Map?new Map:void 0;return(lt=function(t){if(null===t||(r=t,-1===Function.toString.call(r).indexOf("[native code]")))return t;var r;if("function"!=typeof t)throw new TypeError("Super expression must either be null or a function");if(void 0!==e){if(e.has(t))return e.get(t);e.set(t,n)}function n(){return ht(t,arguments,dt(this).constructor)}return n.prototype=Object.create(t.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),pt(n,t)})(t)}function ht(t,e,r){return(ht=ft()?Reflect.construct:function(t,e,r){var n=[null];n.push.apply(n,e);var i=new(Function.bind.apply(t,n));return r&&pt(i,r.prototype),i}).apply(null,arguments)}function ft(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}function pt(t,e){return(pt=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function dt(t){return(dt=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var yt=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&pt(t,e)}(i,t);var e,r,n=(e=i,r=ft(),function(){var t,n=dt(e);if(r){var i=dt(this).constructor;t=Reflect.construct(n,arguments,i)}else t=n.apply(this,arguments);return ct(this,t)});function i(){return st(this,i),n.apply(this,arguments)}return i}(lt(Error)),bt=function(t,e,r,n){if(!r)return null;if(!t||!e||Number.isNaN(t)||Number.isNaN(e))throw new yt("Invalid start, end coordinates");var i,o=at(r);try{for(o.s();!(i=o.n()).done;){var a=i.value;if(a.unp_end-a.unp_start!=a.end.residue_number-a.start.residue_number)throw new yt("Mismatch between protein sequence and structure residues");if("UP_PDB"===n&&(t<a.unp_start||e>a.unp_end)||"PDB_UP"===n&&(t<a.start.residue_number||e>a.end.residue_number))throw new yt("Start or end coordinate outside of mapping range");var u="UP_PDB"===n?a.start.residue_number-a.unp_start:a.unp_start-a.start.residue_number;return{entity:a.entity_id,chain:a.chain_id,start:t+u,end:e+u}}}catch(t){o.e(t)}finally{o.f()}return null};function vt(t){return(vt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function gt(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=t&&("undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"]);if(null==r)return;var n,i,o=[],a=!0,u=!1;try{for(r=r.call(t);!(a=(n=r.next()).done)&&(o.push(n.value),!e||o.length!==e);a=!0);}catch(t){u=!0,i=t}finally{try{a||null==r.return||r.return()}finally{if(u)throw i}}return o}(t,e)||function(t,e){if(!t)return;if("string"==typeof t)return mt(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return mt(t,e)}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function mt(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function wt(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function _t(t,e){return!e||"object"!==vt(e)&&"function"!=typeof e?At(t):e}function At(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function St(t){var e="function"==typeof Map?new Map:void 0;return(St=function(t){if(null===t||(r=t,-1===Function.toString.call(r).indexOf("[native code]")))return t;var r;if("function"!=typeof t)throw new TypeError("Super expression must either be null or a function");if(void 0!==e){if(e.has(t))return e.get(t);e.set(t,n)}function n(){return kt(t,arguments,Pt(this).constructor)}return n.prototype=Object.create(t.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),Rt(n,t)})(t)}function kt(t,e,r){return(kt=Ot()?Reflect.construct:function(t,e,r){var n=[null];n.push.apply(n,e);var i=new(Function.bind.apply(t,n));return r&&Rt(i,r.prototype),i}).apply(null,arguments)}function Ot(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}function Rt(t,e){return(Rt=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function Pt(t){return(Pt=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var Ct,jt,Et,Mt=function(t,e,r,n){return new(r||(r=Promise))((function(i,o){function a(t){try{s(n.next(t))}catch(t){o(t)}}function u(t){try{s(n.throw(t))}catch(t){o(t)}}function s(t){var e;t.done?i(t.value):(e=t.value,e instanceof r?e:new r((function(t){t(e)}))).then(a,u)}s((n=n.apply(t,e||[])).next())}))},Tt=function(t,e){var r=window.ga;r&&r("send","event","protvista-structure",t,e)},xt=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Rt(t,e)}(s,t);var e,r,n,i,a,u=(e=s,r=Ot(),function(){var t,n=Pt(e);if(r){var i=Pt(this).constructor;t=Reflect.construct(n,arguments,i)}else t=n.apply(this,arguments);return _t(this,t)});function s(){var t;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,s),(t=u.call(this))._planHighlight=t._planHighlight.bind(At(t)),t.propagateHighlight=t.propagateHighlight.bind(At(t)),t}return n=s,a=[{key:"is",get:function(){return"protvista-structure"}},{key:"observedAttributes",get:function(){return["highlight","structureid","accession","height"]}},{key:"_parseHighlight",value:function(t){return t?t.split(",").map((function(t){var e=gt(t.split(":"),2),r=e[0],n=e[1];return{start:Number(r),end:Number(n)}})):[]}}],(i=[{key:"css",get:function(){return"\n    protvista-structure h4 {\n      display: inline;\n      margin-right: 1em;\n    }\n      \n    .structure-viewer-container {\n      position: relative;\n      height: ".concat(this._height,";\n    }\n    ")}},{key:"accession",get:function(){return this._accession},set:function(t){this.setAttribute("accession",t)}},{key:"structureId",get:function(){return this.structureId},set:function(t){this.setAttribute("structureid",t),this._structureId=t}},{key:"height",get:function(){return this.getAttribute("height")}},{key:"connectedCallback",value:function(){var t=this.closest("protvista-manager");t&&"register"in t&&"unregister"in t&&(this.manager=t,this.manager.register(this)),this.structureId=this.getAttribute("structureid"),this._accession=this.getAttribute("accession"),this._height=this.getAttribute("height")||"480px",this._highlight=this.getAttribute("highlight")&&s._parseHighlight(this.getAttribute("highlight"));var e=document.createElement("style");e.innerHTML=this.css,this.appendChild(e);var r=document.createElement("div");r.className="structure-viewer-container",r.id="structure-viewer-instance",this.appendChild(r),this._structureViewer=new it(r,this.propagateHighlight)}},{key:"disconnectedCallback",value:function(){this.manager&&this.manager.unregister(this)}},{key:"attributeChangedCallback",value:function(t,e,r){if(e!==r){switch(t){case"structureid":null!==r&&(this._structureId=r),this.selectMolecule();break;case"accession":this._accession=r,this.selectMolecule();break;case"highlight":this._highlight=s._parseHighlight(this.getAttribute("highlight"));break;case"height":this._height=r}this._planHighlight()}}},{key:"_planHighlight",value:function(){var t=this;this._plannedRender||(this._plannedRender=!0,requestAnimationFrame((function(){t._plannedRender=!1,t._selectedMolecule&&t.highlightChain()})))}},{key:"loadPDBEntry",value:function(t){var e;return Mt(this,void 0,void 0,regeneratorRuntime.mark((function r(){var n,i;return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return null===(e=this._structureViewer)||void 0===e||e.clear(t),r.prev=1,r.next=4,Object(o.b)("https://www.ebi.ac.uk/pdbe/api/mappings/uniprot/".concat(t));case 4:return n=r.sent,i=n.payload,Tt("load-PDBe",t),r.abrupt("return",i);case 10:throw r.prev=10,r.t0=r.catch(1),this._structureViewer.showMessage("Error","Couldn't load PDB entry"),r.t0;case 14:case"end":return r.stop()}}),r,this,[[1,10]])})))}},{key:"loadAFEntry",value:function(t){var e;return Mt(this,void 0,void 0,regeneratorRuntime.mark((function r(){var n,i;return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return null===(e=this._structureViewer)||void 0===e||e.clear(t),r.prev=1,r.next=4,Object(o.b)("https://alphafold.ebi.ac.uk/api/prediction/".concat(t));case 4:return n=r.sent,i=n.payload,Tt("load-AF",t),r.abrupt("return",i);case 10:throw r.prev=10,r.t0=r.catch(1),this._structureViewer.showMessage("Error","Couldn't load AF entry"),r.t0;case 14:case"end":return r.stop()}}),r,this,[[1,10]])})))}},{key:"isAF",value:function(){return this._structureId.startsWith("AF-")}},{key:"selectMolecule",value:function(){var t;return Mt(this,void 0,void 0,regeneratorRuntime.mark((function e(){var r,n,i,o,a=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this._structureId&&this._accession){e.next=2;break}return e.abrupt("return");case 2:if(!this.isAF()){e.next=11;break}return e.next=5,this.loadAFEntry(this._accession);case 5:return n=e.sent,i=n.find((function(t){return t.entryId===a._structureId})),e.next=9,this._structureViewer.loadAF(this._structureId,i.cifUrl);case 9:e.next=17;break;case 11:return e.next=13,this.loadPDBEntry(this._structureId);case 13:return o=e.sent,r=null===(t=Object.values(o)[0].UniProt[this._accession])||void 0===t?void 0:t.mappings,e.next=17,this._structureViewer.loadPdb(this._structureId.toLowerCase());case 17:this._selectedMolecule={id:this._structureId,mappings:r},this._planHighlight();case 19:case"end":return e.stop()}}),e,this)})))}},{key:"propagateHighlight",value:function(t){var e=this;if((null==t?void 0:t.length)&&!t.some((function(t){return!Number.isInteger(t)}))){var r;try{r=t.map((function(t){return bt(t,t,e._selectedMolecule.mappings,"PDB_UP")}))}catch(t){if(t instanceof yt)return void this._structureViewer.showMessage("Error",t.message);throw t}var n=r.filter(Boolean).map((function(t){return"".concat(t.start,":").concat(t.end)}));this.setAttribute("highlight",n.join(","));var i=new CustomEvent("change",{detail:{highlight:n},bubbles:!0,cancelable:!0});this.dispatchEvent(i)}}},{key:"highlightChain",value:function(){var t=this;if(this._highlight&&"string"!=typeof this._highlight){var e;try{e=this._highlight.map((function(e){var r=e.start,n=e.end;return t.isAF()?{start:r,end:n}:bt(r,n,t._selectedMolecule.mappings,"UP_PDB")})).filter(Boolean)}catch(t){if(t instanceof yt)return this._structureViewer.clearHighlight(),void this._structureViewer.showMessage("Error",t.message);throw t}(null==e?void 0:e.length)?(this._structureViewer.highlight(e),this._structureViewer.clearMessages()):this._structureViewer.clearHighlight()}}}])&&wt(n.prototype,i),a&&wt(n,a),s}(St(HTMLElement)),Bt=r(940),Dt=r(686),Nt=r(28),It=r(111),Ft=r(35),Vt=r(1096),Lt=r.n(Vt),Ht=r(1097);function Ut(t,e){return e||(e=t.slice(0)),Object.freeze(Object.defineProperties(t,{raw:{value:Object.freeze(e)}}))}function qt(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=t&&("undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"]);if(null==r)return;var n,i,o=[],a=!0,u=!1;try{for(r=r.call(t);!(a=(n=r.next()).done)&&(o.push(n.value),!e||o.length!==e);a=!0);}catch(t){u=!0,i=t}finally{try{a||null==r.return||r.return()}finally{if(u)throw i}}return o}(t,e)||function(t,e){if(!t)return;if("string"==typeof t)return Wt(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Wt(t,e)}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Wt(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}Object(It.a)("protvista-structure",xt),Object(It.a)("protvista-datatable",Bt.a),Object(It.a)("protvista-manager",Dt.a);var Xt=[{name:"PDBe",url:function(t){return"https://www.ebi.ac.uk/pdbe-srv/view/entry/".concat(t)}},{name:"RCSB PDB",url:function(t){return"https://www.rcsb.org/structure/".concat(t)}},{name:"PDBj",url:function(t){return"https://pdbj.org/mine/summary/".concat(t)}},{name:"PDBsum",url:function(t){return"https://www.ebi.ac.uk/pdbsum/".concat(t)}}],Gt=function(t){var e=function(t){return t.map((function(t){var e=t.id,r=t.properties;if(!r)return null;var n,i,o,a=r.Chains,u=r.Resolution,s=r.Method;if(a){var c=a.split("=");if(2===c.length){var l=qt(c,2);n=l[0];var h=(i=l[1]).split("-");if(h&&2===h.length)o=qt(h,1)[0]}}return{id:e,method:s,resolution:u&&"-"!==u?u:null,chain:n,positions:i,protvistaFeatureId:e,start:Number(o)}}))}(t.xrefs),r=Object(n.useCallback)((function(t){t&&(t.data=e,t.columns={type:{label:"PDB Entry",resolver:function(t){return t.id}},method:{label:"Method",resolver:function(t){return t.method}},resolution:{label:"Resolution",resolver:function(t){var e=t.resolution;return e&&e.replace("A","Å")}},chain:{label:"Chain",resolver:function(t){return t.chain}},positions:{label:"Positions",resolver:function(t){return t.positions}},links:{label:"Links",resolver:function(t){var e=t.id;return Object(Nt.a)(Ct||(Ct=Ut(["\n        ","\n      "])),Xt.map((function(t){var r=t.name,n=t.url;return Object(Nt.a)(jt||(jt=Ut([" <a href=",">","</a> "])),n(e),r)})).reduce((function(t,e){return Object(Nt.a)(Et||(Et=Ut([" "," · "," "])),t,e)})))}}},t.rowClickEvent=function(t){return{"pdb-id":t.id}})}),[e]);return i.a.createElement("protvista-datatable",{ref:r,selectedId:"1AAP",noScrollToRow:!0,noDeselect:!0})};e.default=function(){return i.a.createElement(n.Fragment,null,i.a.createElement(Ft.default,{content:Lt.a}),i.a.createElement("h2",null,"Examples"),i.a.createElement("h3",null,"Structure with highlighted positions"),i.a.createElement("protvista-structure",{structureid:"1AAP",accession:"P05067",highlight:"290:300,310:340"}),i.a.createElement("h3",null,"Structure with protvista-datatable"),i.a.createElement("protvista-manager",{attributes:"pdb-id"},i.a.createElement("protvista-structure",{structureid:"1AAP",accession:"P05067"}),i.a.createElement(Gt,{xrefs:Ht})))}},591:function(t,e,r){"use strict";function n(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=t&&("undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"]);if(null==r)return;var n,i,o=[],a=!0,u=!1;try{for(r=r.call(t);!(a=(n=r.next()).done)&&(o.push(n.value),!e||o.length!==e);a=!0);}catch(t){u=!0,i=t}finally{try{a||null==r.return||r.return()}finally{if(u)throw i}}return o}(t,e)||function(t,e){if(!t)return;if("string"==typeof t)return i(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return i(t,e)}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function i(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function a(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}r.d(e,"b",(function(){return M})),r.d(e,"e",(function(){return T})),r.d(e,"a",(function(){return x})),r.d(e,"d",(function(){return B})),r.d(e,"c",(function(){return D})),r.d(e,"f",(function(){return N}));var u=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=e.min,n=void 0===r?-1/0:r,i=e.max,a=void 0===i?1/0:i;o(this,t),this.segments=[],this.max=a,this.min=n,this.regionString=null}var e,r,i;return e=t,(r=[{key:"encode",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return this.segments.map((function(r){var n=r.start,i=r.end,o=r.color;if(e)return"".concat(n,":").concat(i).concat(o?":".concat(o):"");var a=n===t.min?"":n,u=i===t.max?"":i;return"".concat(a,":").concat(u).concat(o?":".concat(o):"")})).join(",")}},{key:"decode",value:function(t){var e=this;void 0!==t&&(this.regionString=t),this.regionString?this.segments=this.regionString.split(",").map((function(t){var r=n(t.split(":"),4),i=r[0],o=r[1],a=r[2];if(void 0!==r[3])throw new Error("there should be at most 2 ':' per region. Region: ".concat(t));var u=i?Number(i):e.min,s=o?Number(o):e.max,c=""!==a?a:void 0;if(u>s){var l=[s,u];u=l[0],s=l[1]}if(u<e.min&&(u=e.min),s>e.max&&(s=e.max),Number.isNaN(u))throw new Error("The parsed value of ".concat(i," is NaN. Region: ").concat(t));if(Number.isNaN(s))throw new Error("The parsed value of ".concat(o," is NaN. Region: ").concat(t));if(c&&!c.match(/^#[0-9a-f]{6,8}$/i))throw new Error("The parsed value of ".concat(a," is not a color in hex format. Region: ").concat(t));return{start:u,end:s,color:c}})):this.segments=[]}}])&&a(e.prototype,r),i&&a(e,i),t}();function s(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var c=function(t,e){return t?e?"".concat(t,",").concat(e):t:e},l=function(){function t(e){var r=e.element,n=e.min,i=e.max;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.element=r,this.element._highlightcolor="#FFEB3B66",this.region=new u({min:n,max:i}),this.fixedHighlight=null}var e,r,n;return e=t,(r=[{key:"max",set:function(t){this.region.max=t}},{key:"setAttributesInElement",value:function(){this.region.decode(this.element.getAttribute("highlight")),0===this.region.segments.length&&(this.element._highlightstart=Number(this.element.getAttribute("highlightstart")),this.element._highlightend=Number(this.element.getAttribute("highlightend")),this.element._highlightcolor=this.element.getAttribute("highlightcolor")||"#FFEB3B66",null!==this.element._highlightstart&&null!==this.element._highlightend&&"number"==typeof this.element._highlightstart&&"number"==typeof this.element._highlightend&&(this.element._highlight="".concat(this.element._highlightstart,":").concat(this.element._highlightend),this.region.decode(c(this.fixedHighlight,this.element._highlight))))}},{key:"setFloatAttribute",value:function(t,e){var r=parseFloat(e);this.element["_".concat(t)]=Number.isNaN(r)?e:r}},{key:"changedCallBack",value:function(t,e){switch(t){case"highlightstart":case"highlightend":this.setFloatAttribute(t,e),this.element._highlight=Number.isNaN(this.element._highlightstart)||Number.isNaN(this.element._highlightend)||void 0===this.element._highlightstart||void 0===this.element._highlightend||null===this.element._highlightstart||null===this.element._highlightend?"":"".concat(Math.max(this.region.min,this.element._highlightstart),":").concat(Math.min(this.region.max,this.element._highlightend));break;default:this.element._highlight=e}this.region.decode(c(this.fixedHighlight,this.element._highlight)),this.element.refresh()}},{key:"setFixedHighlight",value:function(t){this.fixedHighlight=t,this.region.decode(c(t,this.element._highlight)),this.element.refresh()}},{key:"appendHighlightTo",value:function(t){this.highlighted=t.append("g").attr("class","highlighted")}},{key:"updateHighlight",value:function(){var t=this,e=this.highlighted.selectAll("rect").data(this.region.segments);e.enter().append("rect").style("pointer-events","none").merge(e).attr("fill",(function(e){return e.color?e.color:t.element._highlightcolor})).attr("height",this.element._height).attr("x",(function(e){return t.element.getXFromSeqPosition(e.start)})).attr("width",(function(e){return t.element.getSingleBaseWidth()*(e.end-e.start+1)})),e.exit().remove()}}])&&s(e.prototype,r),n&&s(e,n),t}();function h(t){var e=document.createElement("div");return e.style.borderColor="",e.style.borderColor=t,""!==e.style.borderColor}var f=function(t){return t};function p(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var d=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.element=e,this.timeStampWheelOutside=0,this.resetScrollableTimeout=null}var e,r,n;return e=t,(r=[{key:"setElementScrollable",value:function(t){this.element.setAttribute("scrollable",t)}},{key:"startResetScrollableTimer",value:function(){var t=this;this.resetScrollableTimeout&&clearTimeout(this.resetScrollableTimeout),this.resetScrollableTimeout=setTimeout((function(){t.setElementScrollable(!0),t.resetScrollableTimeout=null}),400)}},{key:"blockScroll",value:function(t){this.timeStampWheelOutside=t,this.setElementScrollable(!1),this.startResetScrollableTimer()}},{key:"isWheelEventInsideElement",value:function(t,e){var r=this.element.getBoundingClientRect(),n=r.height,i=r.width,o=r.x,a=r.y;return t>o&&e<o+i&&e>a&&e<a+n}},{key:"wheel",value:function(t){var e=t.x,r=t.y,n=t.timeStamp;this.isWheelEventInsideElement(e,r)?n<this.timeStampWheelOutside+400?this.blockScroll(n):this.setElementScrollable(!0):this.blockScroll(n)}}])&&p(e.prototype,r),n&&p(e,n),t}();function y(t){return(y="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function b(t,e){var r="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!r){if(Array.isArray(t)||(r=g(t))||e&&t&&"number"==typeof t.length){r&&(t=r);var n=0,i=function(){};return{s:i,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,u=!1;return{s:function(){r=r.call(t)},n:function(){var t=r.next();return a=t.done,t},e:function(t){u=!0,o=t},f:function(){try{a||null==r.return||r.return()}finally{if(u)throw o}}}}function v(t){return function(t){if(Array.isArray(t))return m(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||g(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function g(t,e){if(t){if("string"==typeof t)return m(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?m(t,e):void 0}}function m(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function w(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function A(t,e,r){return e&&_(t.prototype,e),r&&_(t,r),t}function S(t,e,r){return(S="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=C(t)););return t}(t,e);if(n){var i=Object.getOwnPropertyDescriptor(n,e);return i.get?i.get.call(r):i.value}})(t,e,r||t)}function k(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&O(t,e)}function O(t,e){return(O=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function R(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var r,n=C(t);if(e){var i=C(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return P(this,r)}}function P(t,e){return!e||"object"!==y(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function C(t){return(C=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var j=["left","right","top","bottom"],E=j.map((function(t){return"margin".concat(t)})),M=u,T=l,x=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,e=[],r=[];if(null!==t&&"string"!=typeof t)throw new Error("The attribute text has to be of type string");if(t&&""!==t.trim()){var n=t.split(",").map((function(t){return t.split(":")}));if(n.length<2)throw new Error("There should be at least 2 points to create a scale");e=n.map((function(t){var e=t[0].trim().toUpperCase();if(!h(e))throw new Error("The color '".concat(e," is not valid'"));return e})),r=n.map((function(t,e){var r=parseFloat(t[1]);if(Number.isNaN(r))throw new Error("The second part of every point should be a number. Error in point ".concat(e,": ").concat(t));return r}))}return{range:e,domain:r}},B=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=e.keyFormatter,n=void 0===r?f:r,i=e.valueFormatter,o=void 0===i?f:i;if(null!==t&&"string"!=typeof t)throw new Error("The attribute text has to be of type string");if(t&&""!==t.trim()){var a=t.split(",").map((function(t){return t.split(":")})),u={};return a.forEach((function(t){if(2!==t.length)throw new Error("Bad block: ".concat(t.join(":"),"\n The blocks of the string should follow the format KEY:VALUE"));u[n(t[0])]=o(t[1])})),u}return{}},D=d,N=function(t){var e,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{initialValue:{top:0,bottom:0,left:0,right:0}},n=function(t){k(n,t);var e=R(n);function n(){var t;return w(this,n),(t=e.call(this)).margin=r.initialValue,t}return A(n,[{key:"attributeChangedCallback",value:function(t,e,r){e!==r&&E.includes(t)&&(this[t]=r),S(C(n.prototype),"attributeChangedCallback",this).call(this,t,e,r)}}],[{key:"observedAttributes",get:function(){return[].concat(v(S(C(n),"observedAttributes",this)),v(E))}}]),n}(t),i=b(j);try{var o=function(){var t=e.value;Object.defineProperty(n.prototype,"margin".concat(t),{get:function(){return this.margin[t]||0},set:function(e){this.margin[t]=+e}})};for(i.s();!(e=i.n()).done;)o()}catch(t){i.e(t)}finally{i.f()}return n}},618:function(t,e,r){"use strict";r.d(e,"b",(function(){return v}));var n=r(658);function i(t){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function o(t,e){var r="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!r){if(Array.isArray(t)||(r=function(t,e){if(!t)return;if("string"==typeof t)return a(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return a(t,e)}(t))||e&&t&&"number"==typeof t.length){r&&(t=r);var n=0,i=function(){};return{s:i,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,u=!0,s=!1;return{s:function(){r=r.call(t)},n:function(){var t=r.next();return u=t.done,t},e:function(t){s=!0,o=t},f:function(){try{u||null==r.return||r.return()}finally{if(s)throw o}}}}function a(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function u(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function s(t,e){return!e||"object"!==i(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function c(t){var e="function"==typeof Map?new Map:void 0;return(c=function(t){if(null===t||(r=t,-1===Function.toString.call(r).indexOf("[native code]")))return t;var r;if("function"!=typeof t)throw new TypeError("Super expression must either be null or a function");if(void 0!==e){if(e.has(t))return e.get(t);e.set(t,n)}function n(){return l(t,arguments,p(this).constructor)}return n.prototype=Object.create(t.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),f(n,t)})(t)}function l(t,e,r){return(l=h()?Reflect.construct:function(t,e,r){var n=[null];n.push.apply(n,e);var i=new(Function.bind.apply(t,n));return r&&f(i,r.prototype),i}).apply(null,arguments)}function h(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}function f(t,e){return(f=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function p(t){return(p=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function d(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var y=function(t,e,r,n){return new(r||(r=Promise))((function(i,o){function a(t){try{s(n.next(t))}catch(t){o(t)}}function u(t){try{s(n.throw(t))}catch(t){o(t)}}function s(t){var e;t.done?i(t.value):(e=t.value,e instanceof r?e:new r((function(t){t(e)}))).then(a,u)}s((n=n.apply(t,e||[])).next())}))},b=new Map,v=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Headers({accept:"application/json"}),r=b.get(t);if(r)return r;var n=y(void 0,void 0,void 0,regeneratorRuntime.mark((function r(){var n,i;return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,window.fetch(t,{headers:e});case 2:if((n=r.sent).ok){r.next=5;break}throw new Error("Request Failed: Status = ".concat(n.status,"; URI = ").concat(t,"; Time = ").concat(new Date));case 5:if(204!==n.status){r.next=7;break}return r.abrupt("return",{payload:null,headers:n.headers});case 7:return r.next=9,n.json();case 9:return i=r.sent,r.abrupt("return",{payload:i,headers:n.headers});case 11:case"end":return r.stop()}}),r)})));return b.set(t,n),n.catch((function(){return b.delete(t)})),n},g=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&f(t,e)}(b,t);var e,r,i,a,c,l=(e=b,r=h(),function(){var t,n=p(e);if(r){var i=p(this).constructor;t=Reflect.construct(n,arguments,i)}else t=n.apply(this,arguments);return s(this,t)});function b(){var t;return d(this,b),(t=l.call(this))._data=null,t.selector=(t.getAttribute("selector")||"").trim()||function(t){return t},t}return i=b,c=[{key:"is",get:function(){return"data-loader"}}],(a=[{key:"fetch",value:function(){return y(this,void 0,void 0,regeneratorRuntime.mark((function t(){var e,r,i,a,u,s;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(c=this.children,(e=Array.from(c).filter((function(t){return t.matches('source[src], script[type="application/json"]')}))).length){t.next=3;break}return t.abrupt("return");case 3:r=[],a=o(e),t.prev=5,a.s();case 7:if((u=a.n()).done){t.next=31;break}if(s=u.value,t.prev=9,!(s instanceof HTMLSourceElement)){t.next=22;break}return t.t0=Object,t.t1=Object,t.t2={},t.next=16,v(s.src);case 16:t.t3=t.sent,t.t4=t.t1.assign.call(t.t1,t.t2,t.t3),t.t5={srcElement:s,src:s.src},i=t.t0.assign.call(t.t0,t.t4,t.t5),t.next=23;break;case 22:i={payload:JSON.parse(s.textContent)};case 23:return t.abrupt("break",31);case 26:t.prev=26,t.t6=t.catch(9),r.push(t.t6);case 29:t.next=7;break;case 31:t.next=36;break;case 33:t.prev=33,t.t7=t.catch(5),a.e(t.t7);case 36:return t.prev=36,a.f(),t.finish(36);case 39:if(i){t.next=43;break}this._errors=r;try{this.dispatchEvent(new CustomEvent("error",{detail:r,bubbles:!0,cancelable:!0}))}catch(t){console.error(t)}return t.abrupt("return");case 43:"string"==typeof this.selector?this._data=Object(n.a)(i.payload,this.selector):this._data=this.selector(i.payload),i.payload=this.data,this.dispatchEvent(new CustomEvent("load",{detail:i,bubbles:!0,cancelable:!0}));case 46:case"end":return t.stop()}var c}),t,this,[[5,33,36,39],[9,26]])})))}},{key:"data",get:function(){return this._data}},{key:"loaded",get:function(){return!!this.data}},{key:"errors",get:function(){return this._errors}},{key:"selector",get:function(){return this._selector},set:function(t){this._selector=t}},{key:"connectedCallback",value:function(){this.fetch()}}])&&u(i.prototype,a),c&&u(i,c),b}(c(HTMLElement));e.a=g},686:function(t,e,r){"use strict";function n(t){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function i(t){return function(t){if(Array.isArray(t))return o(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(!t)return;if("string"==typeof t)return o(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return o(t,e)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function o(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function a(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function u(t,e){return!e||"object"!==n(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function s(t){var e="function"==typeof Map?new Map:void 0;return(s=function(t){if(null===t||(r=t,-1===Function.toString.call(r).indexOf("[native code]")))return t;var r;if("function"!=typeof t)throw new TypeError("Super expression must either be null or a function");if(void 0!==e){if(e.has(t))return e.get(t);e.set(t,n)}function n(){return c(t,arguments,f(this).constructor)}return n.prototype=Object.create(t.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),h(n,t)})(t)}function c(t,e,r){return(c=l()?Reflect.construct:function(t,e,r){var n=[null];n.push.apply(n,e);var i=new(Function.bind.apply(t,n));return r&&h(i,r.prototype),i}).apply(null,arguments)}function l(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}function h(t,e){return(h=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function f(t){return(f=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var p=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&h(t,e)}(p,t);var e,r,n,o,s,c=(e=p,r=l(),function(){var t,n=f(e);if(r){var i=f(this).constructor;t=Reflect.construct(n,arguments,i)}else t=n.apply(this,arguments);return u(this,t)});function p(){var t;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,p),(t=c.call(this)).protvistaElements=new Set,t.attributeValues=new Map,t.propertyValues=new Map,t.mouseOver=!1,t}return n=p,s=[{key:"observedAttributes",get:function(){return["attributes","length","displaystart","displayend","highlight"]}}],(o=[{key:"length",get:function(){return this.attributeValues.get("length")},set:function(t){this.attributeValues.set("length",t)}},{key:"displaystart",get:function(){return this.attributeValues.get("displaystart")},set:function(t){this.attributeValues.set("displaystart",t)}},{key:"displayend",get:function(){return this.attributeValues.get("displayend")},set:function(t){this.attributeValues.set("displayend",t)}},{key:"highlight",get:function(){return this.attributeValues.get("highlight")},set:function(t){this.attributeValues.set("highlight",t)}},{key:"attributeChangedCallback",value:function(t,e,r){if(e!==r){if("attributes"===t){if(this._attributes=r.split(" "),-1!==this._attributes.indexOf("type"))throw new Error("'type' can't be used as a protvista attribute");if(-1!==this._attributes.indexOf("value"))throw new Error("'value' can't be used as a protvista attribute");this.attributeValues=new Map(this._attributes.filter((function(t){return!p.observedAttributes.includes(t)})).map((function(t){return[t,null]})))}else"length"===t&&(this.length=r),"displaystart"===t&&(this.displaystart=r),"displayend"===t&&(this.displayend=r),"highlight"===t&&(this.highlight=r);this.applyAttributes()}}},{key:"register",value:function(t){this.protvistaElements.add(t),this.applyAttributes()}},{key:"unregister",value:function(t){this.protvistaElements.delete(t)}},{key:"_polyfillElementClosest",value:function(){var t=this;Element.prototype.matches||(Element.prototype.matches=Element.prototype.msMatchesSelector||Element.prototype.webkitMatchesSelector),Element.prototype.closest||(Element.prototype.closest=function(e){var r=t;do{if(r.matches(e))return r;r=r.parentElement||r.parentNode}while(null!==r&&1===r.nodeType);return null})}},{key:"applyAttributes",value:function(){var t=this;this.protvistaElements.forEach((function(e){t.attributeValues.forEach((function(t,r){!1===t||null==t?e.removeAttribute(r):e.setAttribute(r,"boolean"==typeof t?"":t)}))}))}},{key:"applyProperties",value:function(t){var e=this;if(t){var r=this.querySelector("#".concat(t));this.propertyValues.forEach((function(t,e){r[e]=t}))}else this.protvistaElements.forEach((function(t){e.propertyValues.forEach((function(e,r){t[r]=e}))}))}},{key:"isRegisteredAttribute",value:function(t){return i(this.attributeValues.keys()).includes(t)||p.observedAttributes.includes(t)}},{key:"_changeListener",value:function(t){var e=this;switch(t.detail.handler){case"property":this.propertyValues.set(t.detail.type,t.detail.value),this.applyProperties(t.detail.for);break;default:this.isRegisteredAttribute(t.detail.type)&&this.attributeValues.set(t.detail.type,t.detail.value),Object.keys(t.detail).forEach((function(r){e.isRegisteredAttribute(r)&&e.attributeValues.set(r,t.detail[r])})),this.applyAttributes()}}},{key:"connectedCallback",value:function(){this.addEventListener("change",this._changeListener)}}])&&a(n.prototype,o),s&&a(n,s),p}(s(HTMLElement));e.a=p},940:function(t,e,r){"use strict";var n,i=r(63),o=r(718),a=r(591);var u,s,c,l,h,f,p,d,y,b,v,g=Object(i.b)(n||(u=['\n  :host {\n    display: block;\n  }\n  .protvista-datatable-container {\n    overflow-y: auto;\n    // Note: overflow-x was set to \'hidden\' but changing\n    // to \'auto\' doesn\'t seem to be an issue.\n    overflow-x: auto;\n  }\n\n  :host([scrollable="true"]) .protvista-datatable-container {\n    overflow-y: auto;\n    will-change: scroll;\n  }\n\n  :host([scrollable="false"]) .protvista-datatable-container {\n    overflow-y: hidden;\n  }\n\n  table {\n    width: 100%;\n    padding: 0;\n    margin: 0;\n    border-spacing: 0;\n  }\n\n  th {\n    position: sticky;\n    position: -webkit-sticky;\n    position: -moz-sticky;\n    position: -ms-sticky;\n    position: -o-sticky;\n    text-align: left;\n    background-color: var(--protvista-datable__header-background, #fff);\n    color: var(--protvista-datable__header-text, #393b42);\n    text-overflow: ellipsis;\n    top: 0;\n  }\n\n  td,\n  th {\n    padding: 1rem;\n    border-bottom: 1px solid #c2c4c4;\n  }\n\n  tr:hover:not(.active):not(.child-row) {\n    background-color: var(--protvista-datatable__hover, #f1f1f1);\n  }\n\n  td {\n    cursor: pointer;\n  }\n\n  .withChildren:before {\n    display: inline-block;\n    font-family: "Courier New", Courier, monospace;\n    width: 1rem;\n    text-align: center;\n    border-radius: 1rem;\n    line-height: 1rem;\n    font-weight: 700;\n    font-size: 1rem;\n    color: white;\n    border: 2px solid white;\n    background-color: var(--protvista-datatable__childToggle, #00639a);\n  }\n\n  .plus:before {\n    content: "+";\n  }\n\n  .minus:before {\n    content: "-";\n  }\n\n  td:nth-child(1) {\n    border-left: 0.5rem solid transparent;\n  }\n\n  .overlapped td:nth-child(1) {\n    border-left: 0.5rem solid\n      var(--protvista-datatable__overlapped, rgba(255, 0, 0, 0.8));\n  }\n\n  .active {\n    background-color: var(\n      --protvista-datatable__active,\n      rgba(255, 235, 59, 0.3)\n    ) !important;\n  }\n  .hidden {\n    opacity: 0.2;\n  }\n  .evidence-tag {\n    cursor: pointer;\n    font-size: 80%;\n    white-space: nowrap;\n    margin-left: 0.5rem;\n    border-radius: 0.5rem;\n    background-color: #f1f1f1;\n    padding: 0.25rem 0.5rem;\n    color: #3a343a;\n  }\n  .evidence-tag__label {\n    padding-left: 0.25rem;\n    text-transform: capitalize;\n  }\n  .svg-colour-reviewed svg {\n    color: #c39b00;\n  }\n  .svg-colour-unreviewed svg {\n    color: #c0c0c0;\n  }\n\n  .protvista-datatable__child-item {\n    display: flex;\n  }\n\n  .protvista-datatable__child-item__title {\n    font-weight: 700;\n    flex-basis: 10vw;\n    flex-grow: 0;\n    margin-right: 1rem;\n  }\n\n  .protvista-datatable__child-item__content {\n  }\n\n  .odd {\n    background-color: var(--protvista-datatable__odd, #e4e8eb);\n  }\n\n  .even {\n    background-color: var(--protvista-datatable__even, #fff);\n  }\n'],s||(s=u.slice(0)),n=Object.freeze(Object.defineProperties(u,{raw:{value:Object.freeze(s)}}))));function m(t){return(m="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function w(t,e){return e||(e=t.slice(0)),Object.freeze(Object.defineProperties(t,{raw:{value:Object.freeze(e)}}))}function _(t){return function(t){if(Array.isArray(t))return A(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(!t)return;if("string"==typeof t)return A(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return A(t,e)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function A(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function S(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function k(t,e,r){return(k="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=j(t)););return t}(t,e);if(n){var i=Object.getOwnPropertyDescriptor(n,e);return i.get?i.get.call(r):i.value}})(t,e,r||t)}function O(t,e){return(O=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function R(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var r,n=j(t);if(e){var i=j(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return P(this,r)}}function P(t,e){return!e||"object"!==m(e)&&"function"!=typeof e?C(t):e}function C(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function j(t){return(j=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var E=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&O(t,e)}(s,t);var e,r,n,u=R(s);function s(){var t;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,s),(t=u.call(this)).height=25,t.visibleChildren=[],t.noScrollToRow=!1,t.noDeselect=!1,t.scrollFilter=new a.c(C(t)),t.wheelListener=function(e){return t.scrollFilter.wheel(e)},t.eventHandler=t.eventHandler.bind(C(t)),t}return e=s,n=[{key:"is",get:function(){return"protvista-datatable"}},{key:"properties",get:function(){return{data:{type:Object},highlight:{converter:function(t){if(t&&"null"!==t)try{var e=t.split(":").map((function(t){return Number(t)}));if(2!==e.length)throw new Error("Highlight should be only 2 values separated by ':'.");return[e[0],e[1]]}catch(t){console.error("Invalid highlight coordinates:",t)}return null}},height:{type:Number},columns:{type:Object},displayStart:{type:Number},displayEnd:{type:Number},visibleChildren:{type:Array},selectedid:{type:String},rowClickEvent:{type:Function},noScrollToRow:{type:Boolean},noDeselect:{type:Boolean}}}},{key:"styles",get:function(){return g}},{key:"isWithinRange",value:function(t,e,r,n){return!r&&e===n||!n&&t===r||t<=r&&e>=n}},{key:"isOutside",value:function(t,e,r,n){return t>n||e<r}}],(r=[{key:"connectedCallback",value:function(){var t=this;k(j(s.prototype),"connectedCallback",this).call(this),this.addEventListener("load",(function(e){Array.from(t.children).includes(e.target)&&(t.data=e.detail.payload.features)})),this.closest("protvista-manager")&&(this.manager=this.closest("protvista-manager"),this.manager.register(this)),this.noDeselect||document.addEventListener("click",this.eventHandler),this.classList.add("feature"),this.hasAttribute("filter-scroll")&&document.addEventListener("wheel",this.wheelListener,{capture:!0})}},{key:"disconnectedCallback",value:function(){k(j(s.prototype),"disconnectedCallback",this).call(this),this.manager&&this.manager.unregister(this),document.removeEventListener("click",this.eventHandler),document.removeEventListener("wheel",this.wheelListener)}},{key:"data",get:function(){return this._data},set:function(t){var e=this._data;this._data=this.processData(t),this.requestUpdate("data",e)}},{key:"eventHandler",value:function(t){var e=t.target;e.closest("protvista-datatable")||e.closest(".feature")||(this.selectedid=null)}},{key:"processData",value:function(t){return t.map((function(t){return Object.assign(Object.assign({},t),{start:t.start?t.start:t.begin})})).sort((function(t,e){return t.start-e.start})).map((function(t){return Object.assign(Object.assign({},t),{protvistaFeatureId:t.protvistaFeatureId||Object(o.a)()})}))}},{key:"handleClick",value:function(t,e){var r=t.target;if(r.parentNode){var n=e.start,i=e.end;this.rowClickEvent&&"function"==typeof this.rowClickEvent&&this.rowClickEvent(e),this.selectedid=r.parentNode.dataset.id;var o=n&&i?{highlight:"".concat(n,":").concat(i)}:{};this.dispatchEvent(new CustomEvent("change",{detail:o,bubbles:!0,cancelable:!0}))}}},{key:"getStyleClass",value:function(t,e,r){var n="";return this.selectedid&&this.selectedid===t&&(n="".concat(n," active")),this.displayStart&&this.displayEnd&&s.isOutside(this.displayStart,this.displayEnd,Number(e),Number(r))&&(n="".concat(n," hidden")),this.highlight&&s.isWithinRange(this.highlight[0],this.highlight[1],Number(e),Number(r))&&(n="".concat(n," overlapped")),n}},{key:"hasChildData",value:function(t,e){var r=this;return t.some((function(t){return r.columns[t].resolver(e)}))}},{key:"toggleVisibleChild",value:function(t){this.visibleChildren.includes(t)?this.visibleChildren=this.visibleChildren.filter((function(e){return e!==t})):this.visibleChildren=[].concat(_(this.visibleChildren),[t])}},{key:"scrollIntoView",value:function(){this.selectedid&&this.shadowRoot.querySelector('[data-id="'.concat(this.selectedid,'"]')).scrollIntoView({behavior:"smooth",block:"center"})}},{key:"getChildRow",value:function(t,e){var r=this;return Object(i.c)(c||(c=w(['\n      <tr class="child-row">\n        <td\n          colspan="','"\n        >\n          ',"\n        </td>\n      </tr>\n    "])),Object.values(this.columns).filter((function(t){return!t.child})).length+1,t.map((function(t){return r.columns[t].resolver(e)?Object(i.c)(l||(l=w(['\n                  <div class="protvista-datatable__child-item">\n                    <div class="protvista-datatable__child-item__title">\n                      ','\n                    </div>\n                    <div class="protvista-datatable__child-item__content">\n                      ',"\n                    </div>\n                  </div>\n                "])),r.columns[t].label,r.columns[t].resolver(e)):Object(i.c)(h||(h=w([""])))})))}},{key:"render",value:function(){var t=this;if(!this.data||!this.columns)return Object(i.c)(f||(f=w([""])));var e=Object.keys(this.columns).filter((function(e){return t.columns[e].child})),r=Object.values(this.columns).filter((function(t){return!t.child&&!1!==t.display}));return Object(i.c)(p||(p=w(['\n      <div\n        class="protvista-datatable-container"\n        style="height:','rem"\n      >\n        <table>\n          <thead>\n            <tr>\n              ',"\n            </tr>\n          </thead>\n          <tbody>\n            ","\n          </tbody>\n        </table>\n      </div>\n    "])),this.height,r.map((function(t){return Object(i.c)(d||(d=w([" <th>","</th> "])),t.label)})),this.data.map((function(n,o){var a=t.hasChildData(e,n);return Object(i.c)(y||(y=w(['\n                <tr\n                  data-id="','"\n                  class="'," ",'"\n                  @click="','"\n                >\n                  ',"\n                </tr>\n                ","\n              "])),n.protvistaFeatureId,t.getStyleClass(n.protvistaFeatureId,n.start,n.end),o%2==1?"even":"odd",(function(e){return t.handleClick(e,n)}),r.map((function(e,r){return a&&0===r?Object(i.c)(b||(b=w(['\n                          <td\n                            title="View more"\n                            @click="','"\n                            class="','"\n                          >\n                            ',"\n                          </td>\n                        "])),(function(){return t.toggleVisibleChild(n.protvistaFeatureId)}),t.visibleChildren.includes(n.protvistaFeatureId)?"withChildren minus":"withChildren plus",e.resolver(n)):Object(i.c)(v||(v=w([" <td>","</td> "])),e.resolver(n))})),a&&t.visibleChildren.includes(n.protvistaFeatureId)?t.getChildRow(e,n):"")})))}},{key:"updated",value:function(){this.noScrollToRow||this.scrollIntoView()}}])&&S(e.prototype,r),n&&S(e,n),s}(i.a);e.a=E}}]);