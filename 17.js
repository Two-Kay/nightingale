(window.webpackJsonp=window.webpackJsonp||[]).push([[17],{1094:function(t,e){t.exports='<h1 id="protvista-structure">protvista-structure</h1>\n<p><a href="https://www.npmjs.com/package/protvista-structure"><img src="https://img.shields.io/npm/v/protvista-structure.svg" alt="Published on NPM"></a></p>\n<p>A native web component wrapper around Mol*</p>\n<h2 id="usage">Usage</h2>\n<pre><code class="language-html">&lt;!-- With UniProt Accession --&gt;\n&lt;protvista-structure accession=&quot;P06493&quot; pdb-id=&quot;4YC3&quot; /&gt;\n&lt;!-- With a specific PDBe entry selected and the entrie table being hidden --&gt;\n&lt;protvista-structure\n  accession=&quot;P06493&quot;\n  highlight=&quot;209:220&quot;\n  pdb-id=&quot;4YC3&quot;\n  hide-table\n/&gt;</code></pre>\n<h2 id="api-reference">API Reference</h2>\n<h3 id="properties">Properties</h3>\n<h4 id="accession"><code>accession</code></h4>\n<p>A UniProt protein accession.</p>\n<h4 id="highlight"><code>highlight</code></h4>\n<p>This is a comma separated list of numerical ranges represented as a string e.g. &quot;1-5,10-20&quot;. When available, it will highlight all the residues corresponding to the given sequence positions.</p>\n<h4 id="pdb-id"><code>pdb-id</code></h4>\n<p>The id of the structure to display for the provided accession.</p>\n<h4 id="height"><code>height</code></h4>\n<p>The optional height of both table -- if visible, and the 3D structure. By default the value is set to <code>480px</code>. This should be a string value, representing a valid CSS value for an element&#39;s height property.</p>\n'},1095:function(t){t.exports=JSON.parse('[{"databaseType":"PDB","id":"1AAP","properties":{"Method":"X-ray","Resolution":"1.50 A","Chains":"A/B=287-344"}},{"databaseType":"PDB","id":"1AMB","properties":{"Method":"NMR","Resolution":"-","Chains":"A=672-699"}},{"databaseType":"PDB","id":"1AMC","properties":{"Method":"NMR","Resolution":"-","Chains":"A=672-699"}},{"databaseType":"PDB","id":"1AML","properties":{"Method":"NMR","Resolution":"-","Chains":"A=672-711"}},{"databaseType":"PDB","id":"1BA4","properties":{"Method":"NMR","Resolution":"-","Chains":"A=672-711"}},{"databaseType":"PDB","id":"1BA6","properties":{"Method":"NMR","Resolution":"-","Chains":"A=672-711"}},{"databaseType":"PDB","id":"1BJB","properties":{"Method":"NMR","Resolution":"-","Chains":"A=672-699"}},{"databaseType":"PDB","id":"1BJC","properties":{"Method":"NMR","Resolution":"-","Chains":"A=672-699"}},{"databaseType":"PDB","id":"1BRC","properties":{"Method":"X-ray","Resolution":"2.50 A","Chains":"I=287-342"}},{"databaseType":"PDB","id":"1CA0","properties":{"Method":"X-ray","Resolution":"2.10 A","Chains":"D/I=289-342"}},{"databaseType":"PDB","id":"1HZ3","properties":{"Method":"NMR","Resolution":"-","Chains":"A=681-706"}},{"databaseType":"PDB","id":"1IYT","properties":{"Method":"NMR","Resolution":"-","Chains":"A=672-713"}},{"databaseType":"PDB","id":"1MWP","properties":{"Method":"X-ray","Resolution":"1.80 A","Chains":"A=28-123"}},{"databaseType":"PDB","id":"1OWT","properties":{"Method":"NMR","Resolution":"-","Chains":"A=124-189"}},{"databaseType":"PDB","id":"1QCM","properties":{"Method":"NMR","Resolution":"-","Chains":"A=696-706"}},{"databaseType":"PDB","id":"1QWP","properties":{"Method":"NMR","Resolution":"-","Chains":"A=696-706"}},{"databaseType":"PDB","id":"1QXC","properties":{"Method":"NMR","Resolution":"-","Chains":"A=696-706"}},{"databaseType":"PDB","id":"1QYT","properties":{"Method":"NMR","Resolution":"-","Chains":"A=696-706"}},{"databaseType":"PDB","id":"1TAW","properties":{"Method":"X-ray","Resolution":"1.80 A","Chains":"B=287-344"}},{"databaseType":"PDB","id":"1TKN","properties":{"Method":"NMR","Resolution":"-","Chains":"A=460-569"}},{"databaseType":"PDB","id":"1UO7","properties":{"Method":"Model","Resolution":"-","Chains":"A=672-713"}},{"databaseType":"PDB","id":"1UO8","properties":{"Method":"Model","Resolution":"-","Chains":"A=672-713"}},{"databaseType":"PDB","id":"1UOA","properties":{"Method":"Model","Resolution":"-","Chains":"A=672-713"}},{"databaseType":"PDB","id":"1UOI","properties":{"Method":"Model","Resolution":"-","Chains":"A=672-713"}},{"databaseType":"PDB","id":"1X11","properties":{"Method":"X-ray","Resolution":"2.50 A","Chains":"C/D=754-766"}},{"databaseType":"PDB","id":"1Z0Q","properties":{"Method":"NMR","Resolution":"-","Chains":"A=672-713"}},{"databaseType":"PDB","id":"1ZE7","properties":{"Method":"NMR","Resolution":"-","Chains":"A=672-687"}},{"databaseType":"PDB","id":"1ZE9","properties":{"Method":"NMR","Resolution":"-","Chains":"A=672-687"}},{"databaseType":"PDB","id":"1ZJD","properties":{"Method":"X-ray","Resolution":"2.60 A","Chains":"B=289-344"}},{"databaseType":"PDB","id":"2BEG","properties":{"Method":"NMR","Resolution":"-","Chains":"A/B/C/D/E=672-713"}},{"databaseType":"PDB","id":"2BOM","properties":{"Method":"Model","Resolution":"-","Chains":"A/B=681-713"}},{"databaseType":"PDB","id":"2BP4","properties":{"Method":"NMR","Resolution":"-","Chains":"A=672-687"}},{"databaseType":"PDB","id":"2FJZ","properties":{"Method":"X-ray","Resolution":"1.61 A","Chains":"A=133-189"}},{"databaseType":"PDB","id":"2FK1","properties":{"Method":"X-ray","Resolution":"1.60 A","Chains":"A=133-189"}},{"databaseType":"PDB","id":"2FK2","properties":{"Method":"X-ray","Resolution":"1.65 A","Chains":"A=133-189"}},{"databaseType":"PDB","id":"2FK3","properties":{"Method":"X-ray","Resolution":"2.40 A","Chains":"A/B/C/D/E/F/G/H=133-189"}},{"databaseType":"PDB","id":"2FKL","properties":{"Method":"X-ray","Resolution":"2.50 A","Chains":"A/B=124-189"}},{"databaseType":"PDB","id":"2FMA","properties":{"Method":"X-ray","Resolution":"0.85 A","Chains":"A=133-189"}},{"databaseType":"PDB","id":"2G47","properties":{"Method":"X-ray","Resolution":"2.10 A","Chains":"C/D=672-711"}},{"databaseType":"PDB","id":"2IPU","properties":{"Method":"X-ray","Resolution":"1.65 A","Chains":"P/Q=672-679"}},{"databaseType":"PDB","id":"2LFM","properties":{"Method":"NMR","Resolution":"-","Chains":"A=672-711"}},{"databaseType":"PDB","id":"2LLM","properties":{"Method":"NMR","Resolution":"-","Chains":"A=686-726"}},{"databaseType":"PDB","id":"2LMN","properties":{"Method":"NMR","Resolution":"-","Chains":"A/B/C/D/E/F/G/H/I/J/K/L=672-711"}},{"databaseType":"PDB","id":"2LMO","properties":{"Method":"NMR","Resolution":"-","Chains":"A/B/C/D/E/F/G/H/I/J/K/L=672-711"}}]')},171:function(t,e,n){"use strict";n.r(e);var r=n(0),i=n.n(r),o=n(618),a=(n(1074),n(1121)),s=n(1012),u=n(899),l=n(653),c=n(574),h=n(718),f=n(592),p=n(581),d=n(582);n(1092);function b(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var y=!1,g=!1,v="reactive",m=!1,w=1,_=!1,O=!0,A=!1,k="pdbe",P=(l.a.Viewport.ShowControls.defaultValue,l.a.Viewport.ShowSettings.defaultValue,function(){function t(e,n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t);var r=Object(s.a)(),i={actions:r.actions,behaviors:r.behaviors,layout:{initial:{isExpanded:y,showControls:g,controlsDisplay:v}},config:[[l.a.General.DisableAntialiasing,m],[l.a.General.PixelScale,w],[l.a.General.EnableWboit,_],[l.a.Viewport.ShowExpand,O],[l.a.Viewport.ShowSelectionMode,A],[l.a.Download.DefaultPdbProvider,k]]},o="string"==typeof e?document.getElementById(e):e;if(!o)throw new Error("Could not get element with id '".concat(e,"'"));this.plugin=Object(a.a)(o,i),this.plugin.behaviors.interaction.click.subscribe((function(t){if(c.g.Loci.is(t.current.loci)){var e=c.g.Location.create();c.g.Loci.getFirstLocation(t.current.loci,e);var r=c.h.residue.label_seq_id(e);n([r])}})),f.a.Canvas3D.SetSettings(this.plugin,{settings:function(t){t.renderer.backgroundColor=Object(p.a)(16777215)}})}var e,n,r;return e=t,(n=[{key:"loadPdb",value:function(t,e){var n=this;this.plugin.clear(),this.showMessage("Loading",t);var r=u.DownloadStructure.createDefaultParams(this.plugin.state.data.root.obj,this.plugin),i=this.plugin.config.get(l.a.Download.DefaultPdbProvider);return this.plugin.runTask(this.plugin.state.data.applyAction(u.DownloadStructure,{source:{name:"pdb",params:{provider:{id:t,server:{name:i,params:u.PdbDownloadProvider[i].defaultValue}},options:Object.assign(Object.assign({},r.source.params.options),{representationParams:null==e?void 0:e.representationParams})}}})).then((function(){n.clearMessages()}))}},{key:"highlight",value:function(t){var e,n,r=null===(n=null===(e=this.plugin.managers.structure.hierarchy.current.structures[0])||void 0===e?void 0:e.cell.obj)||void 0===n?void 0:n.data;if(r){var i=h.a.getStructureSelection((function(e){return e.struct.generator.atomGroups({"residue-test":e.core.logic.or(t.map((function(t){var n=t.start,r=t.end;return e.core.rel.inRange([e.struct.atomProperty.macromolecular.label_seq_id(),n,r])})))})}),r),o=c.j.toLociWithSourceUnits(i);console.log("Mol* should highlight:",o),this.plugin.managers.interactivity.lociSelects.selectOnly({loci:o})}}},{key:"clearHighlight",value:function(){this.plugin.managers.interactivity.lociSelects.selectOnly({loci:d.b})}},{key:"showMessage",value:function(t,e,n){this.clearMessages(),f.a.Toast.Show(this.plugin,{title:t,message:e,timeoutMs:n})}},{key:"clearMessages",value:function(){f.a.Toast.Hide(this.plugin)}},{key:"handleResize",value:function(){this.plugin.layout.events.updated.next()}}])&&b(e.prototype,n),r&&b(e,r),t}());function S(t){return(S="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function R(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=function(t,e){if(!t)return;if("string"==typeof t)return C(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return C(t,e)}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0,i=function(){};return{s:i,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return a=t.done,t},e:function(t){s=!0,o=t},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw o}}}}function C(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function j(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function E(t,e){return!e||"object"!==S(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function M(t){var e="function"==typeof Map?new Map:void 0;return(M=function(t){if(null===t||(n=t,-1===Function.toString.call(n).indexOf("[native code]")))return t;var n;if("function"!=typeof t)throw new TypeError("Super expression must either be null or a function");if(void 0!==e){if(e.has(t))return e.get(t);e.set(t,r)}function r(){return T(t,arguments,D(this).constructor)}return r.prototype=Object.create(t.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}),x(r,t)})(t)}function T(t,e,n){return(T=B()?Reflect.construct:function(t,e,n){var r=[null];r.push.apply(r,e);var i=new(Function.bind.apply(t,r));return n&&x(i,n.prototype),i}).apply(null,arguments)}function B(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}function x(t,e){return(x=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function D(t){return(D=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var N=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&x(t,e)}(i,t);var e,n,r=(e=i,n=B(),function(){var t,r=D(e);if(n){var i=D(this).constructor;t=Reflect.construct(r,arguments,i)}else t=r.apply(this,arguments);return E(this,t)});function i(){return j(this,i),r.apply(this,arguments)}return i}(M(Error)),I=function(t,e,n,r){if(!t||!e||Number.isNaN(t)||Number.isNaN(e))throw new N("Invalid start, end coordinates");var i,o=R(n);try{for(o.s();!(i=o.n()).done;){var a=i.value;if(a.unp_end-a.unp_start!=a.end.residue_number-a.start.residue_number)throw new N("Mismatch between protein sequence and structure residues");if("UP_PDB"===r&&(t<a.unp_start||e>a.unp_end)||"PDB_UP"===r&&(t<a.start.residue_number||e>a.end.residue_number))throw new N("Start or end coordinate outside of mapping range");var s="UP_PDB"===r?a.start.residue_number-a.unp_start:a.unp_start-a.start.residue_number;return{entity:a.entity_id,chain:a.chain_id,start:t+s,end:e+s}}}catch(t){o.e(t)}finally{o.f()}return null};function F(t){return(F="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function V(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=t&&("undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"]);if(null==n)return;var r,i,o=[],a=!0,s=!1;try{for(n=n.call(t);!(a=(r=n.next()).done)&&(o.push(r.value),!e||o.length!==e);a=!0);}catch(t){s=!0,i=t}finally{try{a||null==n.return||n.return()}finally{if(s)throw i}}return o}(t,e)||function(t,e){if(!t)return;if("string"==typeof t)return H(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return H(t,e)}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function H(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function L(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function U(t,e){return!e||"object"!==F(e)&&"function"!=typeof e?q(t):e}function q(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function X(t){var e="function"==typeof Map?new Map:void 0;return(X=function(t){if(null===t||(n=t,-1===Function.toString.call(n).indexOf("[native code]")))return t;var n;if("function"!=typeof t)throw new TypeError("Super expression must either be null or a function");if(void 0!==e){if(e.has(t))return e.get(t);e.set(t,r)}function r(){return W(t,arguments,G(this).constructor)}return r.prototype=Object.create(t.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}),J(r,t)})(t)}function W(t,e,n){return(W=z()?Reflect.construct:function(t,e,n){var r=[null];r.push.apply(r,e);var i=new(Function.bind.apply(t,r));return n&&J(i,n.prototype),i}).apply(null,arguments)}function z(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}function J(t,e){return(J=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function G(t){return(G=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var $,K,Q,Z=function(t,e,n,r){return new(n||(n=Promise))((function(i,o){function a(t){try{u(r.next(t))}catch(t){o(t)}}function s(t){try{u(r.throw(t))}catch(t){o(t)}}function u(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(a,s)}u((r=r.apply(t,e||[])).next())}))},Y=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&J(t,e)}(u,t);var e,n,r,i,a,s=(e=u,n=z(),function(){var t,r=G(e);if(n){var i=G(this).constructor;t=Reflect.construct(r,arguments,i)}else t=r.apply(this,arguments);return U(this,t)});function u(){var t;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,u),(t=s.call(this))._planHighlight=t._planHighlight.bind(q(t)),t.propagateHighlight=t.propagateHighlight.bind(q(t)),t}return r=u,a=[{key:"is",get:function(){return"protvista-structure"}},{key:"observedAttributes",get:function(){return["highlight","pdb-id","height"]}},{key:"_parseHighlight",value:function(t){return t?t.split(",").map((function(t){var e=V(t.split(":"),2),n=e[0],r=e[1];return{start:Number(n),end:Number(r)}})):[]}}],(i=[{key:"css",get:function(){return"\n    protvista-structure h4 {\n      display: inline;\n      margin-right: 1em;\n    }\n      \n    .structure-viewer-container {\n      position: relative;\n      height: ".concat(this._height,";\n    }\n    ")}},{key:"accession",get:function(){return this._accession},set:function(t){this.setAttribute("accession",t)}},{key:"pdbId",get:function(){return this._pdbID},set:function(t){this.setAttribute("pdbid",t),this._pdbID=t}},{key:"height",get:function(){return this.getAttribute("height")}},{key:"connectedCallback",value:function(){var t=this.closest("protvista-manager");t&&"register"in t&&"unregister"in t&&(this.manager=t,this.manager.register(this)),this._pdbID=this.getAttribute("pdb-id"),this._accession=this.getAttribute("accession"),this._height=this.getAttribute("height")||"480px",this._highlight=this.getAttribute("highlight")&&u._parseHighlight(this.getAttribute("highlight"));var e=document.createElement("style");e.innerHTML=this.css,this.appendChild(e);var n=document.createElement("div");n.className="structure-viewer-container",n.id="structure-viewer-instance",this.appendChild(n),this._structureViewer=new P(n,this.propagateHighlight)}},{key:"disconnectedCallback",value:function(){this.manager&&this.manager.unregister(this)}},{key:"attributeChangedCallback",value:function(t,e,n){if(e!==n){switch(t){case"pdb-id":null!==n&&(this._pdbID=n,this.selectMolecule(this._pdbID));break;case"accession":this._accession=n;break;case"highlight":this._highlight=u._parseHighlight(this.getAttribute("highlight"));break;case"height":this._height=n}this._planHighlight()}}},{key:"_planHighlight",value:function(){var t=this;this._plannedRender||(this._plannedRender=!0,requestAnimationFrame((function(){t._plannedRender=!1,t._selectedMolecule&&t.highlightChain()})))}},{key:"loadPDBEntry",value:function(t){return Z(this,void 0,void 0,regeneratorRuntime.mark((function e(){var n,r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Object(o.b)("https://www.ebi.ac.uk/pdbe/api/mappings/uniprot/".concat(t));case 3:return n=e.sent,r=n.payload,e.abrupt("return",r);case 8:throw e.prev=8,e.t0=e.catch(0),this._structureViewer.showMessage("Error","Couldn't load PDB entry"),e.t0;case 12:case"end":return e.stop()}}),e,this,[[0,8]])})))}},{key:"selectMolecule",value:function(t){var e;return Z(this,void 0,void 0,regeneratorRuntime.mark((function n(){var r,i;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,this.loadPDBEntry(t);case 2:return r=n.sent,i=null===(e=Object.values(r)[0].UniProt[this._accession])||void 0===e?void 0:e.mappings,n.next=6,this._structureViewer.loadPdb(t.toLowerCase());case 6:this._selectedMolecule={id:t,mappings:i},this._planHighlight();case 8:case"end":return n.stop()}}),n,this)})))}},{key:"propagateHighlight",value:function(t){var e=this;if((null==t?void 0:t.length)&&!t.some((function(t){return!Number.isInteger(t)}))){var n;try{n=t.map((function(t){return I(t,t,e._selectedMolecule.mappings,"PDB_UP")}))}catch(t){if(t instanceof N)return void this._structureViewer.showMessage("Error",t.message);throw t}var r=n.filter(Boolean).map((function(t){return"".concat(t.start,":").concat(t.end)}));this.setAttribute("highlight",r.join(","));var i=new CustomEvent("change",{detail:{highlight:r},bubbles:!0,cancelable:!0});this.dispatchEvent(i)}}},{key:"highlightChain",value:function(){var t=this;if(this._highlight&&"string"!=typeof this._highlight){var e;try{e=this._highlight.map((function(e){var n=e.start,r=e.end;return I(n,r,t._selectedMolecule.mappings,"UP_PDB")})).filter(Boolean)}catch(t){if(t instanceof N)return void this._structureViewer.showMessage("Error",t.message);throw t}(null==e?void 0:e.length)&&(this._structureViewer.highlight(e),this._structureViewer.clearMessages())}}}])&&L(r.prototype,i),a&&L(r,a),u}(X(HTMLElement)),tt=n(944),et=n(686),nt=n(28),rt=n(111),it=n(35),ot=n(1094),at=n.n(ot),st=n(1095);function ut(t,e){return e||(e=t.slice(0)),Object.freeze(Object.defineProperties(t,{raw:{value:Object.freeze(e)}}))}function lt(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=t&&("undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"]);if(null==n)return;var r,i,o=[],a=!0,s=!1;try{for(n=n.call(t);!(a=(r=n.next()).done)&&(o.push(r.value),!e||o.length!==e);a=!0);}catch(t){s=!0,i=t}finally{try{a||null==n.return||n.return()}finally{if(s)throw i}}return o}(t,e)||function(t,e){if(!t)return;if("string"==typeof t)return ct(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return ct(t,e)}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ct(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}Object(rt.a)("protvista-structure",Y),Object(rt.a)("protvista-datatable",tt.a),Object(rt.a)("protvista-manager",et.a);var ht=[{name:"PDBe",url:function(t){return"https://www.ebi.ac.uk/pdbe-srv/view/entry/".concat(t)}},{name:"RCSB PDB",url:function(t){return"https://www.rcsb.org/structure/".concat(t)}},{name:"PDBj",url:function(t){return"https://pdbj.org/mine/summary/".concat(t)}},{name:"PDBsum",url:function(t){return"https://www.ebi.ac.uk/pdbsum/".concat(t)}}],ft=function(t){var e=function(t){return t.map((function(t){var e=t.id,n=t.properties;if(!n)return null;var r,i,o,a=n.Chains,s=n.Resolution,u=n.Method;if(a){var l=a.split("=");if(2===l.length){var c=lt(l,2);r=c[0];var h=(i=c[1]).split("-");if(h&&2===h.length)o=lt(h,1)[0]}}return{id:e,method:u,resolution:s&&"-"!==s?s:null,chain:r,positions:i,protvistaFeatureId:e,start:Number(o)}}))}(t.xrefs),n=Object(r.useCallback)((function(t){t&&(t.data=e,t.columns={type:{label:"PDB Entry",resolver:function(t){return t.id}},method:{label:"Method",resolver:function(t){return t.method}},resolution:{label:"Resolution",resolver:function(t){var e=t.resolution;return e&&e.replace("A","Å")}},chain:{label:"Chain",resolver:function(t){return t.chain}},positions:{label:"Positions",resolver:function(t){return t.positions}},links:{label:"Links",resolver:function(t){var e=t.id;return Object(nt.a)($||($=ut(["\n        ","\n      "])),ht.map((function(t){var n=t.name,r=t.url;return Object(nt.a)(K||(K=ut([" <a href=",">","</a> "])),r(e),n)})).reduce((function(t,e){return Object(nt.a)(Q||(Q=ut([" "," · "," "])),t,e)})))}}},t.rowClickEvent=function(t){return{"pdb-id":t.id}})}),[e]);return i.a.createElement("protvista-datatable",{ref:n,selectedId:"1AAP",noScrollToRow:!0,noDeselect:!0})};e.default=function(){return i.a.createElement(r.Fragment,null,i.a.createElement(it.default,{content:at.a}),i.a.createElement("h2",null,"Examples"),i.a.createElement("h3",null,"Structure with highlighted positions"),i.a.createElement("protvista-structure",{"pdb-id":"1AAP",accession:"P05067",highlight:"290:300,310:340"}),i.a.createElement("h3",null,"Structure with protvista-datatable"),i.a.createElement("protvista-manager",{attributes:"pdb-id"},i.a.createElement("protvista-structure",{"pdb-id":"1AAP",accession:"P05067"}),i.a.createElement(ft,{xrefs:st})))}},591:function(t,e,n){"use strict";function r(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=t&&("undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"]);if(null==n)return;var r,i,o=[],a=!0,s=!1;try{for(n=n.call(t);!(a=(r=n.next()).done)&&(o.push(r.value),!e||o.length!==e);a=!0);}catch(t){s=!0,i=t}finally{try{a||null==n.return||n.return()}finally{if(s)throw i}}return o}(t,e)||function(t,e){if(!t)return;if("string"==typeof t)return i(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return i(t,e)}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function i(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function a(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}n.d(e,"b",(function(){return M})),n.d(e,"e",(function(){return T})),n.d(e,"a",(function(){return B})),n.d(e,"d",(function(){return x})),n.d(e,"c",(function(){return D})),n.d(e,"f",(function(){return N}));var s=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=e.min,r=void 0===n?-1/0:n,i=e.max,a=void 0===i?1/0:i;o(this,t),this.segments=[],this.max=a,this.min=r,this.regionString=null}var e,n,i;return e=t,(n=[{key:"encode",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return this.segments.map((function(n){var r=n.start,i=n.end,o=n.color;if(e)return"".concat(r,":").concat(i).concat(o?":".concat(o):"");var a=r===t.min?"":r,s=i===t.max?"":i;return"".concat(a,":").concat(s).concat(o?":".concat(o):"")})).join(",")}},{key:"decode",value:function(t){var e=this;void 0!==t&&(this.regionString=t),this.regionString?this.segments=this.regionString.split(",").map((function(t){var n=r(t.split(":"),4),i=n[0],o=n[1],a=n[2];if(void 0!==n[3])throw new Error("there should be at most 2 ':' per region. Region: ".concat(t));var s=i?Number(i):e.min,u=o?Number(o):e.max,l=""!==a?a:void 0;if(s>u){var c=[u,s];s=c[0],u=c[1]}if(s<e.min&&(s=e.min),u>e.max&&(u=e.max),Number.isNaN(s))throw new Error("The parsed value of ".concat(i," is NaN. Region: ").concat(t));if(Number.isNaN(u))throw new Error("The parsed value of ".concat(o," is NaN. Region: ").concat(t));if(l&&!l.match(/^#[0-9a-f]{6,8}$/i))throw new Error("The parsed value of ".concat(a," is not a color in hex format. Region: ").concat(t));return{start:s,end:u,color:l}})):this.segments=[]}}])&&a(e.prototype,n),i&&a(e,i),t}();function u(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var l=function(t,e){return t?e?"".concat(t,",").concat(e):t:e},c=function(){function t(e){var n=e.element,r=e.min,i=e.max;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.element=n,this.element._highlightcolor="#FFEB3B66",this.region=new s({min:r,max:i}),this.fixedHighlight=null}var e,n,r;return e=t,(n=[{key:"max",set:function(t){this.region.max=t}},{key:"setAttributesInElement",value:function(){this.region.decode(this.element.getAttribute("highlight")),0===this.region.segments.length&&(this.element._highlightstart=Number(this.element.getAttribute("highlightstart")),this.element._highlightend=Number(this.element.getAttribute("highlightend")),this.element._highlightcolor=this.element.getAttribute("highlightcolor")||"#FFEB3B66",null!==this.element._highlightstart&&null!==this.element._highlightend&&"number"==typeof this.element._highlightstart&&"number"==typeof this.element._highlightend&&(this.element._highlight="".concat(this.element._highlightstart,":").concat(this.element._highlightend),this.region.decode(l(this.fixedHighlight,this.element._highlight))))}},{key:"setFloatAttribute",value:function(t,e){var n=parseFloat(e);this.element["_".concat(t)]=Number.isNaN(n)?e:n}},{key:"changedCallBack",value:function(t,e){switch(t){case"highlightstart":case"highlightend":this.setFloatAttribute(t,e),this.element._highlight=Number.isNaN(this.element._highlightstart)||Number.isNaN(this.element._highlightend)||void 0===this.element._highlightstart||void 0===this.element._highlightend||null===this.element._highlightstart||null===this.element._highlightend?"":"".concat(Math.max(this.region.min,this.element._highlightstart),":").concat(Math.min(this.region.max,this.element._highlightend));break;default:this.element._highlight=e}this.region.decode(l(this.fixedHighlight,this.element._highlight)),this.element.refresh()}},{key:"setFixedHighlight",value:function(t){this.fixedHighlight=t,this.region.decode(l(t,this.element._highlight)),this.element.refresh()}},{key:"appendHighlightTo",value:function(t){this.highlighted=t.append("g").attr("class","highlighted")}},{key:"updateHighlight",value:function(){var t=this,e=this.highlighted.selectAll("rect").data(this.region.segments);e.enter().append("rect").style("pointer-events","none").merge(e).attr("fill",(function(e){return e.color?e.color:t.element._highlightcolor})).attr("height",this.element._height).attr("x",(function(e){return t.element.getXFromSeqPosition(e.start)})).attr("width",(function(e){return t.element.getSingleBaseWidth()*(e.end-e.start+1)})),e.exit().remove()}}])&&u(e.prototype,n),r&&u(e,r),t}();function h(t){var e=document.createElement("div");return e.style.borderColor="",e.style.borderColor=t,""!==e.style.borderColor}var f=function(t){return t};function p(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var d=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.element=e,this.timeStampWheelOutside=0,this.resetScrollableTimeout=null}var e,n,r;return e=t,(n=[{key:"setElementScrollable",value:function(t){this.element.setAttribute("scrollable",t)}},{key:"startResetScrollableTimer",value:function(){var t=this;this.resetScrollableTimeout&&clearTimeout(this.resetScrollableTimeout),this.resetScrollableTimeout=setTimeout((function(){t.setElementScrollable(!0),t.resetScrollableTimeout=null}),400)}},{key:"blockScroll",value:function(t){this.timeStampWheelOutside=t,this.setElementScrollable(!1),this.startResetScrollableTimer()}},{key:"isWheelEventInsideElement",value:function(t,e){var n=this.element.getBoundingClientRect(),r=n.height,i=n.width,o=n.x,a=n.y;return t>o&&e<o+i&&e>a&&e<a+r}},{key:"wheel",value:function(t){var e=t.x,n=t.y,r=t.timeStamp;this.isWheelEventInsideElement(e,n)?r<this.timeStampWheelOutside+400?this.blockScroll(r):this.setElementScrollable(!0):this.blockScroll(r)}}])&&p(e.prototype,n),r&&p(e,r),t}();function b(t){return(b="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function y(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=v(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0,i=function(){};return{s:i,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return a=t.done,t},e:function(t){s=!0,o=t},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw o}}}}function g(t){return function(t){if(Array.isArray(t))return m(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||v(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function v(t,e){if(t){if("string"==typeof t)return m(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?m(t,e):void 0}}function m(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function w(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function O(t,e,n){return e&&_(t.prototype,e),n&&_(t,n),t}function A(t,e,n){return(A="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=C(t)););return t}(t,e);if(r){var i=Object.getOwnPropertyDescriptor(r,e);return i.get?i.get.call(n):i.value}})(t,e,n||t)}function k(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&P(t,e)}function P(t,e){return(P=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function S(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=C(t);if(e){var i=C(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return R(this,n)}}function R(t,e){return!e||"object"!==b(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function C(t){return(C=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var j=["left","right","top","bottom"],E=j.map((function(t){return"margin".concat(t)})),M=s,T=c,B=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,e=[],n=[];if(null!==t&&"string"!=typeof t)throw new Error("The attribute text has to be of type string");if(t&&""!==t.trim()){var r=t.split(",").map((function(t){return t.split(":")}));if(r.length<2)throw new Error("There should be at least 2 points to create a scale");e=r.map((function(t){var e=t[0].trim().toUpperCase();if(!h(e))throw new Error("The color '".concat(e," is not valid'"));return e})),n=r.map((function(t,e){var n=parseFloat(t[1]);if(Number.isNaN(n))throw new Error("The second part of every point should be a number. Error in point ".concat(e,": ").concat(t));return n}))}return{range:e,domain:n}},x=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e.keyFormatter,r=void 0===n?f:n,i=e.valueFormatter,o=void 0===i?f:i;if(null!==t&&"string"!=typeof t)throw new Error("The attribute text has to be of type string");if(t&&""!==t.trim()){var a=t.split(",").map((function(t){return t.split(":")})),s={};return a.forEach((function(t){if(2!==t.length)throw new Error("Bad block: ".concat(t.join(":"),"\n The blocks of the string should follow the format KEY:VALUE"));s[r(t[0])]=o(t[1])})),s}return{}},D=d,N=function(t){var e,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{initialValue:{top:0,bottom:0,left:0,right:0}},r=function(t){k(r,t);var e=S(r);function r(){var t;return w(this,r),(t=e.call(this)).margin=n.initialValue,t}return O(r,[{key:"attributeChangedCallback",value:function(t,e,n){e!==n&&E.includes(t)&&(this[t]=n),A(C(r.prototype),"attributeChangedCallback",this).call(this,t,e,n)}}],[{key:"observedAttributes",get:function(){return[].concat(g(A(C(r),"observedAttributes",this)),g(E))}}]),r}(t),i=y(j);try{var o=function(){var t=e.value;Object.defineProperty(r.prototype,"margin".concat(t),{get:function(){return this.margin[t]||0},set:function(e){this.margin[t]=+e}})};for(i.s();!(e=i.n()).done;)o()}catch(t){i.e(t)}finally{i.f()}return r}},618:function(t,e,n){"use strict";n.d(e,"b",(function(){return g}));var r=n(658);function i(t){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function o(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=function(t,e){if(!t)return;if("string"==typeof t)return a(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return a(t,e)}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0,i=function(){};return{s:i,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,s=!0,u=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return s=t.done,t},e:function(t){u=!0,o=t},f:function(){try{s||null==n.return||n.return()}finally{if(u)throw o}}}}function a(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function s(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function u(t,e){return!e||"object"!==i(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function l(t){var e="function"==typeof Map?new Map:void 0;return(l=function(t){if(null===t||(n=t,-1===Function.toString.call(n).indexOf("[native code]")))return t;var n;if("function"!=typeof t)throw new TypeError("Super expression must either be null or a function");if(void 0!==e){if(e.has(t))return e.get(t);e.set(t,r)}function r(){return c(t,arguments,p(this).constructor)}return r.prototype=Object.create(t.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}),f(r,t)})(t)}function c(t,e,n){return(c=h()?Reflect.construct:function(t,e,n){var r=[null];r.push.apply(r,e);var i=new(Function.bind.apply(t,r));return n&&f(i,n.prototype),i}).apply(null,arguments)}function h(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}function f(t,e){return(f=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function p(t){return(p=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function d(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var b=function(t,e,n,r){return new(n||(n=Promise))((function(i,o){function a(t){try{u(r.next(t))}catch(t){o(t)}}function s(t){try{u(r.throw(t))}catch(t){o(t)}}function u(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(a,s)}u((r=r.apply(t,e||[])).next())}))},y=new Map,g=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Headers({accept:"application/json"}),n=y.get(t);if(n)return n;var r=b(void 0,void 0,void 0,regeneratorRuntime.mark((function n(){var r,i;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,window.fetch(t,{headers:e});case 2:if((r=n.sent).ok){n.next=5;break}throw new Error("Request Failed: Status = ".concat(r.status,"; URI = ").concat(t,"; Time = ").concat(new Date));case 5:if(204!==r.status){n.next=7;break}return n.abrupt("return",{payload:null,headers:r.headers});case 7:return n.next=9,r.json();case 9:return i=n.sent,n.abrupt("return",{payload:i,headers:r.headers});case 11:case"end":return n.stop()}}),n)})));return y.set(t,r),r.catch((function(){return y.delete(t)})),r},v=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&f(t,e)}(y,t);var e,n,i,a,l,c=(e=y,n=h(),function(){var t,r=p(e);if(n){var i=p(this).constructor;t=Reflect.construct(r,arguments,i)}else t=r.apply(this,arguments);return u(this,t)});function y(){var t;return d(this,y),(t=c.call(this))._data=null,t.selector=(t.getAttribute("selector")||"").trim()||function(t){return t},t}return i=y,l=[{key:"is",get:function(){return"data-loader"}}],(a=[{key:"fetch",value:function(){return b(this,void 0,void 0,regeneratorRuntime.mark((function t(){var e,n,i,a,s,u;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(l=this.children,(e=Array.from(l).filter((function(t){return t.matches('source[src], script[type="application/json"]')}))).length){t.next=3;break}return t.abrupt("return");case 3:n=[],a=o(e),t.prev=5,a.s();case 7:if((s=a.n()).done){t.next=31;break}if(u=s.value,t.prev=9,!(u instanceof HTMLSourceElement)){t.next=22;break}return t.t0=Object,t.t1=Object,t.t2={},t.next=16,g(u.src);case 16:t.t3=t.sent,t.t4=t.t1.assign.call(t.t1,t.t2,t.t3),t.t5={srcElement:u,src:u.src},i=t.t0.assign.call(t.t0,t.t4,t.t5),t.next=23;break;case 22:i={payload:JSON.parse(u.textContent)};case 23:return t.abrupt("break",31);case 26:t.prev=26,t.t6=t.catch(9),n.push(t.t6);case 29:t.next=7;break;case 31:t.next=36;break;case 33:t.prev=33,t.t7=t.catch(5),a.e(t.t7);case 36:return t.prev=36,a.f(),t.finish(36);case 39:if(i){t.next=43;break}this._errors=n;try{this.dispatchEvent(new CustomEvent("error",{detail:n,bubbles:!0,cancelable:!0}))}catch(t){console.error(t)}return t.abrupt("return");case 43:"string"==typeof this.selector?this._data=Object(r.a)(i.payload,this.selector):this._data=this.selector(i.payload),i.payload=this.data,this.dispatchEvent(new CustomEvent("load",{detail:i,bubbles:!0,cancelable:!0}));case 46:case"end":return t.stop()}var l}),t,this,[[5,33,36,39],[9,26]])})))}},{key:"data",get:function(){return this._data}},{key:"loaded",get:function(){return!!this.data}},{key:"errors",get:function(){return this._errors}},{key:"selector",get:function(){return this._selector},set:function(t){this._selector=t}},{key:"connectedCallback",value:function(){this.fetch()}}])&&s(i.prototype,a),l&&s(i,l),y}(l(HTMLElement));e.a=v},686:function(t,e,n){"use strict";function r(t){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function i(t){return function(t){if(Array.isArray(t))return o(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(!t)return;if("string"==typeof t)return o(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return o(t,e)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function o(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function a(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function s(t,e){return!e||"object"!==r(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function u(t){var e="function"==typeof Map?new Map:void 0;return(u=function(t){if(null===t||(n=t,-1===Function.toString.call(n).indexOf("[native code]")))return t;var n;if("function"!=typeof t)throw new TypeError("Super expression must either be null or a function");if(void 0!==e){if(e.has(t))return e.get(t);e.set(t,r)}function r(){return l(t,arguments,f(this).constructor)}return r.prototype=Object.create(t.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}),h(r,t)})(t)}function l(t,e,n){return(l=c()?Reflect.construct:function(t,e,n){var r=[null];r.push.apply(r,e);var i=new(Function.bind.apply(t,r));return n&&h(i,n.prototype),i}).apply(null,arguments)}function c(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}function h(t,e){return(h=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function f(t){return(f=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var p=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&h(t,e)}(p,t);var e,n,r,o,u,l=(e=p,n=c(),function(){var t,r=f(e);if(n){var i=f(this).constructor;t=Reflect.construct(r,arguments,i)}else t=r.apply(this,arguments);return s(this,t)});function p(){var t;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,p),(t=l.call(this)).protvistaElements=new Set,t.attributeValues=new Map,t.propertyValues=new Map,t.mouseOver=!1,t}return r=p,u=[{key:"observedAttributes",get:function(){return["attributes","length","displaystart","displayend","highlight"]}}],(o=[{key:"length",get:function(){return this.attributeValues.get("length")},set:function(t){this.attributeValues.set("length",t)}},{key:"displaystart",get:function(){return this.attributeValues.get("displaystart")},set:function(t){this.attributeValues.set("displaystart",t)}},{key:"displayend",get:function(){return this.attributeValues.get("displayend")},set:function(t){this.attributeValues.set("displayend",t)}},{key:"highlight",get:function(){return this.attributeValues.get("highlight")},set:function(t){this.attributeValues.set("highlight",t)}},{key:"attributeChangedCallback",value:function(t,e,n){if(e!==n){if("attributes"===t){if(this._attributes=n.split(" "),-1!==this._attributes.indexOf("type"))throw new Error("'type' can't be used as a protvista attribute");if(-1!==this._attributes.indexOf("value"))throw new Error("'value' can't be used as a protvista attribute");this.attributeValues=new Map(this._attributes.filter((function(t){return!p.observedAttributes.includes(t)})).map((function(t){return[t,null]})))}else"length"===t&&(this.length=n),"displaystart"===t&&(this.displaystart=n),"displayend"===t&&(this.displayend=n),"highlight"===t&&(this.highlight=n);this.applyAttributes()}}},{key:"register",value:function(t){this.protvistaElements.add(t),this.applyAttributes()}},{key:"unregister",value:function(t){this.protvistaElements.delete(t)}},{key:"_polyfillElementClosest",value:function(){var t=this;Element.prototype.matches||(Element.prototype.matches=Element.prototype.msMatchesSelector||Element.prototype.webkitMatchesSelector),Element.prototype.closest||(Element.prototype.closest=function(e){var n=t;do{if(n.matches(e))return n;n=n.parentElement||n.parentNode}while(null!==n&&1===n.nodeType);return null})}},{key:"applyAttributes",value:function(){var t=this;this.protvistaElements.forEach((function(e){t.attributeValues.forEach((function(t,n){!1===t||null==t?e.removeAttribute(n):e.setAttribute(n,"boolean"==typeof t?"":t)}))}))}},{key:"applyProperties",value:function(t){var e=this;if(t){var n=this.querySelector("#".concat(t));this.propertyValues.forEach((function(t,e){n[e]=t}))}else this.protvistaElements.forEach((function(t){e.propertyValues.forEach((function(e,n){t[n]=e}))}))}},{key:"isRegisteredAttribute",value:function(t){return i(this.attributeValues.keys()).includes(t)||p.observedAttributes.includes(t)}},{key:"_changeListener",value:function(t){var e=this;switch(t.detail.handler){case"property":this.propertyValues.set(t.detail.type,t.detail.value),this.applyProperties(t.detail.for);break;default:this.isRegisteredAttribute(t.detail.type)&&this.attributeValues.set(t.detail.type,t.detail.value),Object.keys(t.detail).forEach((function(n){e.isRegisteredAttribute(n)&&e.attributeValues.set(n,t.detail[n])})),this.applyAttributes()}}},{key:"connectedCallback",value:function(){this.addEventListener("change",this._changeListener)}}])&&a(r.prototype,o),u&&a(r,u),p}(u(HTMLElement));e.a=p},944:function(t,e,n){"use strict";var r,i=n(63),o=n(719),a=n(591);var s,u,l,c,h,f,p,d,b,y,g,v=Object(i.b)(r||(s=['\n  :host {\n    display: block;\n  }\n  .protvista-datatable-container {\n    overflow-y: auto;\n    // Note: overflow-x was set to \'hidden\' but changing\n    // to \'auto\' doesn\'t seem to be an issue.\n    overflow-x: auto;\n  }\n\n  :host([scrollable="true"]) .protvista-datatable-container {\n    overflow-y: auto;\n    will-change: scroll;\n  }\n\n  :host([scrollable="false"]) .protvista-datatable-container {\n    overflow-y: hidden;\n  }\n\n  table {\n    width: 100%;\n    padding: 0;\n    margin: 0;\n    border-spacing: 0;\n  }\n\n  th {\n    position: sticky;\n    position: -webkit-sticky;\n    position: -moz-sticky;\n    position: -ms-sticky;\n    position: -o-sticky;\n    text-align: left;\n    background-color: var(--protvista-datable__header-background, #fff);\n    color: var(--protvista-datable__header-text, #393b42);\n    text-overflow: ellipsis;\n    top: 0;\n  }\n\n  td,\n  th {\n    padding: 1rem;\n    border-bottom: 1px solid #c2c4c4;\n  }\n\n  tr:hover:not(.active):not(.child-row) {\n    background-color: var(--protvista-datatable__hover, #f1f1f1);\n  }\n\n  td {\n    cursor: pointer;\n  }\n\n  .withChildren:before {\n    display: inline-block;\n    font-family: "Courier New", Courier, monospace;\n    width: 1rem;\n    text-align: center;\n    border-radius: 1rem;\n    line-height: 1rem;\n    font-weight: 700;\n    font-size: 1rem;\n    color: white;\n    border: 2px solid white;\n    background-color: var(--protvista-datatable__childToggle, #00639a);\n  }\n\n  .plus:before {\n    content: "+";\n  }\n\n  .minus:before {\n    content: "-";\n  }\n\n  td:nth-child(1) {\n    border-left: 0.5rem solid transparent;\n  }\n\n  .overlapped td:nth-child(1) {\n    border-left: 0.5rem solid\n      var(--protvista-datatable__overlapped, rgba(255, 0, 0, 0.8));\n  }\n\n  .active {\n    background-color: var(\n      --protvista-datatable__active,\n      rgba(255, 235, 59, 0.3)\n    ) !important;\n  }\n  .hidden {\n    opacity: 0.2;\n  }\n  .evidence-tag {\n    cursor: pointer;\n    font-size: 80%;\n    white-space: nowrap;\n    margin-left: 0.5rem;\n    border-radius: 0.5rem;\n    background-color: #f1f1f1;\n    padding: 0.25rem 0.5rem;\n    color: #3a343a;\n  }\n  .evidence-tag__label {\n    padding-left: 0.25rem;\n    text-transform: capitalize;\n  }\n  .svg-colour-reviewed svg {\n    color: #c39b00;\n  }\n  .svg-colour-unreviewed svg {\n    color: #c0c0c0;\n  }\n\n  .protvista-datatable__child-item {\n    display: flex;\n  }\n\n  .protvista-datatable__child-item__title {\n    font-weight: 700;\n    flex-basis: 10vw;\n    flex-grow: 0;\n    margin-right: 1rem;\n  }\n\n  .protvista-datatable__child-item__content {\n  }\n\n  .odd {\n    background-color: var(--protvista-datatable__odd, #e4e8eb);\n  }\n\n  .even {\n    background-color: var(--protvista-datatable__even, #fff);\n  }\n'],u||(u=s.slice(0)),r=Object.freeze(Object.defineProperties(s,{raw:{value:Object.freeze(u)}}))));function m(t){return(m="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function w(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function _(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?w(Object(n),!0).forEach((function(e){O(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):w(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function O(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function A(t,e){return e||(e=t.slice(0)),Object.freeze(Object.defineProperties(t,{raw:{value:Object.freeze(e)}}))}function k(t){return function(t){if(Array.isArray(t))return P(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(!t)return;if("string"==typeof t)return P(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return P(t,e)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function P(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function S(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function R(t,e,n){return(R="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=T(t)););return t}(t,e);if(r){var i=Object.getOwnPropertyDescriptor(r,e);return i.get?i.get.call(n):i.value}})(t,e,n||t)}function C(t,e){return(C=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function j(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=T(t);if(e){var i=T(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return E(this,n)}}function E(t,e){return!e||"object"!==m(e)&&"function"!=typeof e?M(t):e}function M(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function T(t){return(T=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var B=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&C(t,e)}(u,t);var e,n,r,s=j(u);function u(){var t;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,u),(t=s.call(this)).height=25,t.visibleChildren=[],t.noScrollToRow=!1,t.noDeselect=!1,t.eventHandler=t.eventHandler.bind(M(t)),t.scrollFilter=new a.c(M(t)),t.wheelListener=function(e){return t.scrollFilter.wheel(e)},t}return e=u,r=[{key:"properties",get:function(){return{data:{type:Object},highlight:{converter:function(t){return t&&"null"!==t?t.split(":").map((function(t){return Number(t)})):null}},height:{type:Number},columns:{type:Object},displayStart:{type:Number},displayEnd:{type:Number},visibleChildren:{type:Array},selectedid:{type:String},rowClickEvent:{type:Function},noScrollToRow:{type:Boolean},noDeselect:{type:Boolean}}}},{key:"styles",get:function(){return v}},{key:"processData",value:function(t){return t.map((function(t){return _(_({},t),{},{start:t.start?t.start:t.begin})})).sort((function(t,e){return t.start-e.start})).map((function(t){return _(_({},t),{},{protvistaFeatureId:t.protvistaFeatureId||Object(o.a)()})}))}},{key:"isWithinRange",value:function(t,e,n,r){return!n&&e===Number(r)||!r&&t===Number(n)||t<=n&&e>=r}},{key:"isOutside",value:function(t,e,n,r){return t>r||e<n}}],(n=[{key:"connectedCallback",value:function(){var t=this;R(T(u.prototype),"connectedCallback",this).call(this),this.addEventListener("load",(function(e){Array.from(t.children).includes(e.target)&&(t.data=u.processData(e.detail.payload.features))})),this.closest("protvista-manager")&&(this.manager=this.closest("protvista-manager"),this.manager.register(this)),this.noDeselect||document.addEventListener("click",this.eventHandler),this.classList.add("feature"),this.hasAttribute("filter-scroll")&&document.addEventListener("wheel",this.wheelListener,{capture:!0})}},{key:"disconnectedCallback",value:function(){R(T(u.prototype),"disconnectedCallback",this).call(this),this.manager&&this.manager.unregister(this),document.removeEventListener("click",this.eventHandler),document.removeEventListener("wheel",this.wheelListener)}},{key:"data",get:function(){return this._data},set:function(t){var e=this._data;this._data=u.processData(t),this.requestUpdate("data",e)}},{key:"eventHandler",value:function(t){t.target.closest("protvista-datatable")||t.target.closest(".feature")||(this.selectedid=null)}},{key:"handleClick",value:function(t,e){if(t.target.parentNode){var n=e.start,r=e.end,i="function"==typeof this.rowClickEvent&&this.rowClickEvent(e)||{};this.selectedid=t.target.parentNode.dataset.id,n&&r&&(i.highlight="".concat(n,":").concat(r)),this.dispatchEvent(new CustomEvent("change",{detail:i,bubbles:!0,cancelable:!0}))}}},{key:"getStyleClass",value:function(t,e,n){var r="";return this.selectedid&&this.selectedid===t&&(r="".concat(r," active")),this.displayStart&&this.displayEnd&&u.isOutside(this.displayStart,this.displayEnd,e,n)&&(r="".concat(r," hidden")),this.highlight&&u.isWithinRange(this.highlight[0],this.highlight[1],e,n)&&(r="".concat(r," overlapped")),r}},{key:"hasChildData",value:function(t,e){var n=this;return t.some((function(t){return n.columns[t].resolver(e)}))}},{key:"toggleVisibleChild",value:function(t){this.visibleChildren.includes(t)?this.visibleChildren=this.visibleChildren.filter((function(e){return e!==t})):this.visibleChildren=[].concat(k(this.visibleChildren),[t])}},{key:"scrollIntoView",value:function(){this.selectedid&&this.shadowRoot.querySelector('[data-id="'.concat(this.selectedid,'"]')).scrollIntoView({behavior:"smooth",block:"center"})}},{key:"getChildRow",value:function(t,e){var n=this;return Object(i.c)(l||(l=A(['\n      <tr class="child-row">\n        <td\n          colspan="','"\n        >\n          ',"\n        </td>\n      </tr>\n    "])),Object.values(this.columns).filter((function(t){return!t.child})).length+1,t.map((function(t){return n.columns[t].resolver(e)?Object(i.c)(c||(c=A(['\n                  <div class="protvista-datatable__child-item">\n                    <div class="protvista-datatable__child-item__title">\n                      ','\n                    </div>\n                    <div class="protvista-datatable__child-item__content">\n                      ',"\n                    </div>\n                  </div>\n                "])),n.columns[t].label,n.columns[t].resolver(e)):Object(i.c)(h||(h=A([""])))})))}},{key:"render",value:function(){var t=this;if(!this.data||!this.columns)return Object(i.c)(f||(f=A([""])));var e=Object.keys(this.columns).filter((function(e){return t.columns[e].child})),n=Object.values(this.columns).filter((function(t){return!t.child&&!1!==t.display}));return Object(i.c)(p||(p=A(['\n      <div\n        class="protvista-datatable-container"\n        style="height:','rem"\n      >\n        <table>\n          <thead>\n            <tr>\n              ',"\n            </tr>\n          </thead>\n          <tbody>\n            ","\n          </tbody>\n        </table>\n      </div>\n    "])),this.height,n.map((function(t){return Object(i.c)(d||(d=A([" <th>","</th> "])),t.label)})),this.data.map((function(r,o){var a=t.hasChildData(e,r);return Object(i.c)(b||(b=A(['\n                <tr\n                  data-id="','"\n                  class="'," ",'"\n                  @click="','"\n                >\n                  ',"\n                </tr>\n                ","\n              "])),r.protvistaFeatureId,t.getStyleClass(r.protvistaFeatureId,r.start,r.end),o%2==1?"even":"odd",(function(e){return t.handleClick(e,r)}),n.map((function(e,n){return a&&0===n?Object(i.c)(y||(y=A(['\n                          <td\n                            title="View more"\n                            @click="','"\n                            class="','"\n                          >\n                            ',"\n                          </td>\n                        "])),(function(){return t.toggleVisibleChild(r.protvistaFeatureId)}),t.visibleChildren.includes(r.protvistaFeatureId)?"withChildren minus":"withChildren plus",e.resolver(r)):Object(i.c)(g||(g=A([" <td>","</td> "])),e.resolver(r))})),a&&t.visibleChildren.includes(r.protvistaFeatureId)?t.getChildRow(e,r):"")})))}},{key:"updated",value:function(){this.noScrollToRow||this.scrollIntoView()}}])&&S(e.prototype,n),r&&S(e,r),u}(i.a);e.a=B}}]);