/*! For license information please see main.d24c7bc3.iframe.bundle.js.LICENSE.txt */
(self.webpackChunkroot=self.webpackChunkroot||[]).push([[179],{"./.storybook/preview.js-generated-config-entry.js":(__unused_webpack_module,__unused_webpack___webpack_exports__,__webpack_require__)=>{"use strict";var preview_namespaceObject={};__webpack_require__.r(preview_namespaceObject),__webpack_require__.d(preview_namespaceObject,{__namedExportsOrder:()=>__namedExportsOrder,parameters:()=>parameters});__webpack_require__("./node_modules/core-js/modules/es.object.keys.js"),__webpack_require__("./node_modules/core-js/modules/es.symbol.js"),__webpack_require__("./node_modules/core-js/modules/es.array.filter.js"),__webpack_require__("./node_modules/core-js/modules/es.object.get-own-property-descriptor.js"),__webpack_require__("./node_modules/core-js/modules/es.array.for-each.js"),__webpack_require__("./node_modules/core-js/modules/web.dom-collections.for-each.js"),__webpack_require__("./node_modules/core-js/modules/es.object.get-own-property-descriptors.js"),__webpack_require__("./node_modules/core-js/modules/es.object.define-properties.js"),__webpack_require__("./node_modules/core-js/modules/es.object.define-property.js");var ClientApi=__webpack_require__("./node_modules/@storybook/client-api/dist/esm/ClientApi.js"),parameters={actions:{argTypesRegex:"^on[A-Z].*"},controls:{matchers:{color:/(background|color)$/i,date:/Date$/}}},__namedExportsOrder=["parameters"];function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);enumerableOnly&&(symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}))),keys.push.apply(keys,symbols)}return keys}function _defineProperty(obj,key,value){return key in obj?Object.defineProperty(obj,key,{value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}Object.keys(preview_namespaceObject).forEach((function(key){var value=preview_namespaceObject[key];switch(key){case"args":return(0,ClientApi.uc)(value);case"argTypes":return(0,ClientApi.v9)(value);case"decorators":return value.forEach((function(decorator){return(0,ClientApi.$9)(decorator,!1)}));case"loaders":return value.forEach((function(loader){return(0,ClientApi.HZ)(loader,!1)}));case"parameters":return(0,ClientApi.h1)(function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?ownKeys(Object(source),!0).forEach((function(key){_defineProperty(target,key,source[key])})):Object.getOwnPropertyDescriptors?Object.defineProperties(target,Object.getOwnPropertyDescriptors(source)):ownKeys(Object(source)).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}))}return target}({},value),!1);case"argTypesEnhancers":return value.forEach((function(enhancer){return(0,ClientApi.My)(enhancer)}));case"argsEnhancers":return value.forEach((function(enhancer){return(0,ClientApi._C)(enhancer)}));case"render":return(0,ClientApi.$P)(value);case"globals":case"globalTypes":var v={};return v[key]=value,(0,ClientApi.h1)(v,!1);case"__namedExportsOrder":case"decorateStory":case"renderToDOM":return null;default:return console.log(key+" was not supported :( !")}}))},"./stories/NightingaleInterProTrack.stories.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{SimpleTrackNoControls:()=>SimpleTrackNoControls,Track:()=>Track,TrackAndContributorsNoControls:()=>TrackAndContributorsNoControls,TrackWithContributorsAndResiduesNoControls:()=>TrackWithContributorsAndResiduesNoControls,TrackWithResiduesNoControls:()=>TrackWithResiduesNoControls,__namedExportsOrder:()=>__namedExportsOrder,default:()=>__WEBPACK_DEFAULT_EXPORT__});__webpack_require__("./node_modules/core-js/modules/es.array.slice.js"),__webpack_require__("./node_modules/core-js/modules/es.symbol.js"),__webpack_require__("./node_modules/core-js/modules/es.symbol.description.js"),__webpack_require__("./node_modules/core-js/modules/es.symbol.iterator.js"),__webpack_require__("./node_modules/core-js/modules/es.string.iterator.js"),__webpack_require__("./node_modules/core-js/modules/es.array.iterator.js"),__webpack_require__("./node_modules/core-js/modules/web.dom-collections.iterator.js"),__webpack_require__("./node_modules/core-js/modules/es.symbol.async-iterator.js"),__webpack_require__("./node_modules/core-js/modules/es.symbol.to-string-tag.js"),__webpack_require__("./node_modules/core-js/modules/es.math.to-string-tag.js"),__webpack_require__("./node_modules/core-js/modules/es.json.to-string-tag.js"),__webpack_require__("./node_modules/core-js/modules/es.object.define-property.js"),__webpack_require__("./node_modules/core-js/modules/es.object.create.js"),__webpack_require__("./node_modules/core-js/modules/es.object.get-prototype-of.js"),__webpack_require__("./node_modules/core-js/modules/es.array.for-each.js"),__webpack_require__("./node_modules/core-js/modules/web.dom-collections.for-each.js"),__webpack_require__("./node_modules/core-js/modules/es.function.name.js"),__webpack_require__("./node_modules/core-js/modules/es.object.set-prototype-of.js"),__webpack_require__("./node_modules/core-js/modules/es.array.reverse.js"),__webpack_require__("./node_modules/core-js/modules/es.function.bind.js"),__webpack_require__("./node_modules/core-js/modules/es.promise.js"),__webpack_require__("./node_modules/core-js/modules/es.object.to-string.js"),__webpack_require__("./node_modules/core-js/modules/es.array.map.js"),__webpack_require__("./node_modules/core-js/modules/es.object.assign.js");var _templateObject,_templateObject2,_templateObject3,_templateObject4,_templateObject5,lit_html__WEBPACK_IMPORTED_MODULE_24__=__webpack_require__("./node_modules/lit-html/lit-html.js"),_packages_nightingale_interpro_track_tests_mockData_interpro_IPR016039_json__WEBPACK_IMPORTED_MODULE_26__=(__webpack_require__("./packages/nightingale-interpro-track/src/index.ts"),__webpack_require__("./packages/nightingale-interpro-track/tests/mockData/interpro-IPR016039.json")),_packages_nightingale_interpro_track_tests_mockData_interpro_contributors_json__WEBPACK_IMPORTED_MODULE_27__=__webpack_require__("./packages/nightingale-interpro-track/tests/mockData/interpro-contributors.json"),_packages_nightingale_interpro_track_tests_mockData_interpro_residues_json__WEBPACK_IMPORTED_MODULE_28__=__webpack_require__("./packages/nightingale-interpro-track/tests/mockData/interpro-residues.json");function _extends(){return _extends=Object.assign?Object.assign.bind():function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source)Object.prototype.hasOwnProperty.call(source,key)&&(target[key]=source[key])}return target},_extends.apply(this,arguments)}function _regeneratorRuntime(){_regeneratorRuntime=function _regeneratorRuntime(){return exports};var exports={},Op=Object.prototype,hasOwn=Op.hasOwnProperty,$Symbol="function"==typeof Symbol?Symbol:{},iteratorSymbol=$Symbol.iterator||"@@iterator",asyncIteratorSymbol=$Symbol.asyncIterator||"@@asyncIterator",toStringTagSymbol=$Symbol.toStringTag||"@@toStringTag";function define(obj,key,value){return Object.defineProperty(obj,key,{value,enumerable:!0,configurable:!0,writable:!0}),obj[key]}try{define({},"")}catch(err){define=function define(obj,key,value){return obj[key]=value}}function wrap(innerFn,outerFn,self,tryLocsList){var protoGenerator=outerFn&&outerFn.prototype instanceof Generator?outerFn:Generator,generator=Object.create(protoGenerator.prototype),context=new Context(tryLocsList||[]);return generator._invoke=function(innerFn,self,context){var state="suspendedStart";return function(method,arg){if("executing"===state)throw new Error("Generator is already running");if("completed"===state){if("throw"===method)throw arg;return doneResult()}for(context.method=method,context.arg=arg;;){var delegate=context.delegate;if(delegate){var delegateResult=maybeInvokeDelegate(delegate,context);if(delegateResult){if(delegateResult===ContinueSentinel)continue;return delegateResult}}if("next"===context.method)context.sent=context._sent=context.arg;else if("throw"===context.method){if("suspendedStart"===state)throw state="completed",context.arg;context.dispatchException(context.arg)}else"return"===context.method&&context.abrupt("return",context.arg);state="executing";var record=tryCatch(innerFn,self,context);if("normal"===record.type){if(state=context.done?"completed":"suspendedYield",record.arg===ContinueSentinel)continue;return{value:record.arg,done:context.done}}"throw"===record.type&&(state="completed",context.method="throw",context.arg=record.arg)}}}(innerFn,self,context),generator}function tryCatch(fn,obj,arg){try{return{type:"normal",arg:fn.call(obj,arg)}}catch(err){return{type:"throw",arg:err}}}exports.wrap=wrap;var ContinueSentinel={};function Generator(){}function GeneratorFunction(){}function GeneratorFunctionPrototype(){}var IteratorPrototype={};define(IteratorPrototype,iteratorSymbol,(function(){return this}));var getProto=Object.getPrototypeOf,NativeIteratorPrototype=getProto&&getProto(getProto(values([])));NativeIteratorPrototype&&NativeIteratorPrototype!==Op&&hasOwn.call(NativeIteratorPrototype,iteratorSymbol)&&(IteratorPrototype=NativeIteratorPrototype);var Gp=GeneratorFunctionPrototype.prototype=Generator.prototype=Object.create(IteratorPrototype);function defineIteratorMethods(prototype){["next","throw","return"].forEach((function(method){define(prototype,method,(function(arg){return this._invoke(method,arg)}))}))}function AsyncIterator(generator,PromiseImpl){function invoke(method,arg,resolve,reject){var record=tryCatch(generator[method],generator,arg);if("throw"!==record.type){var result=record.arg,value=result.value;return value&&"object"==typeof value&&hasOwn.call(value,"__await")?PromiseImpl.resolve(value.__await).then((function(value){invoke("next",value,resolve,reject)}),(function(err){invoke("throw",err,resolve,reject)})):PromiseImpl.resolve(value).then((function(unwrapped){result.value=unwrapped,resolve(result)}),(function(error){return invoke("throw",error,resolve,reject)}))}reject(record.arg)}var previousPromise;this._invoke=function(method,arg){function callInvokeWithMethodAndArg(){return new PromiseImpl((function(resolve,reject){invoke(method,arg,resolve,reject)}))}return previousPromise=previousPromise?previousPromise.then(callInvokeWithMethodAndArg,callInvokeWithMethodAndArg):callInvokeWithMethodAndArg()}}function maybeInvokeDelegate(delegate,context){var method=delegate.iterator[context.method];if(void 0===method){if(context.delegate=null,"throw"===context.method){if(delegate.iterator.return&&(context.method="return",context.arg=void 0,maybeInvokeDelegate(delegate,context),"throw"===context.method))return ContinueSentinel;context.method="throw",context.arg=new TypeError("The iterator does not provide a 'throw' method")}return ContinueSentinel}var record=tryCatch(method,delegate.iterator,context.arg);if("throw"===record.type)return context.method="throw",context.arg=record.arg,context.delegate=null,ContinueSentinel;var info=record.arg;return info?info.done?(context[delegate.resultName]=info.value,context.next=delegate.nextLoc,"return"!==context.method&&(context.method="next",context.arg=void 0),context.delegate=null,ContinueSentinel):info:(context.method="throw",context.arg=new TypeError("iterator result is not an object"),context.delegate=null,ContinueSentinel)}function pushTryEntry(locs){var entry={tryLoc:locs[0]};1 in locs&&(entry.catchLoc=locs[1]),2 in locs&&(entry.finallyLoc=locs[2],entry.afterLoc=locs[3]),this.tryEntries.push(entry)}function resetTryEntry(entry){var record=entry.completion||{};record.type="normal",delete record.arg,entry.completion=record}function Context(tryLocsList){this.tryEntries=[{tryLoc:"root"}],tryLocsList.forEach(pushTryEntry,this),this.reset(!0)}function values(iterable){if(iterable){var iteratorMethod=iterable[iteratorSymbol];if(iteratorMethod)return iteratorMethod.call(iterable);if("function"==typeof iterable.next)return iterable;if(!isNaN(iterable.length)){var i=-1,next=function next(){for(;++i<iterable.length;)if(hasOwn.call(iterable,i))return next.value=iterable[i],next.done=!1,next;return next.value=void 0,next.done=!0,next};return next.next=next}}return{next:doneResult}}function doneResult(){return{value:void 0,done:!0}}return GeneratorFunction.prototype=GeneratorFunctionPrototype,define(Gp,"constructor",GeneratorFunctionPrototype),define(GeneratorFunctionPrototype,"constructor",GeneratorFunction),GeneratorFunction.displayName=define(GeneratorFunctionPrototype,toStringTagSymbol,"GeneratorFunction"),exports.isGeneratorFunction=function(genFun){var ctor="function"==typeof genFun&&genFun.constructor;return!!ctor&&(ctor===GeneratorFunction||"GeneratorFunction"===(ctor.displayName||ctor.name))},exports.mark=function(genFun){return Object.setPrototypeOf?Object.setPrototypeOf(genFun,GeneratorFunctionPrototype):(genFun.__proto__=GeneratorFunctionPrototype,define(genFun,toStringTagSymbol,"GeneratorFunction")),genFun.prototype=Object.create(Gp),genFun},exports.awrap=function(arg){return{__await:arg}},defineIteratorMethods(AsyncIterator.prototype),define(AsyncIterator.prototype,asyncIteratorSymbol,(function(){return this})),exports.AsyncIterator=AsyncIterator,exports.async=function(innerFn,outerFn,self,tryLocsList,PromiseImpl){void 0===PromiseImpl&&(PromiseImpl=Promise);var iter=new AsyncIterator(wrap(innerFn,outerFn,self,tryLocsList),PromiseImpl);return exports.isGeneratorFunction(outerFn)?iter:iter.next().then((function(result){return result.done?result.value:iter.next()}))},defineIteratorMethods(Gp),define(Gp,toStringTagSymbol,"Generator"),define(Gp,iteratorSymbol,(function(){return this})),define(Gp,"toString",(function(){return"[object Generator]"})),exports.keys=function(object){var keys=[];for(var key in object)keys.push(key);return keys.reverse(),function next(){for(;keys.length;){var key=keys.pop();if(key in object)return next.value=key,next.done=!1,next}return next.done=!0,next}},exports.values=values,Context.prototype={constructor:Context,reset:function reset(skipTempReset){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(resetTryEntry),!skipTempReset)for(var name in this)"t"===name.charAt(0)&&hasOwn.call(this,name)&&!isNaN(+name.slice(1))&&(this[name]=void 0)},stop:function stop(){this.done=!0;var rootRecord=this.tryEntries[0].completion;if("throw"===rootRecord.type)throw rootRecord.arg;return this.rval},dispatchException:function dispatchException(exception){if(this.done)throw exception;var context=this;function handle(loc,caught){return record.type="throw",record.arg=exception,context.next=loc,caught&&(context.method="next",context.arg=void 0),!!caught}for(var i=this.tryEntries.length-1;i>=0;--i){var entry=this.tryEntries[i],record=entry.completion;if("root"===entry.tryLoc)return handle("end");if(entry.tryLoc<=this.prev){var hasCatch=hasOwn.call(entry,"catchLoc"),hasFinally=hasOwn.call(entry,"finallyLoc");if(hasCatch&&hasFinally){if(this.prev<entry.catchLoc)return handle(entry.catchLoc,!0);if(this.prev<entry.finallyLoc)return handle(entry.finallyLoc)}else if(hasCatch){if(this.prev<entry.catchLoc)return handle(entry.catchLoc,!0)}else{if(!hasFinally)throw new Error("try statement without catch or finally");if(this.prev<entry.finallyLoc)return handle(entry.finallyLoc)}}}},abrupt:function abrupt(type,arg){for(var i=this.tryEntries.length-1;i>=0;--i){var entry=this.tryEntries[i];if(entry.tryLoc<=this.prev&&hasOwn.call(entry,"finallyLoc")&&this.prev<entry.finallyLoc){var finallyEntry=entry;break}}finallyEntry&&("break"===type||"continue"===type)&&finallyEntry.tryLoc<=arg&&arg<=finallyEntry.finallyLoc&&(finallyEntry=null);var record=finallyEntry?finallyEntry.completion:{};return record.type=type,record.arg=arg,finallyEntry?(this.method="next",this.next=finallyEntry.finallyLoc,ContinueSentinel):this.complete(record)},complete:function complete(record,afterLoc){if("throw"===record.type)throw record.arg;return"break"===record.type||"continue"===record.type?this.next=record.arg:"return"===record.type?(this.rval=this.arg=record.arg,this.method="return",this.next="end"):"normal"===record.type&&afterLoc&&(this.next=afterLoc),ContinueSentinel},finish:function finish(finallyLoc){for(var i=this.tryEntries.length-1;i>=0;--i){var entry=this.tryEntries[i];if(entry.finallyLoc===finallyLoc)return this.complete(entry.completion,entry.afterLoc),resetTryEntry(entry),ContinueSentinel}},catch:function _catch(tryLoc){for(var i=this.tryEntries.length-1;i>=0;--i){var entry=this.tryEntries[i];if(entry.tryLoc===tryLoc){var record=entry.completion;if("throw"===record.type){var thrown=record.arg;resetTryEntry(entry)}return thrown}}throw new Error("illegal catch attempt")},delegateYield:function delegateYield(iterable,resultName,nextLoc){return this.delegate={iterator:values(iterable),resultName,nextLoc},"next"===this.method&&(this.arg=void 0),ContinueSentinel}},exports}function asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg),value=info.value}catch(error){return void reject(error)}info.done?resolve(value):Promise.resolve(value).then(_next,_throw)}function _asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise((function(resolve,reject){var gen=fn.apply(self,args);function _next(value){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(void 0)}))}}function _taggedTemplateLiteralLoose(strings,raw){return raw||(raw=strings.slice(0)),strings.raw=raw,strings}const __WEBPACK_DEFAULT_EXPORT__={parameters:{storySource:{source:'import { Meta, Story } from "@storybook/web-components";\nimport { html } from "lit-html";\nimport "../packages/nightingale-interpro-track/src/index.ts";\n\nimport data from "../packages/nightingale-interpro-track/tests/mockData/interpro-IPR016039.json";\nimport contributors from "../packages/nightingale-interpro-track/tests/mockData/interpro-contributors.json";\nimport residues from "../packages/nightingale-interpro-track/tests/mockData/interpro-residues.json";\n\nexport default {\n  title: "Nightingale/NightingaleInterProTrack",\n} as Meta;\n\nconst Template: Story<{\n  width: number;\n  height: number;\n  length: number;\n  "display-start": number;\n  "display-end": number;\n  highlight: string;\n  layout: "non-overlapping" | "default";\n}> = (args) => {\n  const { width, height, length, highlight, layout } = args;\n  return html`<nightingale-interpro-track\n    id="track"\n    width="${width}"\n    height=${height}\n    length="${length}"\n    display-start=${args["display-start"]}\n    display-end=${args["display-end"]}\n    highlight=${highlight}\n    layout=${layout}\n  ></nightingale-interpro-track>`;\n};\n\nexport const Track = Template.bind({});\nTrack.args = {\n  width: 500,\n  height: 50,\n  length: 100,\n  "display-start": 1,\n  "display-end": 50,\n  highlight: "23:45",\n  layout: "default",\n};\nTrack.play = async () => {\n  await customElements.whenDefined("nightingale-interpro-track");\n  const track = document.getElementById("track");\n  if (track) (track as any).data = data;\n};\n\nexport const SimpleTrackNoControls = () => html`\n  <h3>Entry</h3>\n  <nightingale-interpro-track\n    id="track1"\n    width="600"\n    length="390"\n    displaystart="1"\n    displayend="390"\n    highlight="20:50,40:80"\n    shape="roundRectangle"\n  ></nightingale-interpro-track>\n`;\nSimpleTrackNoControls.play = async () => {\n  await customElements.whenDefined("nightingale-interpro-track");\n  const track1 = document.getElementById("track1");\n  if (track1) {\n    (track1 as any).data = data;\n  }\n};\nexport const TrackAndContributorsNoControls = () => html`\n  <h3>Entry + contributors</h3>\n  <nightingale-interpro-track\n    id="track2"\n    width="600"\n    length="390"\n    display-start="1"\n    display-end="390"\n    highlight="20:50,40:80"\n    shape="roundRectangle"\n    expanded\n  ></nightingale-interpro-track>\n`;\nTrackAndContributorsNoControls.play = async () => {\n  await customElements.whenDefined("nightingale-interpro-track");\n  const track2 = document.getElementById("track2");\n  if (track2) {\n    (track2 as any).data = data;\n    (track2 as any).contributors = contributors;\n  }\n};\nexport const TrackWithResiduesNoControls = () => html`\n  <h3>Entry + residues</h3>\n  <nightingale-interpro-track\n    id="track3"\n    width="600"\n    length="390"\n    display-start="1"\n    display-end="390"\n    highlight="20:50,40:80"\n    shape="roundRectangle"\n    expanded\n  ></nightingale-interpro-track>\n`;\nTrackWithResiduesNoControls.play = async () => {\n  await customElements.whenDefined("nightingale-interpro-track");\n  const track3 = document.getElementById("track3");\n  if (track3) {\n    const dataCopy: Array<Record<string, unknown>> = data.map(\n      ({ ...rest }) => ({ ...rest })\n    );\n    dataCopy[0].residues = residues;\n\n    (track3 as any).data = dataCopy;\n  }\n};\nexport const TrackWithContributorsAndResiduesNoControls = () => html`\n  <h3>Entry + contributors + residues</h3>\n  <nightingale-interpro-track\n    id="track4"\n    width="600"\n    length="390"\n    display-start="1"\n    display-end="390"\n    highlight="20:50,40:80"\n    shape="roundRectangle"\n    expanded\n  ></nightingale-interpro-track>\n`;\nTrackWithContributorsAndResiduesNoControls.play = async () => {\n  await customElements.whenDefined("nightingale-interpro-track");\n  const track4 = document.getElementById("track4");\n  if (track4) {\n    const contributorsCopy: Array<Record<string, unknown>> = contributors.map(\n      ({ ...rest }) => ({ ...rest })\n    );\n    contributorsCopy[0].residues = residues;\n\n    (track4 as any).data = data;\n    (track4 as any).contributors = contributorsCopy;\n  }\n};\n',locationsMap:{track:{startLoc:{col:5,line:21},endLoc:{col:1,line:33},startBody:{col:5,line:21},endBody:{col:1,line:33}},"simple-track-no-controls":{startLoc:{col:37,line:51},endLoc:{col:1,line:62},startBody:{col:37,line:51},endBody:{col:1,line:62}},"track-and-contributors-no-controls":{startLoc:{col:46,line:70},endLoc:{col:1,line:82},startBody:{col:46,line:70},endBody:{col:1,line:82}},"track-with-residues-no-controls":{startLoc:{col:43,line:91},endLoc:{col:1,line:103},startBody:{col:43,line:91},endBody:{col:1,line:103}},"track-with-contributors-and-residues-no-controls":{startLoc:{col:58,line:116},endLoc:{col:1,line:128},startBody:{col:58,line:116},endBody:{col:1,line:128}}}}},title:"Nightingale/NightingaleInterProTrack"};var Track=function Template(args){var width=args.width,height=args.height,length=args.length,highlight=args.highlight,layout=args.layout;return(0,lit_html__WEBPACK_IMPORTED_MODULE_24__.dy)(_templateObject||(_templateObject=_taggedTemplateLiteralLoose(['<nightingale-interpro-track\n    id="track"\n    width="','"\n    height=','\n    length="','"\n    display-start=',"\n    display-end=","\n    highlight=","\n    layout=","\n  ></nightingale-interpro-track>"])),width,height,length,args["display-start"],args["display-end"],highlight,layout)}.bind({});Track.args={width:500,height:50,length:100,"display-start":1,"display-end":50,highlight:"23:45",layout:"default"},Track.play=_asyncToGenerator(_regeneratorRuntime().mark((function _callee(){var track;return _regeneratorRuntime().wrap((function _callee$(_context){for(;;)switch(_context.prev=_context.next){case 0:return _context.next=2,customElements.whenDefined("nightingale-interpro-track");case 2:(track=document.getElementById("track"))&&(track.data=_packages_nightingale_interpro_track_tests_mockData_interpro_IPR016039_json__WEBPACK_IMPORTED_MODULE_26__);case 4:case"end":return _context.stop()}}),_callee)})));var SimpleTrackNoControls=function SimpleTrackNoControls(){return(0,lit_html__WEBPACK_IMPORTED_MODULE_24__.dy)(_templateObject2||(_templateObject2=_taggedTemplateLiteralLoose(['\n  <h3>Entry</h3>\n  <nightingale-interpro-track\n    id="track1"\n    width="600"\n    length="390"\n    displaystart="1"\n    displayend="390"\n    highlight="20:50,40:80"\n    shape="roundRectangle"\n  ></nightingale-interpro-track>\n'])))};SimpleTrackNoControls.play=_asyncToGenerator(_regeneratorRuntime().mark((function _callee2(){var track1;return _regeneratorRuntime().wrap((function _callee2$(_context2){for(;;)switch(_context2.prev=_context2.next){case 0:return _context2.next=2,customElements.whenDefined("nightingale-interpro-track");case 2:(track1=document.getElementById("track1"))&&(track1.data=_packages_nightingale_interpro_track_tests_mockData_interpro_IPR016039_json__WEBPACK_IMPORTED_MODULE_26__);case 4:case"end":return _context2.stop()}}),_callee2)})));var TrackAndContributorsNoControls=function TrackAndContributorsNoControls(){return(0,lit_html__WEBPACK_IMPORTED_MODULE_24__.dy)(_templateObject3||(_templateObject3=_taggedTemplateLiteralLoose(['\n  <h3>Entry + contributors</h3>\n  <nightingale-interpro-track\n    id="track2"\n    width="600"\n    length="390"\n    display-start="1"\n    display-end="390"\n    highlight="20:50,40:80"\n    shape="roundRectangle"\n    expanded\n  ></nightingale-interpro-track>\n'])))};TrackAndContributorsNoControls.play=_asyncToGenerator(_regeneratorRuntime().mark((function _callee3(){var track2;return _regeneratorRuntime().wrap((function _callee3$(_context3){for(;;)switch(_context3.prev=_context3.next){case 0:return _context3.next=2,customElements.whenDefined("nightingale-interpro-track");case 2:(track2=document.getElementById("track2"))&&(track2.data=_packages_nightingale_interpro_track_tests_mockData_interpro_IPR016039_json__WEBPACK_IMPORTED_MODULE_26__,track2.contributors=_packages_nightingale_interpro_track_tests_mockData_interpro_contributors_json__WEBPACK_IMPORTED_MODULE_27__);case 4:case"end":return _context3.stop()}}),_callee3)})));var TrackWithResiduesNoControls=function TrackWithResiduesNoControls(){return(0,lit_html__WEBPACK_IMPORTED_MODULE_24__.dy)(_templateObject4||(_templateObject4=_taggedTemplateLiteralLoose(['\n  <h3>Entry + residues</h3>\n  <nightingale-interpro-track\n    id="track3"\n    width="600"\n    length="390"\n    display-start="1"\n    display-end="390"\n    highlight="20:50,40:80"\n    shape="roundRectangle"\n    expanded\n  ></nightingale-interpro-track>\n'])))};TrackWithResiduesNoControls.play=_asyncToGenerator(_regeneratorRuntime().mark((function _callee4(){var track3,dataCopy;return _regeneratorRuntime().wrap((function _callee4$(_context4){for(;;)switch(_context4.prev=_context4.next){case 0:return _context4.next=2,customElements.whenDefined("nightingale-interpro-track");case 2:(track3=document.getElementById("track3"))&&((dataCopy=_packages_nightingale_interpro_track_tests_mockData_interpro_IPR016039_json__WEBPACK_IMPORTED_MODULE_26__.map((function(_ref5){var rest=_extends({},_ref5);return Object.assign({},rest)})))[0].residues=_packages_nightingale_interpro_track_tests_mockData_interpro_residues_json__WEBPACK_IMPORTED_MODULE_28__,track3.data=dataCopy);case 4:case"end":return _context4.stop()}}),_callee4)})));var TrackWithContributorsAndResiduesNoControls=function TrackWithContributorsAndResiduesNoControls(){return(0,lit_html__WEBPACK_IMPORTED_MODULE_24__.dy)(_templateObject5||(_templateObject5=_taggedTemplateLiteralLoose(['\n  <h3>Entry + contributors + residues</h3>\n  <nightingale-interpro-track\n    id="track4"\n    width="600"\n    length="390"\n    display-start="1"\n    display-end="390"\n    highlight="20:50,40:80"\n    shape="roundRectangle"\n    expanded\n  ></nightingale-interpro-track>\n'])))};TrackWithContributorsAndResiduesNoControls.play=_asyncToGenerator(_regeneratorRuntime().mark((function _callee5(){var track4,contributorsCopy;return _regeneratorRuntime().wrap((function _callee5$(_context5){for(;;)switch(_context5.prev=_context5.next){case 0:return _context5.next=2,customElements.whenDefined("nightingale-interpro-track");case 2:(track4=document.getElementById("track4"))&&((contributorsCopy=_packages_nightingale_interpro_track_tests_mockData_interpro_contributors_json__WEBPACK_IMPORTED_MODULE_27__.map((function(_ref7){var rest=_extends({},_ref7);return Object.assign({},rest)})))[0].residues=_packages_nightingale_interpro_track_tests_mockData_interpro_residues_json__WEBPACK_IMPORTED_MODULE_28__,track4.data=_packages_nightingale_interpro_track_tests_mockData_interpro_IPR016039_json__WEBPACK_IMPORTED_MODULE_26__,track4.contributors=contributorsCopy);case 4:case"end":return _context5.stop()}}),_callee5)}))),Track.parameters=Object.assign({storySource:{source:'(args) => {\n  const { width, height, length, highlight, layout } = args;\n  return html`<nightingale-interpro-track\n    id="track"\n    width="${width}"\n    height=${height}\n    length="${length}"\n    display-start=${args["display-start"]}\n    display-end=${args["display-end"]}\n    highlight=${highlight}\n    layout=${layout}\n  ></nightingale-interpro-track>`;\n}'}},Track.parameters),SimpleTrackNoControls.parameters=Object.assign({storySource:{source:'() => html`\n  <h3>Entry</h3>\n  <nightingale-interpro-track\n    id="track1"\n    width="600"\n    length="390"\n    displaystart="1"\n    displayend="390"\n    highlight="20:50,40:80"\n    shape="roundRectangle"\n  ></nightingale-interpro-track>\n`'}},SimpleTrackNoControls.parameters),TrackAndContributorsNoControls.parameters=Object.assign({storySource:{source:'() => html`\n  <h3>Entry + contributors</h3>\n  <nightingale-interpro-track\n    id="track2"\n    width="600"\n    length="390"\n    display-start="1"\n    display-end="390"\n    highlight="20:50,40:80"\n    shape="roundRectangle"\n    expanded\n  ></nightingale-interpro-track>\n`'}},TrackAndContributorsNoControls.parameters),TrackWithResiduesNoControls.parameters=Object.assign({storySource:{source:'() => html`\n  <h3>Entry + residues</h3>\n  <nightingale-interpro-track\n    id="track3"\n    width="600"\n    length="390"\n    display-start="1"\n    display-end="390"\n    highlight="20:50,40:80"\n    shape="roundRectangle"\n    expanded\n  ></nightingale-interpro-track>\n`'}},TrackWithResiduesNoControls.parameters),TrackWithContributorsAndResiduesNoControls.parameters=Object.assign({storySource:{source:'() => html`\n  <h3>Entry + contributors + residues</h3>\n  <nightingale-interpro-track\n    id="track4"\n    width="600"\n    length="390"\n    display-start="1"\n    display-end="390"\n    highlight="20:50,40:80"\n    shape="roundRectangle"\n    expanded\n  ></nightingale-interpro-track>\n`'}},TrackWithContributorsAndResiduesNoControls.parameters);var __namedExportsOrder=["Track","SimpleTrackNoControls","TrackAndContributorsNoControls","TrackWithResiduesNoControls","TrackWithContributorsAndResiduesNoControls"]},"./stories/NightingaleManager.stories.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{Manager:()=>Manager,__namedExportsOrder:()=>__namedExportsOrder,default:()=>NightingaleManager_stories});__webpack_require__("./node_modules/core-js/modules/es.array.slice.js"),__webpack_require__("./node_modules/core-js/modules/es.symbol.js"),__webpack_require__("./node_modules/core-js/modules/es.symbol.description.js"),__webpack_require__("./node_modules/core-js/modules/es.symbol.iterator.js"),__webpack_require__("./node_modules/core-js/modules/es.string.iterator.js"),__webpack_require__("./node_modules/core-js/modules/es.array.iterator.js"),__webpack_require__("./node_modules/core-js/modules/web.dom-collections.iterator.js"),__webpack_require__("./node_modules/core-js/modules/es.symbol.async-iterator.js"),__webpack_require__("./node_modules/core-js/modules/es.symbol.to-string-tag.js"),__webpack_require__("./node_modules/core-js/modules/es.math.to-string-tag.js"),__webpack_require__("./node_modules/core-js/modules/es.json.to-string-tag.js"),__webpack_require__("./node_modules/core-js/modules/es.object.define-property.js"),__webpack_require__("./node_modules/core-js/modules/es.object.create.js"),__webpack_require__("./node_modules/core-js/modules/es.object.get-prototype-of.js"),__webpack_require__("./node_modules/core-js/modules/es.array.for-each.js"),__webpack_require__("./node_modules/core-js/modules/web.dom-collections.for-each.js"),__webpack_require__("./node_modules/core-js/modules/es.function.name.js"),__webpack_require__("./node_modules/core-js/modules/es.object.set-prototype-of.js"),__webpack_require__("./node_modules/core-js/modules/es.array.reverse.js"),__webpack_require__("./node_modules/core-js/modules/es.function.bind.js"),__webpack_require__("./node_modules/core-js/modules/es.promise.js"),__webpack_require__("./node_modules/core-js/modules/es.object.to-string.js"),__webpack_require__("./node_modules/core-js/modules/es.object.assign.js");var NightingaleManager_1,lit_html=__webpack_require__("./node_modules/lit-html/lit-html.js"),tslib_es6=(__webpack_require__("./packages/nightingale-navigation/src/index.ts"),__webpack_require__("./node_modules/core-js/modules/es.map.js"),__webpack_require__("./node_modules/core-js/modules/es.set.js"),__webpack_require__("./node_modules/core-js/modules/es.array.includes.js"),__webpack_require__("./node_modules/core-js/modules/es.string.includes.js"),__webpack_require__("./node_modules/core-js/modules/es.object.keys.js"),__webpack_require__("./node_modules/core-js/modules/es.string.split.js"),__webpack_require__("./node_modules/core-js/modules/es.regexp.exec.js"),__webpack_require__("./node_modules/core-js/modules/es.array.index-of.js"),__webpack_require__("./node_modules/core-js/modules/es.array.map.js"),__webpack_require__("./node_modules/core-js/modules/es.array.filter.js"),__webpack_require__("./node_modules/core-js/modules/es.array.join.js"),__webpack_require__("./node_modules/core-js/modules/es.number.constructor.js"),__webpack_require__("./node_modules/core-js/modules/es.reflect.construct.js"),__webpack_require__("./node_modules/core-js/modules/es.reflect.get.js"),__webpack_require__("./node_modules/core-js/modules/es.object.get-own-property-descriptor.js"),__webpack_require__("./node_modules/core-js/modules/es.array.is-array.js"),__webpack_require__("./node_modules/core-js/modules/es.array.from.js"),__webpack_require__("./node_modules/tslib/tslib.es6.js")),decorators=__webpack_require__("./node_modules/lit/decorators.js"),nightingale_new_core_src=__webpack_require__("./packages/nightingale-new-core/src/index.ts");function _toConsumableArray(arr){return function _arrayWithoutHoles(arr){if(Array.isArray(arr))return _arrayLikeToArray(arr)}(arr)||function _iterableToArray(iter){if("undefined"!=typeof Symbol&&null!=iter[Symbol.iterator]||null!=iter["@@iterator"])return Array.from(iter)}(arr)||function _unsupportedIterableToArray(o,minLen){if(!o)return;if("string"==typeof o)return _arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);"Object"===n&&o.constructor&&(n=o.constructor.name);if("Map"===n||"Set"===n)return Array.from(o);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return _arrayLikeToArray(o,minLen)}(arr)||function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _arrayLikeToArray(arr,len){(null==len||len>arr.length)&&(len=arr.length);for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}function _get(){return _get="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function _get(target,property,receiver){var base=_superPropBase(target,property);if(base){var desc=Object.getOwnPropertyDescriptor(base,property);return desc.get?desc.get.call(arguments.length<3?target:receiver):desc.value}},_get.apply(this,arguments)}function _superPropBase(object,property){for(;!Object.prototype.hasOwnProperty.call(object,property)&&null!==(object=_getPrototypeOf(object)););return object}function _setPrototypeOf(o,p){return _setPrototypeOf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function _setPrototypeOf(o,p){return o.__proto__=p,o},_setPrototypeOf(o,p)}function _createSuper(Derived){var hasNativeReflectConstruct=function _isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function _createSuperInternal(){var result,Super=_getPrototypeOf(Derived);if(hasNativeReflectConstruct){var NewTarget=_getPrototypeOf(this).constructor;result=Reflect.construct(Super,arguments,NewTarget)}else result=Super.apply(this,arguments);return _possibleConstructorReturn(this,result)}}function _possibleConstructorReturn(self,call){if(call&&("object"==typeof call||"function"==typeof call))return call;if(void 0!==call)throw new TypeError("Derived constructors may only return object or undefined");return function _assertThisInitialized(self){if(void 0===self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return self}(self)}function _getPrototypeOf(o){return _getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)},_getPrototypeOf(o)}var nightingale_manager_NightingaleManager=NightingaleManager_1=function(_NightingaleElement){!function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function");subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:!0,configurable:!0}}),Object.defineProperty(subClass,"prototype",{writable:!1}),superClass&&_setPrototypeOf(subClass,superClass)}(NightingaleManager,_NightingaleElement);var _super=_createSuper(NightingaleManager);function NightingaleManager(){var _this;return _classCallCheck(this,NightingaleManager),(_this=_super.apply(this,arguments))["reflected-attributes"]=new Map,_this.protvistaElements=new Set,_this.propertyValues=new Map,_this}return function _createClass(Constructor,protoProps,staticProps){return protoProps&&_defineProperties(Constructor.prototype,protoProps),staticProps&&_defineProperties(Constructor,staticProps),Object.defineProperty(Constructor,"prototype",{writable:!1}),Constructor}(NightingaleManager,[{key:"connectedCallback",value:function connectedCallback(){_get(_getPrototypeOf(NightingaleManager.prototype),"connectedCallback",this).call(this),this.addEventListener("change",this.changeListener)}},{key:"attributeChangedCallback",value:function attributeChangedCallback(attr,previousValue,newValue){_get(_getPrototypeOf(NightingaleManager.prototype),"attributeChangedCallback",this).call(this,attr,previousValue,newValue),this.applyAttributes()}},{key:"applyAttributes",value:function applyAttributes(){var _this2=this;this.protvistaElements.forEach((function(element){var _a;null===(_a=_this2["reflected-attributes"])||void 0===_a||_a.forEach((function(value,type){!1===value||null==value?element.removeAttribute(type):element.setAttribute(type,"boolean"==typeof value?"":value)})),_this2.length&&element.setAttribute("length",""+_this2.length),_this2["display-end"]&&element.setAttribute("display-end",""+_this2["display-end"]),_this2["display-start"]&&element.setAttribute("display-start",""+_this2["display-start"]),_this2.highlight&&element.setAttribute("highlight",_this2.highlight)}))}},{key:"register",value:function register(element){this.protvistaElements.add(element),this.applyAttributes()}},{key:"unregister",value:function unregister(element){this.protvistaElements.delete(element)}},{key:"applyProperties",value:function applyProperties(forElementId){var _this3=this;if(forElementId){var element=this.querySelector("#"+forElementId);if(!element)return;this.propertyValues.forEach((function(value,type){element[type]=value}))}else this.protvistaElements.forEach((function(element){element&&_this3.propertyValues.forEach((function(value,type){element[type]=value}))}))}},{key:"isRegisteredAttribute",value:function isRegisteredAttribute(attributeName){return!!this["reflected-attributes"]&&(_toConsumableArray(this["reflected-attributes"].keys()).includes(attributeName)||NightingaleManager_1.observedAttributes.includes(attributeName))}},{key:"changeListener",value:function changeListener(e){var _a,_this4=this;if(e.detail)if("property"===e.detail.handler)this.propertyValues.set(e.detail.type,e.detail.value),this.applyProperties(e.detail.for);else this.isRegisteredAttribute(e.detail.type)&&(null===(_a=this["reflected-attributes"])||void 0===_a||_a.set(e.detail.type,e.detail.value)),Object.keys(e.detail).forEach((function(key){var _a;_this4.isRegisteredAttribute(key)&&(null===(_a=_this4["reflected-attributes"])||void 0===_a||_a.set(key,e.detail[key]))})),this.applyAttributes()}}]),NightingaleManager}(nightingale_new_core_src.ZP);(0,tslib_es6.gn)([(0,decorators.Cb)({converter:{fromAttribute:function fromAttribute(value){if(!value)return null;var attributes=value.split(",");if(-1!==attributes.indexOf("type"))throw new Error("'type' can't be used as a protvista attribute");if(-1!==attributes.indexOf("value"))throw new Error("'value' can't be used as a protvista attribute");return new Map(attributes.filter((function(attr){return!NightingaleManager_1.observedAttributes.includes(attr)})).map((function(attr){return[attr,null]})))},toAttribute:function toAttribute(value){return value.join(",")}}})],nightingale_manager_NightingaleManager.prototype,"reflected-attributes",void 0),(0,tslib_es6.gn)([(0,decorators.Cb)({type:Number})],nightingale_manager_NightingaleManager.prototype,"length",void 0),(0,tslib_es6.gn)([(0,decorators.Cb)({type:Number})],nightingale_manager_NightingaleManager.prototype,"display-start",void 0),(0,tslib_es6.gn)([(0,decorators.Cb)({type:Number})],nightingale_manager_NightingaleManager.prototype,"display-end",void 0),(0,tslib_es6.gn)([(0,decorators.Cb)({type:String})],nightingale_manager_NightingaleManager.prototype,"highlight",void 0),(0,tslib_es6.gn)([(0,decorators.SB)()],nightingale_manager_NightingaleManager.prototype,"protvistaElements",void 0),(0,tslib_es6.gn)([(0,decorators.SB)()],nightingale_manager_NightingaleManager.prototype,"propertyValues",void 0),nightingale_manager_NightingaleManager=NightingaleManager_1=(0,tslib_es6.gn)([(0,decorators.Mo)("nightingale-manager")],nightingale_manager_NightingaleManager);__webpack_require__("./packages/nightingale-track/src/index.ts"),__webpack_require__("./packages/nightingale-interpro-track/src/index.ts");var _templateObject,interpro_IPR016039=__webpack_require__("./packages/nightingale-interpro-track/tests/mockData/interpro-IPR016039.json"),interpro_contributors=__webpack_require__("./packages/nightingale-interpro-track/tests/mockData/interpro-contributors.json"),interpro_residues=__webpack_require__("./packages/nightingale-interpro-track/tests/mockData/interpro-residues.json");function _regeneratorRuntime(){_regeneratorRuntime=function _regeneratorRuntime(){return exports};var exports={},Op=Object.prototype,hasOwn=Op.hasOwnProperty,$Symbol="function"==typeof Symbol?Symbol:{},iteratorSymbol=$Symbol.iterator||"@@iterator",asyncIteratorSymbol=$Symbol.asyncIterator||"@@asyncIterator",toStringTagSymbol=$Symbol.toStringTag||"@@toStringTag";function define(obj,key,value){return Object.defineProperty(obj,key,{value,enumerable:!0,configurable:!0,writable:!0}),obj[key]}try{define({},"")}catch(err){define=function define(obj,key,value){return obj[key]=value}}function wrap(innerFn,outerFn,self,tryLocsList){var protoGenerator=outerFn&&outerFn.prototype instanceof Generator?outerFn:Generator,generator=Object.create(protoGenerator.prototype),context=new Context(tryLocsList||[]);return generator._invoke=function(innerFn,self,context){var state="suspendedStart";return function(method,arg){if("executing"===state)throw new Error("Generator is already running");if("completed"===state){if("throw"===method)throw arg;return doneResult()}for(context.method=method,context.arg=arg;;){var delegate=context.delegate;if(delegate){var delegateResult=maybeInvokeDelegate(delegate,context);if(delegateResult){if(delegateResult===ContinueSentinel)continue;return delegateResult}}if("next"===context.method)context.sent=context._sent=context.arg;else if("throw"===context.method){if("suspendedStart"===state)throw state="completed",context.arg;context.dispatchException(context.arg)}else"return"===context.method&&context.abrupt("return",context.arg);state="executing";var record=tryCatch(innerFn,self,context);if("normal"===record.type){if(state=context.done?"completed":"suspendedYield",record.arg===ContinueSentinel)continue;return{value:record.arg,done:context.done}}"throw"===record.type&&(state="completed",context.method="throw",context.arg=record.arg)}}}(innerFn,self,context),generator}function tryCatch(fn,obj,arg){try{return{type:"normal",arg:fn.call(obj,arg)}}catch(err){return{type:"throw",arg:err}}}exports.wrap=wrap;var ContinueSentinel={};function Generator(){}function GeneratorFunction(){}function GeneratorFunctionPrototype(){}var IteratorPrototype={};define(IteratorPrototype,iteratorSymbol,(function(){return this}));var getProto=Object.getPrototypeOf,NativeIteratorPrototype=getProto&&getProto(getProto(values([])));NativeIteratorPrototype&&NativeIteratorPrototype!==Op&&hasOwn.call(NativeIteratorPrototype,iteratorSymbol)&&(IteratorPrototype=NativeIteratorPrototype);var Gp=GeneratorFunctionPrototype.prototype=Generator.prototype=Object.create(IteratorPrototype);function defineIteratorMethods(prototype){["next","throw","return"].forEach((function(method){define(prototype,method,(function(arg){return this._invoke(method,arg)}))}))}function AsyncIterator(generator,PromiseImpl){function invoke(method,arg,resolve,reject){var record=tryCatch(generator[method],generator,arg);if("throw"!==record.type){var result=record.arg,value=result.value;return value&&"object"==typeof value&&hasOwn.call(value,"__await")?PromiseImpl.resolve(value.__await).then((function(value){invoke("next",value,resolve,reject)}),(function(err){invoke("throw",err,resolve,reject)})):PromiseImpl.resolve(value).then((function(unwrapped){result.value=unwrapped,resolve(result)}),(function(error){return invoke("throw",error,resolve,reject)}))}reject(record.arg)}var previousPromise;this._invoke=function(method,arg){function callInvokeWithMethodAndArg(){return new PromiseImpl((function(resolve,reject){invoke(method,arg,resolve,reject)}))}return previousPromise=previousPromise?previousPromise.then(callInvokeWithMethodAndArg,callInvokeWithMethodAndArg):callInvokeWithMethodAndArg()}}function maybeInvokeDelegate(delegate,context){var method=delegate.iterator[context.method];if(void 0===method){if(context.delegate=null,"throw"===context.method){if(delegate.iterator.return&&(context.method="return",context.arg=void 0,maybeInvokeDelegate(delegate,context),"throw"===context.method))return ContinueSentinel;context.method="throw",context.arg=new TypeError("The iterator does not provide a 'throw' method")}return ContinueSentinel}var record=tryCatch(method,delegate.iterator,context.arg);if("throw"===record.type)return context.method="throw",context.arg=record.arg,context.delegate=null,ContinueSentinel;var info=record.arg;return info?info.done?(context[delegate.resultName]=info.value,context.next=delegate.nextLoc,"return"!==context.method&&(context.method="next",context.arg=void 0),context.delegate=null,ContinueSentinel):info:(context.method="throw",context.arg=new TypeError("iterator result is not an object"),context.delegate=null,ContinueSentinel)}function pushTryEntry(locs){var entry={tryLoc:locs[0]};1 in locs&&(entry.catchLoc=locs[1]),2 in locs&&(entry.finallyLoc=locs[2],entry.afterLoc=locs[3]),this.tryEntries.push(entry)}function resetTryEntry(entry){var record=entry.completion||{};record.type="normal",delete record.arg,entry.completion=record}function Context(tryLocsList){this.tryEntries=[{tryLoc:"root"}],tryLocsList.forEach(pushTryEntry,this),this.reset(!0)}function values(iterable){if(iterable){var iteratorMethod=iterable[iteratorSymbol];if(iteratorMethod)return iteratorMethod.call(iterable);if("function"==typeof iterable.next)return iterable;if(!isNaN(iterable.length)){var i=-1,next=function next(){for(;++i<iterable.length;)if(hasOwn.call(iterable,i))return next.value=iterable[i],next.done=!1,next;return next.value=void 0,next.done=!0,next};return next.next=next}}return{next:doneResult}}function doneResult(){return{value:void 0,done:!0}}return GeneratorFunction.prototype=GeneratorFunctionPrototype,define(Gp,"constructor",GeneratorFunctionPrototype),define(GeneratorFunctionPrototype,"constructor",GeneratorFunction),GeneratorFunction.displayName=define(GeneratorFunctionPrototype,toStringTagSymbol,"GeneratorFunction"),exports.isGeneratorFunction=function(genFun){var ctor="function"==typeof genFun&&genFun.constructor;return!!ctor&&(ctor===GeneratorFunction||"GeneratorFunction"===(ctor.displayName||ctor.name))},exports.mark=function(genFun){return Object.setPrototypeOf?Object.setPrototypeOf(genFun,GeneratorFunctionPrototype):(genFun.__proto__=GeneratorFunctionPrototype,define(genFun,toStringTagSymbol,"GeneratorFunction")),genFun.prototype=Object.create(Gp),genFun},exports.awrap=function(arg){return{__await:arg}},defineIteratorMethods(AsyncIterator.prototype),define(AsyncIterator.prototype,asyncIteratorSymbol,(function(){return this})),exports.AsyncIterator=AsyncIterator,exports.async=function(innerFn,outerFn,self,tryLocsList,PromiseImpl){void 0===PromiseImpl&&(PromiseImpl=Promise);var iter=new AsyncIterator(wrap(innerFn,outerFn,self,tryLocsList),PromiseImpl);return exports.isGeneratorFunction(outerFn)?iter:iter.next().then((function(result){return result.done?result.value:iter.next()}))},defineIteratorMethods(Gp),define(Gp,toStringTagSymbol,"Generator"),define(Gp,iteratorSymbol,(function(){return this})),define(Gp,"toString",(function(){return"[object Generator]"})),exports.keys=function(object){var keys=[];for(var key in object)keys.push(key);return keys.reverse(),function next(){for(;keys.length;){var key=keys.pop();if(key in object)return next.value=key,next.done=!1,next}return next.done=!0,next}},exports.values=values,Context.prototype={constructor:Context,reset:function reset(skipTempReset){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(resetTryEntry),!skipTempReset)for(var name in this)"t"===name.charAt(0)&&hasOwn.call(this,name)&&!isNaN(+name.slice(1))&&(this[name]=void 0)},stop:function stop(){this.done=!0;var rootRecord=this.tryEntries[0].completion;if("throw"===rootRecord.type)throw rootRecord.arg;return this.rval},dispatchException:function dispatchException(exception){if(this.done)throw exception;var context=this;function handle(loc,caught){return record.type="throw",record.arg=exception,context.next=loc,caught&&(context.method="next",context.arg=void 0),!!caught}for(var i=this.tryEntries.length-1;i>=0;--i){var entry=this.tryEntries[i],record=entry.completion;if("root"===entry.tryLoc)return handle("end");if(entry.tryLoc<=this.prev){var hasCatch=hasOwn.call(entry,"catchLoc"),hasFinally=hasOwn.call(entry,"finallyLoc");if(hasCatch&&hasFinally){if(this.prev<entry.catchLoc)return handle(entry.catchLoc,!0);if(this.prev<entry.finallyLoc)return handle(entry.finallyLoc)}else if(hasCatch){if(this.prev<entry.catchLoc)return handle(entry.catchLoc,!0)}else{if(!hasFinally)throw new Error("try statement without catch or finally");if(this.prev<entry.finallyLoc)return handle(entry.finallyLoc)}}}},abrupt:function abrupt(type,arg){for(var i=this.tryEntries.length-1;i>=0;--i){var entry=this.tryEntries[i];if(entry.tryLoc<=this.prev&&hasOwn.call(entry,"finallyLoc")&&this.prev<entry.finallyLoc){var finallyEntry=entry;break}}finallyEntry&&("break"===type||"continue"===type)&&finallyEntry.tryLoc<=arg&&arg<=finallyEntry.finallyLoc&&(finallyEntry=null);var record=finallyEntry?finallyEntry.completion:{};return record.type=type,record.arg=arg,finallyEntry?(this.method="next",this.next=finallyEntry.finallyLoc,ContinueSentinel):this.complete(record)},complete:function complete(record,afterLoc){if("throw"===record.type)throw record.arg;return"break"===record.type||"continue"===record.type?this.next=record.arg:"return"===record.type?(this.rval=this.arg=record.arg,this.method="return",this.next="end"):"normal"===record.type&&afterLoc&&(this.next=afterLoc),ContinueSentinel},finish:function finish(finallyLoc){for(var i=this.tryEntries.length-1;i>=0;--i){var entry=this.tryEntries[i];if(entry.finallyLoc===finallyLoc)return this.complete(entry.completion,entry.afterLoc),resetTryEntry(entry),ContinueSentinel}},catch:function _catch(tryLoc){for(var i=this.tryEntries.length-1;i>=0;--i){var entry=this.tryEntries[i];if(entry.tryLoc===tryLoc){var record=entry.completion;if("throw"===record.type){var thrown=record.arg;resetTryEntry(entry)}return thrown}}throw new Error("illegal catch attempt")},delegateYield:function delegateYield(iterable,resultName,nextLoc){return this.delegate={iterator:values(iterable),resultName,nextLoc},"next"===this.method&&(this.arg=void 0),ContinueSentinel}},exports}function asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg),value=info.value}catch(error){return void reject(error)}info.done?resolve(value):Promise.resolve(value).then(_next,_throw)}function _asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise((function(resolve,reject){var gen=fn.apply(self,args);function _next(value){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(void 0)}))}}const NightingaleManager_stories={parameters:{storySource:{source:'import { Meta, Story } from "@storybook/web-components";\nimport { html } from "lit-html";\nimport "../packages/nightingale-navigation/src/index.ts";\nimport "../packages/nightingale-manager/src/index.ts";\nimport "../packages/nightingale-track/src/index.ts";\nimport "../packages/nightingale-interpro-track/src/index.ts";\n\nimport iproData from "../packages/nightingale-interpro-track/tests/mockData/interpro-IPR016039.json";\nimport contributors from "../packages/nightingale-interpro-track/tests/mockData/interpro-contributors.json";\nimport residues from "../packages/nightingale-interpro-track/tests/mockData/interpro-residues.json";\n\nexport default {\n  title: "Nightingale/NightingaleManager",\n} as Meta;\n\nconst defaultSequence =\n  "iubcbcIUENACBPAOUBCASFUBRUABBRWOAUVBISVBAISBVDOASViubcbcIUENACBPAOUBCASFUBRUABBRWOAUVBISVBAISBVDOASViubcbcIUENACBPAOUBBCASFUBRUABBRWOAUVBISVBAISBVDOASViubcbcIUENACBPAOUBCCASFUBRUABBRWOAUVBISVBAISBVDOASViubcbcIUENACBPAOUBBCASFUBRUABBRWOAUVBISVBAISBVDOASViubcbcIUENACBPAOUBCASFUBRUABBRWOAUVBISVBAISBVDOASViubcbcIUENACBPAOUBCASFUBRUABBRWOAUVBISVBAISBVDOASViubcbcIUENACBPAOUBCASFUBRUABBRWOAUVBISVBAISBVDOASVCASFU";\nconst defaultData = [\n  {\n    accession: "feature1",\n    start: 1,\n    end: 2,\n    color: "blue",\n  },\n  {\n    accession: "feature1",\n    start: 49,\n    end: 50,\n    color: "red",\n  },\n  {\n    accession: "feature1",\n    start: 10,\n    end: 20,\n    color: "#342ea2",\n  },\n  {\n    accession: "feature2",\n    locations: [{ fragments: [{ start: 30, end: 45 }] }],\n    color: "#A42ea2",\n  },\n  {\n    accession: "feature3",\n    locations: [\n      {\n        fragments: [{ start: 15, end: 15 }],\n      },\n      { fragments: [{ start: 18, end: 18 }] },\n    ],\n    color: "#A4Aea2",\n  },\n  {\n    accession: "feature4",\n    locations: [\n      {\n        fragments: [\n          { start: 20, end: 23 },\n          { start: 26, end: 32 },\n        ],\n      },\n    ],\n  },\n];\n\nconst Template: Story<{\n  width: number;\n  height: number;\n  length: number;\n  "display-start": number;\n  "display-end": number;\n  highlight: string;\n  sequence: string;\n  "highlight-color": string;\n  "margin-color": string;\n}> = (args) => {\n  const { width, height, length, sequence } = args;\n  return html`\n    <nightingale-manager>\n      <div style="line-height: 0">\n        <nightingale-navigation\n          id="navigation"\n          width="${width}"\n          height=${height}\n          length="${length}"\n          display-start="${args["display-start"]}"\n          display-end="${args["display-end"]}"\n          highlight-color=${args["highlight-color"]}\n          margin-color=${args["margin-color"]}\n          show-highlight\n        >\n        </nightingale-navigation>\n      </div>\n      <div style="line-height: 0">\n        <nightingale-sequence\n          id="sequence"\n          sequence=${sequence}\n          width="${width}"\n          height=${height}\n          length="${length}"\n          display-start="${args["display-start"]}"\n          display-end="${args["display-end"]}"\n          highlight-event="onmouseover"\n          highlight-color=${args["highlight-color"]}\n          margin-color=${args["margin-color"]}\n        >\n        </nightingale-sequence>\n      </div>\n      <div style="line-height: 0">\n        <nightingale-track\n          id="track"\n          width="${width}"\n          height=${height}\n          length="${length}"\n          display-start="${args["display-start"]}"\n          display-end="${args["display-end"]}"\n          highlight-event="onmouseover"\n          highlight-color=${args["highlight-color"]}\n          margin-color=${args["margin-color"]}\n        >\n        </nightingale-track>\n      </div>\n      <div style="line-height: 0">\n        <nightingale-track\n          id="track2"\n          width="${width}"\n          height=${height}\n          length="${length}"\n          display-start="${args["display-start"]}"\n          display-end="${args["display-end"]}"\n          highlight-event="onmouseover"\n          highlight-color=${args["highlight-color"]}\n          margin-color=${args["margin-color"]}\n          layout="non-overlapping"\n        >\n        </nightingale-track>\n      </div>\n      <div style="line-height: 0">\n        <nightingale-interpro-track\n          id="trackIpro"\n          width="${width}"\n          height=${height}\n          length="${length}"\n          display-start="${args["display-start"]}"\n          display-end="${args["display-end"]}"\n          highlight-event="onmouseover"\n          highlight-color=${args["highlight-color"]}\n          margin-color=${args["margin-color"]}\n          shape="roundRectangle"\n          expanded\n        >\n        </nightingale-interpro-track>\n      </div>\n    </nightingale-manager>\n  `;\n};\n\nexport const Manager = Template.bind({});\nManager.args = {\n  width: 800,\n  height: 50,\n  length: defaultSequence.length,\n  sequence: defaultSequence,\n  "display-start": 10,\n  "display-end": 80,\n  "highlight-color": "#EB3BFF22",\n  "margin-color": "transparent",\n};\nManager.play = async () => {\n  await customElements.whenDefined("nightingale-sequence");\n  const sequence = document.getElementById("sequence");\n  if (sequence) (sequence as any).fixedHighlight = "10:20";\n\n  await customElements.whenDefined("nightingale-navigation");\n  const nav = document.getElementById("navigation");\n  if (nav) (nav as any).fixedHighlight = "10:20";\n  await customElements.whenDefined("nightingale-track");\n  const track = document.getElementById("track");\n  if (track) {\n    (track as any).fixedHighlight = "10:20";\n    (track as any).data = defaultData;\n  }\n  const track2 = document.getElementById("track2");\n  if (track2) {\n    (track2 as any).fixedHighlight = "10:20";\n    (track2 as any).data = defaultData;\n  }\n  const trackIpro = document.getElementById("trackIpro");\n  if (trackIpro) {\n    (trackIpro as any).fixedHighlight = "10:20";\n    (trackIpro as any).data = iproData;\n    (contributors[0] as any).residues = residues;\n    (trackIpro as any).contributors = contributors;\n  }\n};\n',locationsMap:{manager:{startLoc:{col:5,line:75},endLoc:{col:1,line:155},startBody:{col:5,line:75},endBody:{col:1,line:155}}}}},title:"Nightingale/NightingaleManager"};var defaultSequence="iubcbcIUENACBPAOUBCASFUBRUABBRWOAUVBISVBAISBVDOASViubcbcIUENACBPAOUBCASFUBRUABBRWOAUVBISVBAISBVDOASViubcbcIUENACBPAOUBBCASFUBRUABBRWOAUVBISVBAISBVDOASViubcbcIUENACBPAOUBCCASFUBRUABBRWOAUVBISVBAISBVDOASViubcbcIUENACBPAOUBBCASFUBRUABBRWOAUVBISVBAISBVDOASViubcbcIUENACBPAOUBCASFUBRUABBRWOAUVBISVBAISBVDOASViubcbcIUENACBPAOUBCASFUBRUABBRWOAUVBISVBAISBVDOASViubcbcIUENACBPAOUBCASFUBRUABBRWOAUVBISVBAISBVDOASVCASFU",defaultData=[{accession:"feature1",start:1,end:2,color:"blue"},{accession:"feature1",start:49,end:50,color:"red"},{accession:"feature1",start:10,end:20,color:"#342ea2"},{accession:"feature2",locations:[{fragments:[{start:30,end:45}]}],color:"#A42ea2"},{accession:"feature3",locations:[{fragments:[{start:15,end:15}]},{fragments:[{start:18,end:18}]}],color:"#A4Aea2"},{accession:"feature4",locations:[{fragments:[{start:20,end:23},{start:26,end:32}]}]}],Manager=function Template(args){var width=args.width,height=args.height,length=args.length,sequence=args.sequence;return(0,lit_html.dy)(_templateObject||(_templateObject=function _taggedTemplateLiteralLoose(strings,raw){return raw||(raw=strings.slice(0)),strings.raw=raw,strings}(['\n    <nightingale-manager>\n      <div style="line-height: 0">\n        <nightingale-navigation\n          id="navigation"\n          width="','"\n          height=','\n          length="','"\n          display-start="','"\n          display-end="','"\n          highlight-color=',"\n          margin-color=",'\n          show-highlight\n        >\n        </nightingale-navigation>\n      </div>\n      <div style="line-height: 0">\n        <nightingale-sequence\n          id="sequence"\n          sequence=','\n          width="','"\n          height=','\n          length="','"\n          display-start="','"\n          display-end="','"\n          highlight-event="onmouseover"\n          highlight-color=',"\n          margin-color=",'\n        >\n        </nightingale-sequence>\n      </div>\n      <div style="line-height: 0">\n        <nightingale-track\n          id="track"\n          width="','"\n          height=','\n          length="','"\n          display-start="','"\n          display-end="','"\n          highlight-event="onmouseover"\n          highlight-color=',"\n          margin-color=",'\n        >\n        </nightingale-track>\n      </div>\n      <div style="line-height: 0">\n        <nightingale-track\n          id="track2"\n          width="','"\n          height=','\n          length="','"\n          display-start="','"\n          display-end="','"\n          highlight-event="onmouseover"\n          highlight-color=',"\n          margin-color=",'\n          layout="non-overlapping"\n        >\n        </nightingale-track>\n      </div>\n      <div style="line-height: 0">\n        <nightingale-interpro-track\n          id="trackIpro"\n          width="','"\n          height=','\n          length="','"\n          display-start="','"\n          display-end="','"\n          highlight-event="onmouseover"\n          highlight-color=',"\n          margin-color=",'\n          shape="roundRectangle"\n          expanded\n        >\n        </nightingale-interpro-track>\n      </div>\n    </nightingale-manager>\n  '])),width,height,length,args["display-start"],args["display-end"],args["highlight-color"],args["margin-color"],sequence,width,height,length,args["display-start"],args["display-end"],args["highlight-color"],args["margin-color"],width,height,length,args["display-start"],args["display-end"],args["highlight-color"],args["margin-color"],width,height,length,args["display-start"],args["display-end"],args["highlight-color"],args["margin-color"],width,height,length,args["display-start"],args["display-end"],args["highlight-color"],args["margin-color"])}.bind({});Manager.args={width:800,height:50,length:defaultSequence.length,sequence:defaultSequence,"display-start":10,"display-end":80,"highlight-color":"#EB3BFF22","margin-color":"transparent"},Manager.play=_asyncToGenerator(_regeneratorRuntime().mark((function _callee(){var sequence,nav,track,track2,trackIpro;return _regeneratorRuntime().wrap((function _callee$(_context){for(;;)switch(_context.prev=_context.next){case 0:return _context.next=2,customElements.whenDefined("nightingale-sequence");case 2:return(sequence=document.getElementById("sequence"))&&(sequence.fixedHighlight="10:20"),_context.next=6,customElements.whenDefined("nightingale-navigation");case 6:return(nav=document.getElementById("navigation"))&&(nav.fixedHighlight="10:20"),_context.next=10,customElements.whenDefined("nightingale-track");case 10:(track=document.getElementById("track"))&&(track.fixedHighlight="10:20",track.data=defaultData),(track2=document.getElementById("track2"))&&(track2.fixedHighlight="10:20",track2.data=defaultData),(trackIpro=document.getElementById("trackIpro"))&&(trackIpro.fixedHighlight="10:20",trackIpro.data=interpro_IPR016039,interpro_contributors[0].residues=interpro_residues,trackIpro.contributors=interpro_contributors);case 16:case"end":return _context.stop()}}),_callee)}))),Manager.parameters=Object.assign({storySource:{source:'(args) => {\n  const { width, height, length, sequence } = args;\n  return html`\n    <nightingale-manager>\n      <div style="line-height: 0">\n        <nightingale-navigation\n          id="navigation"\n          width="${width}"\n          height=${height}\n          length="${length}"\n          display-start="${args["display-start"]}"\n          display-end="${args["display-end"]}"\n          highlight-color=${args["highlight-color"]}\n          margin-color=${args["margin-color"]}\n          show-highlight\n        >\n        </nightingale-navigation>\n      </div>\n      <div style="line-height: 0">\n        <nightingale-sequence\n          id="sequence"\n          sequence=${sequence}\n          width="${width}"\n          height=${height}\n          length="${length}"\n          display-start="${args["display-start"]}"\n          display-end="${args["display-end"]}"\n          highlight-event="onmouseover"\n          highlight-color=${args["highlight-color"]}\n          margin-color=${args["margin-color"]}\n        >\n        </nightingale-sequence>\n      </div>\n      <div style="line-height: 0">\n        <nightingale-track\n          id="track"\n          width="${width}"\n          height=${height}\n          length="${length}"\n          display-start="${args["display-start"]}"\n          display-end="${args["display-end"]}"\n          highlight-event="onmouseover"\n          highlight-color=${args["highlight-color"]}\n          margin-color=${args["margin-color"]}\n        >\n        </nightingale-track>\n      </div>\n      <div style="line-height: 0">\n        <nightingale-track\n          id="track2"\n          width="${width}"\n          height=${height}\n          length="${length}"\n          display-start="${args["display-start"]}"\n          display-end="${args["display-end"]}"\n          highlight-event="onmouseover"\n          highlight-color=${args["highlight-color"]}\n          margin-color=${args["margin-color"]}\n          layout="non-overlapping"\n        >\n        </nightingale-track>\n      </div>\n      <div style="line-height: 0">\n        <nightingale-interpro-track\n          id="trackIpro"\n          width="${width}"\n          height=${height}\n          length="${length}"\n          display-start="${args["display-start"]}"\n          display-end="${args["display-end"]}"\n          highlight-event="onmouseover"\n          highlight-color=${args["highlight-color"]}\n          margin-color=${args["margin-color"]}\n          shape="roundRectangle"\n          expanded\n        >\n        </nightingale-interpro-track>\n      </div>\n    </nightingale-manager>\n  `;\n}'}},Manager.parameters);var __namedExportsOrder=["Manager"]},"./stories/NightingaleNavigation.stories.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{DifferentSelection:()=>DifferentSelection,Navigation:()=>Navigation,NavigationNoControls:()=>NavigationNoControls,__namedExportsOrder:()=>__namedExportsOrder,default:()=>__WEBPACK_DEFAULT_EXPORT__});__webpack_require__("./node_modules/core-js/modules/es.array.slice.js"),__webpack_require__("./node_modules/core-js/modules/es.function.bind.js"),__webpack_require__("./node_modules/core-js/modules/es.object.assign.js");var _templateObject,_templateObject2,lit_html__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./node_modules/lit-html/lit-html.js");__webpack_require__("./packages/nightingale-navigation/src/index.ts");function _taggedTemplateLiteralLoose(strings,raw){return raw||(raw=strings.slice(0)),strings.raw=raw,strings}const __WEBPACK_DEFAULT_EXPORT__={parameters:{storySource:{source:'import { Meta, Story } from "@storybook/web-components";\nimport { html } from "lit-html";\nimport "../packages/nightingale-navigation/src/index.ts";\n\nexport default {\n  title: "Nightingale/NightingaleNavigation",\n} as Meta;\n\nconst Template: Story<{\n  width: number;\n  height: number;\n  length: number;\n  rulerstart: number;\n  "display-start": number;\n  "display-end": number;\n  highlight: string;\n}> = (args) => {\n  const { width, height, length, highlight, rulerstart } = args;\n  return html`<nightingale-navigation\n    width="${width}"\n    height=${height}\n    length="${length}"\n    display-start=${args["display-start"]}\n    display-end=${args["display-end"]}\n    highlight=${highlight}\n    rulerstart=${rulerstart}\n  ></nightingale-navigation>`;\n};\n\nexport const Navigation = Template.bind({});\nNavigation.args = {\n  width: 500,\n  height: 100,\n  length: 456,\n  "display-start": 100,\n  "display-end": 200,\n  highlight: "23:45",\n  rulerstart: 50,\n};\n\nexport const DifferentSelection = Template.bind({});\nDifferentSelection.args = {\n  ...Navigation.args,\n  "display-start": 300,\n  "display-end": 350,\n};\n\nexport const NavigationNoControls = () => html`<nightingale-navigation\n  length="456"\n  display-start="143"\n  display-end="400"\n  highlight="23:45"\n  rulerstart="1"\n/>`;\n',locationsMap:{navigation:{startLoc:{col:5,line:17},endLoc:{col:1,line:28},startBody:{col:5,line:17},endBody:{col:1,line:28}},"different-selection":{startLoc:{col:5,line:17},endLoc:{col:1,line:28},startBody:{col:5,line:17},endBody:{col:1,line:28}},"navigation-no-controls":{startLoc:{col:36,line:48},endLoc:{col:3,line:54},startBody:{col:36,line:48},endBody:{col:3,line:54}}}}},title:"Nightingale/NightingaleNavigation"};var Template=function Template(args){var width=args.width,height=args.height,length=args.length,highlight=args.highlight,rulerstart=args.rulerstart;return(0,lit_html__WEBPACK_IMPORTED_MODULE_3__.dy)(_templateObject||(_templateObject=_taggedTemplateLiteralLoose(['<nightingale-navigation\n    width="','"\n    height=','\n    length="','"\n    display-start=',"\n    display-end=","\n    highlight=","\n    rulerstart=","\n  ></nightingale-navigation>"])),width,height,length,args["display-start"],args["display-end"],highlight,rulerstart)},Navigation=Template.bind({});Navigation.args={width:500,height:100,length:456,"display-start":100,"display-end":200,highlight:"23:45",rulerstart:50};var DifferentSelection=Template.bind({});DifferentSelection.args=Object.assign({},Navigation.args,{"display-start":300,"display-end":350});var NavigationNoControls=function NavigationNoControls(){return(0,lit_html__WEBPACK_IMPORTED_MODULE_3__.dy)(_templateObject2||(_templateObject2=_taggedTemplateLiteralLoose(['<nightingale-navigation\n  length="456"\n  display-start="143"\n  display-end="400"\n  highlight="23:45"\n  rulerstart="1"\n/>'])))};Navigation.parameters=Object.assign({storySource:{source:'(args) => {\n  const { width, height, length, highlight, rulerstart } = args;\n  return html`<nightingale-navigation\n    width="${width}"\n    height=${height}\n    length="${length}"\n    display-start=${args["display-start"]}\n    display-end=${args["display-end"]}\n    highlight=${highlight}\n    rulerstart=${rulerstart}\n  ></nightingale-navigation>`;\n}'}},Navigation.parameters),DifferentSelection.parameters=Object.assign({storySource:{source:'(args) => {\n  const { width, height, length, highlight, rulerstart } = args;\n  return html`<nightingale-navigation\n    width="${width}"\n    height=${height}\n    length="${length}"\n    display-start=${args["display-start"]}\n    display-end=${args["display-end"]}\n    highlight=${highlight}\n    rulerstart=${rulerstart}\n  ></nightingale-navigation>`;\n}'}},DifferentSelection.parameters),NavigationNoControls.parameters=Object.assign({storySource:{source:'() => html`<nightingale-navigation\n  length="456"\n  display-start="143"\n  display-end="400"\n  highlight="23:45"\n  rulerstart="1"\n/>`'}},NavigationNoControls.parameters);var __namedExportsOrder=["Navigation","DifferentSelection","NavigationNoControls"]},"./stories/NightingaleSequence.stories.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{SeqeunceNoControls:()=>SeqeunceNoControls,Sequence:()=>Sequence,__namedExportsOrder:()=>__namedExportsOrder,default:()=>NightingaleSequence_stories});__webpack_require__("./node_modules/core-js/modules/es.array.slice.js"),__webpack_require__("./node_modules/core-js/modules/es.array.is-array.js"),__webpack_require__("./node_modules/core-js/modules/es.symbol.js"),__webpack_require__("./node_modules/core-js/modules/es.symbol.description.js"),__webpack_require__("./node_modules/core-js/modules/es.object.to-string.js"),__webpack_require__("./node_modules/core-js/modules/es.symbol.iterator.js"),__webpack_require__("./node_modules/core-js/modules/es.string.iterator.js"),__webpack_require__("./node_modules/core-js/modules/es.array.iterator.js"),__webpack_require__("./node_modules/core-js/modules/web.dom-collections.iterator.js"),__webpack_require__("./node_modules/core-js/modules/es.function.name.js"),__webpack_require__("./node_modules/core-js/modules/es.array.from.js"),__webpack_require__("./node_modules/core-js/modules/es.function.bind.js"),__webpack_require__("./node_modules/core-js/modules/es.array.map.js"),__webpack_require__("./node_modules/core-js/modules/es.object.assign.js");var _templateObject,_NightingaleSequence_seq_bg,_NightingaleSequence_axis,_NightingaleSequence_seq_g,_NightingaleSequence_highlighted,_NightingaleSequence_margins,_NightingaleSequence_bases,lit_html=__webpack_require__("./node_modules/lit-html/lit-html.js"),tslib_es6=(__webpack_require__("./node_modules/core-js/modules/es.reflect.construct.js"),__webpack_require__("./node_modules/core-js/modules/es.object.create.js"),__webpack_require__("./node_modules/core-js/modules/es.object.define-property.js"),__webpack_require__("./node_modules/core-js/modules/es.reflect.get.js"),__webpack_require__("./node_modules/core-js/modules/es.object.get-own-property-descriptor.js"),__webpack_require__("./node_modules/core-js/modules/es.parse-int.js"),__webpack_require__("./node_modules/core-js/modules/es.number.is-integer.js"),__webpack_require__("./node_modules/core-js/modules/es.number.constructor.js"),__webpack_require__("./node_modules/core-js/modules/es.string.split.js"),__webpack_require__("./node_modules/core-js/modules/es.regexp.exec.js"),__webpack_require__("./node_modules/core-js/modules/es.weak-map.js"),__webpack_require__("./node_modules/core-js/modules/es.object.set-prototype-of.js"),__webpack_require__("./node_modules/core-js/modules/es.object.get-prototype-of.js"),__webpack_require__("./node_modules/tslib/tslib.es6.js")),lit=__webpack_require__("./node_modules/lit/index.js"),decorators=__webpack_require__("./node_modules/lit/decorators.js"),src=__webpack_require__("./node_modules/d3/src/index.js"),nightingale_new_core_src=__webpack_require__("./packages/nightingale-new-core/src/index.ts");function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}function _get(){return _get="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function _get(target,property,receiver){var base=_superPropBase(target,property);if(base){var desc=Object.getOwnPropertyDescriptor(base,property);return desc.get?desc.get.call(arguments.length<3?target:receiver):desc.value}},_get.apply(this,arguments)}function _superPropBase(object,property){for(;!Object.prototype.hasOwnProperty.call(object,property)&&null!==(object=_getPrototypeOf(object)););return object}function _setPrototypeOf(o,p){return _setPrototypeOf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function _setPrototypeOf(o,p){return o.__proto__=p,o},_setPrototypeOf(o,p)}function _createSuper(Derived){var hasNativeReflectConstruct=function _isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function _createSuperInternal(){var result,Super=_getPrototypeOf(Derived);if(hasNativeReflectConstruct){var NewTarget=_getPrototypeOf(this).constructor;result=Reflect.construct(Super,arguments,NewTarget)}else result=Super.apply(this,arguments);return _possibleConstructorReturn(this,result)}}function _possibleConstructorReturn(self,call){if(call&&("object"==typeof call||"function"==typeof call))return call;if(void 0!==call)throw new TypeError("Derived constructors may only return object or undefined");return _assertThisInitialized(self)}function _assertThisInitialized(self){if(void 0===self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return self}function _getPrototypeOf(o){return _getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)},_getPrototypeOf(o)}var nightingale_sequence_NightingaleSequence=function(_withManager){!function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function");subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:!0,configurable:!0}}),Object.defineProperty(subClass,"prototype",{writable:!1}),superClass&&_setPrototypeOf(subClass,superClass)}(NightingaleSequence,_withManager);var _super=_createSuper(NightingaleSequence);function NightingaleSequence(){var _this;return _classCallCheck(this,NightingaleSequence),_this=_super.apply(this,arguments),_NightingaleSequence_seq_bg.set(_assertThisInitialized(_this),void 0),_NightingaleSequence_axis.set(_assertThisInitialized(_this),void 0),_NightingaleSequence_seq_g.set(_assertThisInitialized(_this),void 0),_NightingaleSequence_highlighted.set(_assertThisInitialized(_this),void 0),_NightingaleSequence_margins.set(_assertThisInitialized(_this),void 0),_NightingaleSequence_bases.set(_assertThisInitialized(_this),void 0),_this}return function _createClass(Constructor,protoProps,staticProps){return protoProps&&_defineProperties(Constructor.prototype,protoProps),staticProps&&_defineProperties(Constructor,staticProps),Object.defineProperty(Constructor,"prototype",{writable:!1}),Constructor}(NightingaleSequence,[{key:"connectedCallback",value:function connectedCallback(){var _this2=this;_get(_getPrototypeOf(NightingaleSequence.prototype),"connectedCallback",this).call(this);var ticks=parseInt(this.getAttribute("numberofticks")||"",10);this.numberOfTicks=Number.isInteger(ticks)?ticks:3,this.sequence&&this.createSequence(),this.addEventListener("load",(function(e){_this2.data=e.detail.payload}))}},{key:"data",get:function get(){return this.sequence||""},set:function set(data){"string"==typeof data?this.sequence=data:"string"==typeof(null==data?void 0:data.sequence)&&(this.sequence=data.sequence),this.sequence&&!this.svg?this.createSequence():this.renderD3()}},{key:"getCharSize",value:function getCharSize(){var _a,_b;if((0,tslib_es6.Q_)(this,_NightingaleSequence_seq_g,"f")){var node=(0,tslib_es6.Q_)(this,_NightingaleSequence_seq_g,"f").select("text.base").node();if(node)this.chWidth=.8*node.getBBox().width,this.chHeight=1.6*node.getBBox().height;else{var tempNode=(0,tslib_es6.Q_)(this,_NightingaleSequence_seq_g,"f").append("text").attr("class","base").text("T");this.chWidth=.8*((null===(_a=tempNode.node())||void 0===_a?void 0:_a.getBBox().width)||0),this.chHeight=1.6*((null===(_b=tempNode.node())||void 0===_b?void 0:_b.getBBox().height)||0),tempNode.remove()}}}},{key:"createSequence",value:function createSequence(){var _a,_b,_c,_this3=this;this.svg=(0,src.Ys)(this).selectAll("svg").attr("id","").attr("width",this.width).attr("height",this.height),(0,tslib_es6.YH)(this,_NightingaleSequence_seq_bg,null===(_a=this.svg)||void 0===_a?void 0:_a.append("g").attr("class","background"),"f"),(0,tslib_es6.YH)(this,_NightingaleSequence_axis,null===(_b=this.svg)||void 0===_b?void 0:_b.append("g").attr("class","x axis"),"f"),(0,tslib_es6.YH)(this,_NightingaleSequence_seq_g,null===(_c=this.svg)||void 0===_c?void 0:_c.append("g").attr("class","sequence").attr("transform","translate(0,"+(this["margin-top"]+.75*this.getHeightWithMargins())+")"),"f"),(0,tslib_es6.YH)(this,_NightingaleSequence_highlighted,this.svg.append("g").attr("class","highlighted"),"f"),(0,tslib_es6.YH)(this,_NightingaleSequence_margins,this.svg.append("g").attr("class","margin"),"f"),requestAnimationFrame((function(){_this3.renderD3()}))}},{key:"firstUpdated",value:function firstUpdated(){this.createSequence()}},{key:"zoomRefreshed",value:function zoomRefreshed(){this.renderD3()}},{key:"renderD3",value:function renderD3(){var _a,_b,_this4=this;if(this.getCharSize(),(0,tslib_es6.Q_)(this,_NightingaleSequence_axis,"f")){var ftWidth=this.getSingleBaseWidth(),space=ftWidth-(this.chWidth||0),half=ftWidth/2,first=Math.floor(Math.max(0,this.getStart()-1)),last=Math.ceil(Math.min((null===(_a=this.sequence)||void 0===_a?void 0:_a.length)||0,this.getEnd())),bases=space<0?[]:(null===(_b=this.sequence)||void 0===_b?void 0:_b.slice(first,last).split("").map((function(aa,i){return{position:1+first+i,aa}})))||[];if(this.height>(this.chWidth||0)&&this.xScale){var xAxis=(0,src.LLu)(this.xScale).tickFormat((function(d){return""+(Number.isInteger(d)?d:"")})).ticks(this.numberOfTicks,"s");(0,tslib_es6.Q_)(this,_NightingaleSequence_axis,"f").call(xAxis)}if((0,tslib_es6.Q_)(this,_NightingaleSequence_axis,"f").attr("transform","translate("+(this["margin-left"]+half)+","+this["margin-top"]+")"),(0,tslib_es6.Q_)(this,_NightingaleSequence_axis,"f").select(".domain").remove(),(0,tslib_es6.Q_)(this,_NightingaleSequence_axis,"f").selectAll(".tick line").remove(),(0,tslib_es6.Q_)(this,_NightingaleSequence_axis,"f").selectAll(".tick text").attr("y",2),(0,tslib_es6.Q_)(this,_NightingaleSequence_seq_g,"f")){(0,tslib_es6.Q_)(this,_NightingaleSequence_seq_g,"f").attr("transform","translate(0,"+(this["margin-top"]+.75*this.getHeightWithMargins())+")"),(0,tslib_es6.YH)(this,_NightingaleSequence_bases,(0,tslib_es6.Q_)(this,_NightingaleSequence_seq_g,"f").selectAll("text.base"),"f");var textElements=(0,tslib_es6.Q_)(this,_NightingaleSequence_bases,"f").data(bases,(function(d){return d.position}));if(textElements.enter().append("text").attr("class","base").attr("text-anchor","middle").attr("x",(function(d){return _this4.getXFromSeqPosition(d.position)+half})).text((function(d){return d.aa})).style("pointer-events","none").style("font-family","monospace"),textElements.exit().remove(),textElements.attr("x",(function(d){return _this4.getXFromSeqPosition(d.position)+half})),(0,tslib_es6.Q_)(this,_NightingaleSequence_seq_bg,"f")){var background=(0,tslib_es6.Q_)(this,_NightingaleSequence_seq_bg,"f").selectAll("rect.base_bg").data(bases,(function(d){return d.position}));background.enter().append("rect").attr("class","base_bg feature").attr("height",this.getHeightWithMargins()).attr("width",ftWidth).attr("fill",(function(d){return Math.round(d.position)%2?"#ccc":"#eee"})).attr("x",(function(d){return _this4.getXFromSeqPosition(d.position)})).attr("y",this["margin-top"]).call(nightingale_new_core_src.sQ,this),background.attr("width",ftWidth).attr("fill",(function(d){return Math.round(d.position)%2?"#ccc":"#eee"})).attr("height",this.getHeightWithMargins()).attr("x",(function(d){return _this4.getXFromSeqPosition(d.position)})).attr("y",this["margin-top"]),background.exit().remove(),(0,tslib_es6.Q_)(this,_NightingaleSequence_seq_g,"f").style("opacity",Math.min(1,space)),background.style("opacity",Math.min(1,space))}}this.updateHighlight(),this.renderMarginOnGroup((0,tslib_es6.Q_)(this,_NightingaleSequence_margins,"f"))}}},{key:"getStart",value:function getStart(){return this["display-start"]||1}},{key:"getEnd",value:function getEnd(){return((this["display-end"]||0)>0?this["display-end"]:this.length)||0}},{key:"updateHighlight",value:function updateHighlight(){var _this5=this;if((0,tslib_es6.Q_)(this,_NightingaleSequence_highlighted,"f")){var highlighs=(0,tslib_es6.Q_)(this,_NightingaleSequence_highlighted,"f").selectAll("rect").data(this.highlightedRegion.segments);highlighs.enter().append("rect").style("pointer-events","none").merge(highlighs).attr("fill",this["highlight-color"]).attr("height",this.height).attr("x",(function(d){return _this5.getXFromSeqPosition(d.start)})).attr("width",(function(d){return _this5.getSingleBaseWidth()*(d.end-d.start+1)})),highlighs.exit().remove()}}},{key:"render",value:function render(){return(0,lit.dy)(_templateObject||(_templateObject=function _taggedTemplateLiteralLoose(strings,raw){return raw||(raw=strings.slice(0)),strings.raw=raw,strings}(['<svg class="container"></svg>'])))}}]),NightingaleSequence}((0,nightingale_new_core_src.YD)((0,nightingale_new_core_src._5)((0,nightingale_new_core_src.tG)((0,nightingale_new_core_src.vl)((0,nightingale_new_core_src.Ds)((0,nightingale_new_core_src.U6)((0,nightingale_new_core_src.Rn)(nightingale_new_core_src.ZP))))))));_NightingaleSequence_seq_bg=new WeakMap,_NightingaleSequence_axis=new WeakMap,_NightingaleSequence_seq_g=new WeakMap,_NightingaleSequence_highlighted=new WeakMap,_NightingaleSequence_margins=new WeakMap,_NightingaleSequence_bases=new WeakMap,(0,tslib_es6.gn)([(0,decorators.Cb)({type:String})],nightingale_sequence_NightingaleSequence.prototype,"sequence",void 0),nightingale_sequence_NightingaleSequence=(0,tslib_es6.gn)([(0,decorators.Mo)("nightingale-sequence")],nightingale_sequence_NightingaleSequence);var NightingaleSequence_stories_templateObject,_templateObject2,_templateObject3;function _slicedToArray(arr,i){return function _arrayWithHoles(arr){if(Array.isArray(arr))return arr}(arr)||function _iterableToArrayLimit(arr,i){var _i=null==arr?null:"undefined"!=typeof Symbol&&arr[Symbol.iterator]||arr["@@iterator"];if(null==_i)return;var _s,_e,_arr=[],_n=!0,_d=!1;try{for(_i=_i.call(arr);!(_n=(_s=_i.next()).done)&&(_arr.push(_s.value),!i||_arr.length!==i);_n=!0);}catch(err){_d=!0,_e=err}finally{try{_n||null==_i.return||_i.return()}finally{if(_d)throw _e}}return _arr}(arr,i)||function _unsupportedIterableToArray(o,minLen){if(!o)return;if("string"==typeof o)return _arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);"Object"===n&&o.constructor&&(n=o.constructor.name);if("Map"===n||"Set"===n)return Array.from(o);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return _arrayLikeToArray(o,minLen)}(arr,i)||function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _arrayLikeToArray(arr,len){(null==len||len>arr.length)&&(len=arr.length);for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2}function NightingaleSequence_stories_taggedTemplateLiteralLoose(strings,raw){return raw||(raw=strings.slice(0)),strings.raw=raw,strings}const NightingaleSequence_stories={parameters:{storySource:{source:'import { Meta, Story } from "@storybook/web-components";\nimport { html } from "lit-html";\nimport "../packages/nightingale-sequence/src/index.ts";\n\nexport default {\n  title: "Nightingale/NightingaleSequence",\n} as Meta;\n\nconst defaultSequence = "iubcbcIUENACBPAOUBCASFUBRUABBRWOAUVBISVBAISBVDOASV";\n\nconst Template: Story<{\n  width: number;\n  height: number;\n  length: number;\n  "display-start": number;\n  "display-end": number;\n  highlight: string;\n  sequence: string;\n}> = (args) => {\n  const { sequence, width, height, length, highlight } = args;\n  return html`<nightingale-sequence\n    sequence=${sequence}\n    display-start=${args["display-start"]}\n    display-end=${args["display-end"]}\n    highlight=${highlight}\n    width="${width}"\n    height=${height}\n    length="${length}"\n  ></nightingale-sequence>`;\n};\n\nexport const Sequence = Template.bind({});\nSequence.args = {\n  sequence: defaultSequence,\n  width: 500,\n  height: 100,\n  length: defaultSequence.length,\n  "display-start": 20,\n  "display-end": 40,\n  highlight: "23:45",\n};\n\nconst coordinates = [\n  [1.6, 5],\n  [6, 13],\n  [43, 50],\n  [10, 30],\n  [1, 50],\n];\nexport const SeqeunceNoControls = () =>\n  html`<h3>Same sequence with different coordinates</h3>\n    ${coordinates.map(\n      ([start, end]) => html`\n        <nightingale-sequence\n          sequence=${defaultSequence}\n          width="800"\n          height="40"\n          length=${defaultSequence.length}\n          display-start=${start}\n          display-end=${end}\n          highlight="3:15"\n        ></nightingale-sequence>\n      `\n    )} `;\n',locationsMap:{sequence:{startLoc:{col:5,line:19},endLoc:{col:1,line:30},startBody:{col:5,line:19},endBody:{col:1,line:30}},"seqeunce-no-controls":{startLoc:{col:34,line:50},endLoc:{col:8,line:64},startBody:{col:34,line:50},endBody:{col:8,line:64}}}}},title:"Nightingale/NightingaleSequence"};var defaultSequence="iubcbcIUENACBPAOUBCASFUBRUABBRWOAUVBISVBAISBVDOASV",Sequence=function Template(args){var sequence=args.sequence,width=args.width,height=args.height,length=args.length,highlight=args.highlight;return(0,lit_html.dy)(NightingaleSequence_stories_templateObject||(NightingaleSequence_stories_templateObject=NightingaleSequence_stories_taggedTemplateLiteralLoose(["<nightingale-sequence\n    sequence=","\n    display-start=","\n    display-end=","\n    highlight=",'\n    width="','"\n    height=','\n    length="','"\n  ></nightingale-sequence>'])),sequence,args["display-start"],args["display-end"],highlight,width,height,length)}.bind({});Sequence.args={sequence:defaultSequence,width:500,height:100,length:defaultSequence.length,"display-start":20,"display-end":40,highlight:"23:45"};var coordinates=[[1.6,5],[6,13],[43,50],[10,30],[1,50]],SeqeunceNoControls=function SeqeunceNoControls(){return(0,lit_html.dy)(_templateObject2||(_templateObject2=NightingaleSequence_stories_taggedTemplateLiteralLoose(["<h3>Same sequence with different coordinates</h3>\n    "," "])),coordinates.map((function(_ref){var _ref2=_slicedToArray(_ref,2),start=_ref2[0],end=_ref2[1];return(0,lit_html.dy)(_templateObject3||(_templateObject3=NightingaleSequence_stories_taggedTemplateLiteralLoose(["\n        <nightingale-sequence\n          sequence=",'\n          width="800"\n          height="40"\n          length=',"\n          display-start=","\n          display-end=",'\n          highlight="3:15"\n        ></nightingale-sequence>\n      '])),defaultSequence,defaultSequence.length,start,end)})))};Sequence.parameters=Object.assign({storySource:{source:'(args) => {\n  const { sequence, width, height, length, highlight } = args;\n  return html`<nightingale-sequence\n    sequence=${sequence}\n    display-start=${args["display-start"]}\n    display-end=${args["display-end"]}\n    highlight=${highlight}\n    width="${width}"\n    height=${height}\n    length="${length}"\n  ></nightingale-sequence>`;\n}'}},Sequence.parameters),SeqeunceNoControls.parameters=Object.assign({storySource:{source:'() =>\n  html`<h3>Same sequence with different coordinates</h3>\n    ${coordinates.map(\n      ([start, end]) => html`\n        <nightingale-sequence\n          sequence=${defaultSequence}\n          width="800"\n          height="40"\n          length=${defaultSequence.length}\n          display-start=${start}\n          display-end=${end}\n          highlight="3:15"\n        ></nightingale-sequence>\n      `\n    )} `'}},SeqeunceNoControls.parameters);var __namedExportsOrder=["Sequence","SeqeunceNoControls"]},"./stories/NightingaleTrack.stories.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{Track:()=>Track,TrackNoControls:()=>TrackNoControls,TrackWithSymbols:()=>TrackWithSymbols,__namedExportsOrder:()=>__namedExportsOrder,default:()=>NightingaleTrack_stories});__webpack_require__("./node_modules/core-js/modules/es.array.slice.js"),__webpack_require__("./node_modules/core-js/modules/es.symbol.js"),__webpack_require__("./node_modules/core-js/modules/es.symbol.description.js"),__webpack_require__("./node_modules/core-js/modules/es.symbol.iterator.js"),__webpack_require__("./node_modules/core-js/modules/es.string.iterator.js"),__webpack_require__("./node_modules/core-js/modules/es.array.iterator.js"),__webpack_require__("./node_modules/core-js/modules/web.dom-collections.iterator.js"),__webpack_require__("./node_modules/core-js/modules/es.symbol.async-iterator.js"),__webpack_require__("./node_modules/core-js/modules/es.symbol.to-string-tag.js"),__webpack_require__("./node_modules/core-js/modules/es.math.to-string-tag.js"),__webpack_require__("./node_modules/core-js/modules/es.json.to-string-tag.js"),__webpack_require__("./node_modules/core-js/modules/es.object.define-property.js"),__webpack_require__("./node_modules/core-js/modules/es.object.create.js"),__webpack_require__("./node_modules/core-js/modules/es.object.get-prototype-of.js"),__webpack_require__("./node_modules/core-js/modules/es.array.for-each.js"),__webpack_require__("./node_modules/core-js/modules/web.dom-collections.for-each.js"),__webpack_require__("./node_modules/core-js/modules/es.function.name.js"),__webpack_require__("./node_modules/core-js/modules/es.object.set-prototype-of.js"),__webpack_require__("./node_modules/core-js/modules/es.array.reverse.js"),__webpack_require__("./node_modules/core-js/modules/es.function.bind.js"),__webpack_require__("./node_modules/core-js/modules/es.promise.js"),__webpack_require__("./node_modules/core-js/modules/es.object.to-string.js"),__webpack_require__("./node_modules/core-js/modules/es.object.assign.js");var lit_html=__webpack_require__("./node_modules/lit-html/lit-html.js");__webpack_require__("./packages/nightingale-track/src/index.ts");const data_namespaceObject=JSON.parse('[{"accession":"feature1","start":10,"end":40,"color":"#342ea2"},{"accession":"feature2","locations":[{"fragments":[{"start":50,"end":160}]}],"color":"#A42ea2"},{"accession":"feature3","locations":[{"fragments":[{"start":155,"end":155}]},{"fragments":[{"start":158,"end":158}]}],"color":"#A4Aea2"},{"accession":"feature4","locations":[{"fragments":[{"start":200,"end":204},{"start":206,"end":210}]}]},{"accession":"feature1","start":1,"end":3,"color":"#339"},{"accession":"feature5","start":1,"end":3,"color":"#63e"},{"accession":"feature6","start":1,"end":3,"color":"#35d","shape":"rectangle"},{"accession":"feature6_2","start":1,"end":3,"color":"#35d","shape":"line"},{"accession":"feature7","start":2,"end":2,"color":"#3a3","shape":"bridge"},{"accession":"feature8","start":1,"end":2,"color":"#3a3","shape":"bridge"},{"accession":"feature9","start":2,"end":2,"color":"#33d","shape":"diamond"},{"accession":"feature10","start":2,"end":3,"color":"#33d","shape":"diamond"},{"accession":"feature11","start":2,"end":2,"color":"#3a3","shape":"chevron"},{"accession":"feature12","start":1,"end":2,"color":"#3a3","shape":"chevron"},{"accession":"feature13","start":2,"end":2,"color":"#d3d","shape":"catFace"},{"accession":"feature14","start":2,"end":3,"color":"#d3d","shape":"catFace"},{"accession":"feature15","start":2,"end":2,"color":"#3a3","shape":"triangle"},{"accession":"feature16","start":1,"end":2,"color":"#3a3","shape":"triangle"},{"accession":"feature17","start":2,"end":2,"color":"#d3d","shape":"wave"},{"accession":"feature18","start":2,"end":3,"color":"#d3d","shape":"wave"},{"accession":"feature15","start":2,"end":2,"color":"#3a3","shape":"hexagon"},{"accession":"feature16","start":1,"end":2,"color":"#3a3","shape":"hexagon"},{"accession":"feature17","start":2,"end":2,"color":"#d3d","shape":"pentagon"},{"accession":"feature18","start":2,"end":3,"color":"#d3d","shape":"pentagon"},{"accession":"feature19","start":2,"end":2,"color":"#3a3","shape":"circle"},{"accession":"feature20","start":1,"end":2,"color":"#3a3","shape":"circle"},{"accession":"feature21","start":2,"end":2,"color":"#d3d","shape":"arrow"},{"accession":"feature22","start":2,"end":3,"color":"#d3d","shape":"arrow"},{"accession":"feature19","start":2,"end":2,"color":"#3a3","shape":"doubleBar"},{"accession":"feature20","start":1,"end":2,"color":"#3a3","shape":"doubleBar"},{"accession":"feature21","start":1,"end":2,"color":"#f06","shape":"helix","fill":"transparent"},{"accession":"feature22","start":2,"end":2,"color":"#fc0","shape":"strand"}]');var _templateObject,_templateObject2;function _regeneratorRuntime(){_regeneratorRuntime=function _regeneratorRuntime(){return exports};var exports={},Op=Object.prototype,hasOwn=Op.hasOwnProperty,$Symbol="function"==typeof Symbol?Symbol:{},iteratorSymbol=$Symbol.iterator||"@@iterator",asyncIteratorSymbol=$Symbol.asyncIterator||"@@asyncIterator",toStringTagSymbol=$Symbol.toStringTag||"@@toStringTag";function define(obj,key,value){return Object.defineProperty(obj,key,{value,enumerable:!0,configurable:!0,writable:!0}),obj[key]}try{define({},"")}catch(err){define=function define(obj,key,value){return obj[key]=value}}function wrap(innerFn,outerFn,self,tryLocsList){var protoGenerator=outerFn&&outerFn.prototype instanceof Generator?outerFn:Generator,generator=Object.create(protoGenerator.prototype),context=new Context(tryLocsList||[]);return generator._invoke=function(innerFn,self,context){var state="suspendedStart";return function(method,arg){if("executing"===state)throw new Error("Generator is already running");if("completed"===state){if("throw"===method)throw arg;return doneResult()}for(context.method=method,context.arg=arg;;){var delegate=context.delegate;if(delegate){var delegateResult=maybeInvokeDelegate(delegate,context);if(delegateResult){if(delegateResult===ContinueSentinel)continue;return delegateResult}}if("next"===context.method)context.sent=context._sent=context.arg;else if("throw"===context.method){if("suspendedStart"===state)throw state="completed",context.arg;context.dispatchException(context.arg)}else"return"===context.method&&context.abrupt("return",context.arg);state="executing";var record=tryCatch(innerFn,self,context);if("normal"===record.type){if(state=context.done?"completed":"suspendedYield",record.arg===ContinueSentinel)continue;return{value:record.arg,done:context.done}}"throw"===record.type&&(state="completed",context.method="throw",context.arg=record.arg)}}}(innerFn,self,context),generator}function tryCatch(fn,obj,arg){try{return{type:"normal",arg:fn.call(obj,arg)}}catch(err){return{type:"throw",arg:err}}}exports.wrap=wrap;var ContinueSentinel={};function Generator(){}function GeneratorFunction(){}function GeneratorFunctionPrototype(){}var IteratorPrototype={};define(IteratorPrototype,iteratorSymbol,(function(){return this}));var getProto=Object.getPrototypeOf,NativeIteratorPrototype=getProto&&getProto(getProto(values([])));NativeIteratorPrototype&&NativeIteratorPrototype!==Op&&hasOwn.call(NativeIteratorPrototype,iteratorSymbol)&&(IteratorPrototype=NativeIteratorPrototype);var Gp=GeneratorFunctionPrototype.prototype=Generator.prototype=Object.create(IteratorPrototype);function defineIteratorMethods(prototype){["next","throw","return"].forEach((function(method){define(prototype,method,(function(arg){return this._invoke(method,arg)}))}))}function AsyncIterator(generator,PromiseImpl){function invoke(method,arg,resolve,reject){var record=tryCatch(generator[method],generator,arg);if("throw"!==record.type){var result=record.arg,value=result.value;return value&&"object"==typeof value&&hasOwn.call(value,"__await")?PromiseImpl.resolve(value.__await).then((function(value){invoke("next",value,resolve,reject)}),(function(err){invoke("throw",err,resolve,reject)})):PromiseImpl.resolve(value).then((function(unwrapped){result.value=unwrapped,resolve(result)}),(function(error){return invoke("throw",error,resolve,reject)}))}reject(record.arg)}var previousPromise;this._invoke=function(method,arg){function callInvokeWithMethodAndArg(){return new PromiseImpl((function(resolve,reject){invoke(method,arg,resolve,reject)}))}return previousPromise=previousPromise?previousPromise.then(callInvokeWithMethodAndArg,callInvokeWithMethodAndArg):callInvokeWithMethodAndArg()}}function maybeInvokeDelegate(delegate,context){var method=delegate.iterator[context.method];if(void 0===method){if(context.delegate=null,"throw"===context.method){if(delegate.iterator.return&&(context.method="return",context.arg=void 0,maybeInvokeDelegate(delegate,context),"throw"===context.method))return ContinueSentinel;context.method="throw",context.arg=new TypeError("The iterator does not provide a 'throw' method")}return ContinueSentinel}var record=tryCatch(method,delegate.iterator,context.arg);if("throw"===record.type)return context.method="throw",context.arg=record.arg,context.delegate=null,ContinueSentinel;var info=record.arg;return info?info.done?(context[delegate.resultName]=info.value,context.next=delegate.nextLoc,"return"!==context.method&&(context.method="next",context.arg=void 0),context.delegate=null,ContinueSentinel):info:(context.method="throw",context.arg=new TypeError("iterator result is not an object"),context.delegate=null,ContinueSentinel)}function pushTryEntry(locs){var entry={tryLoc:locs[0]};1 in locs&&(entry.catchLoc=locs[1]),2 in locs&&(entry.finallyLoc=locs[2],entry.afterLoc=locs[3]),this.tryEntries.push(entry)}function resetTryEntry(entry){var record=entry.completion||{};record.type="normal",delete record.arg,entry.completion=record}function Context(tryLocsList){this.tryEntries=[{tryLoc:"root"}],tryLocsList.forEach(pushTryEntry,this),this.reset(!0)}function values(iterable){if(iterable){var iteratorMethod=iterable[iteratorSymbol];if(iteratorMethod)return iteratorMethod.call(iterable);if("function"==typeof iterable.next)return iterable;if(!isNaN(iterable.length)){var i=-1,next=function next(){for(;++i<iterable.length;)if(hasOwn.call(iterable,i))return next.value=iterable[i],next.done=!1,next;return next.value=void 0,next.done=!0,next};return next.next=next}}return{next:doneResult}}function doneResult(){return{value:void 0,done:!0}}return GeneratorFunction.prototype=GeneratorFunctionPrototype,define(Gp,"constructor",GeneratorFunctionPrototype),define(GeneratorFunctionPrototype,"constructor",GeneratorFunction),GeneratorFunction.displayName=define(GeneratorFunctionPrototype,toStringTagSymbol,"GeneratorFunction"),exports.isGeneratorFunction=function(genFun){var ctor="function"==typeof genFun&&genFun.constructor;return!!ctor&&(ctor===GeneratorFunction||"GeneratorFunction"===(ctor.displayName||ctor.name))},exports.mark=function(genFun){return Object.setPrototypeOf?Object.setPrototypeOf(genFun,GeneratorFunctionPrototype):(genFun.__proto__=GeneratorFunctionPrototype,define(genFun,toStringTagSymbol,"GeneratorFunction")),genFun.prototype=Object.create(Gp),genFun},exports.awrap=function(arg){return{__await:arg}},defineIteratorMethods(AsyncIterator.prototype),define(AsyncIterator.prototype,asyncIteratorSymbol,(function(){return this})),exports.AsyncIterator=AsyncIterator,exports.async=function(innerFn,outerFn,self,tryLocsList,PromiseImpl){void 0===PromiseImpl&&(PromiseImpl=Promise);var iter=new AsyncIterator(wrap(innerFn,outerFn,self,tryLocsList),PromiseImpl);return exports.isGeneratorFunction(outerFn)?iter:iter.next().then((function(result){return result.done?result.value:iter.next()}))},defineIteratorMethods(Gp),define(Gp,toStringTagSymbol,"Generator"),define(Gp,iteratorSymbol,(function(){return this})),define(Gp,"toString",(function(){return"[object Generator]"})),exports.keys=function(object){var keys=[];for(var key in object)keys.push(key);return keys.reverse(),function next(){for(;keys.length;){var key=keys.pop();if(key in object)return next.value=key,next.done=!1,next}return next.done=!0,next}},exports.values=values,Context.prototype={constructor:Context,reset:function reset(skipTempReset){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(resetTryEntry),!skipTempReset)for(var name in this)"t"===name.charAt(0)&&hasOwn.call(this,name)&&!isNaN(+name.slice(1))&&(this[name]=void 0)},stop:function stop(){this.done=!0;var rootRecord=this.tryEntries[0].completion;if("throw"===rootRecord.type)throw rootRecord.arg;return this.rval},dispatchException:function dispatchException(exception){if(this.done)throw exception;var context=this;function handle(loc,caught){return record.type="throw",record.arg=exception,context.next=loc,caught&&(context.method="next",context.arg=void 0),!!caught}for(var i=this.tryEntries.length-1;i>=0;--i){var entry=this.tryEntries[i],record=entry.completion;if("root"===entry.tryLoc)return handle("end");if(entry.tryLoc<=this.prev){var hasCatch=hasOwn.call(entry,"catchLoc"),hasFinally=hasOwn.call(entry,"finallyLoc");if(hasCatch&&hasFinally){if(this.prev<entry.catchLoc)return handle(entry.catchLoc,!0);if(this.prev<entry.finallyLoc)return handle(entry.finallyLoc)}else if(hasCatch){if(this.prev<entry.catchLoc)return handle(entry.catchLoc,!0)}else{if(!hasFinally)throw new Error("try statement without catch or finally");if(this.prev<entry.finallyLoc)return handle(entry.finallyLoc)}}}},abrupt:function abrupt(type,arg){for(var i=this.tryEntries.length-1;i>=0;--i){var entry=this.tryEntries[i];if(entry.tryLoc<=this.prev&&hasOwn.call(entry,"finallyLoc")&&this.prev<entry.finallyLoc){var finallyEntry=entry;break}}finallyEntry&&("break"===type||"continue"===type)&&finallyEntry.tryLoc<=arg&&arg<=finallyEntry.finallyLoc&&(finallyEntry=null);var record=finallyEntry?finallyEntry.completion:{};return record.type=type,record.arg=arg,finallyEntry?(this.method="next",this.next=finallyEntry.finallyLoc,ContinueSentinel):this.complete(record)},complete:function complete(record,afterLoc){if("throw"===record.type)throw record.arg;return"break"===record.type||"continue"===record.type?this.next=record.arg:"return"===record.type?(this.rval=this.arg=record.arg,this.method="return",this.next="end"):"normal"===record.type&&afterLoc&&(this.next=afterLoc),ContinueSentinel},finish:function finish(finallyLoc){for(var i=this.tryEntries.length-1;i>=0;--i){var entry=this.tryEntries[i];if(entry.finallyLoc===finallyLoc)return this.complete(entry.completion,entry.afterLoc),resetTryEntry(entry),ContinueSentinel}},catch:function _catch(tryLoc){for(var i=this.tryEntries.length-1;i>=0;--i){var entry=this.tryEntries[i];if(entry.tryLoc===tryLoc){var record=entry.completion;if("throw"===record.type){var thrown=record.arg;resetTryEntry(entry)}return thrown}}throw new Error("illegal catch attempt")},delegateYield:function delegateYield(iterable,resultName,nextLoc){return this.delegate={iterator:values(iterable),resultName,nextLoc},"next"===this.method&&(this.arg=void 0),ContinueSentinel}},exports}function asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg),value=info.value}catch(error){return void reject(error)}info.done?resolve(value):Promise.resolve(value).then(_next,_throw)}function _asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise((function(resolve,reject){var gen=fn.apply(self,args);function _next(value){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(void 0)}))}}function _taggedTemplateLiteralLoose(strings,raw){return raw||(raw=strings.slice(0)),strings.raw=raw,strings}const NightingaleTrack_stories={parameters:{storySource:{source:'import { Meta, Story } from "@storybook/web-components";\nimport { html } from "lit-html";\nimport "../packages/nightingale-track/src/index.ts";\nimport mockData from "../packages/nightingale-track/tests/mockData/data.json";\n\nexport default {\n  title: "Nightingale/NightingaleTrack",\n} as Meta;\n\nconst defaultData = [\n  {\n    accession: "feature1",\n    start: 1,\n    end: 2,\n    color: "blue",\n  },\n  {\n    accession: "feature1",\n    start: 49,\n    end: 50,\n    color: "red",\n  },\n  {\n    accession: "feature1",\n    start: 10,\n    end: 20,\n    color: "#342ea2",\n  },\n  {\n    accession: "feature2",\n    locations: [{ fragments: [{ start: 30, end: 45 }] }],\n    color: "#A42ea2",\n  },\n  {\n    accession: "feature3",\n    locations: [\n      {\n        fragments: [{ start: 15, end: 15 }],\n      },\n      { fragments: [{ start: 18, end: 18 }] },\n    ],\n    color: "#A4Aea2",\n  },\n  {\n    accession: "feature4",\n    locations: [\n      {\n        fragments: [\n          { start: 20, end: 23 },\n          { start: 26, end: 32 },\n        ],\n      },\n    ],\n  },\n];\nconst Template: Story<{\n  width: number;\n  height: number;\n  length: number;\n  "display-start": number;\n  "display-end": number;\n  "margin-top": number;\n  highlight: string;\n  layout: "non-overlapping" | "default";\n}> = (args) => {\n  const { width, height, length, highlight, layout } = args;\n  return html`<nightingale-track\n    id="track"\n    width="${width}"\n    height=${height}\n    length="${length}"\n    display-start=${args["display-start"]}\n    display-end=${args["display-end"]}\n    margin-top=${args["margin-top"]}\n    highlight=${highlight}\n    layout=${layout}\n  ></nightingale-track>`;\n};\n\nexport const Track = Template.bind({});\nTrack.args = {\n  width: 500,\n  height: 50,\n  length: 100,\n  "margin-top": 1,\n  "display-start": 1,\n  "display-end": 50,\n  highlight: "23:45",\n  layout: "default",\n};\nTrack.play = async () => {\n  await customElements.whenDefined("nightingale-track");\n  const track = document.getElementById("track");\n  if (track) (track as any).data = defaultData;\n};\n\nexport const TrackWithSymbols = Template.bind({});\nTrackWithSymbols.args = {\n  ...Track.args,\n  height: 500,\n  layout: "non-overlapping",\n};\nTrackWithSymbols.play = async () => {\n  await customElements.whenDefined("nightingale-track");\n  const track = document.getElementById("track");\n  if (track) (track as any).data = mockData;\n};\n\nexport const TrackNoControls = () => html`\n  <nightingale-track\n    id="track"\n    length="223"\n    height="100"\n    display-start="1"\n    display-end="50"\n    layout="non-overlapping"\n  ></nightingale-track>\n`;\nTrackNoControls.play = async () => {\n  await customElements.whenDefined("nightingale-track");\n  const track = document.getElementById("track");\n  if (track) (track as any).data = defaultData;\n};\n',locationsMap:{track:{startLoc:{col:5,line:65},endLoc:{col:1,line:78},startBody:{col:5,line:65},endBody:{col:1,line:78}},"track-with-symbols":{startLoc:{col:5,line:65},endLoc:{col:1,line:78},startBody:{col:5,line:65},endBody:{col:1,line:78}},"track-no-controls":{startLoc:{col:31,line:109},endLoc:{col:1,line:118},startBody:{col:31,line:109},endBody:{col:1,line:118}}}}},title:"Nightingale/NightingaleTrack"};var defaultData=[{accession:"feature1",start:1,end:2,color:"blue"},{accession:"feature1",start:49,end:50,color:"red"},{accession:"feature1",start:10,end:20,color:"#342ea2"},{accession:"feature2",locations:[{fragments:[{start:30,end:45}]}],color:"#A42ea2"},{accession:"feature3",locations:[{fragments:[{start:15,end:15}]},{fragments:[{start:18,end:18}]}],color:"#A4Aea2"},{accession:"feature4",locations:[{fragments:[{start:20,end:23},{start:26,end:32}]}]}],Template=function Template(args){var width=args.width,height=args.height,length=args.length,highlight=args.highlight,layout=args.layout;return(0,lit_html.dy)(_templateObject||(_templateObject=_taggedTemplateLiteralLoose(['<nightingale-track\n    id="track"\n    width="','"\n    height=','\n    length="','"\n    display-start=',"\n    display-end=","\n    margin-top=","\n    highlight=","\n    layout=","\n  ></nightingale-track>"])),width,height,length,args["display-start"],args["display-end"],args["margin-top"],highlight,layout)},Track=Template.bind({});Track.args={width:500,height:50,length:100,"margin-top":1,"display-start":1,"display-end":50,highlight:"23:45",layout:"default"},Track.play=_asyncToGenerator(_regeneratorRuntime().mark((function _callee(){var track;return _regeneratorRuntime().wrap((function _callee$(_context){for(;;)switch(_context.prev=_context.next){case 0:return _context.next=2,customElements.whenDefined("nightingale-track");case 2:(track=document.getElementById("track"))&&(track.data=defaultData);case 4:case"end":return _context.stop()}}),_callee)})));var TrackWithSymbols=Template.bind({});TrackWithSymbols.args=Object.assign({},Track.args,{height:500,layout:"non-overlapping"}),TrackWithSymbols.play=_asyncToGenerator(_regeneratorRuntime().mark((function _callee2(){var track;return _regeneratorRuntime().wrap((function _callee2$(_context2){for(;;)switch(_context2.prev=_context2.next){case 0:return _context2.next=2,customElements.whenDefined("nightingale-track");case 2:(track=document.getElementById("track"))&&(track.data=data_namespaceObject);case 4:case"end":return _context2.stop()}}),_callee2)})));var TrackNoControls=function TrackNoControls(){return(0,lit_html.dy)(_templateObject2||(_templateObject2=_taggedTemplateLiteralLoose(['\n  <nightingale-track\n    id="track"\n    length="223"\n    height="100"\n    display-start="1"\n    display-end="50"\n    layout="non-overlapping"\n  ></nightingale-track>\n'])))};TrackNoControls.play=_asyncToGenerator(_regeneratorRuntime().mark((function _callee3(){var track;return _regeneratorRuntime().wrap((function _callee3$(_context3){for(;;)switch(_context3.prev=_context3.next){case 0:return _context3.next=2,customElements.whenDefined("nightingale-track");case 2:(track=document.getElementById("track"))&&(track.data=defaultData);case 4:case"end":return _context3.stop()}}),_callee3)}))),Track.parameters=Object.assign({storySource:{source:'(args) => {\n  const { width, height, length, highlight, layout } = args;\n  return html`<nightingale-track\n    id="track"\n    width="${width}"\n    height=${height}\n    length="${length}"\n    display-start=${args["display-start"]}\n    display-end=${args["display-end"]}\n    margin-top=${args["margin-top"]}\n    highlight=${highlight}\n    layout=${layout}\n  ></nightingale-track>`;\n}'}},Track.parameters),TrackWithSymbols.parameters=Object.assign({storySource:{source:'(args) => {\n  const { width, height, length, highlight, layout } = args;\n  return html`<nightingale-track\n    id="track"\n    width="${width}"\n    height=${height}\n    length="${length}"\n    display-start=${args["display-start"]}\n    display-end=${args["display-end"]}\n    margin-top=${args["margin-top"]}\n    highlight=${highlight}\n    layout=${layout}\n  ></nightingale-track>`;\n}'}},TrackWithSymbols.parameters),TrackNoControls.parameters=Object.assign({storySource:{source:'() => html`\n  <nightingale-track\n    id="track"\n    length="223"\n    height="100"\n    display-start="1"\n    display-end="50"\n    layout="non-overlapping"\n  ></nightingale-track>\n`'}},TrackNoControls.parameters);var __namedExportsOrder=["Track","TrackWithSymbols","TrackNoControls"]},"./packages/nightingale-interpro-track/src/index.ts":(__unused_webpack_module,__unused_webpack___webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__("./node_modules/core-js/modules/es.array.for-each.js"),__webpack_require__("./node_modules/core-js/modules/web.dom-collections.for-each.js"),__webpack_require__("./node_modules/core-js/modules/es.array.map.js"),__webpack_require__("./node_modules/core-js/modules/es.object.assign.js"),__webpack_require__("./node_modules/core-js/modules/es.array.reduce.js"),__webpack_require__("./node_modules/core-js/modules/es.set.js"),__webpack_require__("./node_modules/core-js/modules/es.object.to-string.js"),__webpack_require__("./node_modules/core-js/modules/es.string.iterator.js"),__webpack_require__("./node_modules/core-js/modules/es.array.iterator.js"),__webpack_require__("./node_modules/core-js/modules/web.dom-collections.iterator.js"),__webpack_require__("./node_modules/core-js/modules/es.weak-map.js"),__webpack_require__("./node_modules/core-js/modules/es.object.set-prototype-of.js"),__webpack_require__("./node_modules/core-js/modules/es.function.bind.js"),__webpack_require__("./node_modules/core-js/modules/es.object.get-prototype-of.js"),__webpack_require__("./node_modules/core-js/modules/es.reflect.construct.js"),__webpack_require__("./node_modules/core-js/modules/es.object.create.js"),__webpack_require__("./node_modules/core-js/modules/es.object.define-property.js"),__webpack_require__("./node_modules/core-js/modules/es.reflect.get.js"),__webpack_require__("./node_modules/core-js/modules/es.object.get-own-property-descriptor.js"),__webpack_require__("./node_modules/core-js/modules/es.array.slice.js"),__webpack_require__("./node_modules/core-js/modules/es.function.name.js"),__webpack_require__("./node_modules/core-js/modules/es.array.from.js"),__webpack_require__("./node_modules/core-js/modules/es.symbol.js"),__webpack_require__("./node_modules/core-js/modules/es.symbol.description.js"),__webpack_require__("./node_modules/core-js/modules/es.symbol.iterator.js"),__webpack_require__("./node_modules/core-js/modules/es.array.is-array.js");var _selection$1$prototyp,_Transition$1$prototy,_selection$prototype,_Transition$prototype,_templateObject,tslib_es6=__webpack_require__("./node_modules/tslib/tslib.es6.js"),decorators=__webpack_require__("./node_modules/lit/decorators.js"),src=__webpack_require__("./packages/nightingale-new-core/src/index.ts");__webpack_require__("./node_modules/core-js/modules/es.symbol.async-iterator.js"),__webpack_require__("./node_modules/core-js/modules/es.symbol.to-string-tag.js"),__webpack_require__("./node_modules/core-js/modules/es.math.to-string-tag.js"),__webpack_require__("./node_modules/core-js/modules/es.json.to-string-tag.js"),__webpack_require__("./node_modules/core-js/modules/es.string.split.js"),__webpack_require__("./node_modules/core-js/modules/es.regexp.exec.js"),__webpack_require__("./node_modules/core-js/modules/es.string.trim.js"),__webpack_require__("./node_modules/core-js/modules/es.array.index-of.js"),__webpack_require__("./node_modules/core-js/modules/es.array.concat.js"),__webpack_require__("./node_modules/core-js/modules/es.array.find.js"),__webpack_require__("./node_modules/core-js/modules/es.array.filter.js"),__webpack_require__("./node_modules/core-js/modules/es.map.js"),__webpack_require__("./node_modules/core-js/modules/es.array.sort.js"),__webpack_require__("./node_modules/core-js/modules/es.array.join.js"),__webpack_require__("./node_modules/core-js/modules/es.array.splice.js"),__webpack_require__("./node_modules/core-js/modules/es.regexp.constructor.js"),__webpack_require__("./node_modules/core-js/modules/es.regexp.to-string.js"),__webpack_require__("./node_modules/core-js/modules/es.parse-int.js"),__webpack_require__("./node_modules/core-js/modules/es.date.to-string.js"),__webpack_require__("./node_modules/core-js/modules/web.timers.js"),__webpack_require__("./node_modules/core-js/modules/es.array.every.js"),__webpack_require__("./node_modules/core-js/modules/es.promise.js"),__webpack_require__("./node_modules/core-js/modules/es.number.constructor.js"),__webpack_require__("./node_modules/core-js/modules/es.number.is-nan.js"),__webpack_require__("./node_modules/core-js/modules/es.array.reverse.js"),__webpack_require__("./node_modules/core-js/modules/es.array-buffer.is-view.js"),__webpack_require__("./node_modules/core-js/modules/es.array-buffer.constructor.js"),__webpack_require__("./node_modules/core-js/modules/es.array-buffer.slice.js"),__webpack_require__("./node_modules/core-js/modules/es.data-view.js"),__webpack_require__("./node_modules/core-js/modules/es.string.replace.js"),__webpack_require__("./node_modules/core-js/modules/es.array.fill.js"),__webpack_require__("./node_modules/core-js/modules/es.number.to-fixed.js"),__webpack_require__("./node_modules/core-js/modules/es.number.to-precision.js"),__webpack_require__("./node_modules/core-js/modules/es.object.define-properties.js"),__webpack_require__("./node_modules/core-js/modules/es.math.hypot.js"),__webpack_require__("./node_modules/core-js/modules/es.array.includes.js"),__webpack_require__("./node_modules/core-js/modules/es.object.get-own-property-names.js"),__webpack_require__("./node_modules/core-js/modules/es.array.flat.js"),__webpack_require__("./node_modules/core-js/modules/es.global-this.js"),__webpack_require__("./node_modules/core-js/modules/es.string.starts-with.js"),__webpack_require__("./node_modules/core-js/modules/es.string.ends-with.js"),__webpack_require__("./node_modules/core-js/modules/es.weak-set.js"),__webpack_require__("./node_modules/core-js/modules/es.array.some.js"),__webpack_require__("./node_modules/core-js/modules/es.array.find-index.js"),__webpack_require__("./node_modules/core-js/modules/es.object.values.js");function _toConsumableArray(arr){return function _arrayWithoutHoles(arr){if(Array.isArray(arr))return _arrayLikeToArray(arr)}(arr)||function _iterableToArray(iter){if("undefined"!=typeof Symbol&&null!=iter[Symbol.iterator]||null!=iter["@@iterator"])return Array.from(iter)}(arr)||_unsupportedIterableToArray(arr)||function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg),value=info.value}catch(error){return void reject(error)}info.done?resolve(value):Promise.resolve(value).then(_next,_throw)}function _asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise((function(resolve,reject){var gen=fn.apply(self,args);function _next(value){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(void 0)}))}}function _wrapNativeSuper(Class){var _cache="function"==typeof Map?new Map:void 0;return _wrapNativeSuper=function _wrapNativeSuper(Class){if(null===Class||!function _isNativeFunction(fn){return-1!==Function.toString.call(fn).indexOf("[native code]")}(Class))return Class;if("function"!=typeof Class)throw new TypeError("Super expression must either be null or a function");if(void 0!==_cache){if(_cache.has(Class))return _cache.get(Class);_cache.set(Class,Wrapper)}function Wrapper(){return _construct(Class,arguments,_getPrototypeOf(this).constructor)}return Wrapper.prototype=Object.create(Class.prototype,{constructor:{value:Wrapper,enumerable:!1,writable:!0,configurable:!0}}),_setPrototypeOf(Wrapper,Class)},_wrapNativeSuper(Class)}function _construct(Parent,args,Class){return _construct=_isNativeReflectConstruct()?Reflect.construct.bind():function _construct(Parent,args,Class){var a=[null];a.push.apply(a,args);var instance=new(Function.bind.apply(Parent,a));return Class&&_setPrototypeOf(instance,Class.prototype),instance},_construct.apply(null,arguments)}function _slicedToArray(arr,i){return function _arrayWithHoles(arr){if(Array.isArray(arr))return arr}(arr)||function _iterableToArrayLimit(arr,i){var _i=null==arr?null:"undefined"!=typeof Symbol&&arr[Symbol.iterator]||arr["@@iterator"];if(null==_i)return;var _s,_e,_arr=[],_n=!0,_d=!1;try{for(_i=_i.call(arr);!(_n=(_s=_i.next()).done)&&(_arr.push(_s.value),!i||_arr.length!==i);_n=!0);}catch(err){_d=!0,_e=err}finally{try{_n||null==_i.return||_i.return()}finally{if(_d)throw _e}}return _arr}(arr,i)||_unsupportedIterableToArray(arr,i)||function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _get(){return _get="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function _get(target,property,receiver){var base=_superPropBase(target,property);if(base){var desc=Object.getOwnPropertyDescriptor(base,property);return desc.get?desc.get.call(arguments.length<3?target:receiver):desc.value}},_get.apply(this,arguments)}function _superPropBase(object,property){for(;!Object.prototype.hasOwnProperty.call(object,property)&&null!==(object=_getPrototypeOf(object)););return object}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){return protoProps&&_defineProperties(Constructor.prototype,protoProps),staticProps&&_defineProperties(Constructor,staticProps),Object.defineProperty(Constructor,"prototype",{writable:!1}),Constructor}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function");subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:!0,configurable:!0}}),Object.defineProperty(subClass,"prototype",{writable:!1}),superClass&&_setPrototypeOf(subClass,superClass)}function _setPrototypeOf(o,p){return _setPrototypeOf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function _setPrototypeOf(o,p){return o.__proto__=p,o},_setPrototypeOf(o,p)}function _createSuper(Derived){var hasNativeReflectConstruct=_isNativeReflectConstruct();return function _createSuperInternal(){var result,Super=_getPrototypeOf(Derived);if(hasNativeReflectConstruct){var NewTarget=_getPrototypeOf(this).constructor;result=Reflect.construct(Super,arguments,NewTarget)}else result=Super.apply(this,arguments);return _possibleConstructorReturn(this,result)}}function _possibleConstructorReturn(self,call){if(call&&("object"==typeof call||"function"==typeof call))return call;if(void 0!==call)throw new TypeError("Derived constructors may only return object or undefined");return _assertThisInitialized(self)}function _assertThisInitialized(self){if(void 0===self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return self}function _isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}function _getPrototypeOf(o){return _getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)},_getPrototypeOf(o)}function _regeneratorRuntime(){_regeneratorRuntime=function _regeneratorRuntime(){return exports};var exports={},Op=Object.prototype,hasOwn=Op.hasOwnProperty,$Symbol="function"==typeof Symbol?Symbol:{},iteratorSymbol=$Symbol.iterator||"@@iterator",asyncIteratorSymbol=$Symbol.asyncIterator||"@@asyncIterator",toStringTagSymbol=$Symbol.toStringTag||"@@toStringTag";function define(obj,key,value){return Object.defineProperty(obj,key,{value,enumerable:!0,configurable:!0,writable:!0}),obj[key]}try{define({},"")}catch(err){define=function define(obj,key,value){return obj[key]=value}}function wrap(innerFn,outerFn,self,tryLocsList){var protoGenerator=outerFn&&outerFn.prototype instanceof Generator?outerFn:Generator,generator=Object.create(protoGenerator.prototype),context=new Context(tryLocsList||[]);return generator._invoke=function(innerFn,self,context){var state="suspendedStart";return function(method,arg){if("executing"===state)throw new Error("Generator is already running");if("completed"===state){if("throw"===method)throw arg;return doneResult()}for(context.method=method,context.arg=arg;;){var delegate=context.delegate;if(delegate){var delegateResult=maybeInvokeDelegate(delegate,context);if(delegateResult){if(delegateResult===ContinueSentinel)continue;return delegateResult}}if("next"===context.method)context.sent=context._sent=context.arg;else if("throw"===context.method){if("suspendedStart"===state)throw state="completed",context.arg;context.dispatchException(context.arg)}else"return"===context.method&&context.abrupt("return",context.arg);state="executing";var record=tryCatch(innerFn,self,context);if("normal"===record.type){if(state=context.done?"completed":"suspendedYield",record.arg===ContinueSentinel)continue;return{value:record.arg,done:context.done}}"throw"===record.type&&(state="completed",context.method="throw",context.arg=record.arg)}}}(innerFn,self,context),generator}function tryCatch(fn,obj,arg){try{return{type:"normal",arg:fn.call(obj,arg)}}catch(err){return{type:"throw",arg:err}}}exports.wrap=wrap;var ContinueSentinel={};function Generator(){}function GeneratorFunction(){}function GeneratorFunctionPrototype(){}var IteratorPrototype={};define(IteratorPrototype,iteratorSymbol,(function(){return this}));var getProto=Object.getPrototypeOf,NativeIteratorPrototype=getProto&&getProto(getProto(values([])));NativeIteratorPrototype&&NativeIteratorPrototype!==Op&&hasOwn.call(NativeIteratorPrototype,iteratorSymbol)&&(IteratorPrototype=NativeIteratorPrototype);var Gp=GeneratorFunctionPrototype.prototype=Generator.prototype=Object.create(IteratorPrototype);function defineIteratorMethods(prototype){["next","throw","return"].forEach((function(method){define(prototype,method,(function(arg){return this._invoke(method,arg)}))}))}function AsyncIterator(generator,PromiseImpl){function invoke(method,arg,resolve,reject){var record=tryCatch(generator[method],generator,arg);if("throw"!==record.type){var result=record.arg,value=result.value;return value&&"object"==typeof value&&hasOwn.call(value,"__await")?PromiseImpl.resolve(value.__await).then((function(value){invoke("next",value,resolve,reject)}),(function(err){invoke("throw",err,resolve,reject)})):PromiseImpl.resolve(value).then((function(unwrapped){result.value=unwrapped,resolve(result)}),(function(error){return invoke("throw",error,resolve,reject)}))}reject(record.arg)}var previousPromise;this._invoke=function(method,arg){function callInvokeWithMethodAndArg(){return new PromiseImpl((function(resolve,reject){invoke(method,arg,resolve,reject)}))}return previousPromise=previousPromise?previousPromise.then(callInvokeWithMethodAndArg,callInvokeWithMethodAndArg):callInvokeWithMethodAndArg()}}function maybeInvokeDelegate(delegate,context){var method=delegate.iterator[context.method];if(void 0===method){if(context.delegate=null,"throw"===context.method){if(delegate.iterator.return&&(context.method="return",context.arg=void 0,maybeInvokeDelegate(delegate,context),"throw"===context.method))return ContinueSentinel;context.method="throw",context.arg=new TypeError("The iterator does not provide a 'throw' method")}return ContinueSentinel}var record=tryCatch(method,delegate.iterator,context.arg);if("throw"===record.type)return context.method="throw",context.arg=record.arg,context.delegate=null,ContinueSentinel;var info=record.arg;return info?info.done?(context[delegate.resultName]=info.value,context.next=delegate.nextLoc,"return"!==context.method&&(context.method="next",context.arg=void 0),context.delegate=null,ContinueSentinel):info:(context.method="throw",context.arg=new TypeError("iterator result is not an object"),context.delegate=null,ContinueSentinel)}function pushTryEntry(locs){var entry={tryLoc:locs[0]};1 in locs&&(entry.catchLoc=locs[1]),2 in locs&&(entry.finallyLoc=locs[2],entry.afterLoc=locs[3]),this.tryEntries.push(entry)}function resetTryEntry(entry){var record=entry.completion||{};record.type="normal",delete record.arg,entry.completion=record}function Context(tryLocsList){this.tryEntries=[{tryLoc:"root"}],tryLocsList.forEach(pushTryEntry,this),this.reset(!0)}function values(iterable){if(iterable){var iteratorMethod=iterable[iteratorSymbol];if(iteratorMethod)return iteratorMethod.call(iterable);if("function"==typeof iterable.next)return iterable;if(!isNaN(iterable.length)){var i=-1,next=function next(){for(;++i<iterable.length;)if(hasOwn.call(iterable,i))return next.value=iterable[i],next.done=!1,next;return next.value=void 0,next.done=!0,next};return next.next=next}}return{next:doneResult}}function doneResult(){return{value:void 0,done:!0}}return GeneratorFunction.prototype=GeneratorFunctionPrototype,define(Gp,"constructor",GeneratorFunctionPrototype),define(GeneratorFunctionPrototype,"constructor",GeneratorFunction),GeneratorFunction.displayName=define(GeneratorFunctionPrototype,toStringTagSymbol,"GeneratorFunction"),exports.isGeneratorFunction=function(genFun){var ctor="function"==typeof genFun&&genFun.constructor;return!!ctor&&(ctor===GeneratorFunction||"GeneratorFunction"===(ctor.displayName||ctor.name))},exports.mark=function(genFun){return Object.setPrototypeOf?Object.setPrototypeOf(genFun,GeneratorFunctionPrototype):(genFun.__proto__=GeneratorFunctionPrototype,define(genFun,toStringTagSymbol,"GeneratorFunction")),genFun.prototype=Object.create(Gp),genFun},exports.awrap=function(arg){return{__await:arg}},defineIteratorMethods(AsyncIterator.prototype),define(AsyncIterator.prototype,asyncIteratorSymbol,(function(){return this})),exports.AsyncIterator=AsyncIterator,exports.async=function(innerFn,outerFn,self,tryLocsList,PromiseImpl){void 0===PromiseImpl&&(PromiseImpl=Promise);var iter=new AsyncIterator(wrap(innerFn,outerFn,self,tryLocsList),PromiseImpl);return exports.isGeneratorFunction(outerFn)?iter:iter.next().then((function(result){return result.done?result.value:iter.next()}))},defineIteratorMethods(Gp),define(Gp,toStringTagSymbol,"Generator"),define(Gp,iteratorSymbol,(function(){return this})),define(Gp,"toString",(function(){return"[object Generator]"})),exports.keys=function(object){var keys=[];for(var key in object)keys.push(key);return keys.reverse(),function next(){for(;keys.length;){var key=keys.pop();if(key in object)return next.value=key,next.done=!1,next}return next.done=!0,next}},exports.values=values,Context.prototype={constructor:Context,reset:function reset(skipTempReset){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(resetTryEntry),!skipTempReset)for(var name in this)"t"===name.charAt(0)&&hasOwn.call(this,name)&&!isNaN(+name.slice(1))&&(this[name]=void 0)},stop:function stop(){this.done=!0;var rootRecord=this.tryEntries[0].completion;if("throw"===rootRecord.type)throw rootRecord.arg;return this.rval},dispatchException:function dispatchException(exception){if(this.done)throw exception;var context=this;function handle(loc,caught){return record.type="throw",record.arg=exception,context.next=loc,caught&&(context.method="next",context.arg=void 0),!!caught}for(var i=this.tryEntries.length-1;i>=0;--i){var entry=this.tryEntries[i],record=entry.completion;if("root"===entry.tryLoc)return handle("end");if(entry.tryLoc<=this.prev){var hasCatch=hasOwn.call(entry,"catchLoc"),hasFinally=hasOwn.call(entry,"finallyLoc");if(hasCatch&&hasFinally){if(this.prev<entry.catchLoc)return handle(entry.catchLoc,!0);if(this.prev<entry.finallyLoc)return handle(entry.finallyLoc)}else if(hasCatch){if(this.prev<entry.catchLoc)return handle(entry.catchLoc,!0)}else{if(!hasFinally)throw new Error("try statement without catch or finally");if(this.prev<entry.finallyLoc)return handle(entry.finallyLoc)}}}},abrupt:function abrupt(type,arg){for(var i=this.tryEntries.length-1;i>=0;--i){var entry=this.tryEntries[i];if(entry.tryLoc<=this.prev&&hasOwn.call(entry,"finallyLoc")&&this.prev<entry.finallyLoc){var finallyEntry=entry;break}}finallyEntry&&("break"===type||"continue"===type)&&finallyEntry.tryLoc<=arg&&arg<=finallyEntry.finallyLoc&&(finallyEntry=null);var record=finallyEntry?finallyEntry.completion:{};return record.type=type,record.arg=arg,finallyEntry?(this.method="next",this.next=finallyEntry.finallyLoc,ContinueSentinel):this.complete(record)},complete:function complete(record,afterLoc){if("throw"===record.type)throw record.arg;return"break"===record.type||"continue"===record.type?this.next=record.arg:"return"===record.type?(this.rval=this.arg=record.arg,this.method="return",this.next="end"):"normal"===record.type&&afterLoc&&(this.next=afterLoc),ContinueSentinel},finish:function finish(finallyLoc){for(var i=this.tryEntries.length-1;i>=0;--i){var entry=this.tryEntries[i];if(entry.finallyLoc===finallyLoc)return this.complete(entry.completion,entry.afterLoc),resetTryEntry(entry),ContinueSentinel}},catch:function _catch(tryLoc){for(var i=this.tryEntries.length-1;i>=0;--i){var entry=this.tryEntries[i];if(entry.tryLoc===tryLoc){var record=entry.completion;if("throw"===record.type){var thrown=record.arg;resetTryEntry(entry)}return thrown}}throw new Error("illegal catch attempt")},delegateYield:function delegateYield(iterable,resultName,nextLoc){return this.delegate={iterator:values(iterable),resultName,nextLoc},"next"===this.method&&(this.arg=void 0),ContinueSentinel}},exports}var _marked=_regeneratorRuntime().mark(selection_iterator$1),_marked2=_regeneratorRuntime().mark(selection_iterator);function _createForOfIteratorHelper(o,allowArrayLike){var it="undefined"!=typeof Symbol&&o[Symbol.iterator]||o["@@iterator"];if(!it){if(Array.isArray(o)||(it=_unsupportedIterableToArray(o))||allowArrayLike&&o&&"number"==typeof o.length){it&&(o=it);var i=0,F=function F(){};return{s:F,n:function n(){return i>=o.length?{done:!0}:{done:!1,value:o[i++]}},e:function e(_e8){throw _e8},f:F}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var err,normalCompletion=!0,didErr=!1;return{s:function s(){it=it.call(o)},n:function n(){var step=it.next();return normalCompletion=step.done,step},e:function e(_e9){didErr=!0,err=_e9},f:function f(){try{normalCompletion||null==it.return||it.return()}finally{if(didErr)throw err}}}}function _unsupportedIterableToArray(o,minLen){if(o){if("string"==typeof o)return _arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);return"Object"===n&&o.constructor&&(n=o.constructor.name),"Map"===n||"Set"===n?Array.from(o):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?_arrayLikeToArray(o,minLen):void 0}}function _arrayLikeToArray(arr,len){(null==len||len>arr.length)&&(len=arr.length);for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2}function __decorate$1(decorators,target,key,desc){var d,c=arguments.length,r=c<3?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r}function __classPrivateFieldGet$1(receiver,state,kind,f){if("a"===kind&&!f)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof state?receiver!==state||!f:!state.has(receiver))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===kind?f:"a"===kind?f.call(receiver):f?f.value:state.get(receiver)}function __classPrivateFieldSet$1(receiver,state,value,kind,f){if("m"===kind)throw new TypeError("Private method is not writable");if("a"===kind&&!f)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof state?receiver!==state||!f:!state.has(receiver))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===kind?f.call(receiver,value):f?f.value=value:state.set(receiver,value),value}var noop$1={value:function value(){}};function dispatch$1(){for(var t,i=0,n=arguments.length,_={};i<n;++i){if(!(t=arguments[i]+"")||t in _||/[\s.]/.test(t))throw new Error("illegal type: "+t);_[t]=[]}return new Dispatch$1(_)}function Dispatch$1(_){this._=_}function parseTypenames$3(typenames,types){return typenames.trim().split(/^|\s+/).map((function(t){var name="",i=t.indexOf(".");if(i>=0&&(name=t.slice(i+1),t=t.slice(0,i)),t&&!types.hasOwnProperty(t))throw new Error("unknown type: "+t);return{type:t,name}}))}function get$3(type,name){for(var c,i=0,n=type.length;i<n;++i)if((c=type[i]).name===name)return c.value}function set$3(type,name,callback){for(var i=0,n=type.length;i<n;++i)if(type[i].name===name){type[i]=noop$1,type=type.slice(0,i).concat(type.slice(i+1));break}return null!=callback&&type.push({name,value:callback}),type}Dispatch$1.prototype=dispatch$1.prototype={constructor:Dispatch$1,on:function on(typename,callback){var t,_=this._,T=parseTypenames$3(typename+"",_),i=-1,n=T.length;if(!(arguments.length<2)){if(null!=callback&&"function"!=typeof callback)throw new Error("invalid callback: "+callback);for(;++i<n;)if(t=(typename=T[i]).type)_[t]=set$3(_[t],typename.name,callback);else if(null==callback)for(t in _)_[t]=set$3(_[t],typename.name,null);return this}for(;++i<n;)if((t=(typename=T[i]).type)&&(t=get$3(_[t],typename.name)))return t},copy:function copy(){var copy={},_=this._;for(var t in _)copy[t]=_[t].slice();return new Dispatch$1(copy)},call:function call(type,that){if((n=arguments.length-2)>0)for(var n,t,args=new Array(n),i=0;i<n;++i)args[i]=arguments[i+2];if(!this._.hasOwnProperty(type))throw new Error("unknown type: "+type);for(i=0,n=(t=this._[type]).length;i<n;++i)t[i].value.apply(that,args)},apply:function apply(type,that,args){if(!this._.hasOwnProperty(type))throw new Error("unknown type: "+type);for(var t=this._[type],i=0,n=t.length;i<n;++i)t[i].value.apply(that,args)}};var xhtml$1="http://www.w3.org/1999/xhtml",namespaces$1={svg:"http://www.w3.org/2000/svg",xhtml:xhtml$1,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function namespace$1(name){var prefix=name+="",i=prefix.indexOf(":");return i>=0&&"xmlns"!==(prefix=name.slice(0,i))&&(name=name.slice(i+1)),namespaces$1.hasOwnProperty(prefix)?{space:namespaces$1[prefix],local:name}:name}function creatorInherit$1(name){return function(){var document=this.ownerDocument,uri=this.namespaceURI;return uri===xhtml$1&&document.documentElement.namespaceURI===xhtml$1?document.createElement(name):document.createElementNS(uri,name)}}function creatorFixed$1(fullname){return function(){return this.ownerDocument.createElementNS(fullname.space,fullname.local)}}function creator$1(name){var fullname=namespace$1(name);return(fullname.local?creatorFixed$1:creatorInherit$1)(fullname)}function none$1(){}function selector$1(selector){return null==selector?none$1:function(){return this.querySelector(selector)}}function array$1(x){return null==x?[]:Array.isArray(x)?x:Array.from(x)}function empty$1(){return[]}function selectorAll$1(selector){return null==selector?empty$1:function(){return this.querySelectorAll(selector)}}function matcher$1(selector){return function(){return this.matches(selector)}}function childMatcher$1(selector){return function(node){return node.matches(selector)}}var find$1=Array.prototype.find;function childFirst$1(){return this.firstElementChild}var filter$1=Array.prototype.filter;function children$1(){return Array.from(this.children)}function sparse$1(update){return new Array(update.length)}function EnterNode$1(parent,datum){this.ownerDocument=parent.ownerDocument,this.namespaceURI=parent.namespaceURI,this._next=null,this._parent=parent,this.__data__=datum}function constant$4(x){return function(){return x}}function bindIndex$1(parent,group,enter,update,exit,data){for(var node,i=0,groupLength=group.length,dataLength=data.length;i<dataLength;++i)(node=group[i])?(node.__data__=data[i],update[i]=node):enter[i]=new EnterNode$1(parent,data[i]);for(;i<groupLength;++i)(node=group[i])&&(exit[i]=node)}function bindKey$1(parent,group,enter,update,exit,data,key){var i,node,keyValue,nodeByKeyValue=new Map,groupLength=group.length,dataLength=data.length,keyValues=new Array(groupLength);for(i=0;i<groupLength;++i)(node=group[i])&&(keyValues[i]=keyValue=key.call(node,node.__data__,i,group)+"",nodeByKeyValue.has(keyValue)?exit[i]=node:nodeByKeyValue.set(keyValue,node));for(i=0;i<dataLength;++i)keyValue=key.call(parent,data[i],i,data)+"",(node=nodeByKeyValue.get(keyValue))?(update[i]=node,node.__data__=data[i],nodeByKeyValue.delete(keyValue)):enter[i]=new EnterNode$1(parent,data[i]);for(i=0;i<groupLength;++i)(node=group[i])&&nodeByKeyValue.get(keyValues[i])===node&&(exit[i]=node)}function datum$1(node){return node.__data__}function arraylike$1(data){return"object"==typeof data&&"length"in data?data:Array.from(data)}function ascending$2(a,b){return a<b?-1:a>b?1:a>=b?0:NaN}function attrRemove$3(name){return function(){this.removeAttribute(name)}}function attrRemoveNS$3(fullname){return function(){this.removeAttributeNS(fullname.space,fullname.local)}}function attrConstant$3(name,value){return function(){this.setAttribute(name,value)}}function attrConstantNS$3(fullname,value){return function(){this.setAttributeNS(fullname.space,fullname.local,value)}}function attrFunction$3(name,value){return function(){var v=value.apply(this,arguments);null==v?this.removeAttribute(name):this.setAttribute(name,v)}}function attrFunctionNS$3(fullname,value){return function(){var v=value.apply(this,arguments);null==v?this.removeAttributeNS(fullname.space,fullname.local):this.setAttributeNS(fullname.space,fullname.local,v)}}function defaultView$1(node){return node.ownerDocument&&node.ownerDocument.defaultView||node.document&&node||node.defaultView}function styleRemove$3(name){return function(){this.style.removeProperty(name)}}function styleConstant$3(name,value,priority){return function(){this.style.setProperty(name,value,priority)}}function styleFunction$3(name,value,priority){return function(){var v=value.apply(this,arguments);null==v?this.style.removeProperty(name):this.style.setProperty(name,v,priority)}}function styleValue$1(node,name){return node.style.getPropertyValue(name)||defaultView$1(node).getComputedStyle(node,null).getPropertyValue(name)}function propertyRemove$1(name){return function(){delete this[name]}}function propertyConstant$1(name,value){return function(){this[name]=value}}function propertyFunction$1(name,value){return function(){var v=value.apply(this,arguments);null==v?delete this[name]:this[name]=v}}function classArray$1(string){return string.trim().split(/^|\s+/)}function classList$1(node){return node.classList||new ClassList$1(node)}function ClassList$1(node){this._node=node,this._names=classArray$1(node.getAttribute("class")||"")}function classedAdd$1(node,names){for(var list=classList$1(node),i=-1,n=names.length;++i<n;)list.add(names[i])}function classedRemove$1(node,names){for(var list=classList$1(node),i=-1,n=names.length;++i<n;)list.remove(names[i])}function classedTrue$1(names){return function(){classedAdd$1(this,names)}}function classedFalse$1(names){return function(){classedRemove$1(this,names)}}function classedFunction$1(names,value){return function(){(value.apply(this,arguments)?classedAdd$1:classedRemove$1)(this,names)}}function textRemove$1(){this.textContent=""}function textConstant$3(value){return function(){this.textContent=value}}function textFunction$3(value){return function(){var v=value.apply(this,arguments);this.textContent=null==v?"":v}}function htmlRemove$1(){this.innerHTML=""}function htmlConstant$1(value){return function(){this.innerHTML=value}}function htmlFunction$1(value){return function(){var v=value.apply(this,arguments);this.innerHTML=null==v?"":v}}function raise$1(){this.nextSibling&&this.parentNode.appendChild(this)}function lower$1(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function constantNull$1(){return null}function remove$1(){var parent=this.parentNode;parent&&parent.removeChild(this)}function selection_cloneShallow$1(){var clone=this.cloneNode(!1),parent=this.parentNode;return parent?parent.insertBefore(clone,this.nextSibling):clone}function selection_cloneDeep$1(){var clone=this.cloneNode(!0),parent=this.parentNode;return parent?parent.insertBefore(clone,this.nextSibling):clone}function parseTypenames$2(typenames){return typenames.trim().split(/^|\s+/).map((function(t){var name="",i=t.indexOf(".");return i>=0&&(name=t.slice(i+1),t=t.slice(0,i)),{type:t,name}}))}function onRemove$1(typename){return function(){var on=this.__on;if(on){for(var o,j=0,i=-1,m=on.length;j<m;++j)o=on[j],typename.type&&o.type!==typename.type||o.name!==typename.name?on[++i]=o:this.removeEventListener(o.type,o.listener,o.options);++i?on.length=i:delete this.__on}}}function onAdd$1(typename,value,options){return function(){var o,on=this.__on,listener=function contextListener$1(listener){return function(event){listener.call(this,event,this.__data__)}}(value);if(on)for(var j=0,m=on.length;j<m;++j)if((o=on[j]).type===typename.type&&o.name===typename.name)return this.removeEventListener(o.type,o.listener,o.options),this.addEventListener(o.type,o.listener=listener,o.options=options),void(o.value=value);this.addEventListener(typename.type,listener,options),o={type:typename.type,name:typename.name,value,listener,options},on?on.push(o):this.__on=[o]}}function dispatchEvent$1(node,type,params){var window=defaultView$1(node),event=window.CustomEvent;"function"==typeof event?event=new event(type,params):(event=window.document.createEvent("Event"),params?(event.initEvent(type,params.bubbles,params.cancelable),event.detail=params.detail):event.initEvent(type,!1,!1)),node.dispatchEvent(event)}function dispatchConstant$1(type,params){return function(){return dispatchEvent$1(this,type,params)}}function dispatchFunction$1(type,params){return function(){return dispatchEvent$1(this,type,params.apply(this,arguments))}}function selection_iterator$1(){var groups,j,m,group,i,n,node;return _regeneratorRuntime().wrap((function selection_iterator$1$(_context){for(;;)switch(_context.prev=_context.next){case 0:groups=this._groups,j=0,m=groups.length;case 1:if(!(j<m)){_context.next=13;break}group=groups[j],i=0,n=group.length;case 3:if(!(i<n)){_context.next=10;break}if(!(node=group[i])){_context.next=7;break}return _context.next=7,node;case 7:++i,_context.next=3;break;case 10:++j,_context.next=1;break;case 13:case"end":return _context.stop()}}),_marked,this)}EnterNode$1.prototype={constructor:EnterNode$1,appendChild:function appendChild(child){return this._parent.insertBefore(child,this._next)},insertBefore:function insertBefore(child,next){return this._parent.insertBefore(child,next)},querySelector:function querySelector(selector){return this._parent.querySelector(selector)},querySelectorAll:function querySelectorAll(selector){return this._parent.querySelectorAll(selector)}},ClassList$1.prototype={add:function add(name){this._names.indexOf(name)<0&&(this._names.push(name),this._node.setAttribute("class",this._names.join(" ")))},remove:function remove(name){var i=this._names.indexOf(name);i>=0&&(this._names.splice(i,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function contains(name){return this._names.indexOf(name)>=0}};var root$1=[null];function Selection$3(groups,parents){this._groups=groups,this._parents=parents}function selection$1(){return new Selection$3([[document.documentElement]],root$1)}function define$1(constructor,factory,prototype){constructor.prototype=factory.prototype=prototype,prototype.constructor=constructor}function extend$1(parent,definition){var prototype=Object.create(parent.prototype);for(var key in definition)prototype[key]=definition[key];return prototype}function Color$1(){}Selection$3.prototype=selection$1.prototype=(_selection$1$prototyp={constructor:Selection$3,select:function selection_select$1(select){"function"!=typeof select&&(select=selector$1(select));for(var groups=this._groups,m=groups.length,subgroups=new Array(m),j=0;j<m;++j)for(var node,subnode,group=groups[j],n=group.length,subgroup=subgroups[j]=new Array(n),i=0;i<n;++i)(node=group[i])&&(subnode=select.call(node,node.__data__,i,group))&&("__data__"in node&&(subnode.__data__=node.__data__),subgroup[i]=subnode);return new Selection$3(subgroups,this._parents)},selectAll:function selection_selectAll$1(select){select="function"==typeof select?function arrayAll$1(select){return function(){return array$1(select.apply(this,arguments))}}(select):selectorAll$1(select);for(var groups=this._groups,m=groups.length,subgroups=[],parents=[],j=0;j<m;++j)for(var node,group=groups[j],n=group.length,i=0;i<n;++i)(node=group[i])&&(subgroups.push(select.call(node,node.__data__,i,group)),parents.push(node));return new Selection$3(subgroups,parents)},selectChild:function selection_selectChild$1(match){return this.select(null==match?childFirst$1:function childFind$1(match){return function(){return find$1.call(this.children,match)}}("function"==typeof match?match:childMatcher$1(match)))},selectChildren:function selection_selectChildren$1(match){return this.selectAll(null==match?children$1:function childrenFilter$1(match){return function(){return filter$1.call(this.children,match)}}("function"==typeof match?match:childMatcher$1(match)))},filter:function selection_filter$1(match){"function"!=typeof match&&(match=matcher$1(match));for(var groups=this._groups,m=groups.length,subgroups=new Array(m),j=0;j<m;++j)for(var node,group=groups[j],n=group.length,subgroup=subgroups[j]=[],i=0;i<n;++i)(node=group[i])&&match.call(node,node.__data__,i,group)&&subgroup.push(node);return new Selection$3(subgroups,this._parents)},data:function selection_data$1(value,key){if(!arguments.length)return Array.from(this,datum$1);var bind=key?bindKey$1:bindIndex$1,parents=this._parents,groups=this._groups;"function"!=typeof value&&(value=constant$4(value));for(var m=groups.length,update=new Array(m),enter=new Array(m),exit=new Array(m),j=0;j<m;++j){var parent=parents[j],group=groups[j],groupLength=group.length,data=arraylike$1(value.call(parent,parent&&parent.__data__,j,parents)),dataLength=data.length,enterGroup=enter[j]=new Array(dataLength),updateGroup=update[j]=new Array(dataLength),exitGroup=exit[j]=new Array(groupLength);bind(parent,group,enterGroup,updateGroup,exitGroup,data,key);for(var previous,next,i0=0,i1=0;i0<dataLength;++i0)if(previous=enterGroup[i0]){for(i0>=i1&&(i1=i0+1);!(next=updateGroup[i1])&&++i1<dataLength;);previous._next=next||null}}return(update=new Selection$3(update,parents))._enter=enter,update._exit=exit,update},enter:function selection_enter$1(){return new Selection$3(this._enter||this._groups.map(sparse$1),this._parents)},exit:function selection_exit$1(){return new Selection$3(this._exit||this._groups.map(sparse$1),this._parents)},join:function selection_join$1(onenter,onupdate,onexit){var enter=this.enter(),update=this,exit=this.exit();return"function"==typeof onenter?(enter=onenter(enter))&&(enter=enter.selection()):enter=enter.append(onenter+""),null!=onupdate&&(update=onupdate(update))&&(update=update.selection()),null==onexit?exit.remove():onexit(exit),enter&&update?enter.merge(update).order():update},merge:function selection_merge$1(context){for(var selection=context.selection?context.selection():context,groups0=this._groups,groups1=selection._groups,m0=groups0.length,m1=groups1.length,m=Math.min(m0,m1),merges=new Array(m0),j=0;j<m;++j)for(var node,group0=groups0[j],group1=groups1[j],n=group0.length,merge=merges[j]=new Array(n),i=0;i<n;++i)(node=group0[i]||group1[i])&&(merge[i]=node);for(;j<m0;++j)merges[j]=groups0[j];return new Selection$3(merges,this._parents)},selection:function selection_selection$1(){return this},order:function selection_order$1(){for(var groups=this._groups,j=-1,m=groups.length;++j<m;)for(var node,group=groups[j],i=group.length-1,next=group[i];--i>=0;)(node=group[i])&&(next&&4^node.compareDocumentPosition(next)&&next.parentNode.insertBefore(node,next),next=node);return this},sort:function selection_sort$1(compare){function compareNode(a,b){return a&&b?compare(a.__data__,b.__data__):!a-!b}compare||(compare=ascending$2);for(var groups=this._groups,m=groups.length,sortgroups=new Array(m),j=0;j<m;++j){for(var node,group=groups[j],n=group.length,sortgroup=sortgroups[j]=new Array(n),i=0;i<n;++i)(node=group[i])&&(sortgroup[i]=node);sortgroup.sort(compareNode)}return new Selection$3(sortgroups,this._parents).order()},call:function selection_call$1(){var callback=arguments[0];return arguments[0]=this,callback.apply(null,arguments),this},nodes:function selection_nodes$1(){return Array.from(this)},node:function selection_node$1(){for(var groups=this._groups,j=0,m=groups.length;j<m;++j)for(var group=groups[j],i=0,n=group.length;i<n;++i){var node=group[i];if(node)return node}return null},size:function selection_size$1(){var _step,size=0,_iterator=_createForOfIteratorHelper(this);try{for(_iterator.s();!(_step=_iterator.n()).done;){_step.value;++size}}catch(err){_iterator.e(err)}finally{_iterator.f()}return size},empty:function selection_empty$1(){return!this.node()},each:function selection_each$1(callback){for(var groups=this._groups,j=0,m=groups.length;j<m;++j)for(var node,group=groups[j],i=0,n=group.length;i<n;++i)(node=group[i])&&callback.call(node,node.__data__,i,group);return this},attr:function selection_attr$1(name,value){var fullname=namespace$1(name);if(arguments.length<2){var node=this.node();return fullname.local?node.getAttributeNS(fullname.space,fullname.local):node.getAttribute(fullname)}return this.each((null==value?fullname.local?attrRemoveNS$3:attrRemove$3:"function"==typeof value?fullname.local?attrFunctionNS$3:attrFunction$3:fullname.local?attrConstantNS$3:attrConstant$3)(fullname,value))},style:function selection_style$1(name,value,priority){return arguments.length>1?this.each((null==value?styleRemove$3:"function"==typeof value?styleFunction$3:styleConstant$3)(name,value,null==priority?"":priority)):styleValue$1(this.node(),name)},property:function selection_property$1(name,value){return arguments.length>1?this.each((null==value?propertyRemove$1:"function"==typeof value?propertyFunction$1:propertyConstant$1)(name,value)):this.node()[name]},classed:function selection_classed$1(name,value){var names=classArray$1(name+"");if(arguments.length<2){for(var list=classList$1(this.node()),i=-1,n=names.length;++i<n;)if(!list.contains(names[i]))return!1;return!0}return this.each(("function"==typeof value?classedFunction$1:value?classedTrue$1:classedFalse$1)(names,value))},text:function selection_text$1(value){return arguments.length?this.each(null==value?textRemove$1:("function"==typeof value?textFunction$3:textConstant$3)(value)):this.node().textContent},html:function selection_html$1(value){return arguments.length?this.each(null==value?htmlRemove$1:("function"==typeof value?htmlFunction$1:htmlConstant$1)(value)):this.node().innerHTML},raise:function selection_raise$1(){return this.each(raise$1)},lower:function selection_lower$1(){return this.each(lower$1)},append:function selection_append$1(name){var create="function"==typeof name?name:creator$1(name);return this.select((function(){return this.appendChild(create.apply(this,arguments))}))},insert:function selection_insert$1(name,before){var create="function"==typeof name?name:creator$1(name),select=null==before?constantNull$1:"function"==typeof before?before:selector$1(before);return this.select((function(){return this.insertBefore(create.apply(this,arguments),select.apply(this,arguments)||null)}))},remove:function selection_remove$1(){return this.each(remove$1)},clone:function selection_clone$1(deep){return this.select(deep?selection_cloneDeep$1:selection_cloneShallow$1)},datum:function selection_datum$1(value){return arguments.length?this.property("__data__",value):this.node().__data__},on:function selection_on$1(typename,value,options){var i,t,typenames=parseTypenames$2(typename+""),n=typenames.length;if(!(arguments.length<2)){for(on=value?onAdd$1:onRemove$1,i=0;i<n;++i)this.each(on(typenames[i],value,options));return this}var on=this.node().__on;if(on)for(var o,j=0,m=on.length;j<m;++j)for(i=0,o=on[j];i<n;++i)if((t=typenames[i]).type===o.type&&t.name===o.name)return o.value},dispatch:function selection_dispatch$1(type,params){return this.each(("function"==typeof params?dispatchFunction$1:dispatchConstant$1)(type,params))}},_selection$1$prototyp[Symbol.iterator]=selection_iterator$1,_selection$1$prototyp);var brighter$1=1/.7,reI$1="\\s*([+-]?\\d+)\\s*",reN$1="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",reP$1="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",reHex$1=/^#([0-9a-f]{3,8})$/,reRgbInteger$1=new RegExp("^rgb\\("+reI$1+","+reI$1+","+reI$1+"\\)$"),reRgbPercent$1=new RegExp("^rgb\\("+reP$1+","+reP$1+","+reP$1+"\\)$"),reRgbaInteger$1=new RegExp("^rgba\\("+reI$1+","+reI$1+","+reI$1+","+reN$1+"\\)$"),reRgbaPercent$1=new RegExp("^rgba\\("+reP$1+","+reP$1+","+reP$1+","+reN$1+"\\)$"),reHslPercent$1=new RegExp("^hsl\\("+reN$1+","+reP$1+","+reP$1+"\\)$"),reHslaPercent$1=new RegExp("^hsla\\("+reN$1+","+reP$1+","+reP$1+","+reN$1+"\\)$"),named$1={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};function color_formatHex$1(){return this.rgb().formatHex()}function color_formatRgb$1(){return this.rgb().formatRgb()}function color$1(format){var m,l;return format=(format+"").trim().toLowerCase(),(m=reHex$1.exec(format))?(l=m[1].length,m=parseInt(m[1],16),6===l?rgbn$1(m):3===l?new Rgb$1(m>>8&15|m>>4&240,m>>4&15|240&m,(15&m)<<4|15&m,1):8===l?rgba$1(m>>24&255,m>>16&255,m>>8&255,(255&m)/255):4===l?rgba$1(m>>12&15|m>>8&240,m>>8&15|m>>4&240,m>>4&15|240&m,((15&m)<<4|15&m)/255):null):(m=reRgbInteger$1.exec(format))?new Rgb$1(m[1],m[2],m[3],1):(m=reRgbPercent$1.exec(format))?new Rgb$1(255*m[1]/100,255*m[2]/100,255*m[3]/100,1):(m=reRgbaInteger$1.exec(format))?rgba$1(m[1],m[2],m[3],m[4]):(m=reRgbaPercent$1.exec(format))?rgba$1(255*m[1]/100,255*m[2]/100,255*m[3]/100,m[4]):(m=reHslPercent$1.exec(format))?hsla$1(m[1],m[2]/100,m[3]/100,1):(m=reHslaPercent$1.exec(format))?hsla$1(m[1],m[2]/100,m[3]/100,m[4]):named$1.hasOwnProperty(format)?rgbn$1(named$1[format]):"transparent"===format?new Rgb$1(NaN,NaN,NaN,0):null}function rgbn$1(n){return new Rgb$1(n>>16&255,n>>8&255,255&n,1)}function rgba$1(r,g,b,a){return a<=0&&(r=g=b=NaN),new Rgb$1(r,g,b,a)}function rgbConvert$1(o){return o instanceof Color$1||(o=color$1(o)),o?new Rgb$1((o=o.rgb()).r,o.g,o.b,o.opacity):new Rgb$1}function rgb$1(r,g,b,opacity){return 1===arguments.length?rgbConvert$1(r):new Rgb$1(r,g,b,null==opacity?1:opacity)}function Rgb$1(r,g,b,opacity){this.r=+r,this.g=+g,this.b=+b,this.opacity=+opacity}function rgb_formatHex$1(){return"#"+hex$1(this.r)+hex$1(this.g)+hex$1(this.b)}function rgb_formatRgb$1(){var a=clampa$1(this.opacity);return(1===a?"rgb(":"rgba(")+clampi$1(this.r)+", "+clampi$1(this.g)+", "+clampi$1(this.b)+(1===a?")":", "+a+")")}function clampa$1(opacity){return isNaN(opacity)?1:Math.max(0,Math.min(1,opacity))}function clampi$1(value){return Math.max(0,Math.min(255,Math.round(value)||0))}function hex$1(value){return((value=clampi$1(value))<16?"0":"")+value.toString(16)}function hsla$1(h,s,l,a){return a<=0?h=s=l=NaN:l<=0||l>=1?h=s=NaN:s<=0&&(h=NaN),new Hsl$1(h,s,l,a)}function hslConvert$1(o){if(o instanceof Hsl$1)return new Hsl$1(o.h,o.s,o.l,o.opacity);if(o instanceof Color$1||(o=color$1(o)),!o)return new Hsl$1;if(o instanceof Hsl$1)return o;var r=(o=o.rgb()).r/255,g=o.g/255,b=o.b/255,min=Math.min(r,g,b),max=Math.max(r,g,b),h=NaN,s=max-min,l=(max+min)/2;return s?(h=r===max?(g-b)/s+6*(g<b):g===max?(b-r)/s+2:(r-g)/s+4,s/=l<.5?max+min:2-max-min,h*=60):s=l>0&&l<1?0:h,new Hsl$1(h,s,l,o.opacity)}function Hsl$1(h,s,l,opacity){this.h=+h,this.s=+s,this.l=+l,this.opacity=+opacity}function clamph$1(value){return(value=(value||0)%360)<0?value+360:value}function clampt$1(value){return Math.max(0,Math.min(1,value||0))}function hsl2rgb$1(h,m1,m2){return 255*(h<60?m1+(m2-m1)*h/60:h<180?m2:h<240?m1+(m2-m1)*(240-h)/60:m1)}define$1(Color$1,color$1,{copy:function copy(channels){return Object.assign(new this.constructor,this,channels)},displayable:function displayable(){return this.rgb().displayable()},hex:color_formatHex$1,formatHex:color_formatHex$1,formatHex8:function color_formatHex8$1(){return this.rgb().formatHex8()},formatHsl:function color_formatHsl$1(){return hslConvert$1(this).formatHsl()},formatRgb:color_formatRgb$1,toString:color_formatRgb$1}),define$1(Rgb$1,rgb$1,extend$1(Color$1,{brighter:function brighter(k){return k=null==k?brighter$1:Math.pow(brighter$1,k),new Rgb$1(this.r*k,this.g*k,this.b*k,this.opacity)},darker:function darker(k){return k=null==k?.7:Math.pow(.7,k),new Rgb$1(this.r*k,this.g*k,this.b*k,this.opacity)},rgb:function rgb(){return this},clamp:function clamp(){return new Rgb$1(clampi$1(this.r),clampi$1(this.g),clampi$1(this.b),clampa$1(this.opacity))},displayable:function displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:rgb_formatHex$1,formatHex:rgb_formatHex$1,formatHex8:function rgb_formatHex8$1(){return"#"+hex$1(this.r)+hex$1(this.g)+hex$1(this.b)+hex$1(255*(isNaN(this.opacity)?1:this.opacity))},formatRgb:rgb_formatRgb$1,toString:rgb_formatRgb$1})),define$1(Hsl$1,(function hsl$1(h,s,l,opacity){return 1===arguments.length?hslConvert$1(h):new Hsl$1(h,s,l,null==opacity?1:opacity)}),extend$1(Color$1,{brighter:function brighter(k){return k=null==k?brighter$1:Math.pow(brighter$1,k),new Hsl$1(this.h,this.s,this.l*k,this.opacity)},darker:function darker(k){return k=null==k?.7:Math.pow(.7,k),new Hsl$1(this.h,this.s,this.l*k,this.opacity)},rgb:function rgb(){var h=this.h%360+360*(this.h<0),s=isNaN(h)||isNaN(this.s)?0:this.s,l=this.l,m2=l+(l<.5?l:1-l)*s,m1=2*l-m2;return new Rgb$1(hsl2rgb$1(h>=240?h-240:h+120,m1,m2),hsl2rgb$1(h,m1,m2),hsl2rgb$1(h<120?h+240:h-120,m1,m2),this.opacity)},clamp:function clamp(){return new Hsl$1(clamph$1(this.h),clampt$1(this.s),clampt$1(this.l),clampa$1(this.opacity))},displayable:function displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl:function formatHsl(){var a=clampa$1(this.opacity);return(1===a?"hsl(":"hsla(")+clamph$1(this.h)+", "+100*clampt$1(this.s)+"%, "+100*clampt$1(this.l)+"%"+(1===a?")":", "+a+")")}}));var constant$3=function constant$3(x){return function(){return x}};function gamma$1(y){return 1==(y=+y)?nogamma$1:function(a,b){return b-a?function exponential$1(a,b,y){return a=Math.pow(a,y),b=Math.pow(b,y)-a,y=1/y,function(t){return Math.pow(a+t*b,y)}}(a,b,y):constant$3(isNaN(a)?b:a)}}function nogamma$1(a,b){var d=b-a;return d?function linear$2(a,d){return function(t){return a+t*d}}(a,d):constant$3(isNaN(a)?b:a)}var interpolateRgb$1=function rgbGamma(y){var color=gamma$1(y);function rgb(start,end){var r=color((start=rgb$1(start)).r,(end=rgb$1(end)).r),g=color(start.g,end.g),b=color(start.b,end.b),opacity=nogamma$1(start.opacity,end.opacity);return function(t){return start.r=r(t),start.g=g(t),start.b=b(t),start.opacity=opacity(t),start+""}}return rgb.gamma=rgbGamma,rgb}(1);function interpolateNumber$1(a,b){return a=+a,b=+b,function(t){return a*(1-t)+b*t}}var reA$1=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,reB$1=new RegExp(reA$1.source,"g");function interpolateString$1(a,b){var am,bm,bs,bi=reA$1.lastIndex=reB$1.lastIndex=0,i=-1,s=[],q=[];for(a+="",b+="";(am=reA$1.exec(a))&&(bm=reB$1.exec(b));)(bs=bm.index)>bi&&(bs=b.slice(bi,bs),s[i]?s[i]+=bs:s[++i]=bs),(am=am[0])===(bm=bm[0])?s[i]?s[i]+=bm:s[++i]=bm:(s[++i]=null,q.push({i,x:interpolateNumber$1(am,bm)})),bi=reB$1.lastIndex;return bi<b.length&&(bs=b.slice(bi),s[i]?s[i]+=bs:s[++i]=bs),s.length<2?q[0]?function one$1(b){return function(t){return b(t)+""}}(q[0].x):function zero$2(b){return function(){return b}}(b):(b=q.length,function(t){for(var o,i=0;i<b;++i)s[(o=q[i]).i]=o.x(t);return s.join("")})}var svgNode$1,degrees$1=180/Math.PI,identity$4={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function decompose$1(a,b,c,d,e,f){var scaleX,scaleY,skewX;return(scaleX=Math.sqrt(a*a+b*b))&&(a/=scaleX,b/=scaleX),(skewX=a*c+b*d)&&(c-=a*skewX,d-=b*skewX),(scaleY=Math.sqrt(c*c+d*d))&&(c/=scaleY,d/=scaleY,skewX/=scaleY),a*d<b*c&&(a=-a,b=-b,skewX=-skewX,scaleX=-scaleX),{translateX:e,translateY:f,rotate:Math.atan2(b,a)*degrees$1,skewX:Math.atan(skewX)*degrees$1,scaleX,scaleY}}function interpolateTransform$1(parse,pxComma,pxParen,degParen){function pop(s){return s.length?s.pop()+" ":""}return function(a,b){var s=[],q=[];return a=parse(a),b=parse(b),function translate(xa,ya,xb,yb,s,q){if(xa!==xb||ya!==yb){var i=s.push("translate(",null,pxComma,null,pxParen);q.push({i:i-4,x:interpolateNumber$1(xa,xb)},{i:i-2,x:interpolateNumber$1(ya,yb)})}else(xb||yb)&&s.push("translate("+xb+pxComma+yb+pxParen)}(a.translateX,a.translateY,b.translateX,b.translateY,s,q),function rotate(a,b,s,q){a!==b?(a-b>180?b+=360:b-a>180&&(a+=360),q.push({i:s.push(pop(s)+"rotate(",null,degParen)-2,x:interpolateNumber$1(a,b)})):b&&s.push(pop(s)+"rotate("+b+degParen)}(a.rotate,b.rotate,s,q),function skewX(a,b,s,q){a!==b?q.push({i:s.push(pop(s)+"skewX(",null,degParen)-2,x:interpolateNumber$1(a,b)}):b&&s.push(pop(s)+"skewX("+b+degParen)}(a.skewX,b.skewX,s,q),function scale(xa,ya,xb,yb,s,q){if(xa!==xb||ya!==yb){var i=s.push(pop(s)+"scale(",null,",",null,")");q.push({i:i-4,x:interpolateNumber$1(xa,xb)},{i:i-2,x:interpolateNumber$1(ya,yb)})}else 1===xb&&1===yb||s.push(pop(s)+"scale("+xb+","+yb+")")}(a.scaleX,a.scaleY,b.scaleX,b.scaleY,s,q),a=b=null,function(t){for(var o,i=-1,n=q.length;++i<n;)s[(o=q[i]).i]=o.x(t);return s.join("")}}}var taskHead$1,taskTail$1,interpolateTransformCss$1=interpolateTransform$1((function parseCss$1(value){var m=new("function"==typeof DOMMatrix?DOMMatrix:WebKitCSSMatrix)(value+"");return m.isIdentity?identity$4:decompose$1(m.a,m.b,m.c,m.d,m.e,m.f)}),"px, ","px)","deg)"),interpolateTransformSvg$1=interpolateTransform$1((function parseSvg$1(value){return null==value?identity$4:(svgNode$1||(svgNode$1=document.createElementNS("http://www.w3.org/2000/svg","g")),svgNode$1.setAttribute("transform",value),(value=svgNode$1.transform.baseVal.consolidate())?decompose$1((value=value.matrix).a,value.b,value.c,value.d,value.e,value.f):identity$4)}),", ",")",")"),frame$1=0,timeout$3=0,interval$1=0,clockLast$1=0,clockNow$1=0,clockSkew$1=0,clock$1="object"==typeof performance&&performance.now?performance:Date,setFrame$1="object"==typeof window&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(f){setTimeout(f,17)};function now$1(){return clockNow$1||(setFrame$1(clearNow$1),clockNow$1=clock$1.now()+clockSkew$1)}function clearNow$1(){clockNow$1=0}function Timer$1(){this._call=this._time=this._next=null}function timer$1(callback,delay,time){var t=new Timer$1;return t.restart(callback,delay,time),t}function wake$1(){clockNow$1=(clockLast$1=clock$1.now())+clockSkew$1,frame$1=timeout$3=0;try{!function timerFlush$1(){now$1(),++frame$1;for(var e,t=taskHead$1;t;)(e=clockNow$1-t._time)>=0&&t._call.call(void 0,e),t=t._next;--frame$1}()}finally{frame$1=0,function nap$1(){var t0,t2,t1=taskHead$1,time=1/0;for(;t1;)t1._call?(time>t1._time&&(time=t1._time),t0=t1,t1=t1._next):(t2=t1._next,t1._next=null,t1=t0?t0._next=t2:taskHead$1=t2);taskTail$1=t0,sleep$1(time)}(),clockNow$1=0}}function poke$1(){var now=clock$1.now(),delay=now-clockLast$1;delay>1e3&&(clockSkew$1-=delay,clockLast$1=now)}function sleep$1(time){frame$1||(timeout$3&&(timeout$3=clearTimeout(timeout$3)),time-clockNow$1>24?(time<1/0&&(timeout$3=setTimeout(wake$1,time-clock$1.now()-clockSkew$1)),interval$1&&(interval$1=clearInterval(interval$1))):(interval$1||(clockLast$1=clock$1.now(),interval$1=setInterval(poke$1,1e3)),frame$1=1,setFrame$1(wake$1)))}function timeout$2(callback,delay,time){var t=new Timer$1;return delay=null==delay?0:+delay,t.restart((function(elapsed){t.stop(),callback(elapsed+delay)}),delay,time),t}Timer$1.prototype=timer$1.prototype={constructor:Timer$1,restart:function restart(callback,delay,time){if("function"!=typeof callback)throw new TypeError("callback is not a function");time=(null==time?now$1():+time)+(null==delay?0:+delay),this._next||taskTail$1===this||(taskTail$1?taskTail$1._next=this:taskHead$1=this,taskTail$1=this),this._call=callback,this._time=time,sleep$1()},stop:function stop(){this._call&&(this._call=null,this._time=1/0,sleep$1())}};var emptyOn$1=dispatch$1("start","end","cancel","interrupt"),emptyTween$1=[];function schedule$1(node,name,id,index,group,timing){var schedules=node.__transition;if(schedules){if(id in schedules)return}else node.__transition={};!function create$1(node,id,self){var tween,schedules=node.__transition;function schedule(elapsed){self.state=1,self.timer.restart(start,self.delay,self.time),self.delay<=elapsed&&start(elapsed-self.delay)}function start(elapsed){var i,j,n,o;if(1!==self.state)return stop();for(i in schedules)if((o=schedules[i]).name===self.name){if(3===o.state)return timeout$2(start);4===o.state?(o.state=6,o.timer.stop(),o.on.call("interrupt",node,node.__data__,o.index,o.group),delete schedules[i]):+i<id&&(o.state=6,o.timer.stop(),o.on.call("cancel",node,node.__data__,o.index,o.group),delete schedules[i])}if(timeout$2((function(){3===self.state&&(self.state=4,self.timer.restart(tick,self.delay,self.time),tick(elapsed))})),self.state=2,self.on.call("start",node,node.__data__,self.index,self.group),2===self.state){for(self.state=3,tween=new Array(n=self.tween.length),i=0,j=-1;i<n;++i)(o=self.tween[i].value.call(node,node.__data__,self.index,self.group))&&(tween[++j]=o);tween.length=j+1}}function tick(elapsed){for(var t=elapsed<self.duration?self.ease.call(null,elapsed/self.duration):(self.timer.restart(stop),self.state=5,1),i=-1,n=tween.length;++i<n;)tween[i].call(node,t);5===self.state&&(self.on.call("end",node,node.__data__,self.index,self.group),stop())}function stop(){for(var i in self.state=6,self.timer.stop(),delete schedules[id],schedules)return;delete node.__transition}schedules[id]=self,self.timer=timer$1(schedule,0,self.time)}(node,id,{name,index,group,on:emptyOn$1,tween:emptyTween$1,time:timing.time,delay:timing.delay,duration:timing.duration,ease:timing.ease,timer:null,state:0})}function init$1(node,id){var schedule=get$2(node,id);if(schedule.state>0)throw new Error("too late; already scheduled");return schedule}function set$2(node,id){var schedule=get$2(node,id);if(schedule.state>3)throw new Error("too late; already running");return schedule}function get$2(node,id){var schedule=node.__transition;if(!schedule||!(schedule=schedule[id]))throw new Error("transition not found");return schedule}function tweenRemove$1(id,name){var tween0,tween1;return function(){var schedule=set$2(this,id),tween=schedule.tween;if(tween!==tween0)for(var i=0,n=(tween1=tween0=tween).length;i<n;++i)if(tween1[i].name===name){(tween1=tween1.slice()).splice(i,1);break}schedule.tween=tween1}}function tweenFunction$1(id,name,value){var tween0,tween1;if("function"!=typeof value)throw new Error;return function(){var schedule=set$2(this,id),tween=schedule.tween;if(tween!==tween0){tween1=(tween0=tween).slice();for(var t={name,value},i=0,n=tween1.length;i<n;++i)if(tween1[i].name===name){tween1[i]=t;break}i===n&&tween1.push(t)}schedule.tween=tween1}}function tweenValue$1(transition,name,value){var id=transition._id;return transition.each((function(){var schedule=set$2(this,id);(schedule.value||(schedule.value={}))[name]=value.apply(this,arguments)})),function(node){return get$2(node,id).value[name]}}function interpolate$2(a,b){var c;return("number"==typeof b?interpolateNumber$1:b instanceof color$1?interpolateRgb$1:(c=color$1(b))?(b=c,interpolateRgb$1):interpolateString$1)(a,b)}function attrRemove$2(name){return function(){this.removeAttribute(name)}}function attrRemoveNS$2(fullname){return function(){this.removeAttributeNS(fullname.space,fullname.local)}}function attrConstant$2(name,interpolate,value1){var string00,interpolate0,string1=value1+"";return function(){var string0=this.getAttribute(name);return string0===string1?null:string0===string00?interpolate0:interpolate0=interpolate(string00=string0,value1)}}function attrConstantNS$2(fullname,interpolate,value1){var string00,interpolate0,string1=value1+"";return function(){var string0=this.getAttributeNS(fullname.space,fullname.local);return string0===string1?null:string0===string00?interpolate0:interpolate0=interpolate(string00=string0,value1)}}function attrFunction$2(name,interpolate,value){var string00,string10,interpolate0;return function(){var string0,string1,value1=value(this);if(null!=value1)return(string0=this.getAttribute(name))===(string1=value1+"")?null:string0===string00&&string1===string10?interpolate0:(string10=string1,interpolate0=interpolate(string00=string0,value1));this.removeAttribute(name)}}function attrFunctionNS$2(fullname,interpolate,value){var string00,string10,interpolate0;return function(){var string0,string1,value1=value(this);if(null!=value1)return(string0=this.getAttributeNS(fullname.space,fullname.local))===(string1=value1+"")?null:string0===string00&&string1===string10?interpolate0:(string10=string1,interpolate0=interpolate(string00=string0,value1));this.removeAttributeNS(fullname.space,fullname.local)}}function attrInterpolate$1(name,i){return function(t){this.setAttribute(name,i.call(this,t))}}function attrInterpolateNS$1(fullname,i){return function(t){this.setAttributeNS(fullname.space,fullname.local,i.call(this,t))}}function attrTweenNS$1(fullname,value){var t0,i0;function tween(){var i=value.apply(this,arguments);return i!==i0&&(t0=(i0=i)&&attrInterpolateNS$1(fullname,i)),t0}return tween._value=value,tween}function attrTween$1(name,value){var t0,i0;function tween(){var i=value.apply(this,arguments);return i!==i0&&(t0=(i0=i)&&attrInterpolate$1(name,i)),t0}return tween._value=value,tween}function delayFunction$1(id,value){return function(){init$1(this,id).delay=+value.apply(this,arguments)}}function delayConstant$1(id,value){return value=+value,function(){init$1(this,id).delay=value}}function durationFunction$1(id,value){return function(){set$2(this,id).duration=+value.apply(this,arguments)}}function durationConstant$1(id,value){return value=+value,function(){set$2(this,id).duration=value}}function easeConstant$1(id,value){if("function"!=typeof value)throw new Error;return function(){set$2(this,id).ease=value}}function onFunction$1(id,name,listener){var on0,on1,sit=function start$1(name){return(name+"").trim().split(/^|\s+/).every((function(t){var i=t.indexOf(".");return i>=0&&(t=t.slice(0,i)),!t||"start"===t}))}(name)?init$1:set$2;return function(){var schedule=sit(this,id),on=schedule.on;on!==on0&&(on1=(on0=on).copy()).on(name,listener),schedule.on=on1}}var Selection$2=selection$1.prototype.constructor;function styleRemove$2(name){return function(){this.style.removeProperty(name)}}function styleInterpolate$1(name,i,priority){return function(t){this.style.setProperty(name,i.call(this,t),priority)}}function styleTween$1(name,value,priority){var t,i0;function tween(){var i=value.apply(this,arguments);return i!==i0&&(t=(i0=i)&&styleInterpolate$1(name,i,priority)),t}return tween._value=value,tween}function textInterpolate$1(i){return function(t){this.textContent=i.call(this,t)}}function textTween$1(value){var t0,i0;function tween(){var i=value.apply(this,arguments);return i!==i0&&(t0=(i0=i)&&textInterpolate$1(i)),t0}return tween._value=value,tween}var id$1=0;function Transition$1(groups,parents,name,id){this._groups=groups,this._parents=parents,this._name=name,this._id=id}function newId$1(){return++id$1}var selection_prototype$1=selection$1.prototype;Transition$1.prototype=(_Transition$1$prototy={constructor:Transition$1,select:function transition_select$1(select){var name=this._name,id=this._id;"function"!=typeof select&&(select=selector$1(select));for(var groups=this._groups,m=groups.length,subgroups=new Array(m),j=0;j<m;++j)for(var node,subnode,group=groups[j],n=group.length,subgroup=subgroups[j]=new Array(n),i=0;i<n;++i)(node=group[i])&&(subnode=select.call(node,node.__data__,i,group))&&("__data__"in node&&(subnode.__data__=node.__data__),subgroup[i]=subnode,schedule$1(subgroup[i],name,id,i,subgroup,get$2(node,id)));return new Transition$1(subgroups,this._parents,name,id)},selectAll:function transition_selectAll$1(select){var name=this._name,id=this._id;"function"!=typeof select&&(select=selectorAll$1(select));for(var groups=this._groups,m=groups.length,subgroups=[],parents=[],j=0;j<m;++j)for(var node,group=groups[j],n=group.length,i=0;i<n;++i)if(node=group[i]){for(var child,children=select.call(node,node.__data__,i,group),inherit=get$2(node,id),k=0,l=children.length;k<l;++k)(child=children[k])&&schedule$1(child,name,id,k,children,inherit);subgroups.push(children),parents.push(node)}return new Transition$1(subgroups,parents,name,id)},selectChild:selection_prototype$1.selectChild,selectChildren:selection_prototype$1.selectChildren,filter:function transition_filter$1(match){"function"!=typeof match&&(match=matcher$1(match));for(var groups=this._groups,m=groups.length,subgroups=new Array(m),j=0;j<m;++j)for(var node,group=groups[j],n=group.length,subgroup=subgroups[j]=[],i=0;i<n;++i)(node=group[i])&&match.call(node,node.__data__,i,group)&&subgroup.push(node);return new Transition$1(subgroups,this._parents,this._name,this._id)},merge:function transition_merge$1(transition){if(transition._id!==this._id)throw new Error;for(var groups0=this._groups,groups1=transition._groups,m0=groups0.length,m1=groups1.length,m=Math.min(m0,m1),merges=new Array(m0),j=0;j<m;++j)for(var node,group0=groups0[j],group1=groups1[j],n=group0.length,merge=merges[j]=new Array(n),i=0;i<n;++i)(node=group0[i]||group1[i])&&(merge[i]=node);for(;j<m0;++j)merges[j]=groups0[j];return new Transition$1(merges,this._parents,this._name,this._id)},selection:function transition_selection$1(){return new Selection$2(this._groups,this._parents)},transition:function transition_transition$1(){for(var name=this._name,id0=this._id,id1=newId$1(),groups=this._groups,m=groups.length,j=0;j<m;++j)for(var node,group=groups[j],n=group.length,i=0;i<n;++i)if(node=group[i]){var inherit=get$2(node,id0);schedule$1(node,name,id1,i,group,{time:inherit.time+inherit.delay+inherit.duration,delay:0,duration:inherit.duration,ease:inherit.ease})}return new Transition$1(groups,this._parents,name,id1)},call:selection_prototype$1.call,nodes:selection_prototype$1.nodes,node:selection_prototype$1.node,size:selection_prototype$1.size,empty:selection_prototype$1.empty,each:selection_prototype$1.each,on:function transition_on$1(name,listener){var id=this._id;return arguments.length<2?get$2(this.node(),id).on.on(name):this.each(onFunction$1(id,name,listener))},attr:function transition_attr$1(name,value){var fullname=namespace$1(name),i="transform"===fullname?interpolateTransformSvg$1:interpolate$2;return this.attrTween(name,"function"==typeof value?(fullname.local?attrFunctionNS$2:attrFunction$2)(fullname,i,tweenValue$1(this,"attr."+name,value)):null==value?(fullname.local?attrRemoveNS$2:attrRemove$2)(fullname):(fullname.local?attrConstantNS$2:attrConstant$2)(fullname,i,value))},attrTween:function transition_attrTween$1(name,value){var key="attr."+name;if(arguments.length<2)return(key=this.tween(key))&&key._value;if(null==value)return this.tween(key,null);if("function"!=typeof value)throw new Error;var fullname=namespace$1(name);return this.tween(key,(fullname.local?attrTweenNS$1:attrTween$1)(fullname,value))},style:function transition_style$1(name,value,priority){var i="transform"==(name+="")?interpolateTransformCss$1:interpolate$2;return null==value?this.styleTween(name,function styleNull$1(name,interpolate){var string00,string10,interpolate0;return function(){var string0=styleValue$1(this,name),string1=(this.style.removeProperty(name),styleValue$1(this,name));return string0===string1?null:string0===string00&&string1===string10?interpolate0:interpolate0=interpolate(string00=string0,string10=string1)}}(name,i)).on("end.style."+name,styleRemove$2(name)):"function"==typeof value?this.styleTween(name,function styleFunction$2(name,interpolate,value){var string00,string10,interpolate0;return function(){var string0=styleValue$1(this,name),value1=value(this),string1=value1+"";return null==value1&&(this.style.removeProperty(name),string1=value1=styleValue$1(this,name)),string0===string1?null:string0===string00&&string1===string10?interpolate0:(string10=string1,interpolate0=interpolate(string00=string0,value1))}}(name,i,tweenValue$1(this,"style."+name,value))).each(function styleMaybeRemove$1(id,name){var on0,on1,listener0,remove,key="style."+name,event="end."+key;return function(){var schedule=set$2(this,id),on=schedule.on,listener=null==schedule.value[key]?remove||(remove=styleRemove$2(name)):void 0;on===on0&&listener0===listener||(on1=(on0=on).copy()).on(event,listener0=listener),schedule.on=on1}}(this._id,name)):this.styleTween(name,function styleConstant$2(name,interpolate,value1){var string00,interpolate0,string1=value1+"";return function(){var string0=styleValue$1(this,name);return string0===string1?null:string0===string00?interpolate0:interpolate0=interpolate(string00=string0,value1)}}(name,i,value),priority).on("end.style."+name,null)},styleTween:function transition_styleTween$1(name,value,priority){var key="style."+(name+="");if(arguments.length<2)return(key=this.tween(key))&&key._value;if(null==value)return this.tween(key,null);if("function"!=typeof value)throw new Error;return this.tween(key,styleTween$1(name,value,null==priority?"":priority))},text:function transition_text$1(value){return this.tween("text","function"==typeof value?function textFunction$2(value){return function(){var value1=value(this);this.textContent=null==value1?"":value1}}(tweenValue$1(this,"text",value)):function textConstant$2(value){return function(){this.textContent=value}}(null==value?"":value+""))},textTween:function transition_textTween$1(value){var key="text";if(arguments.length<1)return(key=this.tween(key))&&key._value;if(null==value)return this.tween(key,null);if("function"!=typeof value)throw new Error;return this.tween(key,textTween$1(value))},remove:function transition_remove$1(){return this.on("end.remove",function removeFunction$1(id){return function(){var parent=this.parentNode;for(var i in this.__transition)if(+i!==id)return;parent&&parent.removeChild(this)}}(this._id))},tween:function transition_tween$1(name,value){var id=this._id;if(name+="",arguments.length<2){for(var t,tween=get$2(this.node(),id).tween,i=0,n=tween.length;i<n;++i)if((t=tween[i]).name===name)return t.value;return null}return this.each((null==value?tweenRemove$1:tweenFunction$1)(id,name,value))},delay:function transition_delay$1(value){var id=this._id;return arguments.length?this.each(("function"==typeof value?delayFunction$1:delayConstant$1)(id,value)):get$2(this.node(),id).delay},duration:function transition_duration$1(value){var id=this._id;return arguments.length?this.each(("function"==typeof value?durationFunction$1:durationConstant$1)(id,value)):get$2(this.node(),id).duration},ease:function transition_ease$1(value){var id=this._id;return arguments.length?this.each(easeConstant$1(id,value)):get$2(this.node(),id).ease},easeVarying:function transition_easeVarying$1(value){if("function"!=typeof value)throw new Error;return this.each(function easeVarying$1(id,value){return function(){var v=value.apply(this,arguments);if("function"!=typeof v)throw new Error;set$2(this,id).ease=v}}(this._id,value))},end:function transition_end$1(){var on0,on1,that=this,id=that._id,size=that.size();return new Promise((function(resolve,reject){var cancel={value:reject},end={value:function value(){0==--size&&resolve()}};that.each((function(){var schedule=set$2(this,id),on=schedule.on;on!==on0&&((on1=(on0=on).copy())._.cancel.push(cancel),on1._.interrupt.push(cancel),on1._.end.push(end)),schedule.on=on1})),0===size&&resolve()}))}},_Transition$1$prototy[Symbol.iterator]=selection_prototype$1[Symbol.iterator],_Transition$1$prototy);var defaultTiming$1={time:null,delay:0,duration:250,ease:function cubicInOut$1(t){return((t*=2)<=1?t*t*t:(t-=2)*t*t+2)/2}};function inherit$1(node,id){for(var timing;!(timing=node.__transition)||!(timing=timing[id]);)if(!(node=node.parentNode))throw new Error("transition "+id+" not found");return timing}function Transform$1(k,x,y){this.k=k,this.x=x,this.y=y}function __decorate(decorators,target,key,desc){var d,c=arguments.length,r=c<3?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r}function __classPrivateFieldGet(receiver,state,kind,f){if("a"===kind&&!f)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof state?receiver!==state||!f:!state.has(receiver))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===kind?f:"a"===kind?f.call(receiver):f?f.value:state.get(receiver)}function __classPrivateFieldSet(receiver,state,value,kind,f){if("m"===kind)throw new TypeError("Private method is not writable");if("a"===kind&&!f)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof state?receiver!==state||!f:!state.has(receiver))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===kind?f.call(receiver,value):f?f.value=value:state.set(receiver,value),value}selection$1.prototype.interrupt=function selection_interrupt$1(name){return this.each((function(){!function interrupt$1(node,name){var schedule,active,i,schedules=node.__transition,empty=!0;if(schedules){for(i in name=null==name?null:name+"",schedules)(schedule=schedules[i]).name===name?(active=schedule.state>2&&schedule.state<5,schedule.state=6,schedule.timer.stop(),schedule.on.call(active?"interrupt":"cancel",node,node.__data__,schedule.index,schedule.group),delete schedules[i]):empty=!1;empty&&delete node.__transition}}(this,name)}))},selection$1.prototype.transition=function selection_transition$1(name){var id,timing;name instanceof Transition$1?(id=name._id,name=name._name):(id=newId$1(),(timing=defaultTiming$1).time=now$1(),name=null==name?null:name+"");for(var groups=this._groups,m=groups.length,j=0;j<m;++j)for(var node,group=groups[j],n=group.length,i=0;i<n;++i)(node=group[i])&&schedule$1(node,name,id,i,group,timing||inherit$1(node,id));return new Transition$1(groups,this._parents,name,id)},Transform$1.prototype={constructor:Transform$1,scale:function scale(k){return 1===k?this:new Transform$1(this.k*k,this.x,this.y)},translate:function translate(x,y){return 0===x&0===y?this:new Transform$1(this.k,this.x+this.k*x,this.y+this.k*y)},apply:function apply(point){return[point[0]*this.k+this.x,point[1]*this.k+this.y]},applyX:function applyX(x){return x*this.k+this.x},applyY:function applyY(y){return y*this.k+this.y},invert:function invert(location){return[(location[0]-this.x)/this.k,(location[1]-this.y)/this.k]},invertX:function invertX(x){return(x-this.x)/this.k},invertY:function invertY(y){return(y-this.y)/this.k},rescaleX:function rescaleX(x){return x.copy().domain(x.range().map(this.invertX,this).map(x.invert,x))},rescaleY:function rescaleY(y){return y.copy().domain(y.range().map(this.invertY,this).map(y.invert,y))},toString:function toString(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}},new Transform$1(1,0,0),Transform$1.prototype;var n$4$1;function e$3$1(e){return function(n,t){return void 0!==t?function(i,e,n){e.constructor.createProperty(n,i)}(e,n,t):function i$2$1(i,e){return"method"===e.kind&&e.descriptor&&!("value"in e.descriptor)?Object.assign({},e,{finisher:function finisher(n){n.createProperty(e.key,i)}}):{kind:"field",key:Symbol(),placement:"own",descriptor:{},originalKey:e.key,initializer:function initializer(){"function"==typeof e.initializer&&(this[e.key]=e.initializer.call(this))},finisher:function finisher(n){n.createProperty(e.key,i)}}}(e,n)}}null===(n$4$1=window.HTMLSlotElement)||void 0===n$4$1||n$4$1.prototype.assignedElements;var withDimensions=function withDimensions(superClass){var options=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{width:800,height:100},WithDimensions=function(_superClass){_inherits(WithDimensions,_superClass);var _super=_createSuper(WithDimensions);function WithDimensions(){var _this;return _classCallCheck(this,WithDimensions),(_this=_super.apply(this,arguments)).width=options.width,_this.height=options.height,_this}return _createClass(WithDimensions)}(superClass);return __decorate([e$3$1({type:Number})],WithDimensions.prototype,"width",void 0),__decorate([e$3$1({type:Number})],WithDimensions.prototype,"height",void 0),WithDimensions},withPosition=function withPosition(superClass){var options=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{"display-start":1,"display-end":-1,length:0},WithPosition=function(_superClass2){_inherits(WithPosition,_superClass2);var _super2=_createSuper(WithPosition);function WithPosition(){var _this2;return _classCallCheck(this,WithPosition),(_this2=_super2.apply(this,arguments)).length=options.length,_this2["display-start"]=options["display-start"],_this2["display-end"]=options["display-end"],_this2}return _createClass(WithPosition)}(superClass);return __decorate([e$3$1({type:Number})],WithPosition.prototype,"length",void 0),__decorate([e$3$1({type:Number})],WithPosition.prototype,"display-start",void 0),__decorate([e$3$1({type:Number})],WithPosition.prototype,"display-end",void 0),WithPosition},withMargin=function withMargin(superClass){var _WithMargin_created,options=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{"margin-top":0,"margin-bottom":0,"margin-left":10,"margin-right":10,"margin-color":"#FFFFFFDD"},WithMargin=function(_withDimensions){_inherits(WithMargin,_withDimensions);var _super3=_createSuper(WithMargin);function WithMargin(){var _this3;return _classCallCheck(this,WithMargin),(_this3=_super3.apply(this,arguments))["margin-top"]=options["margin-top"],_this3["margin-bottom"]=options["margin-bottom"],_this3["margin-left"]=options["margin-left"],_this3["margin-right"]=options["margin-right"],_this3["margin-color"]=options["margin-color"],_WithMargin_created.set(_assertThisInitialized(_this3),!1),_this3}return _createClass(WithMargin,[{key:"getWidthWithMargins",value:function getWidthWithMargins(){return this.width?this.width-this["margin-left"]-this["margin-right"]:0}},{key:"getHeightWithMargins",value:function getHeightWithMargins(){return this.height?this.height-this["margin-top"]-this["margin-bottom"]:0}},{key:"renderMarginOnGroup",value:function renderMarginOnGroup(g){g&&(__classPrivateFieldGet(this,_WithMargin_created,"f")||(g.append("rect").style("pointer-events","none").attr("class","margin-left").attr("x",0),g.append("rect").style("pointer-events","none").attr("class","margin-right"),g.append("rect").style("pointer-events","none").attr("class","margin-top").attr("width",this.width).attr("x",0).attr("y",0),g.append("rect").style("pointer-events","none").attr("class","margin-bottom").attr("width",this.width).attr("x",0),__classPrivateFieldSet(this,_WithMargin_created,!0,"f")),g.select("rect.margin-left").attr("fill",this["margin-color"]||"#FFFFFFDD").attr("height",this.height).attr("width",this["margin-left"]),g.select("rect.margin-right").attr("fill",this["margin-color"]||"#FFFFFFDD").attr("height",this.height).attr("x",this.width-this["margin-right"]).attr("width",this["margin-right"]),g.select("rect.margin-top").attr("fill",this["margin-color"]||"#FFFFFFDD").attr("height",this["margin-top"]),g.select("rect.margin-bottom").attr("fill",this["margin-color"]||"#FFFFFFDD").attr("y",this.height-this["margin-bottom"]).attr("height",this["margin-bottom"]))}}]),WithMargin}(withDimensions(superClass));return _WithMargin_created=new WeakMap,__decorate([e$3$1({type:Number})],WithMargin.prototype,"margin-top",void 0),__decorate([e$3$1({type:Number})],WithMargin.prototype,"margin-bottom",void 0),__decorate([e$3$1({type:Number})],WithMargin.prototype,"margin-left",void 0),__decorate([e$3$1({type:Number})],WithMargin.prototype,"margin-right",void 0),__decorate([e$3$1({type:String})],WithMargin.prototype,"margin-color",void 0),WithMargin},Region=function(){function Region(){var _ref=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},_ref$min=_ref.min,min=void 0===_ref$min?-1/0:_ref$min,_ref$max=_ref.max,max=void 0===_ref$max?1/0:_ref$max;_classCallCheck(this,Region),this.segments=[],this.max=max,this.min=min,this.regionString=null}return _createClass(Region,[{key:"encode",value:function encode(){var _this6=this,full=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return this.segments.map((function(_ref2){var start=_ref2.start,end=_ref2.end;return full?start+":"+end:(start===_this6.min?"":start)+":"+(end===_this6.max?"":end)})).join(",")}},{key:"decode",value:function decode(regionString){var _this7=this;void 0!==regionString&&(this.regionString=regionString),this.regionString?this.segments=this.regionString.split(",").map((function(region){var _region$split2=_slicedToArray(region.split(":"),3),_start=_region$split2[0],_end=_region$split2[1];if(void 0!==_region$split2[2])throw new Error("there should be at most 1 ':' per region. Region: "+region);var start=_start?Number(_start):_this7.min,end=_end?Number(_end):_this7.max;if(start>end){var _ref3=[end,start];start=_ref3[0],end=_ref3[1]}if(start<_this7.min&&(start=_this7.min),end>_this7.max&&(end=_this7.max),Number.isNaN(start))throw new Error("The parsed value of "+_start+" is NaN. Region: "+region);if(Number.isNaN(end))throw new Error("The parsed value of "+_end+" is NaN. Region: "+region);return{start,end}})):this.segments=[]}}]),Region}(),combineRegions=function combineRegions(region1,region2){return region1?region2?region1+","+region2:region1:region2};function ascending$1(a,b){return null==a||null==b?NaN:a<b?-1:a>b?1:a>=b?0:NaN}function descending(a,b){return null==a||null==b?NaN:b<a?-1:b>a?1:b>=a?0:NaN}function bisector(f){var compare1,compare2,delta;function left(a,x){var lo=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,hi=arguments.length>3&&void 0!==arguments[3]?arguments[3]:a.length;if(lo<hi){if(0!==compare1(x,x))return hi;do{var mid=lo+hi>>>1;compare2(a[mid],x)<0?lo=mid+1:hi=mid}while(lo<hi)}return lo}return 2!==f.length?(compare1=ascending$1,compare2=function compare2(d,x){return ascending$1(f(d),x)},delta=function delta(d,x){return f(d)-x}):(compare1=f===ascending$1||f===descending?f:zero$1,compare2=f,delta=f),{left,center:function center(a,x){var lo=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,hi=arguments.length>3&&void 0!==arguments[3]?arguments[3]:a.length,i=left(a,x,lo,hi-1);return i>lo&&delta(a[i-1],x)>-delta(a[i],x)?i-1:i},right:function right(a,x){var lo=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,hi=arguments.length>3&&void 0!==arguments[3]?arguments[3]:a.length;if(lo<hi){if(0!==compare1(x,x))return hi;do{var mid=lo+hi>>>1;compare2(a[mid],x)<=0?lo=mid+1:hi=mid}while(lo<hi)}return lo}}}function zero$1(){return 0}var bisectRight=bisector(ascending$1).right;bisector((function number$1(x){return null===x?NaN:+x})).center;var bisect=bisectRight,e10=Math.sqrt(50),e5=Math.sqrt(10),e2=Math.sqrt(2);function tickIncrement(start,stop,count){var step=(stop-start)/Math.max(0,count),power=Math.floor(Math.log(step)/Math.LN10),error=step/Math.pow(10,power);return power>=0?(error>=e10?10:error>=e5?5:error>=e2?2:1)*Math.pow(10,power):-Math.pow(10,-power)/(error>=e10?10:error>=e5?5:error>=e2?2:1)}var noop={value:function value(){}};function dispatch(){for(var t,i=0,n=arguments.length,_={};i<n;++i){if(!(t=arguments[i]+"")||t in _||/[\s.]/.test(t))throw new Error("illegal type: "+t);_[t]=[]}return new Dispatch(_)}function Dispatch(_){this._=_}function parseTypenames$1(typenames,types){return typenames.trim().split(/^|\s+/).map((function(t){var name="",i=t.indexOf(".");if(i>=0&&(name=t.slice(i+1),t=t.slice(0,i)),t&&!types.hasOwnProperty(t))throw new Error("unknown type: "+t);return{type:t,name}}))}function get$1(type,name){for(var c,i=0,n=type.length;i<n;++i)if((c=type[i]).name===name)return c.value}function set$1(type,name,callback){for(var i=0,n=type.length;i<n;++i)if(type[i].name===name){type[i]=noop,type=type.slice(0,i).concat(type.slice(i+1));break}return null!=callback&&type.push({name,value:callback}),type}Dispatch.prototype=dispatch.prototype={constructor:Dispatch,on:function on(typename,callback){var t,_=this._,T=parseTypenames$1(typename+"",_),i=-1,n=T.length;if(!(arguments.length<2)){if(null!=callback&&"function"!=typeof callback)throw new Error("invalid callback: "+callback);for(;++i<n;)if(t=(typename=T[i]).type)_[t]=set$1(_[t],typename.name,callback);else if(null==callback)for(t in _)_[t]=set$1(_[t],typename.name,null);return this}for(;++i<n;)if((t=(typename=T[i]).type)&&(t=get$1(_[t],typename.name)))return t},copy:function copy(){var copy={},_=this._;for(var t in _)copy[t]=_[t].slice();return new Dispatch(copy)},call:function call(type,that){if((n=arguments.length-2)>0)for(var n,t,args=new Array(n),i=0;i<n;++i)args[i]=arguments[i+2];if(!this._.hasOwnProperty(type))throw new Error("unknown type: "+type);for(i=0,n=(t=this._[type]).length;i<n;++i)t[i].value.apply(that,args)},apply:function apply(type,that,args){if(!this._.hasOwnProperty(type))throw new Error("unknown type: "+type);for(var t=this._[type],i=0,n=t.length;i<n;++i)t[i].value.apply(that,args)}};var xhtml="http://www.w3.org/1999/xhtml",namespaces={svg:"http://www.w3.org/2000/svg",xhtml,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function namespace(name){var prefix=name+="",i=prefix.indexOf(":");return i>=0&&"xmlns"!==(prefix=name.slice(0,i))&&(name=name.slice(i+1)),namespaces.hasOwnProperty(prefix)?{space:namespaces[prefix],local:name}:name}function creatorInherit(name){return function(){var document=this.ownerDocument,uri=this.namespaceURI;return uri===xhtml&&document.documentElement.namespaceURI===xhtml?document.createElement(name):document.createElementNS(uri,name)}}function creatorFixed(fullname){return function(){return this.ownerDocument.createElementNS(fullname.space,fullname.local)}}function creator(name){var fullname=namespace(name);return(fullname.local?creatorFixed:creatorInherit)(fullname)}function none(){}function selector(selector){return null==selector?none:function(){return this.querySelector(selector)}}function array(x){return null==x?[]:Array.isArray(x)?x:Array.from(x)}function empty(){return[]}function selectorAll(selector){return null==selector?empty:function(){return this.querySelectorAll(selector)}}function matcher(selector){return function(){return this.matches(selector)}}function childMatcher(selector){return function(node){return node.matches(selector)}}var find=Array.prototype.find;function childFirst(){return this.firstElementChild}var filter=Array.prototype.filter;function children(){return Array.from(this.children)}function sparse(update){return new Array(update.length)}function EnterNode(parent,datum){this.ownerDocument=parent.ownerDocument,this.namespaceURI=parent.namespaceURI,this._next=null,this._parent=parent,this.__data__=datum}function constant$2(x){return function(){return x}}function bindIndex(parent,group,enter,update,exit,data){for(var node,i=0,groupLength=group.length,dataLength=data.length;i<dataLength;++i)(node=group[i])?(node.__data__=data[i],update[i]=node):enter[i]=new EnterNode(parent,data[i]);for(;i<groupLength;++i)(node=group[i])&&(exit[i]=node)}function bindKey(parent,group,enter,update,exit,data,key){var i,node,keyValue,nodeByKeyValue=new Map,groupLength=group.length,dataLength=data.length,keyValues=new Array(groupLength);for(i=0;i<groupLength;++i)(node=group[i])&&(keyValues[i]=keyValue=key.call(node,node.__data__,i,group)+"",nodeByKeyValue.has(keyValue)?exit[i]=node:nodeByKeyValue.set(keyValue,node));for(i=0;i<dataLength;++i)keyValue=key.call(parent,data[i],i,data)+"",(node=nodeByKeyValue.get(keyValue))?(update[i]=node,node.__data__=data[i],nodeByKeyValue.delete(keyValue)):enter[i]=new EnterNode(parent,data[i]);for(i=0;i<groupLength;++i)(node=group[i])&&nodeByKeyValue.get(keyValues[i])===node&&(exit[i]=node)}function datum(node){return node.__data__}function arraylike(data){return"object"==typeof data&&"length"in data?data:Array.from(data)}function ascending(a,b){return a<b?-1:a>b?1:a>=b?0:NaN}function attrRemove$1(name){return function(){this.removeAttribute(name)}}function attrRemoveNS$1(fullname){return function(){this.removeAttributeNS(fullname.space,fullname.local)}}function attrConstant$1(name,value){return function(){this.setAttribute(name,value)}}function attrConstantNS$1(fullname,value){return function(){this.setAttributeNS(fullname.space,fullname.local,value)}}function attrFunction$1(name,value){return function(){var v=value.apply(this,arguments);null==v?this.removeAttribute(name):this.setAttribute(name,v)}}function attrFunctionNS$1(fullname,value){return function(){var v=value.apply(this,arguments);null==v?this.removeAttributeNS(fullname.space,fullname.local):this.setAttributeNS(fullname.space,fullname.local,v)}}function defaultView(node){return node.ownerDocument&&node.ownerDocument.defaultView||node.document&&node||node.defaultView}function styleRemove$1(name){return function(){this.style.removeProperty(name)}}function styleConstant$1(name,value,priority){return function(){this.style.setProperty(name,value,priority)}}function styleFunction$1(name,value,priority){return function(){var v=value.apply(this,arguments);null==v?this.style.removeProperty(name):this.style.setProperty(name,v,priority)}}function styleValue(node,name){return node.style.getPropertyValue(name)||defaultView(node).getComputedStyle(node,null).getPropertyValue(name)}function propertyRemove(name){return function(){delete this[name]}}function propertyConstant(name,value){return function(){this[name]=value}}function propertyFunction(name,value){return function(){var v=value.apply(this,arguments);null==v?delete this[name]:this[name]=v}}function classArray(string){return string.trim().split(/^|\s+/)}function classList(node){return node.classList||new ClassList(node)}function ClassList(node){this._node=node,this._names=classArray(node.getAttribute("class")||"")}function classedAdd(node,names){for(var list=classList(node),i=-1,n=names.length;++i<n;)list.add(names[i])}function classedRemove(node,names){for(var list=classList(node),i=-1,n=names.length;++i<n;)list.remove(names[i])}function classedTrue(names){return function(){classedAdd(this,names)}}function classedFalse(names){return function(){classedRemove(this,names)}}function classedFunction(names,value){return function(){(value.apply(this,arguments)?classedAdd:classedRemove)(this,names)}}function textRemove(){this.textContent=""}function textConstant$1(value){return function(){this.textContent=value}}function textFunction$1(value){return function(){var v=value.apply(this,arguments);this.textContent=null==v?"":v}}function htmlRemove(){this.innerHTML=""}function htmlConstant(value){return function(){this.innerHTML=value}}function htmlFunction(value){return function(){var v=value.apply(this,arguments);this.innerHTML=null==v?"":v}}function raise(){this.nextSibling&&this.parentNode.appendChild(this)}function lower(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function constantNull(){return null}function remove(){var parent=this.parentNode;parent&&parent.removeChild(this)}function selection_cloneShallow(){var clone=this.cloneNode(!1),parent=this.parentNode;return parent?parent.insertBefore(clone,this.nextSibling):clone}function selection_cloneDeep(){var clone=this.cloneNode(!0),parent=this.parentNode;return parent?parent.insertBefore(clone,this.nextSibling):clone}function parseTypenames(typenames){return typenames.trim().split(/^|\s+/).map((function(t){var name="",i=t.indexOf(".");return i>=0&&(name=t.slice(i+1),t=t.slice(0,i)),{type:t,name}}))}function onRemove(typename){return function(){var on=this.__on;if(on){for(var o,j=0,i=-1,m=on.length;j<m;++j)o=on[j],typename.type&&o.type!==typename.type||o.name!==typename.name?on[++i]=o:this.removeEventListener(o.type,o.listener,o.options);++i?on.length=i:delete this.__on}}}function onAdd(typename,value,options){return function(){var o,on=this.__on,listener=function contextListener(listener){return function(event){listener.call(this,event,this.__data__)}}(value);if(on)for(var j=0,m=on.length;j<m;++j)if((o=on[j]).type===typename.type&&o.name===typename.name)return this.removeEventListener(o.type,o.listener,o.options),this.addEventListener(o.type,o.listener=listener,o.options=options),void(o.value=value);this.addEventListener(typename.type,listener,options),o={type:typename.type,name:typename.name,value,listener,options},on?on.push(o):this.__on=[o]}}function dispatchEvent(node,type,params){var window=defaultView(node),event=window.CustomEvent;"function"==typeof event?event=new event(type,params):(event=window.document.createEvent("Event"),params?(event.initEvent(type,params.bubbles,params.cancelable),event.detail=params.detail):event.initEvent(type,!1,!1)),node.dispatchEvent(event)}function dispatchConstant(type,params){return function(){return dispatchEvent(this,type,params)}}function dispatchFunction(type,params){return function(){return dispatchEvent(this,type,params.apply(this,arguments))}}function selection_iterator(){var groups,j,m,group,i,n,node;return _regeneratorRuntime().wrap((function selection_iterator$(_context2){for(;;)switch(_context2.prev=_context2.next){case 0:groups=this._groups,j=0,m=groups.length;case 1:if(!(j<m)){_context2.next=13;break}group=groups[j],i=0,n=group.length;case 3:if(!(i<n)){_context2.next=10;break}if(!(node=group[i])){_context2.next=7;break}return _context2.next=7,node;case 7:++i,_context2.next=3;break;case 10:++j,_context2.next=1;break;case 13:case"end":return _context2.stop()}}),_marked2,this)}EnterNode.prototype={constructor:EnterNode,appendChild:function appendChild(child){return this._parent.insertBefore(child,this._next)},insertBefore:function insertBefore(child,next){return this._parent.insertBefore(child,next)},querySelector:function querySelector(selector){return this._parent.querySelector(selector)},querySelectorAll:function querySelectorAll(selector){return this._parent.querySelectorAll(selector)}},ClassList.prototype={add:function add(name){this._names.indexOf(name)<0&&(this._names.push(name),this._node.setAttribute("class",this._names.join(" ")))},remove:function remove(name){var i=this._names.indexOf(name);i>=0&&(this._names.splice(i,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function contains(name){return this._names.indexOf(name)>=0}};var root=[null];function Selection$1(groups,parents){this._groups=groups,this._parents=parents}function selection(){return new Selection$1([[document.documentElement]],root)}function dist_select(selector){return"string"==typeof selector?new Selection$1([[document.querySelector(selector)]],[document.documentElement]):new Selection$1([[selector]],root)}function pointer(event,node){if(event=function sourceEvent(event){for(var sourceEvent;sourceEvent=event.sourceEvent;)event=sourceEvent;return event}(event),void 0===node&&(node=event.currentTarget),node){var svg=node.ownerSVGElement||node;if(svg.createSVGPoint){var point=svg.createSVGPoint();return point.x=event.clientX,point.y=event.clientY,[(point=point.matrixTransform(node.getScreenCTM().inverse())).x,point.y]}if(node.getBoundingClientRect){var rect=node.getBoundingClientRect();return[event.clientX-rect.left-node.clientLeft,event.clientY-rect.top-node.clientTop]}}return[event.pageX,event.pageY]}Selection$1.prototype=selection.prototype=(_selection$prototype={constructor:Selection$1,select:function selection_select(select){"function"!=typeof select&&(select=selector(select));for(var groups=this._groups,m=groups.length,subgroups=new Array(m),j=0;j<m;++j)for(var node,subnode,group=groups[j],n=group.length,subgroup=subgroups[j]=new Array(n),i=0;i<n;++i)(node=group[i])&&(subnode=select.call(node,node.__data__,i,group))&&("__data__"in node&&(subnode.__data__=node.__data__),subgroup[i]=subnode);return new Selection$1(subgroups,this._parents)},selectAll:function selection_selectAll(select){select="function"==typeof select?function arrayAll(select){return function(){return array(select.apply(this,arguments))}}(select):selectorAll(select);for(var groups=this._groups,m=groups.length,subgroups=[],parents=[],j=0;j<m;++j)for(var node,group=groups[j],n=group.length,i=0;i<n;++i)(node=group[i])&&(subgroups.push(select.call(node,node.__data__,i,group)),parents.push(node));return new Selection$1(subgroups,parents)},selectChild:function selection_selectChild(match){return this.select(null==match?childFirst:function childFind(match){return function(){return find.call(this.children,match)}}("function"==typeof match?match:childMatcher(match)))},selectChildren:function selection_selectChildren(match){return this.selectAll(null==match?children:function childrenFilter(match){return function(){return filter.call(this.children,match)}}("function"==typeof match?match:childMatcher(match)))},filter:function selection_filter(match){"function"!=typeof match&&(match=matcher(match));for(var groups=this._groups,m=groups.length,subgroups=new Array(m),j=0;j<m;++j)for(var node,group=groups[j],n=group.length,subgroup=subgroups[j]=[],i=0;i<n;++i)(node=group[i])&&match.call(node,node.__data__,i,group)&&subgroup.push(node);return new Selection$1(subgroups,this._parents)},data:function selection_data(value,key){if(!arguments.length)return Array.from(this,datum);var bind=key?bindKey:bindIndex,parents=this._parents,groups=this._groups;"function"!=typeof value&&(value=constant$2(value));for(var m=groups.length,update=new Array(m),enter=new Array(m),exit=new Array(m),j=0;j<m;++j){var parent=parents[j],group=groups[j],groupLength=group.length,data=arraylike(value.call(parent,parent&&parent.__data__,j,parents)),dataLength=data.length,enterGroup=enter[j]=new Array(dataLength),updateGroup=update[j]=new Array(dataLength),exitGroup=exit[j]=new Array(groupLength);bind(parent,group,enterGroup,updateGroup,exitGroup,data,key);for(var previous,next,i0=0,i1=0;i0<dataLength;++i0)if(previous=enterGroup[i0]){for(i0>=i1&&(i1=i0+1);!(next=updateGroup[i1])&&++i1<dataLength;);previous._next=next||null}}return(update=new Selection$1(update,parents))._enter=enter,update._exit=exit,update},enter:function selection_enter(){return new Selection$1(this._enter||this._groups.map(sparse),this._parents)},exit:function selection_exit(){return new Selection$1(this._exit||this._groups.map(sparse),this._parents)},join:function selection_join(onenter,onupdate,onexit){var enter=this.enter(),update=this,exit=this.exit();return"function"==typeof onenter?(enter=onenter(enter))&&(enter=enter.selection()):enter=enter.append(onenter+""),null!=onupdate&&(update=onupdate(update))&&(update=update.selection()),null==onexit?exit.remove():onexit(exit),enter&&update?enter.merge(update).order():update},merge:function selection_merge(context){for(var selection=context.selection?context.selection():context,groups0=this._groups,groups1=selection._groups,m0=groups0.length,m1=groups1.length,m=Math.min(m0,m1),merges=new Array(m0),j=0;j<m;++j)for(var node,group0=groups0[j],group1=groups1[j],n=group0.length,merge=merges[j]=new Array(n),i=0;i<n;++i)(node=group0[i]||group1[i])&&(merge[i]=node);for(;j<m0;++j)merges[j]=groups0[j];return new Selection$1(merges,this._parents)},selection:function selection_selection(){return this},order:function selection_order(){for(var groups=this._groups,j=-1,m=groups.length;++j<m;)for(var node,group=groups[j],i=group.length-1,next=group[i];--i>=0;)(node=group[i])&&(next&&4^node.compareDocumentPosition(next)&&next.parentNode.insertBefore(node,next),next=node);return this},sort:function selection_sort(compare){function compareNode(a,b){return a&&b?compare(a.__data__,b.__data__):!a-!b}compare||(compare=ascending);for(var groups=this._groups,m=groups.length,sortgroups=new Array(m),j=0;j<m;++j){for(var node,group=groups[j],n=group.length,sortgroup=sortgroups[j]=new Array(n),i=0;i<n;++i)(node=group[i])&&(sortgroup[i]=node);sortgroup.sort(compareNode)}return new Selection$1(sortgroups,this._parents).order()},call:function selection_call(){var callback=arguments[0];return arguments[0]=this,callback.apply(null,arguments),this},nodes:function selection_nodes(){return Array.from(this)},node:function selection_node(){for(var groups=this._groups,j=0,m=groups.length;j<m;++j)for(var group=groups[j],i=0,n=group.length;i<n;++i){var node=group[i];if(node)return node}return null},size:function selection_size(){var _step2,size=0,_iterator2=_createForOfIteratorHelper(this);try{for(_iterator2.s();!(_step2=_iterator2.n()).done;){_step2.value;++size}}catch(err){_iterator2.e(err)}finally{_iterator2.f()}return size},empty:function selection_empty(){return!this.node()},each:function selection_each(callback){for(var groups=this._groups,j=0,m=groups.length;j<m;++j)for(var node,group=groups[j],i=0,n=group.length;i<n;++i)(node=group[i])&&callback.call(node,node.__data__,i,group);return this},attr:function selection_attr(name,value){var fullname=namespace(name);if(arguments.length<2){var node=this.node();return fullname.local?node.getAttributeNS(fullname.space,fullname.local):node.getAttribute(fullname)}return this.each((null==value?fullname.local?attrRemoveNS$1:attrRemove$1:"function"==typeof value?fullname.local?attrFunctionNS$1:attrFunction$1:fullname.local?attrConstantNS$1:attrConstant$1)(fullname,value))},style:function selection_style(name,value,priority){return arguments.length>1?this.each((null==value?styleRemove$1:"function"==typeof value?styleFunction$1:styleConstant$1)(name,value,null==priority?"":priority)):styleValue(this.node(),name)},property:function selection_property(name,value){return arguments.length>1?this.each((null==value?propertyRemove:"function"==typeof value?propertyFunction:propertyConstant)(name,value)):this.node()[name]},classed:function selection_classed(name,value){var names=classArray(name+"");if(arguments.length<2){for(var list=classList(this.node()),i=-1,n=names.length;++i<n;)if(!list.contains(names[i]))return!1;return!0}return this.each(("function"==typeof value?classedFunction:value?classedTrue:classedFalse)(names,value))},text:function selection_text(value){return arguments.length?this.each(null==value?textRemove:("function"==typeof value?textFunction$1:textConstant$1)(value)):this.node().textContent},html:function selection_html(value){return arguments.length?this.each(null==value?htmlRemove:("function"==typeof value?htmlFunction:htmlConstant)(value)):this.node().innerHTML},raise:function selection_raise(){return this.each(raise)},lower:function selection_lower(){return this.each(lower)},append:function selection_append(name){var create="function"==typeof name?name:creator(name);return this.select((function(){return this.appendChild(create.apply(this,arguments))}))},insert:function selection_insert(name,before){var create="function"==typeof name?name:creator(name),select=null==before?constantNull:"function"==typeof before?before:selector(before);return this.select((function(){return this.insertBefore(create.apply(this,arguments),select.apply(this,arguments)||null)}))},remove:function selection_remove(){return this.each(remove)},clone:function selection_clone(deep){return this.select(deep?selection_cloneDeep:selection_cloneShallow)},datum:function selection_datum(value){return arguments.length?this.property("__data__",value):this.node().__data__},on:function selection_on(typename,value,options){var i,t,typenames=parseTypenames(typename+""),n=typenames.length;if(!(arguments.length<2)){for(on=value?onAdd:onRemove,i=0;i<n;++i)this.each(on(typenames[i],value,options));return this}var on=this.node().__on;if(on)for(var o,j=0,m=on.length;j<m;++j)for(i=0,o=on[j];i<n;++i)if((t=typenames[i]).type===o.type&&t.name===o.name)return o.value},dispatch:function selection_dispatch(type,params){return this.each(("function"==typeof params?dispatchFunction:dispatchConstant)(type,params))}},_selection$prototype[Symbol.iterator]=selection_iterator,_selection$prototype);var nonpassivecapture={capture:!0,passive:!1};function noevent$1(event){event.preventDefault(),event.stopImmediatePropagation()}function dragDisable(view){var root=view.document.documentElement,selection=dist_select(view).on("dragstart.drag",noevent$1,nonpassivecapture);"onselectstart"in root?selection.on("selectstart.drag",noevent$1,nonpassivecapture):(root.__noselect=root.style.MozUserSelect,root.style.MozUserSelect="none")}function yesdrag(view,noclick){var root=view.document.documentElement,selection=dist_select(view).on("dragstart.drag",null);noclick&&(selection.on("click.drag",noevent$1,nonpassivecapture),setTimeout((function(){selection.on("click.drag",null)}),0)),"onselectstart"in root?selection.on("selectstart.drag",null):(root.style.MozUserSelect=root.__noselect,delete root.__noselect)}function dist_define(constructor,factory,prototype){constructor.prototype=factory.prototype=prototype,prototype.constructor=constructor}function extend(parent,definition){var prototype=Object.create(parent.prototype);for(var key in definition)prototype[key]=definition[key];return prototype}function Color(){}var _brighter=1/.7,reI="\\s*([+-]?\\d+)\\s*",reN="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",reP="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",reHex=/^#([0-9a-f]{3,8})$/,reRgbInteger=new RegExp("^rgb\\("+reI+","+reI+","+reI+"\\)$"),reRgbPercent=new RegExp("^rgb\\("+reP+","+reP+","+reP+"\\)$"),reRgbaInteger=new RegExp("^rgba\\("+reI+","+reI+","+reI+","+reN+"\\)$"),reRgbaPercent=new RegExp("^rgba\\("+reP+","+reP+","+reP+","+reN+"\\)$"),reHslPercent=new RegExp("^hsl\\("+reN+","+reP+","+reP+"\\)$"),reHslaPercent=new RegExp("^hsla\\("+reN+","+reP+","+reP+","+reN+"\\)$"),named={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};function color_formatHex(){return this.rgb().formatHex()}function color_formatRgb(){return this.rgb().formatRgb()}function color(format){var m,l;return format=(format+"").trim().toLowerCase(),(m=reHex.exec(format))?(l=m[1].length,m=parseInt(m[1],16),6===l?rgbn(m):3===l?new Rgb(m>>8&15|m>>4&240,m>>4&15|240&m,(15&m)<<4|15&m,1):8===l?rgba(m>>24&255,m>>16&255,m>>8&255,(255&m)/255):4===l?rgba(m>>12&15|m>>8&240,m>>8&15|m>>4&240,m>>4&15|240&m,((15&m)<<4|15&m)/255):null):(m=reRgbInteger.exec(format))?new Rgb(m[1],m[2],m[3],1):(m=reRgbPercent.exec(format))?new Rgb(255*m[1]/100,255*m[2]/100,255*m[3]/100,1):(m=reRgbaInteger.exec(format))?rgba(m[1],m[2],m[3],m[4]):(m=reRgbaPercent.exec(format))?rgba(255*m[1]/100,255*m[2]/100,255*m[3]/100,m[4]):(m=reHslPercent.exec(format))?hsla(m[1],m[2]/100,m[3]/100,1):(m=reHslaPercent.exec(format))?hsla(m[1],m[2]/100,m[3]/100,m[4]):named.hasOwnProperty(format)?rgbn(named[format]):"transparent"===format?new Rgb(NaN,NaN,NaN,0):null}function rgbn(n){return new Rgb(n>>16&255,n>>8&255,255&n,1)}function rgba(r,g,b,a){return a<=0&&(r=g=b=NaN),new Rgb(r,g,b,a)}function rgbConvert(o){return o instanceof Color||(o=color(o)),o?new Rgb((o=o.rgb()).r,o.g,o.b,o.opacity):new Rgb}function rgb(r,g,b,opacity){return 1===arguments.length?rgbConvert(r):new Rgb(r,g,b,null==opacity?1:opacity)}function Rgb(r,g,b,opacity){this.r=+r,this.g=+g,this.b=+b,this.opacity=+opacity}function rgb_formatHex(){return"#"+hex(this.r)+hex(this.g)+hex(this.b)}function rgb_formatRgb(){var a=clampa(this.opacity);return(1===a?"rgb(":"rgba(")+clampi(this.r)+", "+clampi(this.g)+", "+clampi(this.b)+(1===a?")":", "+a+")")}function clampa(opacity){return isNaN(opacity)?1:Math.max(0,Math.min(1,opacity))}function clampi(value){return Math.max(0,Math.min(255,Math.round(value)||0))}function hex(value){return((value=clampi(value))<16?"0":"")+value.toString(16)}function hsla(h,s,l,a){return a<=0?h=s=l=NaN:l<=0||l>=1?h=s=NaN:s<=0&&(h=NaN),new Hsl(h,s,l,a)}function hslConvert(o){if(o instanceof Hsl)return new Hsl(o.h,o.s,o.l,o.opacity);if(o instanceof Color||(o=color(o)),!o)return new Hsl;if(o instanceof Hsl)return o;var r=(o=o.rgb()).r/255,g=o.g/255,b=o.b/255,min=Math.min(r,g,b),max=Math.max(r,g,b),h=NaN,s=max-min,l=(max+min)/2;return s?(h=r===max?(g-b)/s+6*(g<b):g===max?(b-r)/s+2:(r-g)/s+4,s/=l<.5?max+min:2-max-min,h*=60):s=l>0&&l<1?0:h,new Hsl(h,s,l,o.opacity)}function Hsl(h,s,l,opacity){this.h=+h,this.s=+s,this.l=+l,this.opacity=+opacity}function clamph(value){return(value=(value||0)%360)<0?value+360:value}function clampt(value){return Math.max(0,Math.min(1,value||0))}function hsl2rgb(h,m1,m2){return 255*(h<60?m1+(m2-m1)*h/60:h<180?m2:h<240?m1+(m2-m1)*(240-h)/60:m1)}dist_define(Color,color,{copy:function copy(channels){return Object.assign(new this.constructor,this,channels)},displayable:function displayable(){return this.rgb().displayable()},hex:color_formatHex,formatHex:color_formatHex,formatHex8:function color_formatHex8(){return this.rgb().formatHex8()},formatHsl:function color_formatHsl(){return hslConvert(this).formatHsl()},formatRgb:color_formatRgb,toString:color_formatRgb}),dist_define(Rgb,rgb,extend(Color,{brighter:function brighter(k){return k=null==k?_brighter:Math.pow(_brighter,k),new Rgb(this.r*k,this.g*k,this.b*k,this.opacity)},darker:function darker(k){return k=null==k?.7:Math.pow(.7,k),new Rgb(this.r*k,this.g*k,this.b*k,this.opacity)},rgb:function rgb(){return this},clamp:function clamp(){return new Rgb(clampi(this.r),clampi(this.g),clampi(this.b),clampa(this.opacity))},displayable:function displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:rgb_formatHex,formatHex:rgb_formatHex,formatHex8:function rgb_formatHex8(){return"#"+hex(this.r)+hex(this.g)+hex(this.b)+hex(255*(isNaN(this.opacity)?1:this.opacity))},formatRgb:rgb_formatRgb,toString:rgb_formatRgb})),dist_define(Hsl,(function hsl(h,s,l,opacity){return 1===arguments.length?hslConvert(h):new Hsl(h,s,l,null==opacity?1:opacity)}),extend(Color,{brighter:function brighter(k){return k=null==k?_brighter:Math.pow(_brighter,k),new Hsl(this.h,this.s,this.l*k,this.opacity)},darker:function darker(k){return k=null==k?.7:Math.pow(.7,k),new Hsl(this.h,this.s,this.l*k,this.opacity)},rgb:function rgb(){var h=this.h%360+360*(this.h<0),s=isNaN(h)||isNaN(this.s)?0:this.s,l=this.l,m2=l+(l<.5?l:1-l)*s,m1=2*l-m2;return new Rgb(hsl2rgb(h>=240?h-240:h+120,m1,m2),hsl2rgb(h,m1,m2),hsl2rgb(h<120?h+240:h-120,m1,m2),this.opacity)},clamp:function clamp(){return new Hsl(clamph(this.h),clampt(this.s),clampt(this.l),clampa(this.opacity))},displayable:function displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl:function formatHsl(){var a=clampa(this.opacity);return(1===a?"hsl(":"hsla(")+clamph(this.h)+", "+100*clampt(this.s)+"%, "+100*clampt(this.l)+"%"+(1===a?")":", "+a+")")}}));var constant$1=function constant$1(x){return function(){return x}};function gamma(y){return 1==(y=+y)?nogamma:function(a,b){return b-a?function exponential(a,b,y){return a=Math.pow(a,y),b=Math.pow(b,y)-a,y=1/y,function(t){return Math.pow(a+t*b,y)}}(a,b,y):constant$1(isNaN(a)?b:a)}}function nogamma(a,b){var d=b-a;return d?function linear$1(a,d){return function(t){return a+t*d}}(a,d):constant$1(isNaN(a)?b:a)}var interpolateRgb=function rgbGamma(y){var color=gamma(y);function rgb$1(start,end){var r=color((start=rgb(start)).r,(end=rgb(end)).r),g=color(start.g,end.g),b=color(start.b,end.b),opacity=nogamma(start.opacity,end.opacity);return function(t){return start.r=r(t),start.g=g(t),start.b=b(t),start.opacity=opacity(t),start+""}}return rgb$1.gamma=rgbGamma,rgb$1}(1);function numberArray(a,b){b||(b=[]);var i,n=a?Math.min(b.length,a.length):0,c=b.slice();return function(t){for(i=0;i<n;++i)c[i]=a[i]*(1-t)+b[i]*t;return c}}function genericArray(a,b){var i,nb=b?b.length:0,na=a?Math.min(nb,a.length):0,x=new Array(na),c=new Array(nb);for(i=0;i<na;++i)x[i]=interpolate$1(a[i],b[i]);for(;i<nb;++i)c[i]=b[i];return function(t){for(i=0;i<na;++i)c[i]=x[i](t);return c}}function date(a,b){var d=new Date;return a=+a,b=+b,function(t){return d.setTime(a*(1-t)+b*t),d}}function interpolateNumber(a,b){return a=+a,b=+b,function(t){return a*(1-t)+b*t}}function object(a,b){var k,i={},c={};for(k in null!==a&&"object"==typeof a||(a={}),null!==b&&"object"==typeof b||(b={}),b)k in a?i[k]=interpolate$1(a[k],b[k]):c[k]=b[k];return function(t){for(k in i)c[k]=i[k](t);return c}}var reA=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,reB=new RegExp(reA.source,"g");function interpolateString(a,b){var am,bm,bs,bi=reA.lastIndex=reB.lastIndex=0,i=-1,s=[],q=[];for(a+="",b+="";(am=reA.exec(a))&&(bm=reB.exec(b));)(bs=bm.index)>bi&&(bs=b.slice(bi,bs),s[i]?s[i]+=bs:s[++i]=bs),(am=am[0])===(bm=bm[0])?s[i]?s[i]+=bm:s[++i]=bm:(s[++i]=null,q.push({i,x:interpolateNumber(am,bm)})),bi=reB.lastIndex;return bi<b.length&&(bs=b.slice(bi),s[i]?s[i]+=bs:s[++i]=bs),s.length<2?q[0]?function one(b){return function(t){return b(t)+""}}(q[0].x):function zero(b){return function(){return b}}(b):(b=q.length,function(t){for(var o,i=0;i<b;++i)s[(o=q[i]).i]=o.x(t);return s.join("")})}function interpolate$1(a,b){var c,t=typeof b;return null==b||"boolean"===t?constant$1(b):("number"===t?interpolateNumber:"string"===t?(c=color(b))?(b=c,interpolateRgb):interpolateString:b instanceof color?interpolateRgb:b instanceof Date?date:function isNumberArray(x){return ArrayBuffer.isView(x)&&!(x instanceof DataView)}(b)?numberArray:Array.isArray(b)?genericArray:"function"!=typeof b.valueOf&&"function"!=typeof b.toString||isNaN(b)?object:interpolateNumber)(a,b)}function interpolateRound(a,b){return a=+a,b=+b,function(t){return Math.round(a*(1-t)+b*t)}}var svgNode,degrees=180/Math.PI,identity$3={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function decompose(a,b,c,d,e,f){var scaleX,scaleY,skewX;return(scaleX=Math.sqrt(a*a+b*b))&&(a/=scaleX,b/=scaleX),(skewX=a*c+b*d)&&(c-=a*skewX,d-=b*skewX),(scaleY=Math.sqrt(c*c+d*d))&&(c/=scaleY,d/=scaleY,skewX/=scaleY),a*d<b*c&&(a=-a,b=-b,skewX=-skewX,scaleX=-scaleX),{translateX:e,translateY:f,rotate:Math.atan2(b,a)*degrees,skewX:Math.atan(skewX)*degrees,scaleX,scaleY}}function interpolateTransform(parse,pxComma,pxParen,degParen){function pop(s){return s.length?s.pop()+" ":""}return function(a,b){var s=[],q=[];return a=parse(a),b=parse(b),function translate(xa,ya,xb,yb,s,q){if(xa!==xb||ya!==yb){var i=s.push("translate(",null,pxComma,null,pxParen);q.push({i:i-4,x:interpolateNumber(xa,xb)},{i:i-2,x:interpolateNumber(ya,yb)})}else(xb||yb)&&s.push("translate("+xb+pxComma+yb+pxParen)}(a.translateX,a.translateY,b.translateX,b.translateY,s,q),function rotate(a,b,s,q){a!==b?(a-b>180?b+=360:b-a>180&&(a+=360),q.push({i:s.push(pop(s)+"rotate(",null,degParen)-2,x:interpolateNumber(a,b)})):b&&s.push(pop(s)+"rotate("+b+degParen)}(a.rotate,b.rotate,s,q),function skewX(a,b,s,q){a!==b?q.push({i:s.push(pop(s)+"skewX(",null,degParen)-2,x:interpolateNumber(a,b)}):b&&s.push(pop(s)+"skewX("+b+degParen)}(a.skewX,b.skewX,s,q),function scale(xa,ya,xb,yb,s,q){if(xa!==xb||ya!==yb){var i=s.push(pop(s)+"scale(",null,",",null,")");q.push({i:i-4,x:interpolateNumber(xa,xb)},{i:i-2,x:interpolateNumber(ya,yb)})}else 1===xb&&1===yb||s.push(pop(s)+"scale("+xb+","+yb+")")}(a.scaleX,a.scaleY,b.scaleX,b.scaleY,s,q),a=b=null,function(t){for(var o,i=-1,n=q.length;++i<n;)s[(o=q[i]).i]=o.x(t);return s.join("")}}}var interpolateTransformCss=interpolateTransform((function parseCss(value){var m=new("function"==typeof DOMMatrix?DOMMatrix:WebKitCSSMatrix)(value+"");return m.isIdentity?identity$3:decompose(m.a,m.b,m.c,m.d,m.e,m.f)}),"px, ","px)","deg)"),interpolateTransformSvg=interpolateTransform((function parseSvg(value){return null==value?identity$3:(svgNode||(svgNode=document.createElementNS("http://www.w3.org/2000/svg","g")),svgNode.setAttribute("transform",value),(value=svgNode.transform.baseVal.consolidate())?decompose((value=value.matrix).a,value.b,value.c,value.d,value.e,value.f):identity$3)}),", ",")",")");function cosh(x){return((x=Math.exp(x))+1/x)/2}var taskHead,taskTail,interpolateZoom=function zoomRho(rho,rho2,rho4){function zoom(p0,p1){var i,S,ux0=p0[0],uy0=p0[1],w0=p0[2],ux1=p1[0],uy1=p1[1],w1=p1[2],dx=ux1-ux0,dy=uy1-uy0,d2=dx*dx+dy*dy;if(d2<1e-12)S=Math.log(w1/w0)/rho,i=function i(t){return[ux0+t*dx,uy0+t*dy,w0*Math.exp(rho*t*S)]};else{var d1=Math.sqrt(d2),b0=(w1*w1-w0*w0+rho4*d2)/(2*w0*rho2*d1),b1=(w1*w1-w0*w0-rho4*d2)/(2*w1*rho2*d1),r0=Math.log(Math.sqrt(b0*b0+1)-b0),r1=Math.log(Math.sqrt(b1*b1+1)-b1);S=(r1-r0)/rho,i=function i(t){var s=t*S,coshr0=cosh(r0),u=w0/(rho2*d1)*(coshr0*function tanh(x){return((x=Math.exp(2*x))-1)/(x+1)}(rho*s+r0)-function sinh(x){return((x=Math.exp(x))-1/x)/2}(r0));return[ux0+u*dx,uy0+u*dy,w0*coshr0/cosh(rho*s+r0)]}}return i.duration=1e3*S*rho/Math.SQRT2,i}return zoom.rho=function(_){var _1=Math.max(.001,+_),_2=_1*_1;return zoomRho(_1,_2,_2*_2)},zoom}(Math.SQRT2,2,4),dist_frame=0,timeout$1=0,interval=0,clockLast=0,clockNow=0,clockSkew=0,clock="object"==typeof performance&&performance.now?performance:Date,setFrame="object"==typeof window&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(f){setTimeout(f,17)};function now(){return clockNow||(setFrame(clearNow),clockNow=clock.now()+clockSkew)}function clearNow(){clockNow=0}function Timer(){this._call=this._time=this._next=null}function timer(callback,delay,time){var t=new Timer;return t.restart(callback,delay,time),t}function wake(){clockNow=(clockLast=clock.now())+clockSkew,dist_frame=timeout$1=0;try{!function timerFlush(){now(),++dist_frame;for(var e,t=taskHead;t;)(e=clockNow-t._time)>=0&&t._call.call(void 0,e),t=t._next;--dist_frame}()}finally{dist_frame=0,function nap(){var t0,t2,t1=taskHead,time=1/0;for(;t1;)t1._call?(time>t1._time&&(time=t1._time),t0=t1,t1=t1._next):(t2=t1._next,t1._next=null,t1=t0?t0._next=t2:taskHead=t2);taskTail=t0,sleep(time)}(),clockNow=0}}function poke(){var now=clock.now(),delay=now-clockLast;delay>1e3&&(clockSkew-=delay,clockLast=now)}function sleep(time){dist_frame||(timeout$1&&(timeout$1=clearTimeout(timeout$1)),time-clockNow>24?(time<1/0&&(timeout$1=setTimeout(wake,time-clock.now()-clockSkew)),interval&&(interval=clearInterval(interval))):(interval||(clockLast=clock.now(),interval=setInterval(poke,1e3)),dist_frame=1,setFrame(wake)))}function timeout(callback,delay,time){var t=new Timer;return delay=null==delay?0:+delay,t.restart((function(elapsed){t.stop(),callback(elapsed+delay)}),delay,time),t}Timer.prototype=timer.prototype={constructor:Timer,restart:function restart(callback,delay,time){if("function"!=typeof callback)throw new TypeError("callback is not a function");time=(null==time?now():+time)+(null==delay?0:+delay),this._next||taskTail===this||(taskTail?taskTail._next=this:taskHead=this,taskTail=this),this._call=callback,this._time=time,sleep()},stop:function stop(){this._call&&(this._call=null,this._time=1/0,sleep())}};var emptyOn=dispatch("start","end","cancel","interrupt"),emptyTween=[];function schedule(node,name,id,index,group,timing){var schedules=node.__transition;if(schedules){if(id in schedules)return}else node.__transition={};!function create(node,id,self){var tween,schedules=node.__transition;function schedule(elapsed){self.state=1,self.timer.restart(start,self.delay,self.time),self.delay<=elapsed&&start(elapsed-self.delay)}function start(elapsed){var i,j,n,o;if(1!==self.state)return stop();for(i in schedules)if((o=schedules[i]).name===self.name){if(3===o.state)return timeout(start);4===o.state?(o.state=6,o.timer.stop(),o.on.call("interrupt",node,node.__data__,o.index,o.group),delete schedules[i]):+i<id&&(o.state=6,o.timer.stop(),o.on.call("cancel",node,node.__data__,o.index,o.group),delete schedules[i])}if(timeout((function(){3===self.state&&(self.state=4,self.timer.restart(tick,self.delay,self.time),tick(elapsed))})),self.state=2,self.on.call("start",node,node.__data__,self.index,self.group),2===self.state){for(self.state=3,tween=new Array(n=self.tween.length),i=0,j=-1;i<n;++i)(o=self.tween[i].value.call(node,node.__data__,self.index,self.group))&&(tween[++j]=o);tween.length=j+1}}function tick(elapsed){for(var t=elapsed<self.duration?self.ease.call(null,elapsed/self.duration):(self.timer.restart(stop),self.state=5,1),i=-1,n=tween.length;++i<n;)tween[i].call(node,t);5===self.state&&(self.on.call("end",node,node.__data__,self.index,self.group),stop())}function stop(){for(var i in self.state=6,self.timer.stop(),delete schedules[id],schedules)return;delete node.__transition}schedules[id]=self,self.timer=timer(schedule,0,self.time)}(node,id,{name,index,group,on:emptyOn,tween:emptyTween,time:timing.time,delay:timing.delay,duration:timing.duration,ease:timing.ease,timer:null,state:0})}function init(node,id){var schedule=get(node,id);if(schedule.state>0)throw new Error("too late; already scheduled");return schedule}function set(node,id){var schedule=get(node,id);if(schedule.state>3)throw new Error("too late; already running");return schedule}function get(node,id){var schedule=node.__transition;if(!schedule||!(schedule=schedule[id]))throw new Error("transition not found");return schedule}function interrupt(node,name){var schedule,active,i,schedules=node.__transition,empty=!0;if(schedules){for(i in name=null==name?null:name+"",schedules)(schedule=schedules[i]).name===name?(active=schedule.state>2&&schedule.state<5,schedule.state=6,schedule.timer.stop(),schedule.on.call(active?"interrupt":"cancel",node,node.__data__,schedule.index,schedule.group),delete schedules[i]):empty=!1;empty&&delete node.__transition}}function tweenRemove(id,name){var tween0,tween1;return function(){var schedule=set(this,id),tween=schedule.tween;if(tween!==tween0)for(var i=0,n=(tween1=tween0=tween).length;i<n;++i)if(tween1[i].name===name){(tween1=tween1.slice()).splice(i,1);break}schedule.tween=tween1}}function tweenFunction(id,name,value){var tween0,tween1;if("function"!=typeof value)throw new Error;return function(){var schedule=set(this,id),tween=schedule.tween;if(tween!==tween0){tween1=(tween0=tween).slice();for(var t={name,value},i=0,n=tween1.length;i<n;++i)if(tween1[i].name===name){tween1[i]=t;break}i===n&&tween1.push(t)}schedule.tween=tween1}}function tweenValue(transition,name,value){var id=transition._id;return transition.each((function(){var schedule=set(this,id);(schedule.value||(schedule.value={}))[name]=value.apply(this,arguments)})),function(node){return get(node,id).value[name]}}function interpolate(a,b){var c;return("number"==typeof b?interpolateNumber:b instanceof color?interpolateRgb:(c=color(b))?(b=c,interpolateRgb):interpolateString)(a,b)}function attrRemove(name){return function(){this.removeAttribute(name)}}function attrRemoveNS(fullname){return function(){this.removeAttributeNS(fullname.space,fullname.local)}}function attrConstant(name,interpolate,value1){var string00,interpolate0,string1=value1+"";return function(){var string0=this.getAttribute(name);return string0===string1?null:string0===string00?interpolate0:interpolate0=interpolate(string00=string0,value1)}}function attrConstantNS(fullname,interpolate,value1){var string00,interpolate0,string1=value1+"";return function(){var string0=this.getAttributeNS(fullname.space,fullname.local);return string0===string1?null:string0===string00?interpolate0:interpolate0=interpolate(string00=string0,value1)}}function attrFunction(name,interpolate,value){var string00,string10,interpolate0;return function(){var string0,string1,value1=value(this);if(null!=value1)return(string0=this.getAttribute(name))===(string1=value1+"")?null:string0===string00&&string1===string10?interpolate0:(string10=string1,interpolate0=interpolate(string00=string0,value1));this.removeAttribute(name)}}function attrFunctionNS(fullname,interpolate,value){var string00,string10,interpolate0;return function(){var string0,string1,value1=value(this);if(null!=value1)return(string0=this.getAttributeNS(fullname.space,fullname.local))===(string1=value1+"")?null:string0===string00&&string1===string10?interpolate0:(string10=string1,interpolate0=interpolate(string00=string0,value1));this.removeAttributeNS(fullname.space,fullname.local)}}function attrInterpolate(name,i){return function(t){this.setAttribute(name,i.call(this,t))}}function attrInterpolateNS(fullname,i){return function(t){this.setAttributeNS(fullname.space,fullname.local,i.call(this,t))}}function attrTweenNS(fullname,value){var t0,i0;function tween(){var i=value.apply(this,arguments);return i!==i0&&(t0=(i0=i)&&attrInterpolateNS(fullname,i)),t0}return tween._value=value,tween}function attrTween(name,value){var t0,i0;function tween(){var i=value.apply(this,arguments);return i!==i0&&(t0=(i0=i)&&attrInterpolate(name,i)),t0}return tween._value=value,tween}function delayFunction(id,value){return function(){init(this,id).delay=+value.apply(this,arguments)}}function delayConstant(id,value){return value=+value,function(){init(this,id).delay=value}}function durationFunction(id,value){return function(){set(this,id).duration=+value.apply(this,arguments)}}function durationConstant(id,value){return value=+value,function(){set(this,id).duration=value}}function easeConstant(id,value){if("function"!=typeof value)throw new Error;return function(){set(this,id).ease=value}}function onFunction(id,name,listener){var on0,on1,sit=function start(name){return(name+"").trim().split(/^|\s+/).every((function(t){var i=t.indexOf(".");return i>=0&&(t=t.slice(0,i)),!t||"start"===t}))}(name)?init:set;return function(){var schedule=sit(this,id),on=schedule.on;on!==on0&&(on1=(on0=on).copy()).on(name,listener),schedule.on=on1}}var Selection=selection.prototype.constructor;function styleRemove(name){return function(){this.style.removeProperty(name)}}function styleInterpolate(name,i,priority){return function(t){this.style.setProperty(name,i.call(this,t),priority)}}function styleTween(name,value,priority){var t,i0;function tween(){var i=value.apply(this,arguments);return i!==i0&&(t=(i0=i)&&styleInterpolate(name,i,priority)),t}return tween._value=value,tween}function textInterpolate(i){return function(t){this.textContent=i.call(this,t)}}function textTween(value){var t0,i0;function tween(){var i=value.apply(this,arguments);return i!==i0&&(t0=(i0=i)&&textInterpolate(i)),t0}return tween._value=value,tween}var id=0;function Transition(groups,parents,name,id){this._groups=groups,this._parents=parents,this._name=name,this._id=id}function newId(){return++id}var selection_prototype=selection.prototype;Transition.prototype=(_Transition$prototype={constructor:Transition,select:function transition_select(select){var name=this._name,id=this._id;"function"!=typeof select&&(select=selector(select));for(var groups=this._groups,m=groups.length,subgroups=new Array(m),j=0;j<m;++j)for(var node,subnode,group=groups[j],n=group.length,subgroup=subgroups[j]=new Array(n),i=0;i<n;++i)(node=group[i])&&(subnode=select.call(node,node.__data__,i,group))&&("__data__"in node&&(subnode.__data__=node.__data__),subgroup[i]=subnode,schedule(subgroup[i],name,id,i,subgroup,get(node,id)));return new Transition(subgroups,this._parents,name,id)},selectAll:function transition_selectAll(select){var name=this._name,id=this._id;"function"!=typeof select&&(select=selectorAll(select));for(var groups=this._groups,m=groups.length,subgroups=[],parents=[],j=0;j<m;++j)for(var node,group=groups[j],n=group.length,i=0;i<n;++i)if(node=group[i]){for(var child,children=select.call(node,node.__data__,i,group),inherit=get(node,id),k=0,l=children.length;k<l;++k)(child=children[k])&&schedule(child,name,id,k,children,inherit);subgroups.push(children),parents.push(node)}return new Transition(subgroups,parents,name,id)},selectChild:selection_prototype.selectChild,selectChildren:selection_prototype.selectChildren,filter:function transition_filter(match){"function"!=typeof match&&(match=matcher(match));for(var groups=this._groups,m=groups.length,subgroups=new Array(m),j=0;j<m;++j)for(var node,group=groups[j],n=group.length,subgroup=subgroups[j]=[],i=0;i<n;++i)(node=group[i])&&match.call(node,node.__data__,i,group)&&subgroup.push(node);return new Transition(subgroups,this._parents,this._name,this._id)},merge:function transition_merge(transition){if(transition._id!==this._id)throw new Error;for(var groups0=this._groups,groups1=transition._groups,m0=groups0.length,m1=groups1.length,m=Math.min(m0,m1),merges=new Array(m0),j=0;j<m;++j)for(var node,group0=groups0[j],group1=groups1[j],n=group0.length,merge=merges[j]=new Array(n),i=0;i<n;++i)(node=group0[i]||group1[i])&&(merge[i]=node);for(;j<m0;++j)merges[j]=groups0[j];return new Transition(merges,this._parents,this._name,this._id)},selection:function transition_selection(){return new Selection(this._groups,this._parents)},transition:function transition_transition(){for(var name=this._name,id0=this._id,id1=newId(),groups=this._groups,m=groups.length,j=0;j<m;++j)for(var node,group=groups[j],n=group.length,i=0;i<n;++i)if(node=group[i]){var inherit=get(node,id0);schedule(node,name,id1,i,group,{time:inherit.time+inherit.delay+inherit.duration,delay:0,duration:inherit.duration,ease:inherit.ease})}return new Transition(groups,this._parents,name,id1)},call:selection_prototype.call,nodes:selection_prototype.nodes,node:selection_prototype.node,size:selection_prototype.size,empty:selection_prototype.empty,each:selection_prototype.each,on:function transition_on(name,listener){var id=this._id;return arguments.length<2?get(this.node(),id).on.on(name):this.each(onFunction(id,name,listener))},attr:function transition_attr(name,value){var fullname=namespace(name),i="transform"===fullname?interpolateTransformSvg:interpolate;return this.attrTween(name,"function"==typeof value?(fullname.local?attrFunctionNS:attrFunction)(fullname,i,tweenValue(this,"attr."+name,value)):null==value?(fullname.local?attrRemoveNS:attrRemove)(fullname):(fullname.local?attrConstantNS:attrConstant)(fullname,i,value))},attrTween:function transition_attrTween(name,value){var key="attr."+name;if(arguments.length<2)return(key=this.tween(key))&&key._value;if(null==value)return this.tween(key,null);if("function"!=typeof value)throw new Error;var fullname=namespace(name);return this.tween(key,(fullname.local?attrTweenNS:attrTween)(fullname,value))},style:function transition_style(name,value,priority){var i="transform"==(name+="")?interpolateTransformCss:interpolate;return null==value?this.styleTween(name,function styleNull(name,interpolate){var string00,string10,interpolate0;return function(){var string0=styleValue(this,name),string1=(this.style.removeProperty(name),styleValue(this,name));return string0===string1?null:string0===string00&&string1===string10?interpolate0:interpolate0=interpolate(string00=string0,string10=string1)}}(name,i)).on("end.style."+name,styleRemove(name)):"function"==typeof value?this.styleTween(name,function styleFunction(name,interpolate,value){var string00,string10,interpolate0;return function(){var string0=styleValue(this,name),value1=value(this),string1=value1+"";return null==value1&&(this.style.removeProperty(name),string1=value1=styleValue(this,name)),string0===string1?null:string0===string00&&string1===string10?interpolate0:(string10=string1,interpolate0=interpolate(string00=string0,value1))}}(name,i,tweenValue(this,"style."+name,value))).each(function styleMaybeRemove(id,name){var on0,on1,listener0,remove,key="style."+name,event="end."+key;return function(){var schedule=set(this,id),on=schedule.on,listener=null==schedule.value[key]?remove||(remove=styleRemove(name)):void 0;on===on0&&listener0===listener||(on1=(on0=on).copy()).on(event,listener0=listener),schedule.on=on1}}(this._id,name)):this.styleTween(name,function styleConstant(name,interpolate,value1){var string00,interpolate0,string1=value1+"";return function(){var string0=styleValue(this,name);return string0===string1?null:string0===string00?interpolate0:interpolate0=interpolate(string00=string0,value1)}}(name,i,value),priority).on("end.style."+name,null)},styleTween:function transition_styleTween(name,value,priority){var key="style."+(name+="");if(arguments.length<2)return(key=this.tween(key))&&key._value;if(null==value)return this.tween(key,null);if("function"!=typeof value)throw new Error;return this.tween(key,styleTween(name,value,null==priority?"":priority))},text:function transition_text(value){return this.tween("text","function"==typeof value?function textFunction(value){return function(){var value1=value(this);this.textContent=null==value1?"":value1}}(tweenValue(this,"text",value)):function textConstant(value){return function(){this.textContent=value}}(null==value?"":value+""))},textTween:function transition_textTween(value){var key="text";if(arguments.length<1)return(key=this.tween(key))&&key._value;if(null==value)return this.tween(key,null);if("function"!=typeof value)throw new Error;return this.tween(key,textTween(value))},remove:function transition_remove(){return this.on("end.remove",function removeFunction(id){return function(){var parent=this.parentNode;for(var i in this.__transition)if(+i!==id)return;parent&&parent.removeChild(this)}}(this._id))},tween:function transition_tween(name,value){var id=this._id;if(name+="",arguments.length<2){for(var t,tween=get(this.node(),id).tween,i=0,n=tween.length;i<n;++i)if((t=tween[i]).name===name)return t.value;return null}return this.each((null==value?tweenRemove:tweenFunction)(id,name,value))},delay:function transition_delay(value){var id=this._id;return arguments.length?this.each(("function"==typeof value?delayFunction:delayConstant)(id,value)):get(this.node(),id).delay},duration:function transition_duration(value){var id=this._id;return arguments.length?this.each(("function"==typeof value?durationFunction:durationConstant)(id,value)):get(this.node(),id).duration},ease:function transition_ease(value){var id=this._id;return arguments.length?this.each(easeConstant(id,value)):get(this.node(),id).ease},easeVarying:function transition_easeVarying(value){if("function"!=typeof value)throw new Error;return this.each(function easeVarying(id,value){return function(){var v=value.apply(this,arguments);if("function"!=typeof v)throw new Error;set(this,id).ease=v}}(this._id,value))},end:function transition_end(){var on0,on1,that=this,id=that._id,size=that.size();return new Promise((function(resolve,reject){var cancel={value:reject},end={value:function value(){0==--size&&resolve()}};that.each((function(){var schedule=set(this,id),on=schedule.on;on!==on0&&((on1=(on0=on).copy())._.cancel.push(cancel),on1._.interrupt.push(cancel),on1._.end.push(end)),schedule.on=on1})),0===size&&resolve()}))}},_Transition$prototype[Symbol.iterator]=selection_prototype[Symbol.iterator],_Transition$prototype);var defaultTiming={time:null,delay:0,duration:250,ease:function cubicInOut(t){return((t*=2)<=1?t*t*t:(t-=2)*t*t+2)/2}};function inherit(node,id){for(var timing;!(timing=node.__transition)||!(timing=timing[id]);)if(!(node=node.parentNode))throw new Error("transition "+id+" not found");return timing}function formatDecimalParts(x,p){if((i=(x=p?x.toExponential(p-1):x.toExponential()).indexOf("e"))<0)return null;var i,coefficient=x.slice(0,i);return[coefficient.length>1?coefficient[0]+coefficient.slice(2):coefficient,+x.slice(i+1)]}function exponent(x){return(x=formatDecimalParts(Math.abs(x)))?x[1]:NaN}selection.prototype.interrupt=function selection_interrupt(name){return this.each((function(){interrupt(this,name)}))},selection.prototype.transition=function selection_transition(name){var id,timing;name instanceof Transition?(id=name._id,name=name._name):(id=newId(),(timing=defaultTiming).time=now(),name=null==name?null:name+"");for(var groups=this._groups,m=groups.length,j=0;j<m;++j)for(var node,group=groups[j],n=group.length,i=0;i<n;++i)(node=group[i])&&schedule(node,name,id,i,group,timing||inherit(node,id));return new Transition(groups,this._parents,name,id)};var prefixExponent,re=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function formatSpecifier(specifier){if(!(match=re.exec(specifier)))throw new Error("invalid format: "+specifier);var match;return new FormatSpecifier({fill:match[1],align:match[2],sign:match[3],symbol:match[4],zero:match[5],width:match[6],comma:match[7],precision:match[8]&&match[8].slice(1),trim:match[9],type:match[10]})}function FormatSpecifier(specifier){this.fill=void 0===specifier.fill?" ":specifier.fill+"",this.align=void 0===specifier.align?">":specifier.align+"",this.sign=void 0===specifier.sign?"-":specifier.sign+"",this.symbol=void 0===specifier.symbol?"":specifier.symbol+"",this.zero=!!specifier.zero,this.width=void 0===specifier.width?void 0:+specifier.width,this.comma=!!specifier.comma,this.precision=void 0===specifier.precision?void 0:+specifier.precision,this.trim=!!specifier.trim,this.type=void 0===specifier.type?"":specifier.type+""}function formatRounded(x,p){var d=formatDecimalParts(x,p);if(!d)return x+"";var coefficient=d[0],exponent=d[1];return exponent<0?"0."+new Array(-exponent).join("0")+coefficient:coefficient.length>exponent+1?coefficient.slice(0,exponent+1)+"."+coefficient.slice(exponent+1):coefficient+new Array(exponent-coefficient.length+2).join("0")}formatSpecifier.prototype=FormatSpecifier.prototype,FormatSpecifier.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(void 0===this.width?"":Math.max(1,0|this.width))+(this.comma?",":"")+(void 0===this.precision?"":"."+Math.max(0,0|this.precision))+(this.trim?"~":"")+this.type};var formatTypes={"%":function _(x,p){return(100*x).toFixed(p)},b:function b(x){return Math.round(x).toString(2)},c:function c(x){return x+""},d:function formatDecimal(x){return Math.abs(x=Math.round(x))>=1e21?x.toLocaleString("en").replace(/,/g,""):x.toString(10)},e:function e(x,p){return x.toExponential(p)},f:function f(x,p){return x.toFixed(p)},g:function g(x,p){return x.toPrecision(p)},o:function o(x){return Math.round(x).toString(8)},p:function p(x,_p){return formatRounded(100*x,_p)},r:formatRounded,s:function formatPrefixAuto(x,p){var d=formatDecimalParts(x,p);if(!d)return x+"";var coefficient=d[0],exponent=d[1],i=exponent-(prefixExponent=3*Math.max(-8,Math.min(8,Math.floor(exponent/3))))+1,n=coefficient.length;return i===n?coefficient:i>n?coefficient+new Array(i-n+1).join("0"):i>0?coefficient.slice(0,i)+"."+coefficient.slice(i):"0."+new Array(1-i).join("0")+formatDecimalParts(x,Math.max(0,p+i-1))[0]},X:function X(x){return Math.round(x).toString(16).toUpperCase()},x:function x(_x){return Math.round(_x).toString(16)}};function identity$2(x){return x}var locale,format,formatPrefix,map=Array.prototype.map,prefixes=["y","z","a","f","p","n","µ","m","","k","M","G","T","P","E","Z","Y"];function formatLocale(locale){var group=void 0===locale.grouping||void 0===locale.thousands?identity$2:function formatGroup(grouping,thousands){return function(value,width){for(var i=value.length,t=[],j=0,g=grouping[0],length=0;i>0&&g>0&&(length+g+1>width&&(g=Math.max(1,width-length)),t.push(value.substring(i-=g,i+g)),!((length+=g+1)>width));)g=grouping[j=(j+1)%grouping.length];return t.reverse().join(thousands)}}(map.call(locale.grouping,Number),locale.thousands+""),currencyPrefix=void 0===locale.currency?"":locale.currency[0]+"",currencySuffix=void 0===locale.currency?"":locale.currency[1]+"",decimal=void 0===locale.decimal?".":locale.decimal+"",numerals=void 0===locale.numerals?identity$2:function formatNumerals(numerals){return function(value){return value.replace(/[0-9]/g,(function(i){return numerals[+i]}))}}(map.call(locale.numerals,String)),percent=void 0===locale.percent?"%":locale.percent+"",minus=void 0===locale.minus?"−":locale.minus+"",nan=void 0===locale.nan?"NaN":locale.nan+"";function newFormat(specifier){var fill=(specifier=formatSpecifier(specifier)).fill,align=specifier.align,sign=specifier.sign,symbol=specifier.symbol,zero=specifier.zero,width=specifier.width,comma=specifier.comma,precision=specifier.precision,trim=specifier.trim,type=specifier.type;"n"===type?(comma=!0,type="g"):formatTypes[type]||(void 0===precision&&(precision=12),trim=!0,type="g"),(zero||"0"===fill&&"="===align)&&(zero=!0,fill="0",align="=");var prefix="$"===symbol?currencyPrefix:"#"===symbol&&/[boxX]/.test(type)?"0"+type.toLowerCase():"",suffix="$"===symbol?currencySuffix:/[%p]/.test(type)?percent:"",formatType=formatTypes[type],maybeSuffix=/[defgprs%]/.test(type);function format(value){var i,n,c,valuePrefix=prefix,valueSuffix=suffix;if("c"===type)valueSuffix=formatType(value)+valueSuffix,value="";else{var valueNegative=(value=+value)<0||1/value<0;if(value=isNaN(value)?nan:formatType(Math.abs(value),precision),trim&&(value=function formatTrim(s){out:for(var i1,n=s.length,i=1,i0=-1;i<n;++i)switch(s[i]){case".":i0=i1=i;break;case"0":0===i0&&(i0=i),i1=i;break;default:if(!+s[i])break out;i0>0&&(i0=0)}return i0>0?s.slice(0,i0)+s.slice(i1+1):s}(value)),valueNegative&&0==+value&&"+"!==sign&&(valueNegative=!1),valuePrefix=(valueNegative?"("===sign?sign:minus:"-"===sign||"("===sign?"":sign)+valuePrefix,valueSuffix=("s"===type?prefixes[8+prefixExponent/3]:"")+valueSuffix+(valueNegative&&"("===sign?")":""),maybeSuffix)for(i=-1,n=value.length;++i<n;)if(48>(c=value.charCodeAt(i))||c>57){valueSuffix=(46===c?decimal+value.slice(i+1):value.slice(i))+valueSuffix,value=value.slice(0,i);break}}comma&&!zero&&(value=group(value,1/0));var length=valuePrefix.length+value.length+valueSuffix.length,padding=length<width?new Array(width-length+1).join(fill):"";switch(comma&&zero&&(value=group(padding+value,padding.length?width-valueSuffix.length:1/0),padding=""),align){case"<":value=valuePrefix+value+valueSuffix+padding;break;case"=":value=valuePrefix+padding+value+valueSuffix;break;case"^":value=padding.slice(0,length=padding.length>>1)+valuePrefix+value+valueSuffix+padding.slice(length);break;default:value=padding+valuePrefix+value+valueSuffix}return numerals(value)}return precision=void 0===precision?6:/[gprs]/.test(type)?Math.max(1,Math.min(21,precision)):Math.max(0,Math.min(20,precision)),format.toString=function(){return specifier+""},format}return{format:newFormat,formatPrefix:function formatPrefix(specifier,value){var f=newFormat(((specifier=formatSpecifier(specifier)).type="f",specifier)),e=3*Math.max(-8,Math.min(8,Math.floor(exponent(value)/3))),k=Math.pow(10,-e),prefix=prefixes[8+e/3];return function(value){return f(k*value)+prefix}}}}function initRange(domain,range){switch(arguments.length){case 0:break;case 1:this.range(domain);break;default:this.range(range).domain(domain)}return this}function number(x){return+x}!function defaultLocale(definition){return locale=formatLocale(definition),format=locale.format,formatPrefix=locale.formatPrefix,locale}({thousands:",",grouping:[3],currency:["$",""]});var unit=[0,1];function identity$1(x){return x}function normalize(a,b){return(b-=a=+a)?function(x){return(x-a)/b}:function constants(x){return function(){return x}}(isNaN(b)?NaN:.5)}function bimap(domain,range,interpolate){var d0=domain[0],d1=domain[1],r0=range[0],r1=range[1];return d1<d0?(d0=normalize(d1,d0),r0=interpolate(r1,r0)):(d0=normalize(d0,d1),r0=interpolate(r0,r1)),function(x){return r0(d0(x))}}function polymap(domain,range,interpolate){var j=Math.min(domain.length,range.length)-1,d=new Array(j),r=new Array(j),i=-1;for(domain[j]<domain[0]&&(domain=domain.slice().reverse(),range=range.slice().reverse());++i<j;)d[i]=normalize(domain[i],domain[i+1]),r[i]=interpolate(range[i],range[i+1]);return function(x){var i=bisect(domain,x,1,j)-1;return r[i](d[i](x))}}function copy(source,target){return target.domain(source.domain()).range(source.range()).interpolate(source.interpolate()).clamp(source.clamp()).unknown(source.unknown())}function transformer(){var transform,untransform,unknown,piecewise,output,input,domain=unit,range=unit,interpolate=interpolate$1,clamp=identity$1;function rescale(){var n=Math.min(domain.length,range.length);return clamp!==identity$1&&(clamp=function clamper(a,b){var t;return a>b&&(t=a,a=b,b=t),function(x){return Math.max(a,Math.min(b,x))}}(domain[0],domain[n-1])),piecewise=n>2?polymap:bimap,output=input=null,scale}function scale(x){return null==x||isNaN(x=+x)?unknown:(output||(output=piecewise(domain.map(transform),range,interpolate)))(transform(clamp(x)))}return scale.invert=function(y){return clamp(untransform((input||(input=piecewise(range,domain.map(transform),interpolateNumber)))(y)))},scale.domain=function(_){return arguments.length?(domain=Array.from(_,number),rescale()):domain.slice()},scale.range=function(_){return arguments.length?(range=Array.from(_),rescale()):range.slice()},scale.rangeRound=function(_){return range=Array.from(_),interpolate=interpolateRound,rescale()},scale.clamp=function(_){return arguments.length?(clamp=!!_||identity$1,rescale()):clamp!==identity$1},scale.interpolate=function(_){return arguments.length?(interpolate=_,rescale()):interpolate},scale.unknown=function(_){return arguments.length?(unknown=_,scale):unknown},function(t,u){return transform=t,untransform=u,rescale()}}function continuous(){return transformer()(identity$1,identity$1)}function tickFormat(start,stop,count,specifier){var precision,step=function tickStep(start,stop,count){var step0=Math.abs(stop-start)/Math.max(0,count),step1=Math.pow(10,Math.floor(Math.log(step0)/Math.LN10)),error=step0/step1;return error>=e10?step1*=10:error>=e5?step1*=5:error>=e2&&(step1*=2),stop<start?-step1:step1}(start,stop,count);switch((specifier=formatSpecifier(null==specifier?",f":specifier)).type){case"s":var value=Math.max(Math.abs(start),Math.abs(stop));return null!=specifier.precision||isNaN(precision=function precisionPrefix(step,value){return Math.max(0,3*Math.max(-8,Math.min(8,Math.floor(exponent(value)/3)))-exponent(Math.abs(step)))}(step,value))||(specifier.precision=precision),formatPrefix(specifier,value);case"":case"e":case"g":case"p":case"r":null!=specifier.precision||isNaN(precision=function precisionRound(step,max){return step=Math.abs(step),max=Math.abs(max)-step,Math.max(0,exponent(max)-exponent(step))+1}(step,Math.max(Math.abs(start),Math.abs(stop))))||(specifier.precision=precision-("e"===specifier.type));break;case"f":case"%":null!=specifier.precision||isNaN(precision=function precisionFixed(step){return Math.max(0,-exponent(Math.abs(step)))}(step))||(specifier.precision=precision-2*("%"===specifier.type))}return format(specifier)}function linearish(scale){var domain=scale.domain;return scale.ticks=function(count){var d=domain();return function ticks(start,stop,count){var reverse,n,ticks,step,i=-1;if(count=+count,(start=+start)==(stop=+stop)&&count>0)return[start];if((reverse=stop<start)&&(n=start,start=stop,stop=n),0===(step=tickIncrement(start,stop,count))||!isFinite(step))return[];if(step>0){var r0=Math.round(start/step),r1=Math.round(stop/step);for(r0*step<start&&++r0,r1*step>stop&&--r1,ticks=new Array(n=r1-r0+1);++i<n;)ticks[i]=(r0+i)*step}else{step=-step;var _r=Math.round(start*step),_r2=Math.round(stop*step);for(_r/step<start&&++_r,_r2/step>stop&&--_r2,ticks=new Array(n=_r2-_r+1);++i<n;)ticks[i]=(_r+i)/step}return reverse&&ticks.reverse(),ticks}(d[0],d[d.length-1],null==count?10:count)},scale.tickFormat=function(count,specifier){var d=domain();return tickFormat(d[0],d[d.length-1],null==count?10:count,specifier)},scale.nice=function(count){null==count&&(count=10);var prestep,step,d=domain(),i0=0,i1=d.length-1,start=d[i0],stop=d[i1],maxIter=10;for(stop<start&&(step=start,start=stop,stop=step,step=i0,i0=i1,i1=step);maxIter-- >0;){if((step=tickIncrement(start,stop,count))===prestep)return d[i0]=start,d[i1]=stop,domain(d);if(step>0)start=Math.floor(start/step)*step,stop=Math.ceil(stop/step)*step;else{if(!(step<0))break;start=Math.ceil(start*step)/step,stop=Math.floor(stop*step)/step}prestep=step}return scale},scale}function linear(){var scale=continuous();return scale.copy=function(){return copy(scale,linear())},initRange.apply(scale,arguments),linearish(scale)}var constant=function constant(x){return function(){return x}};function ZoomEvent(type,_ref4){var sourceEvent=_ref4.sourceEvent,target=_ref4.target,transform=_ref4.transform,dispatch=_ref4.dispatch;Object.defineProperties(this,{type:{value:type,enumerable:!0,configurable:!0},sourceEvent:{value:sourceEvent,enumerable:!0,configurable:!0},target:{value:target,enumerable:!0,configurable:!0},transform:{value:transform,enumerable:!0,configurable:!0},_:{value:dispatch}})}function Transform(k,x,y){this.k=k,this.x=x,this.y=y}Transform.prototype={constructor:Transform,scale:function scale(k){return 1===k?this:new Transform(this.k*k,this.x,this.y)},translate:function translate(x,y){return 0===x&0===y?this:new Transform(this.k,this.x+this.k*x,this.y+this.k*y)},apply:function apply(point){return[point[0]*this.k+this.x,point[1]*this.k+this.y]},applyX:function applyX(x){return x*this.k+this.x},applyY:function applyY(y){return y*this.k+this.y},invert:function invert(location){return[(location[0]-this.x)/this.k,(location[1]-this.y)/this.k]},invertX:function invertX(x){return(x-this.x)/this.k},invertY:function invertY(y){return(y-this.y)/this.k},rescaleX:function rescaleX(x){return x.copy().domain(x.range().map(this.invertX,this).map(x.invert,x))},rescaleY:function rescaleY(y){return y.copy().domain(y.range().map(this.invertY,this).map(y.invert,y))},toString:function toString(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};var identity=new Transform(1,0,0);function nopropagation(event){event.stopImmediatePropagation()}function noevent(event){event.preventDefault(),event.stopImmediatePropagation()}function defaultFilter(event){return!(event.ctrlKey&&"wheel"!==event.type||event.button)}function defaultExtent(){var e=this;return e instanceof SVGElement?(e=e.ownerSVGElement||e).hasAttribute("viewBox")?[[(e=e.viewBox.baseVal).x,e.y],[e.x+e.width,e.y+e.height]]:[[0,0],[e.width.baseVal.value,e.height.baseVal.value]]:[[0,0],[e.clientWidth,e.clientHeight]]}function defaultTransform(){return this.__zoom||identity}function defaultWheelDelta(event){return-event.deltaY*(1===event.deltaMode?.05:event.deltaMode?1:.002)*(event.ctrlKey?10:1)}function defaultTouchable(){return navigator.maxTouchPoints||"ontouchstart"in this}function defaultConstrain(transform,extent,translateExtent){var dx0=transform.invertX(extent[0][0])-translateExtent[0][0],dx1=transform.invertX(extent[1][0])-translateExtent[1][0],dy0=transform.invertY(extent[0][1])-translateExtent[0][1],dy1=transform.invertY(extent[1][1])-translateExtent[1][1];return transform.translate(dx1>dx0?(dx0+dx1)/2:Math.min(0,dx0)||Math.max(0,dx1),dy1>dy0?(dy0+dy1)/2:Math.min(0,dy0)||Math.max(0,dy1))}Transform.prototype;var ATTRIBUTES_THAT_TRIGGER_REFRESH$1=["length","width","height"];function createEvent(type){var feature=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,withHighlight=arguments.length>2&&void 0!==arguments[2]&&arguments[2],withId=arguments.length>3&&void 0!==arguments[3]&&arguments[3],start=arguments.length>4?arguments[4]:void 0,end=arguments.length>5?arguments[5]:void 0,target=arguments.length>6?arguments[6]:void 0,event=arguments.length>7?arguments[7]:void 0,element=arguments.length>8?arguments[8]:void 0;feature&&(feature=(null==feature?void 0:feature.feature)||feature);var detail={eventType:type,feature,target,parentEvent:event};return withHighlight&&((null==feature?void 0:feature.fragments)?detail.highlight=((null==feature?void 0:feature.fragments)||[]).map((function(fr){return fr.start+":"+fr.end})).join(","):(null==event?void 0:event.shiftKey)&&(null==element?void 0:element.highlight)?detail.highlight=element.highlight+","+start+":"+end:detail.highlight=start&&end?start+":"+end:void 0),withId&&(detail.selectedId=null==feature?void 0:feature.protvistaFeatureId),new CustomEvent("change",{detail,bubbles:!0,cancelable:!0})}function bindEvents(feature,element){feature.on("mouseover",(function(event,datum){var _a,_b;element.dispatchEvent(createEvent("mouseover",datum,"onmouseover"===element.getAttribute("highlight-event"),!1,null!==(_a=datum.start)&&void 0!==_a?_a:datum.position,null!==(_b=datum.end)&&void 0!==_b?_b:datum.position,this,event))})).on("mouseout",(function(){element.dispatchEvent(createEvent("mouseout",null,"onmouseover"===element.getAttribute("highlight-event")))})).on("click",(function(event,datum){var _a,_b;element.dispatchEvent(createEvent("click",datum,"onclick"===element.getAttribute("highlight-event"),!0,null!==(_a=datum.start)&&void 0!==_a?_a:datum.position,null!==(_b=datum.end)&&void 0!==_b?_b:datum.position,this,event,element))}))}var s$2$1,t$2,t$1$1=window.ShadowRoot&&(void 0===window.ShadyCSS||window.ShadyCSS.nativeShadow)&&"adoptedStyleSheets"in Document.prototype&&"replace"in CSSStyleSheet.prototype,e$2$1=Symbol(),n$3$1=new WeakMap,s$3$1=function(){function s$3$1(t,n,s){if(_classCallCheck(this,s$3$1),this._$cssResult$=!0,s!==e$2$1)throw Error("CSSResult is not constructable. Use `unsafeCSS` or `css` instead.");this.cssText=t,this.t=n}return _createClass(s$3$1,[{key:"styleSheet",get:function get(){var e=this.o,s=this.t;if(t$1$1&&void 0===e){var _t=void 0!==s&&1===s.length;_t&&(e=n$3$1.get(s)),void 0===e&&((this.o=e=new CSSStyleSheet).replaceSync(this.cssText),_t&&n$3$1.set(s,e))}return e}},{key:"toString",value:function toString(){return this.cssText}}]),s$3$1}(),S$1$1=t$1$1?function(t){return t}:function(t){return t instanceof CSSStyleSheet?function(t){var _step3,e="",_iterator3=_createForOfIteratorHelper(t.cssRules);try{for(_iterator3.s();!(_step3=_iterator3.n()).done;){e+=_step3.value.cssText}}catch(err){_iterator3.e(err)}finally{_iterator3.f()}return function o$3$1(t){return new s$3$1("string"==typeof t?t:t+"",void 0,e$2$1)}(e)}(t):t},e$1$1=window.trustedTypes,r$1$1=e$1$1?e$1$1.emptyScript:"",h$1$1=window.reactiveElementPolyfillSupport,o$2$1={toAttribute:function toAttribute(t,i){switch(i){case Boolean:t=t?r$1$1:null;break;case Object:case Array:t=null==t?t:JSON.stringify(t)}return t},fromAttribute:function fromAttribute(t,i){var s=t;switch(i){case Boolean:s=null!==t;break;case Number:s=null===t?null:Number(t);break;case Object:case Array:try{s=JSON.parse(t)}catch(t){s=null}}return s}},n$2$1=function n$2$1(t,i){return i!==t&&(i==i||t==t)},l$2$1={attribute:!0,type:String,converter:o$2$1,reflect:!1,hasChanged:n$2$1},a$1$1=function(_HTMLElement){_inherits(a$1$1,_HTMLElement);var _$Ej2,_super8=_createSuper(a$1$1);function a$1$1(){var _this10;return _classCallCheck(this,a$1$1),(_this10=_super8.call(this))._$Ei=new Map,_this10.isUpdatePending=!1,_this10.hasUpdated=!1,_this10._$El=null,_this10.u(),_this10}return _createClass(a$1$1,[{key:"u",value:function u(){var t,_this11=this;this._$E_=new Promise((function(t){return _this11.enableUpdating=t})),this._$AL=new Map,this._$Eg(),this.requestUpdate(),null===(t=this.constructor.h)||void 0===t||t.forEach((function(t){return t(_this11)}))}},{key:"addController",value:function addController(t){var i,s;(null!==(i=this._$ES)&&void 0!==i?i:this._$ES=[]).push(t),void 0!==this.renderRoot&&this.isConnected&&(null===(s=t.hostConnected)||void 0===s||s.call(t))}},{key:"removeController",value:function removeController(t){var i;null===(i=this._$ES)||void 0===i||i.splice(this._$ES.indexOf(t)>>>0,1)}},{key:"_$Eg",value:function _$Eg(){var _this12=this;this.constructor.elementProperties.forEach((function(t,i){_this12.hasOwnProperty(i)&&(_this12._$Ei.set(i,_this12[i]),delete _this12[i])}))}},{key:"createRenderRoot",value:function createRenderRoot(){var t,s=null!==(t=this.shadowRoot)&&void 0!==t?t:this.attachShadow(this.constructor.shadowRootOptions);return function i$1$1(e,n){t$1$1?e.adoptedStyleSheets=n.map((function(t){return t instanceof CSSStyleSheet?t:t.styleSheet})):n.forEach((function(t){var n=document.createElement("style"),s=window.litNonce;void 0!==s&&n.setAttribute("nonce",s),n.textContent=t.cssText,e.appendChild(n)}))}(s,this.constructor.elementStyles),s}},{key:"connectedCallback",value:function connectedCallback(){var t;void 0===this.renderRoot&&(this.renderRoot=this.createRenderRoot()),this.enableUpdating(!0),null===(t=this._$ES)||void 0===t||t.forEach((function(t){var i;return null===(i=t.hostConnected)||void 0===i?void 0:i.call(t)}))}},{key:"enableUpdating",value:function enableUpdating(t){}},{key:"disconnectedCallback",value:function disconnectedCallback(){var t;null===(t=this._$ES)||void 0===t||t.forEach((function(t){var i;return null===(i=t.hostDisconnected)||void 0===i?void 0:i.call(t)}))}},{key:"attributeChangedCallback",value:function attributeChangedCallback(t,i,s){this._$AK(t,s)}},{key:"_$EO",value:function _$EO(t,i){var e,r,s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:l$2$1,h=this.constructor._$Ep(t,s);if(void 0!==h&&!0===s.reflect){var _n3=(null!==(r=null===(e=s.converter)||void 0===e?void 0:e.toAttribute)&&void 0!==r?r:o$2$1.toAttribute)(i,s.type);this._$El=t,null==_n3?this.removeAttribute(h):this.setAttribute(h,_n3),this._$El=null}}},{key:"_$AK",value:function _$AK(t,i){var s,e,r=this.constructor,h=r._$Ev.get(t);if(void 0!==h&&this._$El!==h){var _t2=r.getPropertyOptions(h),_n4=_t2.converter,_l=null!==(e=null!==(s=null==_n4?void 0:_n4.fromAttribute)&&void 0!==s?s:"function"==typeof _n4?_n4:null)&&void 0!==e?e:o$2$1.fromAttribute;this._$El=h,this[h]=_l(i,_t2.type),this._$El=null}}},{key:"requestUpdate",value:function requestUpdate(t,i,s){var e=!0;void 0!==t&&(((s=s||this.constructor.getPropertyOptions(t)).hasChanged||n$2$1)(this[t],i)?(this._$AL.has(t)||this._$AL.set(t,i),!0===s.reflect&&this._$El!==t&&(void 0===this._$EC&&(this._$EC=new Map),this._$EC.set(t,s))):e=!1),!this.isUpdatePending&&e&&(this._$E_=this._$Ej())}},{key:"_$Ej",value:(_$Ej2=_asyncToGenerator(_regeneratorRuntime().mark((function _callee(){var t;return _regeneratorRuntime().wrap((function _callee$(_context3){for(;;)switch(_context3.prev=_context3.next){case 0:return this.isUpdatePending=!0,_context3.prev=1,_context3.next=4,this._$E_;case 4:_context3.next=9;break;case 6:_context3.prev=6,_context3.t0=_context3.catch(1),Promise.reject(_context3.t0);case 9:if(t=this.scheduleUpdate(),_context3.t1=null!=t,!_context3.t1){_context3.next=14;break}return _context3.next=14,t;case 14:return _context3.abrupt("return",!this.isUpdatePending);case 15:case"end":return _context3.stop()}}),_callee,this,[[1,6]])}))),function _$Ej(){return _$Ej2.apply(this,arguments)})},{key:"scheduleUpdate",value:function scheduleUpdate(){return this.performUpdate()}},{key:"performUpdate",value:function performUpdate(){var t,_this13=this;if(this.isUpdatePending){this.hasUpdated,this._$Ei&&(this._$Ei.forEach((function(t,i){return _this13[i]=t})),this._$Ei=void 0);var i=!1,s=this._$AL;try{(i=this.shouldUpdate(s))?(this.willUpdate(s),null===(t=this._$ES)||void 0===t||t.forEach((function(t){var i;return null===(i=t.hostUpdate)||void 0===i?void 0:i.call(t)})),this.update(s)):this._$Ek()}catch(t){throw i=!1,this._$Ek(),t}i&&this._$AE(s)}}},{key:"willUpdate",value:function willUpdate(t){}},{key:"_$AE",value:function _$AE(t){var i;null===(i=this._$ES)||void 0===i||i.forEach((function(t){var i;return null===(i=t.hostUpdated)||void 0===i?void 0:i.call(t)})),this.hasUpdated||(this.hasUpdated=!0,this.firstUpdated(t)),this.updated(t)}},{key:"_$Ek",value:function _$Ek(){this._$AL=new Map,this.isUpdatePending=!1}},{key:"updateComplete",get:function get(){return this.getUpdateComplete()}},{key:"getUpdateComplete",value:function getUpdateComplete(){return this._$E_}},{key:"shouldUpdate",value:function shouldUpdate(t){return!0}},{key:"update",value:function update(t){var _this14=this;void 0!==this._$EC&&(this._$EC.forEach((function(t,i){return _this14._$EO(i,_this14[i],t)})),this._$EC=void 0),this._$Ek()}},{key:"updated",value:function updated(t){}},{key:"firstUpdated",value:function firstUpdated(t){}}],[{key:"addInitializer",value:function addInitializer(t){var i;null!==(i=this.h)&&void 0!==i||(this.h=[]),this.h.push(t)}},{key:"observedAttributes",get:function get(){var _this15=this;this.finalize();var t=[];return this.elementProperties.forEach((function(i,s){var e=_this15._$Ep(s,i);void 0!==e&&(_this15._$Ev.set(e,s),t.push(e))})),t}},{key:"createProperty",value:function createProperty(t){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:l$2$1;if(i.state&&(i.attribute=!1),this.finalize(),this.elementProperties.set(t,i),!i.noAccessor&&!this.prototype.hasOwnProperty(t)){var _s2="symbol"==typeof t?Symbol():"__"+t,_e2=this.getPropertyDescriptor(t,_s2,i);void 0!==_e2&&Object.defineProperty(this.prototype,t,_e2)}}},{key:"getPropertyDescriptor",value:function getPropertyDescriptor(t,i,s){return{get:function get(){return this[i]},set:function set(e){var r=this[t];this[i]=e,this.requestUpdate(t,r,s)},configurable:!0,enumerable:!0}}},{key:"getPropertyOptions",value:function getPropertyOptions(t){return this.elementProperties.get(t)||l$2$1}},{key:"finalize",value:function finalize(){if(this.hasOwnProperty("finalized"))return!1;this.finalized=!0;var t=Object.getPrototypeOf(this);if(t.finalize(),this.elementProperties=new Map(t.elementProperties),this._$Ev=new Map,this.hasOwnProperty("properties")){var _step4,_t3=this.properties,_iterator4=_createForOfIteratorHelper([].concat(_toConsumableArray(Object.getOwnPropertyNames(_t3)),_toConsumableArray(Object.getOwnPropertySymbols(_t3))));try{for(_iterator4.s();!(_step4=_iterator4.n()).done;){var _s3=_step4.value;this.createProperty(_s3,_t3[_s3])}}catch(err){_iterator4.e(err)}finally{_iterator4.f()}}return this.elementStyles=this.finalizeStyles(this.styles),!0}},{key:"finalizeStyles",value:function finalizeStyles(i){var s=[];if(Array.isArray(i)){var _step5,_iterator5=_createForOfIteratorHelper(new Set(i.flat(1/0).reverse()));try{for(_iterator5.s();!(_step5=_iterator5.n()).done;){var _i3=_step5.value;s.unshift(S$1$1(_i3))}}catch(err){_iterator5.e(err)}finally{_iterator5.f()}}else void 0!==i&&s.push(S$1$1(i));return s}},{key:"_$Ep",value:function _$Ep(t,i){var s=i.attribute;return!1===s?void 0:"string"==typeof s?s:"string"==typeof t?t.toLowerCase():void 0}}]),a$1$1}(_wrapNativeSuper(HTMLElement));a$1$1.finalized=!0,a$1$1.elementProperties=new Map,a$1$1.elementStyles=[],a$1$1.shadowRootOptions={mode:"open"},null==h$1$1||h$1$1({ReactiveElement:a$1$1}),(null!==(s$2$1=globalThis.reactiveElementVersions)&&void 0!==s$2$1?s$2$1:globalThis.reactiveElementVersions=[]).push("1.3.4");var i$3=globalThis.trustedTypes,s$1$1=i$3?i$3.createPolicy("lit-html",{createHTML:function createHTML(t){return t}}):void 0,e$4="lit$"+(Math.random()+"").slice(9)+"$",o$1$1="?"+e$4,n$1$1="<"+o$1$1+">",l$1$1=document,h$2=function h$2(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return l$1$1.createComment(t)},r$2=function r$2(t){return null===t||"object"!=typeof t&&"function"!=typeof t},d$1=Array.isArray,u$1=function u$1(t){return d$1(t)||"function"==typeof(null==t?void 0:t[Symbol.iterator])},c$1=/<(?:(!--|\/[^a-zA-Z])|(\/?[a-zA-Z][^>\s]*)|(\/?$))/g,v$1=/-->/g,a$2=/>/g,f$1=RegExp(">|[ \t\n\f\r](?:([^\\s\"'>=/]+)([ \t\n\f\r]*=[ \t\n\f\r]*(?:[^ \t\n\f\r\"'`<>=]|(\"|')|))|$)","g"),_$1=/'/g,g$1=/"/g,m$1=/^(?:script|style|textarea|title)$/i,b$1=Symbol.for("lit-noChange"),w$1=Symbol.for("lit-nothing"),x$1=new WeakMap,A$1=l$1$1.createTreeWalker(l$1$1,129,null,!1),C$1=function(){function C$1(_ref7,n){var l,t=_ref7.strings,s=_ref7._$litType$;_classCallCheck(this,C$1),this.parts=[];var r=0,d=0,u=t.length-1,c=this.parts,_E$=function E$1(t,i){for(var h,o=t.length-1,l=[],r=2===i?"<svg>":"",d=c$1,_i4=0;_i4<o;_i4++){for(var _s4=t[_i4],_o=void 0,_u=void 0,_p2=-1,_$=0;_$<_s4.length&&(d.lastIndex=_$,null!==(_u=d.exec(_s4)));)_$=d.lastIndex,d===c$1?"!--"===_u[1]?d=v$1:void 0!==_u[1]?d=a$2:void 0!==_u[2]?(m$1.test(_u[2])&&(h=RegExp("</"+_u[2],"g")),d=f$1):void 0!==_u[3]&&(d=f$1):d===f$1?">"===_u[0]?(d=null!=h?h:c$1,_p2=-1):void 0===_u[1]?_p2=-2:(_p2=d.lastIndex-_u[2].length,_o=_u[1],d=void 0===_u[3]?f$1:'"'===_u[3]?g$1:_$1):d===g$1||d===_$1?d=f$1:d===v$1||d===a$2?d=c$1:(d=f$1,h=void 0);var y=d===f$1&&t[_i4+1].startsWith("/>")?" ":"";r+=d===c$1?_s4+n$1$1:_p2>=0?(l.push(_o),_s4.slice(0,_p2)+"$lit$"+_s4.slice(_p2)+e$4+y):_s4+e$4+(-2===_p2?(l.push(void 0),_i4):y)}var u=r+(t[o]||"<?>")+(2===i?"</svg>":"");if(!Array.isArray(t)||!t.hasOwnProperty("raw"))throw Error("invalid template strings array");return[void 0!==s$1$1?s$1$1.createHTML(u):u,l]}(t,s),_E$2=_slicedToArray(_E$,2),v=_E$2[0],a=_E$2[1];if(this.el=C$1.createElement(v,n),A$1.currentNode=this.el.content,2===s){var _t5=this.el.content,_i5=_t5.firstChild;_i5.remove(),_t5.append.apply(_t5,_toConsumableArray(_i5.childNodes))}for(;null!==(l=A$1.nextNode())&&c.length<u;){if(1===l.nodeType){if(l.hasAttributes()){var _step6,_t6=[],_iterator6=_createForOfIteratorHelper(l.getAttributeNames());try{for(_iterator6.s();!(_step6=_iterator6.n()).done;){var _i6=_step6.value;if(_i6.endsWith("$lit$")||_i6.startsWith(e$4)){var _s5=a[d++];if(_t6.push(_i6),void 0!==_s5){var _t8=l.getAttribute(_s5.toLowerCase()+"$lit$").split(e$4),_i9=/([.?@])?(.*)/.exec(_s5);c.push({type:1,index:r,name:_i9[2],strings:_t8,ctor:"."===_i9[1]?M$1:"?"===_i9[1]?k$1:"@"===_i9[1]?H$1:S$2})}else c.push({type:6,index:r})}}}catch(err){_iterator6.e(err)}finally{_iterator6.f()}for(var _i8=0,_t7=_t6;_i8<_t7.length;_i8++){var _i7=_t7[_i8];l.removeAttribute(_i7)}}if(m$1.test(l.tagName)){var _t9=l.textContent.split(e$4),_s6=_t9.length-1;if(_s6>0){l.textContent=i$3?i$3.emptyScript:"";for(var _i10=0;_i10<_s6;_i10++)l.append(_t9[_i10],h$2()),A$1.nextNode(),c.push({type:2,index:++r});l.append(_t9[_s6],h$2())}}}else if(8===l.nodeType)if(l.data===o$1$1)c.push({type:2,index:r});else for(var _t10=-1;-1!==(_t10=l.data.indexOf(e$4,_t10+1));)c.push({type:7,index:r}),_t10+=e$4.length-1;r++}}return _createClass(C$1,null,[{key:"createElement",value:function createElement(t,i){var s=l$1$1.createElement("template");return s.innerHTML=t,s}}]),C$1}();function P$1(t,i){var o,n,l,h,s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:t,e=arguments.length>3?arguments[3]:void 0;if(i===b$1)return i;var d=void 0!==e?null===(o=s._$Cl)||void 0===o?void 0:o[e]:s._$Cu,u=r$2(i)?void 0:i._$litDirective$;return(null==d?void 0:d.constructor)!==u&&(null===(n=null==d?void 0:d._$AO)||void 0===n||n.call(d,!1),void 0===u?d=void 0:(d=new u(t))._$AT(t,s,e),void 0!==e?(null!==(l=(h=s)._$Cl)&&void 0!==l?l:h._$Cl=[])[e]=d:s._$Cu=d),void 0!==d&&(i=P$1(t,d._$AS(t,i.values),d,e)),i}var l$3,o$4,V$1=function(){function V$1(t,i){_classCallCheck(this,V$1),this.v=[],this._$AN=void 0,this._$AD=t,this._$AM=i}return _createClass(V$1,[{key:"parentNode",get:function get(){return this._$AM.parentNode}},{key:"_$AU",get:function get(){return this._$AM._$AU}},{key:"p",value:function p(t){var i,_this$_$AD=this._$AD,s=_this$_$AD.el.content,e=_this$_$AD.parts,o=(null!==(i=null==t?void 0:t.creationScope)&&void 0!==i?i:l$1$1).importNode(s,!0);A$1.currentNode=o;for(var n=A$1.nextNode(),h=0,r=0,d=e[0];void 0!==d;){if(h===d.index){var _i11=void 0;2===d.type?_i11=new N$1(n,n.nextSibling,this,t):1===d.type?_i11=new d.ctor(n,d.name,d.strings,this,t):6===d.type&&(_i11=new I$1(n,this,t)),this.v.push(_i11),d=e[++r]}h!==(null==d?void 0:d.index)&&(n=A$1.nextNode(),h++)}return o}},{key:"m",value:function m(t){var _step7,i=0,_iterator7=_createForOfIteratorHelper(this.v);try{for(_iterator7.s();!(_step7=_iterator7.n()).done;){var _s7=_step7.value;void 0!==_s7&&(void 0!==_s7.strings?(_s7._$AI(t,_s7,i),i+=_s7.strings.length-2):_s7._$AI(t[i])),i++}}catch(err){_iterator7.e(err)}finally{_iterator7.f()}}}]),V$1}(),N$1=function(){function N$1(t,i,s,e){var o;_classCallCheck(this,N$1),this.type=2,this._$AH=w$1,this._$AN=void 0,this._$AA=t,this._$AB=i,this._$AM=s,this.options=e,this._$C_=null===(o=null==e?void 0:e.isConnected)||void 0===o||o}return _createClass(N$1,[{key:"_$AU",get:function get(){var t,i;return null!==(i=null===(t=this._$AM)||void 0===t?void 0:t._$AU)&&void 0!==i?i:this._$C_}},{key:"parentNode",get:function get(){var t=this._$AA.parentNode,i=this._$AM;return void 0!==i&&11===t.nodeType&&(t=i.parentNode),t}},{key:"startNode",get:function get(){return this._$AA}},{key:"endNode",get:function get(){return this._$AB}},{key:"_$AI",value:function _$AI(t){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this;t=P$1(this,t,i),r$2(t)?t===w$1||null==t||""===t?(this._$AH!==w$1&&this._$AR(),this._$AH=w$1):t!==this._$AH&&t!==b$1&&this.T(t):void 0!==t._$litType$?this.$(t):void 0!==t.nodeType?this.k(t):u$1(t)?this.S(t):this.T(t)}},{key:"j",value:function j(t){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this._$AB;return this._$AA.parentNode.insertBefore(t,i)}},{key:"k",value:function k(t){this._$AH!==t&&(this._$AR(),this._$AH=this.j(t))}},{key:"T",value:function T(t){this._$AH!==w$1&&r$2(this._$AH)?this._$AA.nextSibling.data=t:this.k(l$1$1.createTextNode(t)),this._$AH=t}},{key:"$",value:function $(t){var i,s=t.values,e=t._$litType$,o="number"==typeof e?this._$AC(t):(void 0===e.el&&(e.el=C$1.createElement(e.h,this.options)),e);if((null===(i=this._$AH)||void 0===i?void 0:i._$AD)===o)this._$AH.m(s);else{var _t11=new V$1(o,this),_i12=_t11.p(this.options);_t11.m(s),this.k(_i12),this._$AH=_t11}}},{key:"_$AC",value:function _$AC(t){var i=x$1.get(t.strings);return void 0===i&&x$1.set(t.strings,i=new C$1(t)),i}},{key:"S",value:function S(t){d$1(this._$AH)||(this._$AH=[],this._$AR());var s,_step8,i=this._$AH,e=0,_iterator8=_createForOfIteratorHelper(t);try{for(_iterator8.s();!(_step8=_iterator8.n()).done;){var _o2=_step8.value;e===i.length?i.push(s=new N$1(this.j(h$2()),this.j(h$2()),this,this.options)):s=i[e],s._$AI(_o2),e++}}catch(err){_iterator8.e(err)}finally{_iterator8.f()}e<i.length&&(this._$AR(s&&s._$AB.nextSibling,e),i.length=e)}},{key:"_$AR",value:function _$AR(){var s,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this._$AA.nextSibling,i=arguments.length>1?arguments[1]:void 0;for(null===(s=this._$AP)||void 0===s||s.call(this,!1,!0,i);t&&t!==this._$AB;){var _i13=t.nextSibling;t.remove(),t=_i13}}},{key:"setConnected",value:function setConnected(t){var i;void 0===this._$AM&&(this._$C_=t,null===(i=this._$AP)||void 0===i||i.call(this,t))}}]),N$1}(),S$2=function(){function S$2(t,i,s,e,o){_classCallCheck(this,S$2),this.type=1,this._$AH=w$1,this._$AN=void 0,this.element=t,this.name=i,this._$AM=e,this.options=o,s.length>2||""!==s[0]||""!==s[1]?(this._$AH=Array(s.length-1).fill(new String),this.strings=s):this._$AH=w$1}return _createClass(S$2,[{key:"tagName",get:function get(){return this.element.tagName}},{key:"_$AU",get:function get(){return this._$AM._$AU}},{key:"_$AI",value:function _$AI(t){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this,s=arguments.length>2?arguments[2]:void 0,e=arguments.length>3?arguments[3]:void 0,o=this.strings,n=!1;if(void 0===o)t=P$1(this,t,i,0),(n=!r$2(t)||t!==this._$AH&&t!==b$1)&&(this._$AH=t);else{var _l2,_h,_e4=t;for(t=o[0],_l2=0;_l2<o.length-1;_l2++)(_h=P$1(this,_e4[s+_l2],i,_l2))===b$1&&(_h=this._$AH[_l2]),n||(n=!r$2(_h)||_h!==this._$AH[_l2]),_h===w$1?t=w$1:t!==w$1&&(t+=(null!=_h?_h:"")+o[_l2+1]),this._$AH[_l2]=_h}n&&!e&&this.P(t)}},{key:"P",value:function P(t){t===w$1?this.element.removeAttribute(this.name):this.element.setAttribute(this.name,null!=t?t:"")}}]),S$2}(),M$1=function(_S$){_inherits(M$1,_S$);var _super9=_createSuper(M$1);function M$1(){var _this16;return _classCallCheck(this,M$1),(_this16=_super9.apply(this,arguments)).type=3,_this16}return _createClass(M$1,[{key:"P",value:function P(t){this.element[this.name]=t===w$1?void 0:t}}]),M$1}(S$2),R$1=i$3?i$3.emptyScript:"",k$1=function(_S$2){_inherits(k$1,_S$2);var _super10=_createSuper(k$1);function k$1(){var _this17;return _classCallCheck(this,k$1),(_this17=_super10.apply(this,arguments)).type=4,_this17}return _createClass(k$1,[{key:"P",value:function P(t){t&&t!==w$1?this.element.setAttribute(this.name,R$1):this.element.removeAttribute(this.name)}}]),k$1}(S$2),H$1=function(_S$3){_inherits(H$1,_S$3);var _super11=_createSuper(H$1);function H$1(t,i,s,e,o){var _this18;return _classCallCheck(this,H$1),(_this18=_super11.call(this,t,i,s,e,o)).type=5,_this18}return _createClass(H$1,[{key:"_$AI",value:function _$AI(t){var s,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this;if((t=null!==(s=P$1(this,t,i,0))&&void 0!==s?s:w$1)!==b$1){var e=this._$AH,o=t===w$1&&e!==w$1||t.capture!==e.capture||t.once!==e.once||t.passive!==e.passive,n=t!==w$1&&(e===w$1||o);o&&this.element.removeEventListener(this.name,this,e),n&&this.element.addEventListener(this.name,this,t),this._$AH=t}}},{key:"handleEvent",value:function handleEvent(t){var i,s;"function"==typeof this._$AH?this._$AH.call(null!==(s=null===(i=this.options)||void 0===i?void 0:i.host)&&void 0!==s?s:this.element,t):this._$AH.handleEvent(t)}}]),H$1}(S$2),I$1=function(){function I$1(t,i,s){_classCallCheck(this,I$1),this.element=t,this.type=6,this._$AN=void 0,this._$AM=i,this.options=s}return _createClass(I$1,[{key:"_$AU",get:function get(){return this._$AM._$AU}},{key:"_$AI",value:function _$AI(t){P$1(this,t)}}]),I$1}(),z$1=window.litHtmlPolyfillSupport;null==z$1||z$1(C$1,N$1),(null!==(t$2=globalThis.litHtmlVersions)&&void 0!==t$2?t$2:globalThis.litHtmlVersions=[]).push("2.2.7");var s$4=function(_a$1$){_inherits(s$4,_a$1$);var _super12=_createSuper(s$4);function s$4(){var _this19;return _classCallCheck(this,s$4),(_this19=_super12.apply(this,arguments)).renderOptions={host:_assertThisInitialized(_this19)},_this19._$Do=void 0,_this19}return _createClass(s$4,[{key:"createRenderRoot",value:function createRenderRoot(){var t,e,i=_get(_getPrototypeOf(s$4.prototype),"createRenderRoot",this).call(this);return null!==(t=(e=this.renderOptions).renderBefore)&&void 0!==t||(e.renderBefore=i.firstChild),i}},{key:"update",value:function update(t){var i=this.render();this.hasUpdated||(this.renderOptions.isConnected=this.isConnected),_get(_getPrototypeOf(s$4.prototype),"update",this).call(this,t),this._$Do=function T$1(t,i,s){var e,o,n=null!==(e=null==s?void 0:s.renderBefore)&&void 0!==e?e:i,l=n._$litPart$;if(void 0===l){var _t4=null!==(o=null==s?void 0:s.renderBefore)&&void 0!==o?o:null;n._$litPart$=l=new N$1(i.insertBefore(h$2(),_t4),_t4,void 0,null!=s?s:{})}return l._$AI(t),l}(i,this.renderRoot,this.renderOptions)}},{key:"connectedCallback",value:function connectedCallback(){var t;_get(_getPrototypeOf(s$4.prototype),"connectedCallback",this).call(this),null===(t=this._$Do)||void 0===t||t.setConnected(!0)}},{key:"disconnectedCallback",value:function disconnectedCallback(){var t;_get(_getPrototypeOf(s$4.prototype),"disconnectedCallback",this).call(this),null===(t=this._$Do)||void 0===t||t.setConnected(!1)}},{key:"render",value:function render(){return b$1}}]),s$4}(a$1$1);s$4.finalized=!0,s$4._$litElement$=!0,null===(l$3=globalThis.litElementHydrateSupport)||void 0===l$3||l$3.call(globalThis,{LitElement:s$4});var n$6=globalThis.litElementPolyfillSupport;null==n$6||n$6({LitElement:s$4}),(null!==(o$4=globalThis.litElementVersions)&&void 0!==o$4?o$4:globalThis.litElementVersions=[]).push("3.2.2");var s$2,t,NightingaleElement=function(_s$){_inherits(NightingaleElement,_s$);var _super13=_createSuper(NightingaleElement);function NightingaleElement(){return _classCallCheck(this,NightingaleElement),_super13.apply(this,arguments)}return _createClass(NightingaleElement,[{key:"createRenderRoot",value:function createRenderRoot(){return this}}]),NightingaleElement}(s$4),t$1=window.ShadowRoot&&(void 0===window.ShadyCSS||window.ShadyCSS.nativeShadow)&&"adoptedStyleSheets"in Document.prototype&&"replace"in CSSStyleSheet.prototype,e$3=Symbol(),n$4=new WeakMap,s$3=function(){function s$3(t,n,s){if(_classCallCheck(this,s$3),this._$cssResult$=!0,s!==e$3)throw Error("CSSResult is not constructable. Use `unsafeCSS` or `css` instead.");this.cssText=t,this.t=n}return _createClass(s$3,[{key:"styleSheet",get:function get(){var e=this.o,s=this.t;if(t$1&&void 0===e){var _t12=void 0!==s&&1===s.length;_t12&&(e=n$4.get(s)),void 0===e&&((this.o=e=new CSSStyleSheet).replaceSync(this.cssText),_t12&&n$4.set(s,e))}return e}},{key:"toString",value:function toString(){return this.cssText}}]),s$3}(),S$1=t$1?function(t){return t}:function(t){return t instanceof CSSStyleSheet?function(t){var _step9,e="",_iterator9=_createForOfIteratorHelper(t.cssRules);try{for(_iterator9.s();!(_step9=_iterator9.n()).done;){e+=_step9.value.cssText}}catch(err){_iterator9.e(err)}finally{_iterator9.f()}return function o$3(t){return new s$3("string"==typeof t?t:t+"",void 0,e$3)}(e)}(t):t},e$2=window.trustedTypes,r$1=e$2?e$2.emptyScript:"",h$1=window.reactiveElementPolyfillSupport,o$2={toAttribute:function toAttribute(t,i){switch(i){case Boolean:t=t?r$1:null;break;case Object:case Array:t=null==t?t:JSON.stringify(t)}return t},fromAttribute:function fromAttribute(t,i){var s=t;switch(i){case Boolean:s=null!==t;break;case Number:s=null===t?null:Number(t);break;case Object:case Array:try{s=JSON.parse(t)}catch(t){s=null}}return s}},n$3=function n$3(t,i){return i!==t&&(i==i||t==t)},l$2={attribute:!0,type:String,converter:o$2,reflect:!1,hasChanged:n$3},a$1=function(_HTMLElement2){_inherits(a$1,_HTMLElement2);var _$Ej3,_super14=_createSuper(a$1);function a$1(){var _this20;return _classCallCheck(this,a$1),(_this20=_super14.call(this))._$Ei=new Map,_this20.isUpdatePending=!1,_this20.hasUpdated=!1,_this20._$El=null,_this20.u(),_this20}return _createClass(a$1,[{key:"u",value:function u(){var t,_this21=this;this._$E_=new Promise((function(t){return _this21.enableUpdating=t})),this._$AL=new Map,this._$Eg(),this.requestUpdate(),null===(t=this.constructor.h)||void 0===t||t.forEach((function(t){return t(_this21)}))}},{key:"addController",value:function addController(t){var i,s;(null!==(i=this._$ES)&&void 0!==i?i:this._$ES=[]).push(t),void 0!==this.renderRoot&&this.isConnected&&(null===(s=t.hostConnected)||void 0===s||s.call(t))}},{key:"removeController",value:function removeController(t){var i;null===(i=this._$ES)||void 0===i||i.splice(this._$ES.indexOf(t)>>>0,1)}},{key:"_$Eg",value:function _$Eg(){var _this22=this;this.constructor.elementProperties.forEach((function(t,i){_this22.hasOwnProperty(i)&&(_this22._$Ei.set(i,_this22[i]),delete _this22[i])}))}},{key:"createRenderRoot",value:function createRenderRoot(){var t,s=null!==(t=this.shadowRoot)&&void 0!==t?t:this.attachShadow(this.constructor.shadowRootOptions);return function i$2(e,n){t$1?e.adoptedStyleSheets=n.map((function(t){return t instanceof CSSStyleSheet?t:t.styleSheet})):n.forEach((function(t){var n=document.createElement("style"),s=window.litNonce;void 0!==s&&n.setAttribute("nonce",s),n.textContent=t.cssText,e.appendChild(n)}))}(s,this.constructor.elementStyles),s}},{key:"connectedCallback",value:function connectedCallback(){var t;void 0===this.renderRoot&&(this.renderRoot=this.createRenderRoot()),this.enableUpdating(!0),null===(t=this._$ES)||void 0===t||t.forEach((function(t){var i;return null===(i=t.hostConnected)||void 0===i?void 0:i.call(t)}))}},{key:"enableUpdating",value:function enableUpdating(t){}},{key:"disconnectedCallback",value:function disconnectedCallback(){var t;null===(t=this._$ES)||void 0===t||t.forEach((function(t){var i;return null===(i=t.hostDisconnected)||void 0===i?void 0:i.call(t)}))}},{key:"attributeChangedCallback",value:function attributeChangedCallback(t,i,s){this._$AK(t,s)}},{key:"_$EO",value:function _$EO(t,i){var e,r,s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:l$2,h=this.constructor._$Ep(t,s);if(void 0!==h&&!0===s.reflect){var _n6=(null!==(r=null===(e=s.converter)||void 0===e?void 0:e.toAttribute)&&void 0!==r?r:o$2.toAttribute)(i,s.type);this._$El=t,null==_n6?this.removeAttribute(h):this.setAttribute(h,_n6),this._$El=null}}},{key:"_$AK",value:function _$AK(t,i){var s,e,r=this.constructor,h=r._$Ev.get(t);if(void 0!==h&&this._$El!==h){var _t13=r.getPropertyOptions(h),_n7=_t13.converter,_l3=null!==(e=null!==(s=null==_n7?void 0:_n7.fromAttribute)&&void 0!==s?s:"function"==typeof _n7?_n7:null)&&void 0!==e?e:o$2.fromAttribute;this._$El=h,this[h]=_l3(i,_t13.type),this._$El=null}}},{key:"requestUpdate",value:function requestUpdate(t,i,s){var e=!0;void 0!==t&&(((s=s||this.constructor.getPropertyOptions(t)).hasChanged||n$3)(this[t],i)?(this._$AL.has(t)||this._$AL.set(t,i),!0===s.reflect&&this._$El!==t&&(void 0===this._$EC&&(this._$EC=new Map),this._$EC.set(t,s))):e=!1),!this.isUpdatePending&&e&&(this._$E_=this._$Ej())}},{key:"_$Ej",value:(_$Ej3=_asyncToGenerator(_regeneratorRuntime().mark((function _callee2(){var t;return _regeneratorRuntime().wrap((function _callee2$(_context4){for(;;)switch(_context4.prev=_context4.next){case 0:return this.isUpdatePending=!0,_context4.prev=1,_context4.next=4,this._$E_;case 4:_context4.next=9;break;case 6:_context4.prev=6,_context4.t0=_context4.catch(1),Promise.reject(_context4.t0);case 9:if(t=this.scheduleUpdate(),_context4.t1=null!=t,!_context4.t1){_context4.next=14;break}return _context4.next=14,t;case 14:return _context4.abrupt("return",!this.isUpdatePending);case 15:case"end":return _context4.stop()}}),_callee2,this,[[1,6]])}))),function _$Ej(){return _$Ej3.apply(this,arguments)})},{key:"scheduleUpdate",value:function scheduleUpdate(){return this.performUpdate()}},{key:"performUpdate",value:function performUpdate(){var t,_this23=this;if(this.isUpdatePending){this.hasUpdated,this._$Ei&&(this._$Ei.forEach((function(t,i){return _this23[i]=t})),this._$Ei=void 0);var i=!1,s=this._$AL;try{(i=this.shouldUpdate(s))?(this.willUpdate(s),null===(t=this._$ES)||void 0===t||t.forEach((function(t){var i;return null===(i=t.hostUpdate)||void 0===i?void 0:i.call(t)})),this.update(s)):this._$Ek()}catch(t){throw i=!1,this._$Ek(),t}i&&this._$AE(s)}}},{key:"willUpdate",value:function willUpdate(t){}},{key:"_$AE",value:function _$AE(t){var i;null===(i=this._$ES)||void 0===i||i.forEach((function(t){var i;return null===(i=t.hostUpdated)||void 0===i?void 0:i.call(t)})),this.hasUpdated||(this.hasUpdated=!0,this.firstUpdated(t)),this.updated(t)}},{key:"_$Ek",value:function _$Ek(){this._$AL=new Map,this.isUpdatePending=!1}},{key:"updateComplete",get:function get(){return this.getUpdateComplete()}},{key:"getUpdateComplete",value:function getUpdateComplete(){return this._$E_}},{key:"shouldUpdate",value:function shouldUpdate(t){return!0}},{key:"update",value:function update(t){var _this24=this;void 0!==this._$EC&&(this._$EC.forEach((function(t,i){return _this24._$EO(i,_this24[i],t)})),this._$EC=void 0),this._$Ek()}},{key:"updated",value:function updated(t){}},{key:"firstUpdated",value:function firstUpdated(t){}}],[{key:"addInitializer",value:function addInitializer(t){var i;null!==(i=this.h)&&void 0!==i||(this.h=[]),this.h.push(t)}},{key:"observedAttributes",get:function get(){var _this25=this;this.finalize();var t=[];return this.elementProperties.forEach((function(i,s){var e=_this25._$Ep(s,i);void 0!==e&&(_this25._$Ev.set(e,s),t.push(e))})),t}},{key:"createProperty",value:function createProperty(t){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:l$2;if(i.state&&(i.attribute=!1),this.finalize(),this.elementProperties.set(t,i),!i.noAccessor&&!this.prototype.hasOwnProperty(t)){var _s8="symbol"==typeof t?Symbol():"__"+t,_e5=this.getPropertyDescriptor(t,_s8,i);void 0!==_e5&&Object.defineProperty(this.prototype,t,_e5)}}},{key:"getPropertyDescriptor",value:function getPropertyDescriptor(t,i,s){return{get:function get(){return this[i]},set:function set(e){var r=this[t];this[i]=e,this.requestUpdate(t,r,s)},configurable:!0,enumerable:!0}}},{key:"getPropertyOptions",value:function getPropertyOptions(t){return this.elementProperties.get(t)||l$2}},{key:"finalize",value:function finalize(){if(this.hasOwnProperty("finalized"))return!1;this.finalized=!0;var t=Object.getPrototypeOf(this);if(t.finalize(),this.elementProperties=new Map(t.elementProperties),this._$Ev=new Map,this.hasOwnProperty("properties")){var _step10,_t14=this.properties,_iterator10=_createForOfIteratorHelper([].concat(_toConsumableArray(Object.getOwnPropertyNames(_t14)),_toConsumableArray(Object.getOwnPropertySymbols(_t14))));try{for(_iterator10.s();!(_step10=_iterator10.n()).done;){var _s9=_step10.value;this.createProperty(_s9,_t14[_s9])}}catch(err){_iterator10.e(err)}finally{_iterator10.f()}}return this.elementStyles=this.finalizeStyles(this.styles),!0}},{key:"finalizeStyles",value:function finalizeStyles(i){var s=[];if(Array.isArray(i)){var _step11,_iterator11=_createForOfIteratorHelper(new Set(i.flat(1/0).reverse()));try{for(_iterator11.s();!(_step11=_iterator11.n()).done;){var _i15=_step11.value;s.unshift(S$1(_i15))}}catch(err){_iterator11.e(err)}finally{_iterator11.f()}}else void 0!==i&&s.push(S$1(i));return s}},{key:"_$Ep",value:function _$Ep(t,i){var s=i.attribute;return!1===s?void 0:"string"==typeof s?s:"string"==typeof t?t.toLowerCase():void 0}}]),a$1}(_wrapNativeSuper(HTMLElement));a$1.finalized=!0,a$1.elementProperties=new Map,a$1.elementStyles=[],a$1.shadowRootOptions={mode:"open"},null==h$1||h$1({ReactiveElement:a$1}),(null!==(s$2=globalThis.reactiveElementVersions)&&void 0!==s$2?s$2:globalThis.reactiveElementVersions=[]).push("1.3.4");var i$1=globalThis.trustedTypes,s$1=i$1?i$1.createPolicy("lit-html",{createHTML:function createHTML(t){return t}}):void 0,e$1="lit$"+(Math.random()+"").slice(9)+"$",o$1="?"+e$1,n$2="<"+o$1+">",l$1=document,h=function h(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return l$1.createComment(t)},r=function r(t){return null===t||"object"!=typeof t&&"function"!=typeof t},d=Array.isArray,u=function u(t){return d(t)||"function"==typeof(null==t?void 0:t[Symbol.iterator])},c=/<(?:(!--|\/[^a-zA-Z])|(\/?[a-zA-Z][^>\s]*)|(\/?$))/g,v=/-->/g,a=/>/g,f=RegExp(">|[ \t\n\f\r](?:([^\\s\"'>=/]+)([ \t\n\f\r]*=[ \t\n\f\r]*(?:[^ \t\n\f\r\"'`<>=]|(\"|')|))|$)","g"),_=/'/g,g=/"/g,m=/^(?:script|style|textarea|title)$/i,$=function p(t){return function(i){for(var _len10=arguments.length,s=new Array(_len10>1?_len10-1:0),_key10=1;_key10<_len10;_key10++)s[_key10-1]=arguments[_key10];return{_$litType$:t,strings:i,values:s}}}(1),b=Symbol.for("lit-noChange"),w=Symbol.for("lit-nothing"),x=new WeakMap,A=l$1.createTreeWalker(l$1,129,null,!1),E=function E(t,i){for(var h,o=t.length-1,l=[],r=2===i?"<svg>":"",d=c,_i16=0;_i16<o;_i16++){for(var _s10=t[_i16],_o3=void 0,_u2=void 0,_p3=-1,_$2=0;_$2<_s10.length&&(d.lastIndex=_$2,null!==(_u2=d.exec(_s10)));)_$2=d.lastIndex,d===c?"!--"===_u2[1]?d=v:void 0!==_u2[1]?d=a:void 0!==_u2[2]?(m.test(_u2[2])&&(h=RegExp("</"+_u2[2],"g")),d=f):void 0!==_u2[3]&&(d=f):d===f?">"===_u2[0]?(d=null!=h?h:c,_p3=-1):void 0===_u2[1]?_p3=-2:(_p3=d.lastIndex-_u2[2].length,_o3=_u2[1],d=void 0===_u2[3]?f:'"'===_u2[3]?g:_):d===g||d===_?d=f:d===v||d===a?d=c:(d=f,h=void 0);var y=d===f&&t[_i16+1].startsWith("/>")?" ":"";r+=d===c?_s10+n$2:_p3>=0?(l.push(_o3),_s10.slice(0,_p3)+"$lit$"+_s10.slice(_p3)+e$1+y):_s10+e$1+(-2===_p3?(l.push(void 0),_i16):y)}var u=r+(t[o]||"<?>")+(2===i?"</svg>":"");if(!Array.isArray(t)||!t.hasOwnProperty("raw"))throw Error("invalid template strings array");return[void 0!==s$1?s$1.createHTML(u):u,l]},C=function(){function C(_ref8,n){var l,t=_ref8.strings,s=_ref8._$litType$;_classCallCheck(this,C),this.parts=[];var r=0,d=0,u=t.length-1,c=this.parts,_E2=_slicedToArray(E(t,s),2),v=_E2[0],a=_E2[1];if(this.el=C.createElement(v,n),A.currentNode=this.el.content,2===s){var _t16=this.el.content,_i17=_t16.firstChild;_i17.remove(),_t16.append.apply(_t16,_toConsumableArray(_i17.childNodes))}for(;null!==(l=A.nextNode())&&c.length<u;){if(1===l.nodeType){if(l.hasAttributes()){var _step12,_t17=[],_iterator12=_createForOfIteratorHelper(l.getAttributeNames());try{for(_iterator12.s();!(_step12=_iterator12.n()).done;){var _i18=_step12.value;if(_i18.endsWith("$lit$")||_i18.startsWith(e$1)){var _s11=a[d++];if(_t17.push(_i18),void 0!==_s11){var _t19=l.getAttribute(_s11.toLowerCase()+"$lit$").split(e$1),_i21=/([.?@])?(.*)/.exec(_s11);c.push({type:1,index:r,name:_i21[2],strings:_t19,ctor:"."===_i21[1]?M:"?"===_i21[1]?k:"@"===_i21[1]?H:S})}else c.push({type:6,index:r})}}}catch(err){_iterator12.e(err)}finally{_iterator12.f()}for(var _i20=0,_t18=_t17;_i20<_t18.length;_i20++){var _i19=_t18[_i20];l.removeAttribute(_i19)}}if(m.test(l.tagName)){var _t20=l.textContent.split(e$1),_s12=_t20.length-1;if(_s12>0){l.textContent=i$1?i$1.emptyScript:"";for(var _i22=0;_i22<_s12;_i22++)l.append(_t20[_i22],h()),A.nextNode(),c.push({type:2,index:++r});l.append(_t20[_s12],h())}}}else if(8===l.nodeType)if(l.data===o$1)c.push({type:2,index:r});else for(var _t21=-1;-1!==(_t21=l.data.indexOf(e$1,_t21+1));)c.push({type:7,index:r}),_t21+=e$1.length-1;r++}}return _createClass(C,null,[{key:"createElement",value:function createElement(t,i){var s=l$1.createElement("template");return s.innerHTML=t,s}}]),C}();function P(t,i){var o,n,l,h,s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:t,e=arguments.length>3?arguments[3]:void 0;if(i===b)return i;var d=void 0!==e?null===(o=s._$Cl)||void 0===o?void 0:o[e]:s._$Cu,u=r(i)?void 0:i._$litDirective$;return(null==d?void 0:d.constructor)!==u&&(null===(n=null==d?void 0:d._$AO)||void 0===n||n.call(d,!1),void 0===u?d=void 0:(d=new u(t))._$AT(t,s,e),void 0!==e?(null!==(l=(h=s)._$Cl)&&void 0!==l?l:h._$Cl=[])[e]=d:s._$Cu=d),void 0!==d&&(i=P(t,d._$AS(t,i.values),d,e)),i}var l,o,V=function(){function V(t,i){_classCallCheck(this,V),this.v=[],this._$AN=void 0,this._$AD=t,this._$AM=i}return _createClass(V,[{key:"parentNode",get:function get(){return this._$AM.parentNode}},{key:"_$AU",get:function get(){return this._$AM._$AU}},{key:"p",value:function p(t){var i,_this$_$AD2=this._$AD,s=_this$_$AD2.el.content,e=_this$_$AD2.parts,o=(null!==(i=null==t?void 0:t.creationScope)&&void 0!==i?i:l$1).importNode(s,!0);A.currentNode=o;for(var n=A.nextNode(),h=0,r=0,d=e[0];void 0!==d;){if(h===d.index){var _i23=void 0;2===d.type?_i23=new N(n,n.nextSibling,this,t):1===d.type?_i23=new d.ctor(n,d.name,d.strings,this,t):6===d.type&&(_i23=new I(n,this,t)),this.v.push(_i23),d=e[++r]}h!==(null==d?void 0:d.index)&&(n=A.nextNode(),h++)}return o}},{key:"m",value:function m(t){var _step13,i=0,_iterator13=_createForOfIteratorHelper(this.v);try{for(_iterator13.s();!(_step13=_iterator13.n()).done;){var _s13=_step13.value;void 0!==_s13&&(void 0!==_s13.strings?(_s13._$AI(t,_s13,i),i+=_s13.strings.length-2):_s13._$AI(t[i])),i++}}catch(err){_iterator13.e(err)}finally{_iterator13.f()}}}]),V}(),N=function(){function N(t,i,s,e){var o;_classCallCheck(this,N),this.type=2,this._$AH=w,this._$AN=void 0,this._$AA=t,this._$AB=i,this._$AM=s,this.options=e,this._$C_=null===(o=null==e?void 0:e.isConnected)||void 0===o||o}return _createClass(N,[{key:"_$AU",get:function get(){var t,i;return null!==(i=null===(t=this._$AM)||void 0===t?void 0:t._$AU)&&void 0!==i?i:this._$C_}},{key:"parentNode",get:function get(){var t=this._$AA.parentNode,i=this._$AM;return void 0!==i&&11===t.nodeType&&(t=i.parentNode),t}},{key:"startNode",get:function get(){return this._$AA}},{key:"endNode",get:function get(){return this._$AB}},{key:"_$AI",value:function _$AI(t){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this;t=P(this,t,i),r(t)?t===w||null==t||""===t?(this._$AH!==w&&this._$AR(),this._$AH=w):t!==this._$AH&&t!==b&&this.T(t):void 0!==t._$litType$?this.$(t):void 0!==t.nodeType?this.k(t):u(t)?this.S(t):this.T(t)}},{key:"j",value:function j(t){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this._$AB;return this._$AA.parentNode.insertBefore(t,i)}},{key:"k",value:function k(t){this._$AH!==t&&(this._$AR(),this._$AH=this.j(t))}},{key:"T",value:function T(t){this._$AH!==w&&r(this._$AH)?this._$AA.nextSibling.data=t:this.k(l$1.createTextNode(t)),this._$AH=t}},{key:"$",value:function $(t){var i,s=t.values,e=t._$litType$,o="number"==typeof e?this._$AC(t):(void 0===e.el&&(e.el=C.createElement(e.h,this.options)),e);if((null===(i=this._$AH)||void 0===i?void 0:i._$AD)===o)this._$AH.m(s);else{var _t22=new V(o,this),_i24=_t22.p(this.options);_t22.m(s),this.k(_i24),this._$AH=_t22}}},{key:"_$AC",value:function _$AC(t){var i=x.get(t.strings);return void 0===i&&x.set(t.strings,i=new C(t)),i}},{key:"S",value:function S(t){d(this._$AH)||(this._$AH=[],this._$AR());var s,_step14,i=this._$AH,e=0,_iterator14=_createForOfIteratorHelper(t);try{for(_iterator14.s();!(_step14=_iterator14.n()).done;){var _o4=_step14.value;e===i.length?i.push(s=new N(this.j(h()),this.j(h()),this,this.options)):s=i[e],s._$AI(_o4),e++}}catch(err){_iterator14.e(err)}finally{_iterator14.f()}e<i.length&&(this._$AR(s&&s._$AB.nextSibling,e),i.length=e)}},{key:"_$AR",value:function _$AR(){var s,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this._$AA.nextSibling,i=arguments.length>1?arguments[1]:void 0;for(null===(s=this._$AP)||void 0===s||s.call(this,!1,!0,i);t&&t!==this._$AB;){var _i25=t.nextSibling;t.remove(),t=_i25}}},{key:"setConnected",value:function setConnected(t){var i;void 0===this._$AM&&(this._$C_=t,null===(i=this._$AP)||void 0===i||i.call(this,t))}}]),N}(),S=function(){function S(t,i,s,e,o){_classCallCheck(this,S),this.type=1,this._$AH=w,this._$AN=void 0,this.element=t,this.name=i,this._$AM=e,this.options=o,s.length>2||""!==s[0]||""!==s[1]?(this._$AH=Array(s.length-1).fill(new String),this.strings=s):this._$AH=w}return _createClass(S,[{key:"tagName",get:function get(){return this.element.tagName}},{key:"_$AU",get:function get(){return this._$AM._$AU}},{key:"_$AI",value:function _$AI(t){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this,s=arguments.length>2?arguments[2]:void 0,e=arguments.length>3?arguments[3]:void 0,o=this.strings,n=!1;if(void 0===o)t=P(this,t,i,0),(n=!r(t)||t!==this._$AH&&t!==b)&&(this._$AH=t);else{var _l4,_h2,_e7=t;for(t=o[0],_l4=0;_l4<o.length-1;_l4++)(_h2=P(this,_e7[s+_l4],i,_l4))===b&&(_h2=this._$AH[_l4]),n||(n=!r(_h2)||_h2!==this._$AH[_l4]),_h2===w?t=w:t!==w&&(t+=(null!=_h2?_h2:"")+o[_l4+1]),this._$AH[_l4]=_h2}n&&!e&&this.P(t)}},{key:"P",value:function P(t){t===w?this.element.removeAttribute(this.name):this.element.setAttribute(this.name,null!=t?t:"")}}]),S}(),M=function(_S){_inherits(M,_S);var _super15=_createSuper(M);function M(){var _this26;return _classCallCheck(this,M),(_this26=_super15.apply(this,arguments)).type=3,_this26}return _createClass(M,[{key:"P",value:function P(t){this.element[this.name]=t===w?void 0:t}}]),M}(S),R=i$1?i$1.emptyScript:"",k=function(_S2){_inherits(k,_S2);var _super16=_createSuper(k);function k(){var _this27;return _classCallCheck(this,k),(_this27=_super16.apply(this,arguments)).type=4,_this27}return _createClass(k,[{key:"P",value:function P(t){t&&t!==w?this.element.setAttribute(this.name,R):this.element.removeAttribute(this.name)}}]),k}(S),H=function(_S3){_inherits(H,_S3);var _super17=_createSuper(H);function H(t,i,s,e,o){var _this28;return _classCallCheck(this,H),(_this28=_super17.call(this,t,i,s,e,o)).type=5,_this28}return _createClass(H,[{key:"_$AI",value:function _$AI(t){var s,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this;if((t=null!==(s=P(this,t,i,0))&&void 0!==s?s:w)!==b){var e=this._$AH,o=t===w&&e!==w||t.capture!==e.capture||t.once!==e.once||t.passive!==e.passive,n=t!==w&&(e===w||o);o&&this.element.removeEventListener(this.name,this,e),n&&this.element.addEventListener(this.name,this,t),this._$AH=t}}},{key:"handleEvent",value:function handleEvent(t){var i,s;"function"==typeof this._$AH?this._$AH.call(null!==(s=null===(i=this.options)||void 0===i?void 0:i.host)&&void 0!==s?s:this.element,t):this._$AH.handleEvent(t)}}]),H}(S),I=function(){function I(t,i,s){_classCallCheck(this,I),this.element=t,this.type=6,this._$AN=void 0,this._$AM=i,this.options=s}return _createClass(I,[{key:"_$AU",get:function get(){return this._$AM._$AU}},{key:"_$AI",value:function _$AI(t){P(this,t)}}]),I}(),z=window.litHtmlPolyfillSupport;null==z||z(C,N),(null!==(t=globalThis.litHtmlVersions)&&void 0!==t?t:globalThis.litHtmlVersions=[]).push("2.2.7");var s=function(_a$){_inherits(s,_a$);var _super18=_createSuper(s);function s(){var _this29;return _classCallCheck(this,s),(_this29=_super18.apply(this,arguments)).renderOptions={host:_assertThisInitialized(_this29)},_this29._$Do=void 0,_this29}return _createClass(s,[{key:"createRenderRoot",value:function createRenderRoot(){var t,e,i=_get(_getPrototypeOf(s.prototype),"createRenderRoot",this).call(this);return null!==(t=(e=this.renderOptions).renderBefore)&&void 0!==t||(e.renderBefore=i.firstChild),i}},{key:"update",value:function update(t){var i=this.render();this.hasUpdated||(this.renderOptions.isConnected=this.isConnected),_get(_getPrototypeOf(s.prototype),"update",this).call(this,t),this._$Do=function T(t,i,s){var e,o,n=null!==(e=null==s?void 0:s.renderBefore)&&void 0!==e?e:i,l=n._$litPart$;if(void 0===l){var _t15=null!==(o=null==s?void 0:s.renderBefore)&&void 0!==o?o:null;n._$litPart$=l=new N(i.insertBefore(h(),_t15),_t15,void 0,null!=s?s:{})}return l._$AI(t),l}(i,this.renderRoot,this.renderOptions)}},{key:"connectedCallback",value:function connectedCallback(){var t;_get(_getPrototypeOf(s.prototype),"connectedCallback",this).call(this),null===(t=this._$Do)||void 0===t||t.setConnected(!0)}},{key:"disconnectedCallback",value:function disconnectedCallback(){var t;_get(_getPrototypeOf(s.prototype),"disconnectedCallback",this).call(this),null===(t=this._$Do)||void 0===t||t.setConnected(!1)}},{key:"render",value:function render(){return b}}]),s}(a$1);s.finalized=!0,s._$litElement$=!0,null===(l=globalThis.litElementHydrateSupport)||void 0===l||l.call(globalThis,{LitElement:s});var n$1=globalThis.litElementPolyfillSupport;null==n$1||n$1({LitElement:s}),(null!==(o=globalThis.litElementVersions)&&void 0!==o?o:globalThis.litElementVersions=[]).push("3.2.2");var n,_FeatureShape_instances,_FeatureShape_ftLength,_FeatureShape_ftHeight,_FeatureShape_ftWidth,_FeatureShape_getMiddleLine,_FeatureShape_getBrokenEnd,_FeatureShape_getBrokenStart;function e(e){return function(n,t){return void 0!==t?function(i,e,n){e.constructor.createProperty(n,i)}(e,n,t):function i(_i26,e){return"method"===e.kind&&e.descriptor&&!("value"in e.descriptor)?Object.assign({},e,{finisher:function finisher(n){n.createProperty(e.key,_i26)}}):{kind:"field",key:Symbol(),placement:"own",descriptor:{},originalKey:e.key,initializer:function initializer(){"function"==typeof e.initializer&&(this[e.key]=e.initializer.call(this))},finisher:function finisher(n){n.createProperty(e.key,_i26)}}}(e,n)}}null===(n=window.HTMLSlotElement)||void 0===n||n.prototype.assignedElements;var FeatureShape=function(){function FeatureShape(){_classCallCheck(this,FeatureShape),_FeatureShape_instances.add(this),_FeatureShape_ftLength.set(this,1),_FeatureShape_ftHeight.set(this,1),_FeatureShape_ftWidth.set(this,1)}return _createClass(FeatureShape,[{key:"shape2function",value:function shape2function(shape){var _this30=this;switch(shape){case"rectangle":default:return function(){return _this30.rectangle()};case"roundRectangle":return function(){return _this30.roundRectangle()};case"line":return function(){return _this30.line()};case"bridge":return function(){return _this30.bridge()};case"diamond":return function(){return _this30.diamond()};case"chevron":return function(){return _this30.chevron()};case"catFace":return function(){return _this30.catFace()};case"triangle":return function(){return _this30.triangle()};case"wave":return function(){return _this30.wave()};case"hexagon":return function(){return _this30.hexagon()};case"pentagon":return function(){return _this30.pentagon()};case"circle":return function(){return _this30.circle()};case"arrow":return function(){return _this30.arrow()};case"doubleBar":return function(){return _this30.doubleBar()};case"discontinuosStart":return function(){return _this30.discontinuosStart()};case"discontinuos":return function(){return _this30.discontinuos()};case"discontinuosEnd":return function(){return _this30.discontinuosEnd()};case"helix":return function(){return _this30.helix()};case"strand":return function(){return _this30.strand()}}}},{key:"getFeatureShape",value:function getFeatureShape(aaWidth,ftHeight,ftLength,shape){return shape=shape||"rectangle",__classPrivateFieldSet$1(this,_FeatureShape_ftLength,ftLength,"f"),__classPrivateFieldSet$1(this,_FeatureShape_ftHeight,ftHeight,"f"),__classPrivateFieldSet$1(this,_FeatureShape_ftWidth,aaWidth*ftLength,"f"),this.shape2function(shape)()}},{key:"rectangle",value:function rectangle(){return"M0,0L"+__classPrivateFieldGet$1(this,_FeatureShape_ftWidth,"f")+",0L"+__classPrivateFieldGet$1(this,_FeatureShape_ftWidth,"f")+","+__classPrivateFieldGet$1(this,_FeatureShape_ftHeight,"f")+"L0,"+__classPrivateFieldGet$1(this,_FeatureShape_ftHeight,"f")+"Z"}},{key:"roundRectangle",value:function roundRectangle(){return"M6,0h"+(__classPrivateFieldGet$1(this,_FeatureShape_ftWidth,"f")-12)+",0a6,6 0 0 1 6,6v"+(__classPrivateFieldGet$1(this,_FeatureShape_ftHeight,"f")-12)+"a6,6 0 0 1 "+"-6,6h"+(12-__classPrivateFieldGet$1(this,_FeatureShape_ftWidth,"f"))+"a6,6 0 0 1 "+"-6,"+"-6v"+(12-__classPrivateFieldGet$1(this,_FeatureShape_ftHeight,"f"))+"a6,6 0 0 1 6,"+"-6Z"}},{key:"line",value:function line(){return"M0,"+__classPrivateFieldGet$1(this,_FeatureShape_ftHeight,"f")/2+" L"+__classPrivateFieldGet$1(this,_FeatureShape_ftWidth,"f")+","+__classPrivateFieldGet$1(this,_FeatureShape_ftHeight,"f")/2}},{key:"bridge",value:function bridge(){return 1!==__classPrivateFieldGet$1(this,_FeatureShape_ftLength,"f")?"M0,"+__classPrivateFieldGet$1(this,_FeatureShape_ftHeight,"f")+"L0,0L"+__classPrivateFieldGet$1(this,_FeatureShape_ftWidth,"f")+",0L"+__classPrivateFieldGet$1(this,_FeatureShape_ftWidth,"f")+","+__classPrivateFieldGet$1(this,_FeatureShape_ftHeight,"f")+"L"+__classPrivateFieldGet$1(this,_FeatureShape_ftWidth,"f")+",2L0,2Z":"M0,"+__classPrivateFieldGet$1(this,_FeatureShape_ftHeight,"f")+"L0,"+__classPrivateFieldGet$1(this,_FeatureShape_ftHeight,"f")/2+"L"+__classPrivateFieldGet$1(this,_FeatureShape_ftWidth,"f")/2+","+__classPrivateFieldGet$1(this,_FeatureShape_ftHeight,"f")/2+"L"+__classPrivateFieldGet$1(this,_FeatureShape_ftWidth,"f")/2+",0L"+__classPrivateFieldGet$1(this,_FeatureShape_ftWidth,"f")/2+","+__classPrivateFieldGet$1(this,_FeatureShape_ftHeight,"f")/2+"L"+__classPrivateFieldGet$1(this,_FeatureShape_ftWidth,"f")+","+__classPrivateFieldGet$1(this,_FeatureShape_ftHeight,"f")/2+"L"+__classPrivateFieldGet$1(this,_FeatureShape_ftWidth,"f")+","+__classPrivateFieldGet$1(this,_FeatureShape_ftHeight,"f")+"Z"}},{key:"diamond",value:function diamond(){var m=__classPrivateFieldGet$1(this,_FeatureShape_ftWidth,"f")/2,shape="M"+m+",0L"+(m+5)+",5L"+m+",10L"+(m-5)+",5";return 1!==__classPrivateFieldGet$1(this,_FeatureShape_ftLength,"f")?shape+__classPrivateFieldGet$1(this,_FeatureShape_instances,"m",_FeatureShape_getMiddleLine).call(this,5):shape+"Z"}},{key:"chevron",value:function chevron(){var m=__classPrivateFieldGet$1(this,_FeatureShape_ftWidth,"f")/2,shape="M"+m+",5L"+(5+m)+",0L"+(5+m)+",5L"+m+",10L"+(-5+m)+",5L"+(-5+m)+",0";return 1!==__classPrivateFieldGet$1(this,_FeatureShape_ftLength,"f")?shape+"L"+m+",5"+__classPrivateFieldGet$1(this,_FeatureShape_instances,"m",_FeatureShape_getMiddleLine).call(this,5)+"Z":shape+"Z"}},{key:"catFace",value:function catFace(){var m=__classPrivateFieldGet$1(this,_FeatureShape_ftWidth,"f")/2,shape="M"+(-5+m)+",0L"+(-5+m)+",6L"+(-2+m)+",10L"+(2+m)+",10L"+(5+m)+",6L"+(5+m)+",0L"+(2+m)+",4L"+(-2+m)+",4";return 1!==__classPrivateFieldGet$1(this,_FeatureShape_ftLength,"f")?shape+"M"+m+",0"+__classPrivateFieldGet$1(this,_FeatureShape_instances,"m",_FeatureShape_getMiddleLine).call(this,5)+"Z":shape+"Z"}},{key:"triangle",value:function triangle(){var m=__classPrivateFieldGet$1(this,_FeatureShape_ftWidth,"f")/2,shape="M"+m+",0L"+(5+m)+",10L"+(-5+m)+",10";return 1!==__classPrivateFieldGet$1(this,_FeatureShape_ftLength,"f")?shape+"L"+m+",0"+__classPrivateFieldGet$1(this,_FeatureShape_instances,"m",_FeatureShape_getMiddleLine).call(this,5)+"Z":shape+"Z"}},{key:"wave",value:function wave(){var m=__classPrivateFieldGet$1(this,_FeatureShape_ftWidth,"f")/2,shape="M"+(-5+m)+",5A2.5,5 0 1,1 "+m+",5A2.5,5 0 1,0 "+(5+m)+",5";return 1!==__classPrivateFieldGet$1(this,_FeatureShape_ftLength,"f")?shape+__classPrivateFieldGet$1(this,_FeatureShape_instances,"m",_FeatureShape_getMiddleLine).call(this,5)+"Z":shape+"Z"}},{key:"getPolygon",value:function getPolygon(sidesNumber){for(var polygon="M ",m=__classPrivateFieldGet$1(this,_FeatureShape_ftWidth,"f")/2,_i27=0;_i27<sidesNumber;_i27++)polygon+=5*Math.cos(2*Math.PI*_i27/sidesNumber)+m+","+(5*Math.sin(2*Math.PI*_i27/sidesNumber)+5)+" ";return 1!==__classPrivateFieldGet$1(this,_FeatureShape_ftLength,"f")?polygon+" "+(5*Math.cos(0)+m)+","+(5*Math.sin(0)+5)+" "+__classPrivateFieldGet$1(this,_FeatureShape_instances,"m",_FeatureShape_getMiddleLine).call(this,5)+"Z":polygon+"Z"}},{key:"hexagon",value:function hexagon(){return this.getPolygon(6)}},{key:"pentagon",value:function pentagon(){return this.getPolygon(5)}},{key:"circle",value:function circle(){var m=__classPrivateFieldGet$1(this,_FeatureShape_ftWidth,"f")/2,r=Math.sqrt(10/Math.PI),shape="M"+m+",0A"+r+","+r+" 0 1,1 "+m+",10A"+r+","+r+" 0 1,1 "+m+",0";return 1!==__classPrivateFieldGet$1(this,_FeatureShape_ftLength,"f")?shape+__classPrivateFieldGet$1(this,_FeatureShape_instances,"m",_FeatureShape_getMiddleLine).call(this,5)+"Z":shape+"Z"}},{key:"arrow",value:function arrow(){var m=__classPrivateFieldGet$1(this,_FeatureShape_ftWidth,"f")/2,shape="M"+m+",0L"+(-1+m)+",0L"+(-5+m)+",4L"+(-1+m)+","+__classPrivateFieldGet$1(this,_FeatureShape_ftHeight,"f")+"L"+m+","+__classPrivateFieldGet$1(this,_FeatureShape_ftHeight,"f")+"L"+(4+m)+",4";return 1!==__classPrivateFieldGet$1(this,_FeatureShape_ftLength,"f")?shape+"L"+m+",0"+__classPrivateFieldGet$1(this,_FeatureShape_instances,"m",_FeatureShape_getMiddleLine).call(this,5)+"Z":shape+"Z"}},{key:"doubleBar",value:function doubleBar(){var m=__classPrivateFieldGet$1(this,_FeatureShape_ftWidth,"f")/2,shape="M"+m+",0L"+(-5+m)+",10L"+m+",10L"+(5+m)+",0";return 1!==__classPrivateFieldGet$1(this,_FeatureShape_ftLength,"f")?shape+"L"+m+",0"+__classPrivateFieldGet$1(this,_FeatureShape_instances,"m",_FeatureShape_getMiddleLine).call(this,5)+"Z":shape+"Z"}},{key:"discontinuosStart",value:function discontinuosStart(){return"M0,0L"+__classPrivateFieldGet$1(this,_FeatureShape_ftWidth,"f")+",0L"+__classPrivateFieldGet$1(this,_FeatureShape_ftWidth,"f")+","+__classPrivateFieldGet$1(this,_FeatureShape_ftHeight,"f")+"L0,"+__classPrivateFieldGet$1(this,_FeatureShape_ftHeight,"f")+__classPrivateFieldGet$1(this,_FeatureShape_instances,"m",_FeatureShape_getBrokenStart).call(this)+"Z"}},{key:"discontinuos",value:function discontinuos(){return"M0,0L"+__classPrivateFieldGet$1(this,_FeatureShape_ftWidth,"f")+",0"+__classPrivateFieldGet$1(this,_FeatureShape_instances,"m",_FeatureShape_getBrokenEnd).call(this)+"L0,"+__classPrivateFieldGet$1(this,_FeatureShape_ftHeight,"f")+__classPrivateFieldGet$1(this,_FeatureShape_instances,"m",_FeatureShape_getBrokenStart).call(this)+"Z"}},{key:"discontinuosEnd",value:function discontinuosEnd(){return"M0,0L"+__classPrivateFieldGet$1(this,_FeatureShape_ftWidth,"f")+",0"+__classPrivateFieldGet$1(this,_FeatureShape_instances,"m",_FeatureShape_getBrokenEnd).call(this)+"L0,"+__classPrivateFieldGet$1(this,_FeatureShape_ftHeight,"f")+"Z"}},{key:"helix",value:function helix(){for(var y=2.5,center=2.5,nw=Math.round(__classPrivateFieldGet$1(this,_FeatureShape_ftWidth,"f")/5),loop="",_i28=0;_i28<nw;_i28++){loop+="M"+(-2.5+center)+","+__classPrivateFieldGet$1(this,_FeatureShape_ftHeight,"f")+" C"+(center+y)+",7.5 "+(2.5+center)+","+y+" "+center+", 0 C"+(center-y)+","+y+" "+center+",7.5 "+(2.5+center)+","+__classPrivateFieldGet$1(this,_FeatureShape_ftHeight,"f"),center+=5}return loop}},{key:"strand",value:function strand(){var rl=0;__classPrivateFieldGet$1(this,_FeatureShape_ftWidth,"f")>5&&(rl=__classPrivateFieldGet$1(this,_FeatureShape_ftWidth,"f")-5);var qh=__classPrivateFieldGet$1(this,_FeatureShape_ftHeight,"f")/4;return"M0,"+qh+"L"+rl+","+qh+"L"+rl+","+3*qh+"L0,"+3*qh+"L0,"+qh+("M"+rl+",0L"+__classPrivateFieldGet$1(this,_FeatureShape_ftWidth,"f")+","+2*qh+"L"+rl+","+__classPrivateFieldGet$1(this,_FeatureShape_ftHeight,"f")+"Z")}}],[{key:"isContinuous",value:function isContinuous(shape){return"bridge"!==shape.toLowerCase()}}]),FeatureShape}();_FeatureShape_ftLength=new WeakMap,_FeatureShape_ftHeight=new WeakMap,_FeatureShape_ftWidth=new WeakMap,_FeatureShape_instances=new WeakSet,_FeatureShape_getMiddleLine=function _FeatureShape_getMiddleLine(centerx){return"M0,"+centerx+"L"+__classPrivateFieldGet$1(this,_FeatureShape_ftWidth,"f")+","+centerx+"Z"},_FeatureShape_getBrokenEnd=function _FeatureShape_getBrokenEnd(){var qh=__classPrivateFieldGet$1(this,_FeatureShape_ftHeight,"f")/4;return"L"+(__classPrivateFieldGet$1(this,_FeatureShape_ftWidth,"f")-qh)+","+qh+"L"+__classPrivateFieldGet$1(this,_FeatureShape_ftWidth,"f")+","+2*qh+"L"+(__classPrivateFieldGet$1(this,_FeatureShape_ftWidth,"f")-qh)+","+3*qh+"L"+__classPrivateFieldGet$1(this,_FeatureShape_ftWidth,"f")+","+__classPrivateFieldGet$1(this,_FeatureShape_ftHeight,"f")},_FeatureShape_getBrokenStart=function _FeatureShape_getBrokenStart(){var qh=__classPrivateFieldGet$1(this,_FeatureShape_ftHeight,"f")/4;return"L"+qh+","+3*qh+"L0,"+2*qh+"L"+qh+","+qh};var _NonOverlappingLayout_rows,DefaultLayout=function(){function DefaultLayout(_ref9){var layoutHeight=_ref9.layoutHeight,_ref9$margin=_ref9.margin,margin=void 0===_ref9$margin?{top:1,bottom:1,left:0,right:0}:_ref9$margin,_ref9$minHeight=_ref9.minHeight,minHeight=void 0===_ref9$minHeight?17:_ref9$minHeight;_classCallCheck(this,DefaultLayout),this.margin=margin,this.minHeight=minHeight,this.layoutHeight=layoutHeight,this.features=[]}return _createClass(DefaultLayout,[{key:"init",value:function init(features){this.features=features}},{key:"getFeatureYPos",value:function getFeatureYPos(feature){var featureHeight=this.getFeatureHeight();return this.margin.top+(this.layoutHeight-this.margin.top-this.margin.bottom)/2-featureHeight/2}},{key:"getFeatureHeight",value:function getFeatureHeight(){return Math.max(this.minHeight,this.layoutHeight-this.margin.top-this.margin.bottom)}}]),DefaultLayout}(),featureOvelapsInRow=function featureOvelapsInRow(feature,row){return row.some((function(rowFeature){return function featuresOverlap(feature1,feature2){return!(Number(feature2.start)>Number(feature1.end)||Number(feature2.end)<Number(feature1.start))}(feature,rowFeature)}))},NonOverlappingLayout=function(_DefaultLayout){_inherits(NonOverlappingLayout,_DefaultLayout);var _super19=_createSuper(NonOverlappingLayout);function NonOverlappingLayout(options){var _this31;return _classCallCheck(this,NonOverlappingLayout),(_this31=_super19.call(this,options)).featuresMap=new Map,_NonOverlappingLayout_rows.set(_assertThisInitialized(_this31),void 0),_this31.rowHeight=0,_this31.minHeight=15,__classPrivateFieldSet$1(_assertThisInitialized(_this31),_NonOverlappingLayout_rows,[],"f"),_this31}return _createClass(NonOverlappingLayout,[{key:"init",value:function init(features){var _this32=this;features.forEach((function(feature){var rowIndex=__classPrivateFieldGet$1(_this32,_NonOverlappingLayout_rows,"f").findIndex((function(row){return!featureOvelapsInRow(feature,row)}));rowIndex>=0?(__classPrivateFieldGet$1(_this32,_NonOverlappingLayout_rows,"f")[rowIndex].push(feature),_this32.featuresMap.set(feature,rowIndex)):(__classPrivateFieldGet$1(_this32,_NonOverlappingLayout_rows,"f").push([feature]),_this32.featuresMap.set(feature,__classPrivateFieldGet$1(_this32,_NonOverlappingLayout_rows,"f").length-1))})),this.rowHeight=Math.min(this.layoutHeight/__classPrivateFieldGet$1(this,_NonOverlappingLayout_rows,"f").length,this.minHeight)}},{key:"getOffset",value:function getOffset(){return __classPrivateFieldGet$1(this,_NonOverlappingLayout_rows,"f").length*this.rowHeight<this.layoutHeight?this.layoutHeight/2-__classPrivateFieldGet$1(this,_NonOverlappingLayout_rows,"f").length*this.rowHeight/2:0}},{key:"getFeatureYPos",value:function getFeatureYPos(feature){var rowNumber=this.featuresMap.get(feature);return this.getOffset()+this.rowHeight*rowNumber+this.margin.top+this.margin.bottom}},{key:"getFeatureHeight",value:function getFeatureHeight(){return this.rowHeight-this.margin.top-this.margin.bottom}}]),NonOverlappingLayout}(DefaultLayout);_NonOverlappingLayout_rows=new WeakMap;var _NightingaleTrack_originalData,_NightingaleTrack_data,_NightingaleTrack_highlighted,_NightingaleTrack_margins,NightingaleTrack_1,config={CHAIN:{name:"chain",label:"Chain",tooltip:"(aka mature region). This describes the extent of a polypeptide chain in the mature protein following processing",shape:"rectangle",color:"#CC9933"},TRANSIT:{name:"transit peptide",label:"Transit peptide",tooltip:"This describes the extent of a transit peptide",shape:"rectangle",color:"#009966"},INIT_MET:{name:"initiator methionine",label:"Initiator methionine",tooltip:"This indicates that the initiator methionine is cleaved from the mature protein",shape:"arrow",color:"#996633"},PROPEP:{name:"propeptide",label:"Propeptide",tooltip:"Part of a protein that is cleaved during maturation or activation",shape:"rectangle",color:"#99CCCC"},PEPTIDE:{name:"peptide",label:"Peptide",tooltip:"The position and length of an active peptide in the mature protein",shape:"rectangle",color:"#006699"},SIGNAL:{name:"signal peptide",label:"Signal peptide",tooltip:"N-terminal signal peptide",shape:"rectangle",color:"#CC0033"},HELIX:{name:"helix",label:"Helix",tooltip:"The positions of experimentally determined helical regions",shape:"rectangle",color:"#FF0066"},STRAND:{name:"strand",label:"Beta strand",tooltip:"The positions of experimentally determined beta strands",shape:"rectangle",color:"#FFCC00"},TURN:{name:"turn",label:"Turn",tooltip:"The positions of experimentally determined hydrogen-bonded turns",shape:"rectangle",color:"#0571AF"},DISULFID:{name:"disulfide bond",label:"Disulfide bond",tooltip:"The positions of cysteine residues participating in disulphide bonds",shape:"bridge",color:"#23B14D"},CROSSLNK:{name:"cross-link",label:"Cross-link",tooltip:"Covalent linkages of various types formed between two proteins or between two parts of the same protein",shape:"bridge",color:"#FF6600"},REGION:{name:"region of interest",label:"Region of interest",tooltip:"Regions in multifunctional enzymes or fusion proteins, or characteristics of a region, e.g., protein-protein interactions mediation",shape:"rectangle",color:"#B33E00"},COILED:{name:"coiled-coil region",label:"Coiled-coil region",tooltip:"Coiled coils are built by two or more alpha-helices that wind around each other to form a supercoil",shape:"rectangle",color:"#006699"},MOTIF:{name:"short sequence motif",label:"Short sequence motif",tooltip:"Short conserved sequence motif of biological significance",shape:"rectangle",color:"#402060"},REPEAT:{name:"repeat",label:"Repeat",tooltip:"Repeated sequence motifs or repeated domains within the protein",shape:"rectangle",color:"#9900FF"},CA_BIND:{name:"calcium-binding region",label:"Calcium-binding region",tooltip:"Calcium-binding regions, such as the EF-hand motif",shape:"rectangle",color:"#FF3399"},DNA_BIND:{name:"DNA-binding region",label:"DNA binding",tooltip:"DNA-binding domains such as AP2/ERF domain, the ETS domain, the Fork-Head domain, the HMG box and the Myb domain",shape:"rectangle",color:"#009933"},DOMAIN:{name:"other domain of interest",label:"Other domain of interest",tooltip:"Specific combination of secondary structures organized into a characteristic three-dimensional structure or fold",shape:"rectangle",color:"#9999FF"},ZN_FING:{name:"zinc finger region",label:"Zinc finger",tooltip:"Small, functional, independently folded domain that coordinates one or more zinc ions",shape:"rectangle",color:"#990066"},NP_BIND:{name:"nucleotide-binding region",label:"Nucleotide-binding region",tooltip:"(aka flavin-binding). Region in the protein which binds nucleotide phosphates",shape:"rectangle",color:"#FF9900"},METAL:{name:"metal ion-binding site",label:"Metal ion-binding site",tooltip:"Binding site for a metal ion",shape:"diamond",color:"#009900"},SITE:{name:"other site of interest",label:"Other site of interest",tooltip:"Any interesting single amino acid site on the sequence",shape:"chevron",color:"#660033"},BINDING:{name:"other binding site",label:"Other binding site",tooltip:"Binding site for any chemical group (co-enzyme, prosthetic group, etc.)",shape:"rectangle",color:"#catFace"},ACT_SITE:{name:"active site",label:"Active site",tooltip:"Amino acid(s) directly involved in the activity of an enzyme",shape:"circle",color:"#FF6666"},MOD_RES:{name:"Post-translationally modified residue",label:"Modified residue",tooltip:"Modified residues such as phosphorylation, acetylation, acylation, methylation",shape:"triangle",color:"#000066"},LIPID:{name:"lipid moiety-binding region",label:"Lipidation",tooltip:"Covalently attached lipid group(s)",shape:"wave",color:"#99CC33"},CARBOHYD:{name:"glycosylation site",label:"Glycosylation",tooltip:"Covalently attached glycan group(s)",shape:"hexagon",color:"#CC3366"},COMPBIAS:{name:"compositionally biased region",label:"Compositionally biased region",tooltip:"Position of regions of compositional bias within the protein and the particular amino acids that are over-represented within those regions",shape:"rectangle",color:"#FF3366"},CONFLICT:{name:"sequence conflict",label:"Sequence conflict",tooltip:"Sequence discrepancies of unknown origin",shape:"rectangle",color:"#6633CC"},NON_CONS:{name:"non-consecutive residues",label:"Non-adjacent residues",tooltip:"Indicates that two residues in a sequence are not consecutive and that there is an undetermined number of unsequenced residues between them",shape:"doubleBar",color:"#FF0033"},NON_TER:{name:"non-terminal residue",label:"Non-terminal residue",tooltip:"The sequence is incomplete. The residue is not the terminal residue of the complete protein",shape:"doubleBar",color:"#339933"},UNSURE:{name:"unsure residue",label:"Sequence uncertainty",tooltip:"Regions of a sequence for which the authors are unsure about the sequence assignment",shape:"rectangle",color:"#33FF00"},NON_STD:{name:"non-standard amino acid",label:"Non-standard residue",tooltip:"Non-standard amino acids (selenocysteine and pyrrolysine)",shape:"pentagon",color:"#330066"},MUTAGEN:{name:"mutagenesis site",label:"Mutagenesis",tooltip:"Site which has been experimentally altered by mutagenesis",shape:"rectangle",color:"#FF9900"},TOPO_DOM:{name:"topological domain",label:"Topological domain",tooltip:"Location of non-membrane regions of membrane-spanning proteins",shape:"rectangle",color:"#CC0000"},TRANSMEM:{name:"transmembrane region",label:"Transmembrane",tooltip:"Extent of a membrane-spanning region",shape:"rectangle",color:"#CC00CC"},INTRAMEM:{name:"intramembrane region",label:"Intramembrane",tooltip:"Extent of a region located in a membrane without crossing it",shape:"rectangle",color:"#0000CC"},VAR_SEQ:{name:"splice variant",label:"Splice variant",tooltip:"",shape:"rectangle",color:"#CC11CC"},VARIANT:{name:"sequence variant",label:"Natural variant",tooltip:"Natural variant of the protein, including polymorphisms, variations between strains, isolates or cultivars, disease-associated mutations and RNA editing events",shape:"circle",color:"black"},UNIQUE:{name:"unique",label:"Unique peptide",tooltip:"",shape:"rectangle",color:"#fc3133"},NON_UNIQUE:{name:"non-unique",label:"Non-unique peptide",tooltip:"",shape:"rectangle",color:"#8585fc"},ANTIGEN:{name:"antigen",label:"Antibody binding sequences",tooltip:"",shape:"rectangle",color:"#996699"},PDBE_COVER:{name:"pdbe coverage",label:"PDBe 3D structure coverage",tooltip:"",shape:"rectangle",color:"#669966"}},getShapeByType=function getShapeByType(type){if(type.toUpperCase()in config)return config[type.toUpperCase()].shape;var info=Object.values(config).find((function(typeInfo){return typeInfo.name.toUpperCase()===type.toUpperCase()}));return info?info.shape:"rectangle"},getColorByType=function getColorByType(type){if(type.toUpperCase()in config)return config[type.toUpperCase()].color;var info=Object.values(config).find((function(typeInfo){return typeInfo.name.toUpperCase()===type.toUpperCase()}));return info||console.log(type),info?info.color:"black"},ATTRIBUTES_THAT_TRIGGER_REFRESH=["length","width","height"],NightingaleTrack=NightingaleTrack_1=function(_withManager){_inherits(NightingaleTrack,_withManager);var _super20=_createSuper(NightingaleTrack);function NightingaleTrack(){var _this33;return _classCallCheck(this,NightingaleTrack),(_this33=_super20.apply(this,arguments)).featureShape=new FeatureShape,_NightingaleTrack_originalData.set(_assertThisInitialized(_this33),[]),_NightingaleTrack_data.set(_assertThisInitialized(_this33),[]),_this33.filters=null,_NightingaleTrack_highlighted.set(_assertThisInitialized(_this33),void 0),_NightingaleTrack_margins.set(_assertThisInitialized(_this33),void 0),_this33}return _createClass(NightingaleTrack,[{key:"getLayout",value:function getLayout(){return"non-overlapping"===String(this.layout).toLowerCase()?new NonOverlappingLayout({layoutHeight:this.height}):new DefaultLayout({layoutHeight:this.height,margin:{top:this["margin-top"],bottom:this["margin-bottom"],left:this["margin-left"],right:this["margin-right"]}})}},{key:"connectedCallback",value:function connectedCallback(){_get(_getPrototypeOf(NightingaleTrack.prototype),"connectedCallback",this).call(this),this.layoutObj=this.getLayout(),__classPrivateFieldGet$1(this,_NightingaleTrack_data,"f")&&this.createTrack()}},{key:"processData",value:function processData(data){__classPrivateFieldSet$1(this,_NightingaleTrack_originalData,NightingaleTrack_1.normalizeLocations(data),"f")}},{key:"data",get:function get(){return __classPrivateFieldGet$1(this,_NightingaleTrack_data,"f")},set:function set(data){this.processData(data),this.applyFilters(),this.layoutObj=this.getLayout(),this.createTrack()}},{key:"attributeChangedCallback",value:function attributeChangedCallback(name,oldValue,newValue){_get(_getPrototypeOf(NightingaleTrack.prototype),"attributeChangedCallback",this).call(this,name,oldValue,newValue),(ATTRIBUTES_THAT_TRIGGER_REFRESH.includes(name)||name.startsWith("margin-"))&&(this.applyFilters(),this.layoutObj=this.getLayout(),this.createTrack())}},{key:"getFeatureColor",value:function getFeatureColor(f){var _a,_b,_c;return f.color?f.color||"gray":(null===(_a=null==f?void 0:f.feature)||void 0===_a?void 0:_a.color)?(null===(_b=null==f?void 0:f.feature)||void 0===_b?void 0:_b.color)||"gray":this.color?this.color:f.type?getColorByType(f.type):(null===(_c=null==f?void 0:f.feature)||void 0===_c?void 0:_c.type)?getColorByType(f.feature.type):"gray"}},{key:"getFeatureFillColor",value:function getFeatureFillColor(f){var _a;return f.fill?f.fill||"gray":(null===(_a=null==f?void 0:f.feature)||void 0===_a?void 0:_a.fill)?f.feature.fill||"gray":this.getFeatureColor(f)}},{key:"getShape",value:function getShape(f){var _a,_b;return f.shape?f.shape||"rectangle":(null===(_a=null==f?void 0:f.feature)||void 0===_a?void 0:_a.shape)?f.feature.shape||"rectangle":this.shape?this.shape:f.type?getShapeByType(f.type):(null===(_b=f.feature)||void 0===_b?void 0:_b.type)?getShapeByType(f.feature.type):"rectangle"}},{key:"createTrack",value:function createTrack(){var _a,_b;__classPrivateFieldGet$1(this,_NightingaleTrack_data,"f")&&(null===(_a=this.layoutObj)||void 0===_a||_a.init(__classPrivateFieldGet$1(this,_NightingaleTrack_data,"f")),null===(_b=this.svg)||void 0===_b||_b.selectAll("g").remove(),this.svg=function select$1(selector){return"string"==typeof selector?new Selection$3([[document.querySelector(selector)]],[document.documentElement]):new Selection$3([[selector]],root$1)}(this).selectAll("svg").attr("width",this.width).attr("height",this.height),this.svg&&(this.seqG=this.svg.append("g").attr("class","sequence-features"),__classPrivateFieldSet$1(this,_NightingaleTrack_highlighted,this.svg.append("g").attr("class","highlighted"),"f"),__classPrivateFieldSet$1(this,_NightingaleTrack_margins,this.svg.append("g").attr("class","margin"),"f"),this.createFeatures()))}},{key:"createFeatures",value:function createFeatures(){var _a,_this34=this;if(this.seqG){var locationsG=this.seqG.selectAll("g.feature-group").data(__classPrivateFieldGet$1(this,_NightingaleTrack_data,"f")).enter().append("g").attr("class","feature-group").attr("id",(function(d){return"g_"+d.accession})).selectAll("g.location-group").data((function(d){return(d.locations||[]).map((function(loc){return Object.assign({},loc,{feature:d})}))})).enter().append("g").attr("class","location-group"),fragmentGroup=locationsG.selectAll("g.fragment-group").data((function(d){return d.fragments.map((function(loc){return Object.assign({},loc,{feature:d.feature})}))})).enter().append("g").attr("class","fragment-group");fragmentGroup.append("path").attr("class",(function(f){return _this34.getShape(f)+" feature"})).attr("d",(function(f){var _a;return _this34.featureShape.getFeatureShape(_this34.getSingleBaseWidth(),(null===(_a=_this34.layoutObj)||void 0===_a?void 0:_a.getFeatureHeight())||0,f.end?f.end-f.start+1:1,_this34.getShape(f))})).attr("transform",(function(f){var _a;return"translate("+_this34.getXFromSeqPosition(f.start)+","+((null===(_a=_this34.layoutObj)||void 0===_a?void 0:_a.getFeatureYPos(f.feature))||0)+")"})).attr("fill",(function(f){return _this34.getFeatureFillColor(f)})).attr("stroke",(function(f){return _this34.getFeatureColor(f)})).style("fill-opacity",(function(_ref10){var feature=_ref10.feature;return feature.opacity?feature.opacity:.9})).style("stroke-opacity",(function(_ref11){var feature=_ref11.feature;return feature.opacity?feature.opacity:.9})),fragmentGroup.append("rect").attr("class","outer-rectangle feature").attr("width",(function(f){return _this34.getSingleBaseWidth()*(f.end?f.end-f.start+1:1)})).attr("height",(null===(_a=this.layoutObj)||void 0===_a?void 0:_a.getFeatureHeight())||0).attr("transform",(function(f){var _a;return"translate("+_this34.getXFromSeqPosition(f.start)+","+((null===(_a=_this34.layoutObj)||void 0===_a?void 0:_a.getFeatureYPos(f.feature))||0)+")"})).attr("fill","transparent").attr("stroke","transparent").call(bindEvents,this)}}},{key:"applyFilters",value:function applyFilters(){(this.filters||[]).length<=0&&__classPrivateFieldSet$1(this,_NightingaleTrack_data,__classPrivateFieldGet$1(this,_NightingaleTrack_originalData,"f"),"f")}},{key:"refresh",value:function refresh(){var _a,_this35=this;if(this.xScale&&this.seqG){var fragmentG=this.seqG.selectAll("g.fragment-group").data(__classPrivateFieldGet$1(this,_NightingaleTrack_data,"f").reduce((function(acc,f){return acc.concat((f.locations||[]).reduce((function(acc2,e){return acc2.concat(e.fragments.map((function(loc){return Object.assign({},loc,{feature:f})})))}),[]))}),[]));fragmentG.selectAll("path.feature").attr("d",(function(f){var _a;return _this35.featureShape.getFeatureShape(_this35.getSingleBaseWidth(),(null===(_a=_this35.layoutObj)||void 0===_a?void 0:_a.getFeatureHeight())||0,(null==f?void 0:f.end)&&(null==f?void 0:f.start)?f.end-f.start+1:1,_this35.getShape(f))})).attr("transform",(function(f){var _a;return"translate("+_this35.getXFromSeqPosition(f.start||0)+","+(null===(_a=_this35.layoutObj)||void 0===_a?void 0:_a.getFeatureYPos(f.feature))+")"})),fragmentG.selectAll("rect.outer-rectangle").attr("width",(function(f){return _this35.getSingleBaseWidth()*((null==f?void 0:f.end)&&(null==f?void 0:f.start)?f.end-f.start+1:1)})).attr("height",(null===(_a=this.layoutObj)||void 0===_a?void 0:_a.getFeatureHeight())||0).attr("transform",(function(f){var _a;return"translate("+_this35.getXFromSeqPosition(f.start||0)+","+((null===(_a=_this35.layoutObj)||void 0===_a?void 0:_a.getFeatureYPos(f.feature))||0)+")"}))}this.updateHighlight(),this.renderMarginOnGroup(__classPrivateFieldGet$1(this,_NightingaleTrack_margins,"f"))}},{key:"updateHighlight",value:function updateHighlight(){var _this36=this;if(__classPrivateFieldGet$1(this,_NightingaleTrack_highlighted,"f")){var highlighs=__classPrivateFieldGet$1(this,_NightingaleTrack_highlighted,"f").selectAll("rect").data(this.highlightedRegion.segments);highlighs.enter().append("rect").style("pointer-events","none").merge(highlighs).attr("fill",this["highlight-color"]).attr("height",this.height).attr("x",(function(d){return _this36.getXFromSeqPosition(d.start)})).attr("width",(function(d){return _this36.getSingleBaseWidth()*(d.end-d.start+1)})),highlighs.exit().remove()}}},{key:"zoomRefreshed",value:function zoomRefreshed(){this.refresh()}},{key:"firstUpdated",value:function firstUpdated(){this.createTrack()}},{key:"render",value:function render(){return $(_templateObject||(_templateObject=function _taggedTemplateLiteralLoose(strings,raw){return raw||(raw=strings.slice(0)),strings.raw=raw,strings}(['<svg class="container"></svg>'])))}}],[{key:"normalizeLocations",value:function normalizeLocations(data){return data.map((function(obj){var locations=obj.locations,start=obj.start,end=obj.end;return locations?obj:Object.assign(obj,{locations:[{fragments:[{start,end}]}]})}))}}]),NightingaleTrack}(function withManager(superClass){var WithManager=function(_superClass3){_inherits(WithManager,_superClass3);var _super5=_createSuper(WithManager);function WithManager(){return _classCallCheck(this,WithManager),_super5.apply(this,arguments)}return _createClass(WithManager,[{key:"connectedCallback",value:function connectedCallback(){var _this5=this;this.closest("nightingale-manager")&&customElements.whenDefined("nightingale-manager").then((function(){_this5.manager=_this5.closest("nightingale-manager"),_this5.manager&&_this5.manager.register(_this5)})),_get(_getPrototypeOf(WithManager.prototype),"connectedCallback",this).call(this)}},{key:"disconnectedCallback",value:function disconnectedCallback(){this.manager&&this.manager.unregister(this),_get(_getPrototypeOf(WithManager.prototype),"disconnectedCallback",this).call(this)}}]),WithManager}(superClass);return WithManager}(function withZoom(superClass){var WithZoom=function(_withMargin){_inherits(WithZoom,_withMargin);var _super7=_createSuper(WithZoom);function WithZoom(){var _this9;_classCallCheck(this,WithZoom);for(var _len9=arguments.length,args=new Array(_len9),_key9=0;_key9<_len9;_key9++)args[_key9]=arguments[_key9];(_this9=_super7.call.apply(_super7,[this].concat(args)))._updateScaleDomain=_this9._updateScaleDomain.bind(_assertThisInitialized(_this9)),_this9._initZoom=_this9._initZoom.bind(_assertThisInitialized(_this9)),_this9.zoomed=_this9.zoomed.bind(_assertThisInitialized(_this9)),_this9._applyZoomTranslation=_this9.applyZoomTranslation.bind(_assertThisInitialized(_this9));var aboutToApply=!1;return _this9.applyZoomTranslation=function(){aboutToApply||(aboutToApply=!0,requestAnimationFrame((function(){aboutToApply=!1,_this9._applyZoomTranslation()})))},_this9}return _createClass(WithZoom,[{key:"connectedCallback",value:function connectedCallback(){this._updateScaleDomain(),this.xScale&&(this._originXScale=this.xScale.copy()),this._initZoom(),_get(_getPrototypeOf(WithZoom.prototype),"connectedCallback",this).call(this)}},{key:"disconnectedCallback",value:function disconnectedCallback(){_get(_getPrototypeOf(WithZoom.prototype),"disconnectedCallback",this).call(this)}},{key:"xScale",get:function get(){return this._xScale},set:function set(xScale){this._xScale=xScale}},{key:"zoom",get:function get(){return this._zoom}},{key:"svg",get:function get(){return this._svg},set:function set(svg){svg&&this._zoom&&(this._svg=svg,svg.call(this._zoom),this.applyZoomTranslation())}},{key:"_updateScaleDomain",value:function _updateScaleDomain(){this.xScale=linear().domain([1,(this.length||0)+1]).range([0,this.getWidthWithMargins()])}},{key:"_initZoom",value:function _initZoom(){this._zoom=function d3zoom(){var touchstarting,touchfirst,touchending,filter=defaultFilter,extent=defaultExtent,constrain=defaultConstrain,wheelDelta=defaultWheelDelta,touchable=defaultTouchable,scaleExtent=[0,1/0],translateExtent=[[-1/0,-1/0],[1/0,1/0]],duration=250,interpolate=interpolateZoom,listeners=dispatch("start","zoom","end"),clickDistance2=0,tapDistance=10;function zoom(selection){selection.property("__zoom",defaultTransform).on("wheel.zoom",wheeled,{passive:!1}).on("mousedown.zoom",mousedowned).on("dblclick.zoom",dblclicked).filter(touchable).on("touchstart.zoom",touchstarted).on("touchmove.zoom",touchmoved).on("touchend.zoom touchcancel.zoom",touchended).style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function scale(transform,k){return(k=Math.max(scaleExtent[0],Math.min(scaleExtent[1],k)))===transform.k?transform:new Transform(k,transform.x,transform.y)}function translate(transform,p0,p1){var x=p0[0]-p1[0]*transform.k,y=p0[1]-p1[1]*transform.k;return x===transform.x&&y===transform.y?transform:new Transform(transform.k,x,y)}function centroid(extent){return[(+extent[0][0]+ +extent[1][0])/2,(+extent[0][1]+ +extent[1][1])/2]}function schedule(transition,transform,point,event){transition.on("start.zoom",(function(){gesture(this,arguments).event(event).start()})).on("interrupt.zoom end.zoom",(function(){gesture(this,arguments).event(event).end()})).tween("zoom",(function(){var that=this,args=arguments,g=gesture(that,args).event(event),e=extent.apply(that,args),p=null==point?centroid(e):"function"==typeof point?point.apply(that,args):point,w=Math.max(e[1][0]-e[0][0],e[1][1]-e[0][1]),a=that.__zoom,b="function"==typeof transform?transform.apply(that,args):transform,i=interpolate(a.invert(p).concat(w/a.k),b.invert(p).concat(w/b.k));return function(t){if(1===t)t=b;else{var l=i(t),k=w/l[2];t=new Transform(k,p[0]-l[0]*k,p[1]-l[1]*k)}g.zoom(null,t)}}))}function gesture(that,args,clean){return!clean&&that.__zooming||new Gesture(that,args)}function Gesture(that,args){this.that=that,this.args=args,this.active=0,this.sourceEvent=null,this.extent=extent.apply(that,args),this.taps=0}function wheeled(event){for(var _len3=arguments.length,args=new Array(_len3>1?_len3-1:0),_key3=1;_key3<_len3;_key3++)args[_key3-1]=arguments[_key3];if(filter.apply(this,arguments)){var g=gesture(this,args).event(event),t=this.__zoom,k=Math.max(scaleExtent[0],Math.min(scaleExtent[1],t.k*Math.pow(2,wheelDelta.apply(this,arguments)))),p=pointer(event);if(g.wheel)g.mouse[0][0]===p[0]&&g.mouse[0][1]===p[1]||(g.mouse[1]=t.invert(g.mouse[0]=p)),clearTimeout(g.wheel);else{if(t.k===k)return;g.mouse=[p,t.invert(p)],interrupt(this),g.start()}noevent(event),g.wheel=setTimeout(wheelidled,150),g.zoom("mouse",constrain(translate(scale(t,k),g.mouse[0],g.mouse[1]),g.extent,translateExtent))}function wheelidled(){g.wheel=null,g.end()}}function mousedowned(event){for(var _len4=arguments.length,args=new Array(_len4>1?_len4-1:0),_key4=1;_key4<_len4;_key4++)args[_key4-1]=arguments[_key4];if(!touchending&&filter.apply(this,arguments)){var currentTarget=event.currentTarget,g=gesture(this,args,!0).event(event),v=dist_select(event.view).on("mousemove.zoom",mousemoved,!0).on("mouseup.zoom",mouseupped,!0),p=pointer(event,currentTarget),x0=event.clientX,y0=event.clientY;dragDisable(event.view),nopropagation(event),g.mouse=[p,this.__zoom.invert(p)],interrupt(this),g.start()}function mousemoved(event){if(noevent(event),!g.moved){var dx=event.clientX-x0,dy=event.clientY-y0;g.moved=dx*dx+dy*dy>clickDistance2}g.event(event).zoom("mouse",constrain(translate(g.that.__zoom,g.mouse[0]=pointer(event,currentTarget),g.mouse[1]),g.extent,translateExtent))}function mouseupped(event){v.on("mousemove.zoom mouseup.zoom",null),yesdrag(event.view,g.moved),noevent(event),g.event(event).end()}}function dblclicked(event){for(var _len5=arguments.length,args=new Array(_len5>1?_len5-1:0),_key5=1;_key5<_len5;_key5++)args[_key5-1]=arguments[_key5];if(filter.apply(this,arguments)){var t0=this.__zoom,p0=pointer(event.changedTouches?event.changedTouches[0]:event,this),p1=t0.invert(p0),k1=t0.k*(event.shiftKey?.5:2),t1=constrain(translate(scale(t0,k1),p0,p1),extent.apply(this,args),translateExtent);noevent(event),duration>0?dist_select(this).transition().duration(duration).call(schedule,t1,p0,event):dist_select(this).call(zoom.transform,t1,p0,event)}}function touchstarted(event){for(var _len6=arguments.length,args=new Array(_len6>1?_len6-1:0),_key6=1;_key6<_len6;_key6++)args[_key6-1]=arguments[_key6];if(filter.apply(this,arguments)){var started,i,t,p,touches=event.touches,n=touches.length,g=gesture(this,args,event.changedTouches.length===n).event(event);for(nopropagation(event),i=0;i<n;++i)p=[p=pointer(t=touches[i],this),this.__zoom.invert(p),t.identifier],g.touch0?g.touch1||g.touch0[2]===p[2]||(g.touch1=p,g.taps=0):(g.touch0=p,started=!0,g.taps=1+!!touchstarting);touchstarting&&(touchstarting=clearTimeout(touchstarting)),started&&(g.taps<2&&(touchfirst=p[0],touchstarting=setTimeout((function(){touchstarting=null}),500)),interrupt(this),g.start())}}function touchmoved(event){if(this.__zooming){for(var _len7=arguments.length,args=new Array(_len7>1?_len7-1:0),_key7=1;_key7<_len7;_key7++)args[_key7-1]=arguments[_key7];var i,t,p,l,g=gesture(this,args).event(event),touches=event.changedTouches,n=touches.length;for(noevent(event),i=0;i<n;++i)p=pointer(t=touches[i],this),g.touch0&&g.touch0[2]===t.identifier?g.touch0[0]=p:g.touch1&&g.touch1[2]===t.identifier&&(g.touch1[0]=p);if(t=g.that.__zoom,g.touch1){var p0=g.touch0[0],l0=g.touch0[1],p1=g.touch1[0],l1=g.touch1[1],dp=(dp=p1[0]-p0[0])*dp+(dp=p1[1]-p0[1])*dp,dl=(dl=l1[0]-l0[0])*dl+(dl=l1[1]-l0[1])*dl;t=scale(t,Math.sqrt(dp/dl)),p=[(p0[0]+p1[0])/2,(p0[1]+p1[1])/2],l=[(l0[0]+l1[0])/2,(l0[1]+l1[1])/2]}else{if(!g.touch0)return;p=g.touch0[0],l=g.touch0[1]}g.zoom("touch",constrain(translate(t,p,l),g.extent,translateExtent))}}function touchended(event){for(var _len8=arguments.length,args=new Array(_len8>1?_len8-1:0),_key8=1;_key8<_len8;_key8++)args[_key8-1]=arguments[_key8];if(this.__zooming){var i,t,g=gesture(this,args).event(event),touches=event.changedTouches,n=touches.length;for(nopropagation(event),touchending&&clearTimeout(touchending),touchending=setTimeout((function(){touchending=null}),500),i=0;i<n;++i)t=touches[i],g.touch0&&g.touch0[2]===t.identifier?delete g.touch0:g.touch1&&g.touch1[2]===t.identifier&&delete g.touch1;if(g.touch1&&!g.touch0&&(g.touch0=g.touch1,delete g.touch1),g.touch0)g.touch0[1]=this.__zoom.invert(g.touch0[0]);else if(g.end(),2===g.taps&&(t=pointer(t,this),Math.hypot(touchfirst[0]-t[0],touchfirst[1]-t[1])<tapDistance)){var p=dist_select(this).on("dblclick.zoom");p&&p.apply(this,arguments)}}}return zoom.transform=function(collection,transform,point,event){var selection=collection.selection?collection.selection():collection;selection.property("__zoom",defaultTransform),collection!==selection?schedule(collection,transform,point,event):selection.interrupt().each((function(){gesture(this,arguments).event(event).start().zoom(null,"function"==typeof transform?transform.apply(this,arguments):transform).end()}))},zoom.scaleBy=function(selection,k,p,event){zoom.scaleTo(selection,(function(){return this.__zoom.k*("function"==typeof k?k.apply(this,arguments):k)}),p,event)},zoom.scaleTo=function(selection,k,p,event){zoom.transform(selection,(function(){var e=extent.apply(this,arguments),t0=this.__zoom,p0=null==p?centroid(e):"function"==typeof p?p.apply(this,arguments):p,p1=t0.invert(p0),k1="function"==typeof k?k.apply(this,arguments):k;return constrain(translate(scale(t0,k1),p0,p1),e,translateExtent)}),p,event)},zoom.translateBy=function(selection,x,y,event){zoom.transform(selection,(function(){return constrain(this.__zoom.translate("function"==typeof x?x.apply(this,arguments):x,"function"==typeof y?y.apply(this,arguments):y),extent.apply(this,arguments),translateExtent)}),null,event)},zoom.translateTo=function(selection,x,y,p,event){zoom.transform(selection,(function(){var e=extent.apply(this,arguments),t=this.__zoom,p0=null==p?centroid(e):"function"==typeof p?p.apply(this,arguments):p;return constrain(identity.translate(p0[0],p0[1]).scale(t.k).translate("function"==typeof x?-x.apply(this,arguments):-x,"function"==typeof y?-y.apply(this,arguments):-y),e,translateExtent)}),p,event)},Gesture.prototype={event:function event(_event){return _event&&(this.sourceEvent=_event),this},start:function start(){return 1==++this.active&&(this.that.__zooming=this,this.emit("start")),this},zoom:function zoom(key,transform){return this.mouse&&"mouse"!==key&&(this.mouse[1]=transform.invert(this.mouse[0])),this.touch0&&"touch"!==key&&(this.touch0[1]=transform.invert(this.touch0[0])),this.touch1&&"touch"!==key&&(this.touch1[1]=transform.invert(this.touch1[0])),this.that.__zoom=transform,this.emit("zoom"),this},end:function end(){return 0==--this.active&&(delete this.that.__zooming,this.emit("end")),this},emit:function emit(type){var d=dist_select(this.that).datum();listeners.call(type,this.that,new ZoomEvent(type,{sourceEvent:this.sourceEvent,target:zoom,type,transform:this.that.__zoom,dispatch:listeners}),d)}},zoom.wheelDelta=function(_){return arguments.length?(wheelDelta="function"==typeof _?_:constant(+_),zoom):wheelDelta},zoom.filter=function(_){return arguments.length?(filter="function"==typeof _?_:constant(!!_),zoom):filter},zoom.touchable=function(_){return arguments.length?(touchable="function"==typeof _?_:constant(!!_),zoom):touchable},zoom.extent=function(_){return arguments.length?(extent="function"==typeof _?_:constant([[+_[0][0],+_[0][1]],[+_[1][0],+_[1][1]]]),zoom):extent},zoom.scaleExtent=function(_){return arguments.length?(scaleExtent[0]=+_[0],scaleExtent[1]=+_[1],zoom):[scaleExtent[0],scaleExtent[1]]},zoom.translateExtent=function(_){return arguments.length?(translateExtent[0][0]=+_[0][0],translateExtent[1][0]=+_[1][0],translateExtent[0][1]=+_[0][1],translateExtent[1][1]=+_[1][1],zoom):[[translateExtent[0][0],translateExtent[0][1]],[translateExtent[1][0],translateExtent[1][1]]]},zoom.constrain=function(_){return arguments.length?(constrain=_,zoom):constrain},zoom.duration=function(_){return arguments.length?(duration=+_,zoom):duration},zoom.interpolate=function(_){return arguments.length?(interpolate=_,zoom):interpolate},zoom.on=function(){var value=listeners.on.apply(listeners,arguments);return value===listeners?zoom:value},zoom.clickDistance=function(_){return arguments.length?(clickDistance2=(_=+_)*_,zoom):Math.sqrt(clickDistance2)},zoom.tapDistance=function(_){return arguments.length?(tapDistance=+_,zoom):tapDistance},zoom}().scaleExtent([1,1/0]).translateExtent([[0,0],[this.getWidthWithMargins(),0]]).extent([[0,0],[this.getWidthWithMargins(),0]]).on("zoom",this.zoomed)}},{key:"attributeChangedCallback",value:function attributeChangedCallback(name,oldValue,newValue){var _a;(_get(_getPrototypeOf(WithZoom.prototype),"attributeChangedCallback",this).call(this,name,oldValue,newValue),this.zoom)&&(oldValue!==("null"===newValue?null:newValue)&&(ATTRIBUTES_THAT_TRIGGER_REFRESH$1.includes(name)&&(this._updateScaleDomain(),this._originXScale=null===(_a=this.xScale)||void 0===_a?void 0:_a.copy()),this.applyZoomTranslation()))}},{key:"zoomed",value:function zoomed(d3Event){var _a;this._originXScale&&(this.xScale=d3Event.transform.rescaleX(this._originXScale));var _ref6=_slicedToArray((null===(_a=null==this?void 0:this.xScale)||void 0===_a?void 0:_a.domain())||[0,0],2),start=_ref6[0],end=_ref6[1];!this.dontDispatch&&this.xScale&&this.dispatchEvent(new CustomEvent("change",{detail:{"display-start":Math.max(1,start),"display-end":Math.min(this.length||0,Math.max(end-1,start+1))},bubbles:!0,cancelable:!0}))}},{key:"applyZoomTranslation",value:function applyZoomTranslation(){if(this.svg&&this._originXScale){var k=Math.max(1,(this.length||0)/(1+(this["display-end"]||0)-(this["display-start"]||0))),dx=-this._originXScale(this["display-start"]||0);this.dontDispatch=!0,this.zoom&&this.svg.call(this.zoom.transform,identity.scale(k).translate(dx,0)),this.dontDispatch=!1,this.zoomRefreshed()}}},{key:"zoomRefreshed",value:function zoomRefreshed(){_get(_getPrototypeOf(WithZoom.prototype),"render",this).call(this)}},{key:"render",value:function render(){return this.applyZoomTranslation(),_get(_getPrototypeOf(WithZoom.prototype),"render",this).call(this)}},{key:"getXFromSeqPosition",value:function getXFromSeqPosition(position){return this.xScale?this["margin-left"]+this.xScale(position):-1}},{key:"getSingleBaseWidth",value:function getSingleBaseWidth(){return this.xScale?this.xScale(2)-this.xScale(1):-1}}]),WithZoom}(withMargin(withPosition(withDimensions(superClass))));return WithZoom}(function withResizable(superClass){var _WithResizable_observer,WithResizable=function(_withDimensions2){_inherits(WithResizable,_withDimensions2);var _super4=_createSuper(WithResizable);function WithResizable(){var _this4;_classCallCheck(this,WithResizable);for(var _len=arguments.length,rest=new Array(_len),_key=0;_key<_len;_key++)rest[_key]=arguments[_key];return _this4=_super4.call.apply(_super4,[this].concat(rest)),_WithResizable_observer.set(_assertThisInitialized(_this4),void 0),_this4.onResize=_this4.onResize.bind(_assertThisInitialized(_this4)),_this4.listenForResize=_this4.listenForResize.bind(_assertThisInitialized(_this4)),_this4}return _createClass(WithResizable,[{key:"connectedCallback",value:function connectedCallback(){this.listenForResize(),_get(_getPrototypeOf(WithResizable.prototype),"connectedCallback",this).call(this)}},{key:"disconnectedCallback",value:function disconnectedCallback(){__classPrivateFieldGet(this,_WithResizable_observer,"f")&&__classPrivateFieldGet(this,_WithResizable_observer,"f").unobserve(this),_get(_getPrototypeOf(WithResizable.prototype),"disconnectedCallback",this).call(this)}},{key:"onResize",value:function onResize(){this.width=this.offsetWidth}},{key:"listenForResize",value:function listenForResize(){__classPrivateFieldSet(this,_WithResizable_observer,new ResizeObserver(this.onResize),"f"),__classPrivateFieldGet(this,_WithResizable_observer,"f").observe(this)}}]),WithResizable}(withDimensions(superClass));return _WithResizable_observer=new WeakMap,WithResizable}(withMargin(withPosition(withDimensions(function withHighlight(superClass){var _WithHighlight_fixedHighlight,options=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{highlight:null,"highlight-color":"#FFEB3B66"},WithHighlight=function(_superClass4){_inherits(WithHighlight,_superClass4);var _super6=_createSuper(WithHighlight);function WithHighlight(){var _this8;_classCallCheck(this,WithHighlight);for(var _len2=arguments.length,args=new Array(_len2),_key2=0;_key2<_len2;_key2++)args[_key2]=arguments[_key2];return(_this8=_super6.call.apply(_super6,[this].concat(args))).highlight=options.highlight,_this8["highlight-color"]=options["highlight-color"],_WithHighlight_fixedHighlight.set(_assertThisInitialized(_this8),void 0),_this8.highlightedRegion=new Region({min:1}),__classPrivateFieldSet(_assertThisInitialized(_this8),_WithHighlight_fixedHighlight,null,"f"),_this8}return _createClass(WithHighlight,[{key:"fixedHighlight",set:function set(value){__classPrivateFieldSet(this,_WithHighlight_fixedHighlight,value,"f"),this.highlightedRegion.decode(combineRegions(this.highlight||"",__classPrivateFieldGet(this,_WithHighlight_fixedHighlight,"f")||"")),this.updateHighlight()}},{key:"attributeChangedCallback",value:function attributeChangedCallback(name,oldValue,newValue){_get(_getPrototypeOf(WithHighlight.prototype),"attributeChangedCallback",this).call(this,name,oldValue,newValue),"null"===newValue&&(newValue=null),oldValue!==newValue&&("length"===name&&(this.highlightedRegion.max=Number(newValue)),"highlight"===name&&this.highlightedRegion.decode(combineRegions(newValue||"",__classPrivateFieldGet(this,_WithHighlight_fixedHighlight,"f")||"")))}},{key:"updateHighlight",value:function updateHighlight(){}}]),WithHighlight}(superClass);return _WithHighlight_fixedHighlight=new WeakMap,__decorate([e$3$1({type:String})],WithHighlight.prototype,"highlight",void 0),__decorate([e$3$1({type:String})],WithHighlight.prototype,"highlight-color",void 0),WithHighlight}(NightingaleElement))))))));_NightingaleTrack_originalData=new WeakMap,_NightingaleTrack_data=new WeakMap,_NightingaleTrack_highlighted=new WeakMap,_NightingaleTrack_margins=new WeakMap,__decorate$1([e({type:String})],NightingaleTrack.prototype,"color",void 0),__decorate$1([e({type:String})],NightingaleTrack.prototype,"shape",void 0),__decorate$1([e({type:String})],NightingaleTrack.prototype,"layout",void 0),NightingaleTrack=NightingaleTrack_1=__decorate$1([function customElementOnce(tagName){return function(classOrDescriptor){window.customElements.get(tagName)||function n$5(n){return function(e){return"function"==typeof e?function(n,e){return window.customElements.define(n,e),e}(n,e):function(n,e){return{kind:e.kind,elements:e.elements,finisher:function finisher(e){window.customElements.define(n,e)}}}(n,e)}}(tagName)(classOrDescriptor)}}("nightingale-track")],NightingaleTrack);var _InterproEntryLayout_instances,_InterproEntryLayout_heightMap,_InterproEntryLayout_yPositionMap,_InterproEntryLayout_initResidues,NightingaleTrack$1=NightingaleTrack,_excluded=(__webpack_require__("./node_modules/core-js/modules/es.object.keys.js"),["expanded","padding"]);function _objectWithoutProperties(source,excluded){if(null==source)return{};var key,i,target=function _objectWithoutPropertiesLoose(source,excluded){if(null==source)return{};var key,i,target={},sourceKeys=Object.keys(source);for(i=0;i<sourceKeys.length;i++)key=sourceKeys[i],excluded.indexOf(key)>=0||(target[key]=source[key]);return target}(source,excluded);if(Object.getOwnPropertySymbols){var sourceSymbolKeys=Object.getOwnPropertySymbols(source);for(i=0;i<sourceSymbolKeys.length;i++)key=sourceSymbolKeys[i],excluded.indexOf(key)>=0||Object.prototype.propertyIsEnumerable.call(source,key)&&(target[key]=source[key])}return target}function InterproEntryLayout_defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}function InterproEntryLayout_setPrototypeOf(o,p){return InterproEntryLayout_setPrototypeOf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function _setPrototypeOf(o,p){return o.__proto__=p,o},InterproEntryLayout_setPrototypeOf(o,p)}function InterproEntryLayout_createSuper(Derived){var hasNativeReflectConstruct=function InterproEntryLayout_isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function _createSuperInternal(){var result,Super=InterproEntryLayout_getPrototypeOf(Derived);if(hasNativeReflectConstruct){var NewTarget=InterproEntryLayout_getPrototypeOf(this).constructor;result=Reflect.construct(Super,arguments,NewTarget)}else result=Super.apply(this,arguments);return InterproEntryLayout_possibleConstructorReturn(this,result)}}function InterproEntryLayout_possibleConstructorReturn(self,call){if(call&&("object"==typeof call||"function"==typeof call))return call;if(void 0!==call)throw new TypeError("Derived constructors may only return object or undefined");return InterproEntryLayout_assertThisInitialized(self)}function InterproEntryLayout_assertThisInitialized(self){if(void 0===self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return self}function InterproEntryLayout_getPrototypeOf(o){return InterproEntryLayout_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)},InterproEntryLayout_getPrototypeOf(o)}var InterproEntryLayout=function(_DefaultLayout){!function InterproEntryLayout_inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function");subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:!0,configurable:!0}}),Object.defineProperty(subClass,"prototype",{writable:!1}),superClass&&InterproEntryLayout_setPrototypeOf(subClass,superClass)}(InterproEntryLayout,_DefaultLayout);var _super=InterproEntryLayout_createSuper(InterproEntryLayout);function InterproEntryLayout(_ref){var _this,expanded=_ref.expanded,padding=_ref.padding,otherOptions=_objectWithoutProperties(_ref,_excluded);return function InterproEntryLayout_classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,InterproEntryLayout),_this=_super.call(this,otherOptions),_InterproEntryLayout_instances.add(InterproEntryLayout_assertThisInitialized(_this)),_InterproEntryLayout_heightMap.set(InterproEntryLayout_assertThisInitialized(_this),new Map),_InterproEntryLayout_yPositionMap.set(InterproEntryLayout_assertThisInitialized(_this),new Map),_this.maxYPos=0,_this.expanded=!1,_this.padding=1,_this.expanded=expanded,_this.padding=padding,_this}return function InterproEntryLayout_createClass(Constructor,protoProps,staticProps){return protoProps&&InterproEntryLayout_defineProperties(Constructor.prototype,protoProps),staticProps&&InterproEntryLayout_defineProperties(Constructor,staticProps),Object.defineProperty(Constructor,"prototype",{writable:!1}),Constructor}(InterproEntryLayout,[{key:"init",value:function init(features,children){var _a,yPos=0;if((0,tslib_es6.YH)(this,_InterproEntryLayout_heightMap,new Map,"f"),(0,tslib_es6.YH)(this,_InterproEntryLayout_yPositionMap,new Map,"f"),this.maxYPos=0,features){for(var residuesPos={},k=0;k<features.length;k++){var feature=features[k],isCollapsible=(null===(_a=null==feature?void 0:feature.residues)||void 0===_a?void 0:_a.length)||(null==children?void 0:children.length);(0,tslib_es6.Q_)(this,_InterproEntryLayout_heightMap,"f").set(feature.accession,isCollapsible&&!this.expanded?16:14),(0,tslib_es6.Q_)(this,_InterproEntryLayout_yPositionMap,"f").set(feature.accession,this.padding),yPos=((0,tslib_es6.Q_)(this,_InterproEntryLayout_heightMap,"f").get(feature.accession)||0)+2*this.padding,this.maxYPos=Math.max(this.maxYPos,yPos),feature.accession in residuesPos||(residuesPos[feature.accession]={}),feature.residues&&(yPos=(0,tslib_es6.Q_)(this,_InterproEntryLayout_instances,"m",_InterproEntryLayout_initResidues).call(this,feature.residues,feature.accession,this.expanded?yPos:(0,tslib_es6.Q_)(this,_InterproEntryLayout_yPositionMap,"f").get(feature.accession)||0,k,3,feature.locations,residuesPos,this.expanded))}if(children)for(var _k=0;_k<children.length;_k++){var child=children[_k];(0,tslib_es6.Q_)(this,_InterproEntryLayout_heightMap,"f").has(child.accession)||((0,tslib_es6.Q_)(this,_InterproEntryLayout_heightMap,"f").set(child.accession,10),(0,tslib_es6.Q_)(this,_InterproEntryLayout_yPositionMap,"f").set(child.accession,(this.expanded?this.maxYPos:3)+this.padding),yPos+=this.expanded?2*this.padding+((0,tslib_es6.Q_)(this,_InterproEntryLayout_heightMap,"f").get(child.accession)||14):0,this.maxYPos=Math.max(this.maxYPos,yPos)),child.accession in residuesPos||(residuesPos[child.accession]={}),child.residues&&(yPos=(0,tslib_es6.Q_)(this,_InterproEntryLayout_instances,"m",_InterproEntryLayout_initResidues).call(this,child.residues,child.accession,child.expanded?yPos:(0,tslib_es6.Q_)(this,_InterproEntryLayout_yPositionMap,"f").get(child.accession)||0,_k,3,child.locations,residuesPos,this.expanded&&child.expanded))}this.maxYPos+=this.padding}}},{key:"getFeatureYPos",value:function getFeatureYPos(feature){var acc=InterproEntryLayout.getAccFromFeature(feature);return(0,tslib_es6.Q_)(this,_InterproEntryLayout_yPositionMap,"f").get(acc)||0}},{key:"getFeatureHeight",value:function getFeatureHeight(feature){var acc=InterproEntryLayout.getAccFromFeature(feature);return(0,tslib_es6.Q_)(this,_InterproEntryLayout_heightMap,"f").get(acc)||0}}],[{key:"filterOutResidueFragmentsOutOfLocation",value:function filterOutResidueFragmentsOutOfLocation(residue,featureLocations){residue.locations.forEach((function(locRes){return locRes.fragments=locRes.fragments.filter((function(fragRes){return featureLocations.some((function(loc){return loc.fragments.some((function(frag){return fragRes.start>=frag.start&&fragRes.end<=frag.end}))}))}))})),residue.locations=residue.locations.filter((function(locRes){return locRes.fragments.length}))}},{key:"getAccFromFeature",value:function getAccFromFeature(feature){var acc="";return"string"==typeof feature?acc=feature:feature.accession&&(acc=feature.accession),acc}}]),InterproEntryLayout}(DefaultLayout);function coverage_createForOfIteratorHelper(o,allowArrayLike){var it="undefined"!=typeof Symbol&&o[Symbol.iterator]||o["@@iterator"];if(!it){if(Array.isArray(o)||(it=function coverage_unsupportedIterableToArray(o,minLen){if(!o)return;if("string"==typeof o)return coverage_arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);"Object"===n&&o.constructor&&(n=o.constructor.name);if("Map"===n||"Set"===n)return Array.from(o);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return coverage_arrayLikeToArray(o,minLen)}(o))||allowArrayLike&&o&&"number"==typeof o.length){it&&(o=it);var i=0,F=function F(){};return{s:F,n:function n(){return i>=o.length?{done:!0}:{done:!1,value:o[i++]}},e:function e(_e){throw _e},f:F}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var err,normalCompletion=!0,didErr=!1;return{s:function s(){it=it.call(o)},n:function n(){var step=it.next();return normalCompletion=step.done,step},e:function e(_e2){didErr=!0,err=_e2},f:function f(){try{normalCompletion||null==it.return||it.return()}finally{if(didErr)throw err}}}}function coverage_arrayLikeToArray(arr,len){(null==len||len>arr.length)&&(len=arr.length);for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2}_InterproEntryLayout_heightMap=new WeakMap,_InterproEntryLayout_yPositionMap=new WeakMap,_InterproEntryLayout_instances=new WeakSet,_InterproEntryLayout_initResidues=function _InterproEntryLayout_initResidues(residues,featureAcc,yPos,k,innerPadding,locs){for(var residuesPos=arguments.length>6&&void 0!==arguments[6]?arguments[6]:{},expanded=!(arguments.length>7&&void 0!==arguments[7])||arguments[7],i=0;i<residues.length;i++){var resGroup=residues[i];InterproEntryLayout.filterOutResidueFragmentsOutOfLocation(resGroup,locs||[]),resGroup.accession in residuesPos[featureAcc]||(residuesPos[featureAcc][resGroup.accession]={});for(var j=0;j<resGroup.locations.length;j++){var desc=resGroup.locations[j].description;desc in residuesPos[featureAcc][resGroup.accession]||(residuesPos[featureAcc][resGroup.accession][desc]={height:expanded?10:((0,tslib_es6.Q_)(this,_InterproEntryLayout_heightMap,"f").get(featureAcc)||14)-2*innerPadding,yPos:expanded?this.maxYPos+this.padding:yPos+innerPadding},yPos=expanded?this.maxYPos+2*this.padding+10:yPos),(0,tslib_es6.Q_)(this,_InterproEntryLayout_heightMap,"f").set(resGroup.accession+"_"+k+"_"+i+"_"+j,residuesPos[featureAcc][resGroup.accession][desc].height),(0,tslib_es6.Q_)(this,_InterproEntryLayout_yPositionMap,"f").set(resGroup.accession+"_"+k+"_"+i+"_"+j,residuesPos[featureAcc][resGroup.accession][desc].yPos),this.maxYPos=Math.max(this.maxYPos,yPos)}}return expanded?yPos:this.maxYPos+2*this.padding};var _NightingaleInterproTrack_contributors,_NightingaleInterproTrack_coverage,_NightingaleInterproTrack_haveCreatedFeatures,_NightingaleInterproTrack_childrenG,_NightingaleInterproTrack_featuresG,_NightingaleInterproTrack_residuesG,_NightingaleInterproTrack_childResiduesG,NightingaleInterproTrack_1,addContributor=function addContributor(contributor,coverage){var _step,toContribute=Object.assign({value:1},contributor),newCoverage=[],_iterator=coverage_createForOfIteratorHelper(coverage);try{for(_iterator.s();!(_step=_iterator.n()).done;){var segment=_step.value;toContribute?toContribute.end<segment.start?(newCoverage.push(toContribute),toContribute=null,newCoverage.push(segment)):toContribute.start<segment.start&&toContribute.end>=segment.end?(newCoverage.push({start:toContribute.start,end:segment.start-1,value:toContribute.value}),newCoverage.push({start:segment.start,end:segment.end,value:(segment.value||0)+((null==toContribute?void 0:toContribute.value)||0)}),toContribute=segment.end===toContribute.end?null:{start:segment.end+1,end:toContribute.end,value:toContribute.value}):segment.start<toContribute.start&&segment.end>toContribute.end?(newCoverage.push({start:segment.start,end:toContribute.start-1,value:segment.value}),newCoverage.push({start:toContribute.start,end:toContribute.end,value:(segment.value||0)+((null==toContribute?void 0:toContribute.value)||0)}),newCoverage.push({start:toContribute.end+1,end:segment.end,value:segment.value}),toContribute=null):segment.end>=toContribute.start&&segment.end<=toContribute.end?(segment.start<toContribute.start&&newCoverage.push({start:segment.start,end:toContribute.start-1,value:segment.value}),newCoverage.push({start:toContribute.start,end:segment.end,value:(segment.value||0)+((null==toContribute?void 0:toContribute.value)||0)}),toContribute=segment.end<toContribute.end?{start:segment.end+1,end:toContribute.end,value:toContribute.value}:null):toContribute.end>=segment.start&&toContribute.end<segment.end?(newCoverage.push({start:toContribute.start,end:segment.start-1,value:toContribute.value}),newCoverage.push({start:segment.start,end:toContribute.end,value:(segment.value||0)+((null==toContribute?void 0:toContribute.value)||0)}),newCoverage.push({start:toContribute.end+1,end:segment.end,value:segment.value}),toContribute=null):newCoverage.push(segment):newCoverage.push(segment)}}catch(err){_iterator.e(err)}finally{_iterator.f()}return toContribute&&newCoverage.push(toContribute),newCoverage},createResidueGroup=function createResidueGroup(baseG){return baseG.selectAll("g.residues-group").data((function(d){var _a;return(null===(_a=d.residues)||void 0===_a?void 0:_a.map((function(r,i){return Object.assign({},r,{feature:d,i})})))||[]})).enter().append("g").attr("class","residues-group").selectAll("g.residues-locations").data((function(d){return d.locations.map((function(loc,j){return Object.assign({},loc,{accession:d.accession,feature:d.feature,location:loc,i:d.i,j})}))})).enter().append("g").attr("class","residues-locations")},createResiduePaths=function createResiduePaths(_ref){var baseG=_ref.baseG,getResidueShape=_ref.getResidueShape,getResidueTransform=_ref.getResidueTransform,getResidueFill=_ref.getResidueFill,element=_ref.element;return baseG.selectAll("path.residue").data((function(d){return d.fragments.map((function(loc){return Object.assign({},loc,{accession:d.accession,feature:Object.assign({},d.feature,{currentResidue:Object.assign({},loc,{description:d.location.description})}),location:d.location,k:d.feature.k,i:d.i,j:d.j})}))})).enter().append("path").attr("class","feature rectangle residue").attr("d",getResidueShape).attr("transform",getResidueTransform).attr("fill",getResidueFill).attr("stroke","transparent").call(src.sQ,element)},refreshResiduePaths=function refreshResiduePaths(_ref2){var baseG=_ref2.baseG,expanded=_ref2.expanded,getResidueShape=_ref2.getResidueShape,getResidueTransform=_ref2.getResidueTransform,getResidueFill=_ref2.getResidueFill,paths=baseG.selectAll("path.residue"),numberOfSibillings=new Set(paths.data().map((function(f){var _a,_b;return(null===(_a=f.feature)||void 0===_a?void 0:_a.accession)+"-"+(null===(_b=f.location)||void 0===_b?void 0:_b.description)}))).size;paths.attr("d",getResidueShape).attr("transform",getResidueTransform).style("pointer-events",(function(f){return expanded||f.feature&&f.feature.expanded?"auto":"none"})).style("stroke",(function(){return expanded?null:"none"})).style("opacity",(function(){return expanded?null:.8/numberOfSibillings})).attr("fill",getResidueFill)};function nightingale_interpro_track_createForOfIteratorHelper(o,allowArrayLike){var it="undefined"!=typeof Symbol&&o[Symbol.iterator]||o["@@iterator"];if(!it){if(Array.isArray(o)||(it=function nightingale_interpro_track_unsupportedIterableToArray(o,minLen){if(!o)return;if("string"==typeof o)return nightingale_interpro_track_arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);"Object"===n&&o.constructor&&(n=o.constructor.name);if("Map"===n||"Set"===n)return Array.from(o);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return nightingale_interpro_track_arrayLikeToArray(o,minLen)}(o))||allowArrayLike&&o&&"number"==typeof o.length){it&&(o=it);var i=0,F=function F(){};return{s:F,n:function n(){return i>=o.length?{done:!0}:{done:!1,value:o[i++]}},e:function e(_e2){throw _e2},f:F}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var err,normalCompletion=!0,didErr=!1;return{s:function s(){it=it.call(o)},n:function n(){var step=it.next();return normalCompletion=step.done,step},e:function e(_e3){didErr=!0,err=_e3},f:function f(){try{normalCompletion||null==it.return||it.return()}finally{if(didErr)throw err}}}}function nightingale_interpro_track_arrayLikeToArray(arr,len){(null==len||len>arr.length)&&(len=arr.length);for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2}function nightingale_interpro_track_defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}function nightingale_interpro_track_get(){return nightingale_interpro_track_get="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function _get(target,property,receiver){var base=nightingale_interpro_track_superPropBase(target,property);if(base){var desc=Object.getOwnPropertyDescriptor(base,property);return desc.get?desc.get.call(arguments.length<3?target:receiver):desc.value}},nightingale_interpro_track_get.apply(this,arguments)}function nightingale_interpro_track_superPropBase(object,property){for(;!Object.prototype.hasOwnProperty.call(object,property)&&null!==(object=nightingale_interpro_track_getPrototypeOf(object)););return object}function nightingale_interpro_track_setPrototypeOf(o,p){return nightingale_interpro_track_setPrototypeOf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function _setPrototypeOf(o,p){return o.__proto__=p,o},nightingale_interpro_track_setPrototypeOf(o,p)}function nightingale_interpro_track_createSuper(Derived){var hasNativeReflectConstruct=function nightingale_interpro_track_isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function _createSuperInternal(){var result,Super=nightingale_interpro_track_getPrototypeOf(Derived);if(hasNativeReflectConstruct){var NewTarget=nightingale_interpro_track_getPrototypeOf(this).constructor;result=Reflect.construct(Super,arguments,NewTarget)}else result=Super.apply(this,arguments);return nightingale_interpro_track_possibleConstructorReturn(this,result)}}function nightingale_interpro_track_possibleConstructorReturn(self,call){if(call&&("object"==typeof call||"function"==typeof call))return call;if(void 0!==call)throw new TypeError("Derived constructors may only return object or undefined");return nightingale_interpro_track_assertThisInitialized(self)}function nightingale_interpro_track_assertThisInitialized(self){if(void 0===self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return self}function nightingale_interpro_track_getPrototypeOf(o){return nightingale_interpro_track_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)},nightingale_interpro_track_getPrototypeOf(o)}var nightingale_interpro_track_NightingaleInterproTrack=NightingaleInterproTrack_1=function(_NightingaleTrack){!function nightingale_interpro_track_inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function");subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:!0,configurable:!0}}),Object.defineProperty(subClass,"prototype",{writable:!1}),superClass&&nightingale_interpro_track_setPrototypeOf(subClass,superClass)}(NightingaleInterproTrack,_NightingaleTrack);var _super=nightingale_interpro_track_createSuper(NightingaleInterproTrack);function NightingaleInterproTrack(){var _this;return function nightingale_interpro_track_classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,NightingaleInterproTrack),(_this=_super.call(this)).expanded=!1,_this.layout=void 0,_NightingaleInterproTrack_contributors.set(nightingale_interpro_track_assertThisInitialized(_this),void 0),_NightingaleInterproTrack_coverage.set(nightingale_interpro_track_assertThisInitialized(_this),void 0),_NightingaleInterproTrack_haveCreatedFeatures.set(nightingale_interpro_track_assertThisInitialized(_this),!1),_NightingaleInterproTrack_childrenG.set(nightingale_interpro_track_assertThisInitialized(_this),void 0),_NightingaleInterproTrack_featuresG.set(nightingale_interpro_track_assertThisInitialized(_this),void 0),_NightingaleInterproTrack_residuesG.set(nightingale_interpro_track_assertThisInitialized(_this),void 0),_NightingaleInterproTrack_childResiduesG.set(nightingale_interpro_track_assertThisInitialized(_this),void 0),_this["margin-top"]=2,_this["margin-bottom"]=2,_this}return function nightingale_interpro_track_createClass(Constructor,protoProps,staticProps){return protoProps&&nightingale_interpro_track_defineProperties(Constructor.prototype,protoProps),staticProps&&nightingale_interpro_track_defineProperties(Constructor,staticProps),Object.defineProperty(Constructor,"prototype",{writable:!1}),Constructor}(NightingaleInterproTrack,[{key:"createTrack",value:function createTrack(){this.layoutObj&&(this.layoutObj.expanded=this.expanded,(0,tslib_es6.YH)(this,_NightingaleInterproTrack_childrenG,void 0,"f"),nightingale_interpro_track_get(nightingale_interpro_track_getPrototypeOf(NightingaleInterproTrack.prototype),"createTrack",this).call(this))}},{key:"connectedCallback",value:function connectedCallback(){nightingale_interpro_track_get(nightingale_interpro_track_getPrototypeOf(NightingaleInterproTrack.prototype),"connectedCallback",this).call(this),(0,tslib_es6.YH)(this,_NightingaleInterproTrack_haveCreatedFeatures,!1,"f")}},{key:"attributeChangedCallback",value:function attributeChangedCallback(name,oldValue,newValue){if(nightingale_interpro_track_get(nightingale_interpro_track_getPrototypeOf(NightingaleInterproTrack.prototype),"attributeChangedCallback",this).call(this,name,oldValue,newValue),"expanded"===name&&oldValue!==newValue&&(0,tslib_es6.Q_)(this,_NightingaleInterproTrack_contributors,"f")){var _step,_iterator=nightingale_interpro_track_createForOfIteratorHelper((0,tslib_es6.Q_)(this,_NightingaleInterproTrack_contributors,"f"));try{for(_iterator.s();!(_step=_iterator.n()).done;){_step.value.expanded=!oldValue}}catch(err){_iterator.e(err)}finally{_iterator.f()}}}},{key:"contributors",set:function set(contributors){(0,tslib_es6.YH)(this,_NightingaleInterproTrack_contributors,NightingaleInterproTrack_1.normalizeLocations(contributors),"f"),(0,tslib_es6.YH)(this,_NightingaleInterproTrack_coverage,function getCoverage(contributors){var length=arguments.length>1&&void 0!==arguments[1]?arguments[1]:100,coverage=[];return(!(arguments.length>2&&void 0!==arguments[2])||arguments[2])&&(coverage=addContributor({start:1,end:length,value:0},coverage)),contributors.forEach((function(f){var _a;return null===(_a=f.locations)||void 0===_a?void 0:_a.forEach((function(loc){return loc.fragments.forEach((function(fr){coverage=addContributor(fr,coverage)}))}))})),coverage}((0,tslib_es6.Q_)(this,_NightingaleInterproTrack_contributors,"f"),this.length),"f"),this.data&&this.createTrack()}},{key:"getLayout",value:function getLayout(){return new InterproEntryLayout({layoutHeight:this.height,expanded:this.expanded,padding:(this["margin-top"]+this["margin-bottom"])/2})}},{key:"createFeatures",value:function createFeatures(){var _a,_b,_c,_d,_e,_f,_this2=this;if(this.seqG){null===(_a=this.layoutObj)||void 0===_a||_a.init(this.data,(0,tslib_es6.Q_)(this,_NightingaleInterproTrack_contributors,"f")),this.data.forEach((function(d,i){return d.k=i})),(0,tslib_es6.YH)(this,_NightingaleInterproTrack_featuresG,this.seqG.selectAll("g.feature-group").data(this.data).enter().append("g").attr("class","feature-group").attr("id",(function(d){return"g_"+d.accession})),"f");var locations=(0,tslib_es6.Q_)(this,_NightingaleInterproTrack_featuresG,"f").selectAll("g.location-group").data((function(d){var _a;return(null===(_a=d.locations)||void 0===_a?void 0:_a.map((function(loc){return Object.assign({},loc,{feature:d})})))||[]})).enter().append("g").attr("class","location-group");if(locations.selectAll("line.cover").data((function(d){return[d.fragments.reduce((function(agg,v){return{start:Math.min(agg.start,v.start),end:Math.max(agg.end,v.end),feature:d.feature}}),{start:1/0,end:-1/0})]})).enter().append("line").attr("class","cover"),locations.selectAll("path.feature").data((function(d){return d.fragments.map((function(loc){return Object.assign({},loc,{feature:d.feature,fragments:d.fragments})}))})).enter().append("path").attr("class",(function(f){return _this2.getShape(f)+" feature"})).on("click.expanded",(function(){_this2.expanded?_this2.removeAttribute("expanded"):_this2.setAttribute("expanded","expanded")})).call(src.sQ,this),(0,tslib_es6.YH)(this,_NightingaleInterproTrack_residuesG,createResidueGroup((0,tslib_es6.Q_)(this,_NightingaleInterproTrack_featuresG,"f")),"f"),createResiduePaths({baseG:(0,tslib_es6.Q_)(this,_NightingaleInterproTrack_residuesG,"f"),getResidueShape:function getResidueShape(d){return _this2.getResidueShape(d)},getResidueTransform:function getResidueTransform(d){return _this2.getResidueTransform(d)},getResidueFill:function getResidueFill(d){return _this2.getResidueFill(d,_this2.expanded)},element:this}),(0,tslib_es6.Q_)(this,_NightingaleInterproTrack_contributors,"f")){(0,tslib_es6.Q_)(this,_NightingaleInterproTrack_contributors,"f").forEach((function(d,i){return d.k=i})),(0,tslib_es6.Q_)(this,_NightingaleInterproTrack_childrenG,"f")||(0,tslib_es6.YH)(this,_NightingaleInterproTrack_childrenG,null===(_b=this.svg)||void 0===_b?void 0:_b.append("g").attr("class","children-features"),"f");var childrenGroup=null===(_c=(0,tslib_es6.Q_)(this,_NightingaleInterproTrack_childrenG,"f"))||void 0===_c?void 0:_c.append("g").attr("class","children-group"),childGroup=null==childrenGroup?void 0:childrenGroup.selectAll("g.child-group").data((0,tslib_es6.Q_)(this,_NightingaleInterproTrack_contributors,"f")).enter().append("g").attr("class","child-group");if(!childGroup)return;var locationChildrenG=childGroup.selectAll("g.child-location-group").data((function(d){return d.expanded=_this2.expanded,(d.locations||[]).map((function(loc){return Object.assign({},loc,{feature:d})}))})).enter().append("g").attr("class",(function(_,i){return"child-location-group clg-"+i}));null==locationChildrenG||locationChildrenG.selectAll("line.cover").data((function(d){return[d.fragments.reduce((function(agg,v){return{start:Math.min(agg.start,v.start),end:Math.max(agg.end,v.end),feature:d.feature}}),{start:1/0,end:-1/0})]})).enter().append("line").attr("class","cover"),null==locationChildrenG||locationChildrenG.selectAll("path.child-fragment").data((function(d){return d.fragments.map((function(fragment){return Object.assign({},fragment,{feature:d.feature,fragments:d.fragments})}))})).enter().append("path").attr("class",(function(f){return _this2.getShape(f)+" child-fragment feature"})).call(src.sQ,this).on("click.expanded",(function(_event,f){f.feature.expanded=!f.feature.expanded,_this2.refresh()})),(0,tslib_es6.YH)(this,_NightingaleInterproTrack_childResiduesG,createResidueGroup(childGroup),"f"),createResiduePaths({baseG:(0,tslib_es6.Q_)(this,_NightingaleInterproTrack_childResiduesG,"f"),getResidueShape:function getResidueShape(d){return _this2.getResidueShape(d)},getResidueTransform:function getResidueTransform(d){return _this2.getResidueTransform(d)},getResidueFill:function getResidueFill(d){var _a;return _this2.getResidueFill(d,null===(_a=d.feature)||void 0===_a?void 0:_a.expanded)},element:this}),(null===(_d=(0,tslib_es6.Q_)(this,_NightingaleInterproTrack_coverage,"f"))||void 0===_d?void 0:_d.length)&&function createCoverage(_ref){var _a,_b,_c,element=_ref.element,coverage=_ref.coverage;element.accession=(null===(_b=null===(_a=null==element?void 0:element.data)||void 0===_a?void 0:_a[0])||void 0===_b?void 0:_b.accession)||"_";var mask=null===(_c=element.svg)||void 0===_c?void 0:_c.append("defs").append("mask").attr("id","mask-"+element.accession);null==mask||mask.selectAll("rect").data(coverage).enter().append("rect").attr("y",0).attr("height",element.height)}({element:this,coverage:(0,tslib_es6.Q_)(this,_NightingaleInterproTrack_coverage,"f")})}null===(_e=this.svg)||void 0===_e||_e.attr("height",(null===(_f=this.layoutObj)||void 0===_f?void 0:_f.maxYPos)||0),(0,tslib_es6.YH)(this,_NightingaleInterproTrack_haveCreatedFeatures,!0,"f")}}},{key:"getResidueShape",value:function getResidueShape(f){var _a;return this.featureShape.getFeatureShape(this.getSingleBaseWidth(),(null===(_a=this.layoutObj)||void 0===_a?void 0:_a.getFeatureHeight(f.accession+"_"+f.k+"_"+f.i+"_"+f.j))||0,f.end&&f.start?f.end-f.start+1:1,"rectangle")}},{key:"getResidueTransform",value:function getResidueTransform(f){var _a;return"translate("+this.getXFromSeqPosition(f.start||1)+","+(this["margin-top"]+((null===(_a=this.layoutObj)||void 0===_a?void 0:_a.getFeatureYPos(f.accession+"_"+f.k+"_"+f.i+"_"+f.j))||0))+")"}},{key:"getResidueFill",value:function getResidueFill(f,expanded){return expanded?this.getFeatureColor(f):"white"}},{key:"refreshFeatures",value:function refreshFeatures(base){var _this3=this,expanded=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],numberOfSibillings=new Set(base.data().map((function(f){var _a;return null===(_a=f.feature)||void 0===_a?void 0:_a.accession}))).size;base.attr("d",(function(f){var _a;return _this3.featureShape.getFeatureShape(_this3.getSingleBaseWidth(),(null===(_a=_this3.layoutObj)||void 0===_a?void 0:_a.getFeatureHeight(f.feature||""))||0,f.end&&f.start?f.end-f.start+1:1,expanded?_this3.getShape(f.shape?f:f.feature):"rectangle")})).attr("fill",(function(f){return expanded?_this3.getFeatureColor(f.feature):"white"})).attr("opacity",expanded?1:.8/numberOfSibillings).style("stroke",(function(f){return expanded?_this3.getFeatureColor(f.feature):"none"})).attr("transform",(function(f){var _a;return"translate("+_this3.getXFromSeqPosition(f.start||1)+","+(_this3["margin-top"]+((null===(_a=_this3.layoutObj)||void 0===_a?void 0:_a.getFeatureYPos(f.feature))||0))+")"})).style("pointer-events",expanded?"auto":"none")}},{key:"refreshCoverLine",value:function refreshCoverLine(base){var _this4=this,expanded=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];base.attr("x1",(function(f){return _this4.getXFromSeqPosition(f.start||1)})).attr("x2",(function(f){return _this4.getXFromSeqPosition((f.end||0)+1)})).attr("y1",(function(f){var _a,_b;return _this4["margin-top"]+((null===(_a=_this4.layoutObj)||void 0===_a?void 0:_a.getFeatureYPos(f.feature))||0)+((null===(_b=_this4.layoutObj)||void 0===_b?void 0:_b.getFeatureHeight(f.feature))||0)/2})).attr("y2",(function(f){var _a,_b;return _this4["margin-top"]+((null===(_a=_this4.layoutObj)||void 0===_a?void 0:_a.getFeatureYPos(f.feature))||0)+((null===(_b=_this4.layoutObj)||void 0===_b?void 0:_b.getFeatureHeight(f.feature))||0)/2})).attr("stroke",(function(f){return _this4.getFeatureColor(f.feature)})).attr("visibility",expanded?"visible":"hidden")}},{key:"refresh",value:function refresh(){var _a,_b,_c,_d,_e,_f,_g,_this5=this;if((0,tslib_es6.Q_)(this,_NightingaleInterproTrack_haveCreatedFeatures,"f")&&this.layoutObj){if(this.layoutObj.expanded=this.expanded,this.layoutObj.init(this.data,(0,tslib_es6.Q_)(this,_NightingaleInterproTrack_contributors,"f")),this.height=this.layoutObj.maxYPos,this.refreshCoverLine(null===(_a=(0,tslib_es6.Q_)(this,_NightingaleInterproTrack_featuresG,"f"))||void 0===_a?void 0:_a.selectAll("g.location-group line.cover")),this.refreshFeatures(null===(_b=(0,tslib_es6.Q_)(this,_NightingaleInterproTrack_featuresG,"f"))||void 0===_b?void 0:_b.selectAll("g.location-group path.feature")),(0,tslib_es6.Q_)(this,_NightingaleInterproTrack_residuesG,"f")&&refreshResiduePaths({baseG:(0,tslib_es6.Q_)(this,_NightingaleInterproTrack_residuesG,"f"),expanded:this.expanded,getResidueShape:function getResidueShape(d){return _this5.getResidueShape(d)},getResidueTransform:function getResidueTransform(d){return _this5.getResidueTransform(d)},getResidueFill:function getResidueFill(d){return _this5.getResidueFill(d,_this5.expanded)}}),(0,tslib_es6.Q_)(this,_NightingaleInterproTrack_contributors,"f")){var childrenGroup=null===(_c=(0,tslib_es6.Q_)(this,_NightingaleInterproTrack_childrenG,"f"))||void 0===_c?void 0:_c.select("g.children-group");null==childrenGroup||childrenGroup.attr("visibility",this.expanded?"visible":"hidden");var childGroup=null==childrenGroup?void 0:childrenGroup.selectAll("g.child-group"),locationChildrenG=null==childGroup?void 0:childGroup.selectAll("g.child-location-group"),coverLinesChildren=null==locationChildrenG?void 0:locationChildrenG.selectAll("line.cover"),featureChildren=null==locationChildrenG?void 0:locationChildrenG.selectAll("path.child-fragment");this.refreshCoverLine(coverLinesChildren,this.expanded),this.refreshFeatures(featureChildren,this.expanded),null===(_d=(0,tslib_es6.Q_)(this,_NightingaleInterproTrack_childResiduesG,"f"))||void 0===_d||_d.attr("visibility",(function(){return _this5.expanded?"visible":"hidden"})),(0,tslib_es6.Q_)(this,_NightingaleInterproTrack_childResiduesG,"f")&&refreshResiduePaths({baseG:(0,tslib_es6.Q_)(this,_NightingaleInterproTrack_childResiduesG,"f"),expanded:this.expanded,getResidueShape:function getResidueShape(d){return _this5.getResidueShape(d)},getResidueTransform:function getResidueTransform(d){return _this5.getResidueTransform(d)},getResidueFill:function getResidueFill(d){var _a;return _this5.getResidueFill(d,null===(_a=d.feature)||void 0===_a?void 0:_a.expanded)}}),(null===(_e=(0,tslib_es6.Q_)(this,_NightingaleInterproTrack_coverage,"f"))||void 0===_e?void 0:_e.length)&&function refreshCoverage(_ref2){var _a,element=_ref2.element,featuresG=_ref2.featuresG,contributorsLength=_ref2.contributorsLength;null==featuresG||featuresG.attr("mask",element.expanded?null:"url(#mask-"+element.accession+")"),null===(_a=element.svg)||void 0===_a||_a.selectAll("defs mask rect").attr("x",(function(f){return element.getXFromSeqPosition(f.start)})).attr("width",(function(f){return element.getSingleBaseWidth()*(f.end-f.start+1)})).attr("fill","white").attr("opacity",(function(f){return function cheapScale(x){return(x+.3)/1.3}((f.value||0)/(contributorsLength||1))}))}({element:this,featuresG:(0,tslib_es6.Q_)(this,_NightingaleInterproTrack_featuresG,"f"),contributorsLength:null===(_f=(0,tslib_es6.Q_)(this,_NightingaleInterproTrack_contributors,"f"))||void 0===_f?void 0:_f.length})}null===(_g=this.svg)||void 0===_g||_g.attr("height",this.layoutObj.maxYPos),this.updateHighlight()}}}]),NightingaleInterproTrack}(NightingaleTrack$1);_NightingaleInterproTrack_contributors=new WeakMap,_NightingaleInterproTrack_coverage=new WeakMap,_NightingaleInterproTrack_haveCreatedFeatures=new WeakMap,_NightingaleInterproTrack_childrenG=new WeakMap,_NightingaleInterproTrack_featuresG=new WeakMap,_NightingaleInterproTrack_residuesG=new WeakMap,_NightingaleInterproTrack_childResiduesG=new WeakMap,(0,tslib_es6.gn)([(0,decorators.Cb)({type:Boolean})],nightingale_interpro_track_NightingaleInterproTrack.prototype,"expanded",void 0),nightingale_interpro_track_NightingaleInterproTrack=NightingaleInterproTrack_1=(0,tslib_es6.gn)([(0,decorators.Mo)("nightingale-interpro-track")],nightingale_interpro_track_NightingaleInterproTrack)},"./packages/nightingale-navigation/src/index.ts":(__unused_webpack_module,__unused_webpack___webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__("./node_modules/core-js/modules/es.reflect.construct.js"),__webpack_require__("./node_modules/core-js/modules/es.object.create.js"),__webpack_require__("./node_modules/core-js/modules/es.object.define-property.js"),__webpack_require__("./node_modules/core-js/modules/es.reflect.get.js"),__webpack_require__("./node_modules/core-js/modules/es.object.get-own-property-descriptor.js"),__webpack_require__("./node_modules/core-js/modules/es.array.slice.js"),__webpack_require__("./node_modules/core-js/modules/es.weak-map.js"),__webpack_require__("./node_modules/core-js/modules/es.object.to-string.js"),__webpack_require__("./node_modules/core-js/modules/es.string.iterator.js"),__webpack_require__("./node_modules/core-js/modules/es.array.iterator.js"),__webpack_require__("./node_modules/core-js/modules/web.dom-collections.iterator.js"),__webpack_require__("./node_modules/core-js/modules/es.number.constructor.js"),__webpack_require__("./node_modules/core-js/modules/es.object.set-prototype-of.js"),__webpack_require__("./node_modules/core-js/modules/es.function.bind.js"),__webpack_require__("./node_modules/core-js/modules/es.object.get-prototype-of.js");var _templateObject,_NightingaleNavigation_x,_NightingaleNavigation_dontDispatch,_NightingaleNavigation_svg,_NightingaleNavigation_displaystartLabel,_NightingaleNavigation_displayendLabel,_NightingaleNavigation_axis,_NightingaleNavigation_brushG,_NightingaleNavigation_polygon,_NightingaleNavigation_xAxis,_NightingaleNavigation_viewport,_NightingaleNavigation_highlighted,_NightingaleNavigation_margins,tslib_es6=__webpack_require__("./node_modules/tslib/tslib.es6.js"),lit=__webpack_require__("./node_modules/lit/index.js"),decorators=__webpack_require__("./node_modules/lit/decorators.js"),src=__webpack_require__("./node_modules/d3/src/index.js"),nightingale_new_core_src=__webpack_require__("./packages/nightingale-new-core/src/index.ts");function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}function _get(){return _get="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function _get(target,property,receiver){var base=_superPropBase(target,property);if(base){var desc=Object.getOwnPropertyDescriptor(base,property);return desc.get?desc.get.call(arguments.length<3?target:receiver):desc.value}},_get.apply(this,arguments)}function _superPropBase(object,property){for(;!Object.prototype.hasOwnProperty.call(object,property)&&null!==(object=_getPrototypeOf(object)););return object}function _setPrototypeOf(o,p){return _setPrototypeOf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function _setPrototypeOf(o,p){return o.__proto__=p,o},_setPrototypeOf(o,p)}function _createSuper(Derived){var hasNativeReflectConstruct=function _isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function _createSuperInternal(){var result,Super=_getPrototypeOf(Derived);if(hasNativeReflectConstruct){var NewTarget=_getPrototypeOf(this).constructor;result=Reflect.construct(Super,arguments,NewTarget)}else result=Super.apply(this,arguments);return _possibleConstructorReturn(this,result)}}function _possibleConstructorReturn(self,call){if(call&&("object"==typeof call||"function"==typeof call))return call;if(void 0!==call)throw new TypeError("Derived constructors may only return object or undefined");return _assertThisInitialized(self)}function _assertThisInitialized(self){if(void 0===self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return self}function _getPrototypeOf(o){return _getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)},_getPrototypeOf(o)}var nightingale_navigation_NightingaleNavigation=function(_withManager){!function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function");subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:!0,configurable:!0}}),Object.defineProperty(subClass,"prototype",{writable:!1}),superClass&&_setPrototypeOf(subClass,superClass)}(NightingaleNavigation,_withManager);var _super=_createSuper(NightingaleNavigation);function NightingaleNavigation(){var _this;return function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,NightingaleNavigation),_this=_super.call(this),_NightingaleNavigation_x.set(_assertThisInitialized(_this),void 0),_NightingaleNavigation_dontDispatch.set(_assertThisInitialized(_this),void 0),_NightingaleNavigation_svg.set(_assertThisInitialized(_this),void 0),_NightingaleNavigation_displaystartLabel.set(_assertThisInitialized(_this),void 0),_NightingaleNavigation_displayendLabel.set(_assertThisInitialized(_this),void 0),_NightingaleNavigation_axis.set(_assertThisInitialized(_this),void 0),_NightingaleNavigation_brushG.set(_assertThisInitialized(_this),void 0),_NightingaleNavigation_polygon.set(_assertThisInitialized(_this),void 0),_NightingaleNavigation_xAxis.set(_assertThisInitialized(_this),void 0),_NightingaleNavigation_viewport.set(_assertThisInitialized(_this),void 0),_NightingaleNavigation_highlighted.set(_assertThisInitialized(_this),void 0),_NightingaleNavigation_margins.set(_assertThisInitialized(_this),void 0),_this.rulerstart=1,_this["show-highlight"]=!1,(0,tslib_es6.YH)(_assertThisInitialized(_this),_NightingaleNavigation_x,null,"f"),(0,tslib_es6.YH)(_assertThisInitialized(_this),_NightingaleNavigation_dontDispatch,!1,"f"),_this}return function _createClass(Constructor,protoProps,staticProps){return protoProps&&_defineProperties(Constructor.prototype,protoProps),staticProps&&_defineProperties(Constructor,staticProps),Object.defineProperty(Constructor,"prototype",{writable:!1}),Constructor}(NightingaleNavigation,[{key:"createNavRuler",value:function createNavRuler(){var _this2=this;(0,tslib_es6.YH)(this,_NightingaleNavigation_x,(0,src.BYU)().range([this["margin-left"],this.width-this["margin-right"]]).domain([this.rulerstart,this.rulerstart+(this.length||1)]),"f"),(0,tslib_es6.YH)(this,_NightingaleNavigation_svg,(0,src.Ys)(this).selectAll("svg").attr("id","").attr("width",this.width).attr("height",this.height),"f"),(0,tslib_es6.YH)(this,_NightingaleNavigation_xAxis,(0,src.LLu)((0,tslib_es6.Q_)(this,_NightingaleNavigation_x,"f")),"f"),(0,tslib_es6.YH)(this,_NightingaleNavigation_displaystartLabel,(0,tslib_es6.Q_)(this,_NightingaleNavigation_svg,"f").append("text").attr("class","start-label").attr("x",this["margin-left"]).attr("y",this.height-this["margin-bottom"]-2).style("font-family","sans-serif").style("font-size",12),"f"),(0,tslib_es6.YH)(this,_NightingaleNavigation_displayendLabel,(0,tslib_es6.Q_)(this,_NightingaleNavigation_svg,"f").append("text").attr("class","end-label").attr("x",this.width-this["margin-right"]).attr("y",this.height-this["margin-bottom"]-2).attr("text-anchor","end").style("font-family","sans-serif").style("font-size",12),"f"),(0,tslib_es6.YH)(this,_NightingaleNavigation_axis,(0,tslib_es6.Q_)(this,_NightingaleNavigation_svg,"f").append("g").attr("class","x axis").call((0,tslib_es6.Q_)(this,_NightingaleNavigation_xAxis,"f")),"f"),(0,tslib_es6.YH)(this,_NightingaleNavigation_viewport,(0,src.Yud)().extent([[this["margin-left"],0],[this.width-this["margin-right"],.51*this.height]]).on("brush",(function(_ref){var selection=_ref.selection,transform=_ref.transform;selection&&(0,tslib_es6.Q_)(_this2,_NightingaleNavigation_x,"f")&&(_this2["display-start"]=Math.round(100*(0,tslib_es6.Q_)(_this2,_NightingaleNavigation_x,"f").invert(selection[0]))/100,_this2["display-end"]=Math.round(100*(0,tslib_es6.Q_)(_this2,_NightingaleNavigation_x,"f").invert(selection[1]))/100,(0,tslib_es6.Q_)(_this2,_NightingaleNavigation_dontDispatch,"f")||_this2.dispatchEvent(new CustomEvent("change",{detail:{"display-end":_this2["display-end"],"display-start":_this2["display-start"],extra:{transform}},bubbles:!0,cancelable:!0})),_this2.updateLabels(),_this2.updatePolygon())})),"f"),(0,tslib_es6.YH)(this,_NightingaleNavigation_brushG,(0,tslib_es6.Q_)(this,_NightingaleNavigation_svg,"f").append("g").attr("class","brush").call((0,tslib_es6.Q_)(this,_NightingaleNavigation_viewport,"f")),"f"),(0,tslib_es6.Q_)(this,_NightingaleNavigation_brushG,"f").call((0,tslib_es6.Q_)(this,_NightingaleNavigation_viewport,"f").move,[(0,tslib_es6.Q_)(this,_NightingaleNavigation_x,"f").call(this,this.getStart()),(0,tslib_es6.Q_)(this,_NightingaleNavigation_x,"f").call(this,this.getEnd())]),(0,tslib_es6.YH)(this,_NightingaleNavigation_polygon,(0,tslib_es6.Q_)(this,_NightingaleNavigation_svg,"f").append("polygon").attr("class","zoom-polygon").attr("fill","#777").attr("fill-opacity","0.3"),"f"),(0,tslib_es6.YH)(this,_NightingaleNavigation_margins,(0,tslib_es6.Q_)(this,_NightingaleNavigation_svg,"f").append("g").attr("class","margin"),"f"),this.createHighlight(),this.renderD3()}},{key:"createHighlight",value:function createHighlight(){(0,tslib_es6.Q_)(this,_NightingaleNavigation_svg,"f")&&((0,tslib_es6.YH)(this,_NightingaleNavigation_highlighted,(0,tslib_es6.Q_)(this,_NightingaleNavigation_svg,"f").append("g").attr("class","highlighted"),"f"),this.updateHighlight())}},{key:"onWidthChange",value:function onWidthChange(){var _a,_b,_c;(0,tslib_es6.Q_)(this,_NightingaleNavigation_x,"f")&&((0,tslib_es6.Q_)(this,_NightingaleNavigation_x,"f").range([this["margin-left"],this.width-this["margin-right"]]),null===(_a=(0,tslib_es6.Q_)(this,_NightingaleNavigation_svg,"f"))||void 0===_a||_a.attr("width",this.width),null===(_b=(0,tslib_es6.Q_)(this,_NightingaleNavigation_viewport,"f"))||void 0===_b||_b.extent([[this["margin-left"],0],[this.width-this["margin-right"],.51*this.height]]),(0,tslib_es6.Q_)(this,_NightingaleNavigation_viewport,"f")&&(null===(_c=(0,tslib_es6.Q_)(this,_NightingaleNavigation_brushG,"f"))||void 0===_c||_c.call((0,tslib_es6.Q_)(this,_NightingaleNavigation_viewport,"f"))))}},{key:"render",value:function render(){return(0,lit.dy)(_templateObject||(_templateObject=function _taggedTemplateLiteralLoose(strings,raw){return raw||(raw=strings.slice(0)),strings.raw=raw,strings}(['<svg class="container"></svg>'])))}},{key:"updated",value:function updated(changedProperties){changedProperties.has("width")&&this.onWidthChange(),this.renderD3(),_get(_getPrototypeOf(NightingaleNavigation.prototype),"updated",this).call(this,changedProperties)}},{key:"firstUpdated",value:function firstUpdated(){this.createNavRuler()}},{key:"renderD3",value:function renderD3(){(0,tslib_es6.Q_)(this,_NightingaleNavigation_x,"f")&&(0,tslib_es6.Q_)(this,_NightingaleNavigation_axis,"f")&&(0,tslib_es6.Q_)(this,_NightingaleNavigation_xAxis,"f")&&(0,tslib_es6.Q_)(this,_NightingaleNavigation_viewport,"f")&&((0,tslib_es6.Q_)(this,_NightingaleNavigation_x,"f").domain([this.rulerstart,this.rulerstart+(this.length||1)-1]),(0,tslib_es6.Q_)(this,_NightingaleNavigation_axis,"f").call((0,tslib_es6.Q_)(this,_NightingaleNavigation_xAxis,"f")),this.updatePolygon(),this.updateLabels(),(0,tslib_es6.Q_)(this,_NightingaleNavigation_brushG,"f")&&((0,tslib_es6.YH)(this,_NightingaleNavigation_dontDispatch,!0,"f"),(0,tslib_es6.Q_)(this,_NightingaleNavigation_brushG,"f").call((0,tslib_es6.Q_)(this,_NightingaleNavigation_viewport,"f").move,[(0,tslib_es6.Q_)(this,_NightingaleNavigation_x,"f").call(this,this.getStart()),(0,tslib_es6.Q_)(this,_NightingaleNavigation_x,"f").call(this,this.getEnd())]),(0,tslib_es6.YH)(this,_NightingaleNavigation_dontDispatch,!1,"f")),this.updateHighlight(),this.renderMarginOnGroup((0,tslib_es6.Q_)(this,_NightingaleNavigation_margins,"f")))}},{key:"updateHighlight",value:function updateHighlight(){var _this3=this;if((0,tslib_es6.Q_)(this,_NightingaleNavigation_highlighted,"f")){var s1=(0,src.BYU)().domain([this["display-start"]||1,(this["display-end"]||this.length||1)+1]).range([this["margin-left"],this.width-this["margin-right"]]),s2=(0,src.BYU)().domain([this.rulerstart,this.rulerstart+(this.length||1)]).range([this["margin-left"],this.width-this["margin-right"]]),highlighs=(0,tslib_es6.Q_)(this,_NightingaleNavigation_highlighted,"f").selectAll("polygon").data(this["show-highlight"]?this.highlightedRegion.segments:[]);highlighs.enter().append("polygon").attr("class","highlight-polygon").style("pointer-events","none").merge(highlighs).attr("fill",this["highlight-color"]).attr("points",(function(segment){var start=Math.max(1,segment.start),end=Math.min(_this3.length||1,segment.end)+1;return s2(start)+","+_this3.height/2+"\n        "+s2(end)+","+_this3.height/2+"\n        "+s1(end)+","+_this3.height+"\n        "+s1(start)+","+_this3.height})),highlighs.exit().remove();var highlighsRect=(0,tslib_es6.Q_)(this,_NightingaleNavigation_highlighted,"f").selectAll("rect").data(this["show-highlight"]?this.highlightedRegion.segments:[]);highlighsRect.enter().append("rect").attr("class","highlight-rectangle").style("pointer-events","none").merge(highlighsRect).attr("fill",this["highlight-color"]).attr("x",(function(segment){return s2(Math.max(1,segment.start))})).attr("width",(function(segment){return s2(Math.min(_this3.length||1,segment.end)+1)-s2(Math.max(1,segment.start))})).attr("y",this["margin-top"]).attr("height",this.height/2),highlighsRect.exit().remove()}}},{key:"updateLabels",value:function updateLabels(){(0,tslib_es6.Q_)(this,_NightingaleNavigation_displaystartLabel,"f")&&(0,tslib_es6.Q_)(this,_NightingaleNavigation_displaystartLabel,"f").attr("x",this["margin-left"]).text(Math.round(this.getStart())),(0,tslib_es6.Q_)(this,_NightingaleNavigation_displayendLabel,"f")&&(0,tslib_es6.Q_)(this,_NightingaleNavigation_displayendLabel,"f").attr("x",this.width-this["margin-right"]).text(Math.round(this.getEnd()))}},{key:"updatePolygon",value:function updatePolygon(){(0,tslib_es6.Q_)(this,_NightingaleNavigation_polygon,"f")&&(0,tslib_es6.Q_)(this,_NightingaleNavigation_x,"f")&&(0,tslib_es6.Q_)(this,_NightingaleNavigation_polygon,"f").attr("points",(0,tslib_es6.Q_)(this,_NightingaleNavigation_x,"f").call(this,this.getStart())+","+this.height/2+"\n        "+(0,tslib_es6.Q_)(this,_NightingaleNavigation_x,"f").call(this,this.getEnd())+","+this.height/2+"\n        "+(this.width-this["margin-right"])+","+this.height+"\n        "+this["margin-left"]+","+this.height)}},{key:"getStart",value:function getStart(){return this["display-start"]||1}},{key:"getEnd",value:function getEnd(){return((this["display-end"]||0)>0?this["display-end"]:this.length)||1}}]),NightingaleNavigation}((0,nightingale_new_core_src.YD)((0,nightingale_new_core_src.tG)((0,nightingale_new_core_src.vl)((0,nightingale_new_core_src.Ds)((0,nightingale_new_core_src.U6)((0,nightingale_new_core_src.Rn)(nightingale_new_core_src.ZP)))))));_NightingaleNavigation_x=new WeakMap,_NightingaleNavigation_dontDispatch=new WeakMap,_NightingaleNavigation_svg=new WeakMap,_NightingaleNavigation_displaystartLabel=new WeakMap,_NightingaleNavigation_displayendLabel=new WeakMap,_NightingaleNavigation_axis=new WeakMap,_NightingaleNavigation_brushG=new WeakMap,_NightingaleNavigation_polygon=new WeakMap,_NightingaleNavigation_xAxis=new WeakMap,_NightingaleNavigation_viewport=new WeakMap,_NightingaleNavigation_highlighted=new WeakMap,_NightingaleNavigation_margins=new WeakMap,(0,tslib_es6.gn)([(0,decorators.Cb)({type:Number})],nightingale_navigation_NightingaleNavigation.prototype,"rulerstart",void 0),(0,tslib_es6.gn)([(0,decorators.Cb)({type:Boolean})],nightingale_navigation_NightingaleNavigation.prototype,"show-highlight",void 0),nightingale_navigation_NightingaleNavigation=(0,tslib_es6.gn)([(0,decorators.Mo)("nightingale-navigation")],nightingale_navigation_NightingaleNavigation)},"./packages/nightingale-new-core/src/index.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{sQ:()=>bindEvents,y_:()=>decorators_customElementOnce,ZP:()=>nightingale_new_core_src,U6:()=>src_withDimensions,Rn:()=>src_withHighlight,YD:()=>src_withManager,vl:()=>src_withMargin,Ds:()=>src_withPosition,tG:()=>src_withResizable,_5:()=>src_withZoom});__webpack_require__("./node_modules/core-js/modules/es.number.constructor.js"),__webpack_require__("./node_modules/core-js/modules/es.object.set-prototype-of.js"),__webpack_require__("./node_modules/core-js/modules/es.function.bind.js"),__webpack_require__("./node_modules/core-js/modules/es.object.get-prototype-of.js"),__webpack_require__("./node_modules/core-js/modules/es.reflect.construct.js"),__webpack_require__("./node_modules/core-js/modules/es.object.create.js"),__webpack_require__("./node_modules/core-js/modules/es.object.define-property.js");var tslib_es6=__webpack_require__("./node_modules/tslib/tslib.es6.js"),decorators=__webpack_require__("./node_modules/lit/decorators.js");function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){return protoProps&&_defineProperties(Constructor.prototype,protoProps),staticProps&&_defineProperties(Constructor,staticProps),Object.defineProperty(Constructor,"prototype",{writable:!1}),Constructor}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function");subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:!0,configurable:!0}}),Object.defineProperty(subClass,"prototype",{writable:!1}),superClass&&_setPrototypeOf(subClass,superClass)}function _setPrototypeOf(o,p){return _setPrototypeOf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function _setPrototypeOf(o,p){return o.__proto__=p,o},_setPrototypeOf(o,p)}function _createSuper(Derived){var hasNativeReflectConstruct=function _isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function _createSuperInternal(){var result,Super=_getPrototypeOf(Derived);if(hasNativeReflectConstruct){var NewTarget=_getPrototypeOf(this).constructor;result=Reflect.construct(Super,arguments,NewTarget)}else result=Super.apply(this,arguments);return _possibleConstructorReturn(this,result)}}function _possibleConstructorReturn(self,call){if(call&&("object"==typeof call||"function"==typeof call))return call;if(void 0!==call)throw new TypeError("Derived constructors may only return object or undefined");return function _assertThisInitialized(self){if(void 0===self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return self}(self)}function _getPrototypeOf(o){return _getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)},_getPrototypeOf(o)}const src_withDimensions=function withDimensions(superClass){var options=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{width:800,height:100},WithDimensions=function(_superClass){_inherits(WithDimensions,_superClass);var _super=_createSuper(WithDimensions);function WithDimensions(){var _this;return _classCallCheck(this,WithDimensions),(_this=_super.apply(this,arguments)).width=options.width,_this.height=options.height,_this}return _createClass(WithDimensions)}(superClass);return(0,tslib_es6.gn)([(0,decorators.Cb)({type:Number})],WithDimensions.prototype,"width",void 0),(0,tslib_es6.gn)([(0,decorators.Cb)({type:Number})],WithDimensions.prototype,"height",void 0),WithDimensions};function withPosition_defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}function withPosition_createClass(Constructor,protoProps,staticProps){return protoProps&&withPosition_defineProperties(Constructor.prototype,protoProps),staticProps&&withPosition_defineProperties(Constructor,staticProps),Object.defineProperty(Constructor,"prototype",{writable:!1}),Constructor}function withPosition_classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function withPosition_inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function");subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:!0,configurable:!0}}),Object.defineProperty(subClass,"prototype",{writable:!1}),superClass&&withPosition_setPrototypeOf(subClass,superClass)}function withPosition_setPrototypeOf(o,p){return withPosition_setPrototypeOf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function _setPrototypeOf(o,p){return o.__proto__=p,o},withPosition_setPrototypeOf(o,p)}function withPosition_createSuper(Derived){var hasNativeReflectConstruct=function withPosition_isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function _createSuperInternal(){var result,Super=withPosition_getPrototypeOf(Derived);if(hasNativeReflectConstruct){var NewTarget=withPosition_getPrototypeOf(this).constructor;result=Reflect.construct(Super,arguments,NewTarget)}else result=Super.apply(this,arguments);return withPosition_possibleConstructorReturn(this,result)}}function withPosition_possibleConstructorReturn(self,call){if(call&&("object"==typeof call||"function"==typeof call))return call;if(void 0!==call)throw new TypeError("Derived constructors may only return object or undefined");return function withPosition_assertThisInitialized(self){if(void 0===self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return self}(self)}function withPosition_getPrototypeOf(o){return withPosition_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)},withPosition_getPrototypeOf(o)}const src_withPosition=function withPosition(superClass){var options=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{"display-start":1,"display-end":-1,length:0},WithPosition=function(_superClass){withPosition_inherits(WithPosition,_superClass);var _super=withPosition_createSuper(WithPosition);function WithPosition(){var _this;return withPosition_classCallCheck(this,WithPosition),(_this=_super.apply(this,arguments)).length=options.length,_this["display-start"]=options["display-start"],_this["display-end"]=options["display-end"],_this}return withPosition_createClass(WithPosition)}(superClass);return(0,tslib_es6.gn)([(0,decorators.Cb)({type:Number})],WithPosition.prototype,"length",void 0),(0,tslib_es6.gn)([(0,decorators.Cb)({type:Number})],WithPosition.prototype,"display-start",void 0),(0,tslib_es6.gn)([(0,decorators.Cb)({type:Number})],WithPosition.prototype,"display-end",void 0),WithPosition};__webpack_require__("./node_modules/core-js/modules/es.weak-map.js"),__webpack_require__("./node_modules/core-js/modules/es.object.to-string.js"),__webpack_require__("./node_modules/core-js/modules/es.string.iterator.js"),__webpack_require__("./node_modules/core-js/modules/es.array.iterator.js"),__webpack_require__("./node_modules/core-js/modules/web.dom-collections.iterator.js");function withMargin_classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function withMargin_defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}function withMargin_createClass(Constructor,protoProps,staticProps){return protoProps&&withMargin_defineProperties(Constructor.prototype,protoProps),staticProps&&withMargin_defineProperties(Constructor,staticProps),Object.defineProperty(Constructor,"prototype",{writable:!1}),Constructor}function withMargin_inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function");subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:!0,configurable:!0}}),Object.defineProperty(subClass,"prototype",{writable:!1}),superClass&&withMargin_setPrototypeOf(subClass,superClass)}function withMargin_setPrototypeOf(o,p){return withMargin_setPrototypeOf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function _setPrototypeOf(o,p){return o.__proto__=p,o},withMargin_setPrototypeOf(o,p)}function withMargin_createSuper(Derived){var hasNativeReflectConstruct=function withMargin_isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function _createSuperInternal(){var result,Super=withMargin_getPrototypeOf(Derived);if(hasNativeReflectConstruct){var NewTarget=withMargin_getPrototypeOf(this).constructor;result=Reflect.construct(Super,arguments,NewTarget)}else result=Super.apply(this,arguments);return withMargin_possibleConstructorReturn(this,result)}}function withMargin_possibleConstructorReturn(self,call){if(call&&("object"==typeof call||"function"==typeof call))return call;if(void 0!==call)throw new TypeError("Derived constructors may only return object or undefined");return withMargin_assertThisInitialized(self)}function withMargin_assertThisInitialized(self){if(void 0===self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return self}function withMargin_getPrototypeOf(o){return withMargin_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)},withMargin_getPrototypeOf(o)}const src_withMargin=function withMargin(superClass){var _WithMargin_created,options=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{"margin-top":0,"margin-bottom":0,"margin-left":10,"margin-right":10,"margin-color":"#FFFFFFDD"},WithMargin=function(_withDimensions){withMargin_inherits(WithMargin,_withDimensions);var _super=withMargin_createSuper(WithMargin);function WithMargin(){var _this;return withMargin_classCallCheck(this,WithMargin),(_this=_super.apply(this,arguments))["margin-top"]=options["margin-top"],_this["margin-bottom"]=options["margin-bottom"],_this["margin-left"]=options["margin-left"],_this["margin-right"]=options["margin-right"],_this["margin-color"]=options["margin-color"],_WithMargin_created.set(withMargin_assertThisInitialized(_this),!1),_this}return withMargin_createClass(WithMargin,[{key:"getWidthWithMargins",value:function getWidthWithMargins(){return this.width?this.width-this["margin-left"]-this["margin-right"]:0}},{key:"getHeightWithMargins",value:function getHeightWithMargins(){return this.height?this.height-this["margin-top"]-this["margin-bottom"]:0}},{key:"renderMarginOnGroup",value:function renderMarginOnGroup(g){g&&((0,tslib_es6.Q_)(this,_WithMargin_created,"f")||(g.append("rect").style("pointer-events","none").attr("class","margin-left").attr("x",0),g.append("rect").style("pointer-events","none").attr("class","margin-right"),g.append("rect").style("pointer-events","none").attr("class","margin-top").attr("width",this.width).attr("x",0).attr("y",0),g.append("rect").style("pointer-events","none").attr("class","margin-bottom").attr("width",this.width).attr("x",0),(0,tslib_es6.YH)(this,_WithMargin_created,!0,"f")),g.select("rect.margin-left").attr("fill",this["margin-color"]||"#FFFFFFDD").attr("height",this.height).attr("width",this["margin-left"]),g.select("rect.margin-right").attr("fill",this["margin-color"]||"#FFFFFFDD").attr("height",this.height).attr("x",this.width-this["margin-right"]).attr("width",this["margin-right"]),g.select("rect.margin-top").attr("fill",this["margin-color"]||"#FFFFFFDD").attr("height",this["margin-top"]),g.select("rect.margin-bottom").attr("fill",this["margin-color"]||"#FFFFFFDD").attr("y",this.height-this["margin-bottom"]).attr("height",this["margin-bottom"]))}}]),WithMargin}(src_withDimensions(superClass));return _WithMargin_created=new WeakMap,(0,tslib_es6.gn)([(0,decorators.Cb)({type:Number})],WithMargin.prototype,"margin-top",void 0),(0,tslib_es6.gn)([(0,decorators.Cb)({type:Number})],WithMargin.prototype,"margin-bottom",void 0),(0,tslib_es6.gn)([(0,decorators.Cb)({type:Number})],WithMargin.prototype,"margin-left",void 0),(0,tslib_es6.gn)([(0,decorators.Cb)({type:Number})],WithMargin.prototype,"margin-right",void 0),(0,tslib_es6.gn)([(0,decorators.Cb)({type:String})],WithMargin.prototype,"margin-color",void 0),WithMargin};__webpack_require__("./node_modules/core-js/modules/es.array.concat.js"),__webpack_require__("./node_modules/core-js/modules/es.reflect.get.js"),__webpack_require__("./node_modules/core-js/modules/es.object.get-own-property-descriptor.js");function withResizable_classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function withResizable_defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}function _get(){return _get="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function _get(target,property,receiver){var base=_superPropBase(target,property);if(base){var desc=Object.getOwnPropertyDescriptor(base,property);return desc.get?desc.get.call(arguments.length<3?target:receiver):desc.value}},_get.apply(this,arguments)}function _superPropBase(object,property){for(;!Object.prototype.hasOwnProperty.call(object,property)&&null!==(object=withResizable_getPrototypeOf(object)););return object}function withResizable_setPrototypeOf(o,p){return withResizable_setPrototypeOf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function _setPrototypeOf(o,p){return o.__proto__=p,o},withResizable_setPrototypeOf(o,p)}function withResizable_createSuper(Derived){var hasNativeReflectConstruct=function withResizable_isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function _createSuperInternal(){var result,Super=withResizable_getPrototypeOf(Derived);if(hasNativeReflectConstruct){var NewTarget=withResizable_getPrototypeOf(this).constructor;result=Reflect.construct(Super,arguments,NewTarget)}else result=Super.apply(this,arguments);return withResizable_possibleConstructorReturn(this,result)}}function withResizable_possibleConstructorReturn(self,call){if(call&&("object"==typeof call||"function"==typeof call))return call;if(void 0!==call)throw new TypeError("Derived constructors may only return object or undefined");return withResizable_assertThisInitialized(self)}function withResizable_assertThisInitialized(self){if(void 0===self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return self}function withResizable_getPrototypeOf(o){return withResizable_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)},withResizable_getPrototypeOf(o)}const src_withResizable=function withResizable(superClass){var _WithResizable_observer,WithResizable=function(_withDimensions){!function withResizable_inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function");subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:!0,configurable:!0}}),Object.defineProperty(subClass,"prototype",{writable:!1}),superClass&&withResizable_setPrototypeOf(subClass,superClass)}(WithResizable,_withDimensions);var _super=withResizable_createSuper(WithResizable);function WithResizable(){var _this;withResizable_classCallCheck(this,WithResizable);for(var _len=arguments.length,rest=new Array(_len),_key=0;_key<_len;_key++)rest[_key]=arguments[_key];return _this=_super.call.apply(_super,[this].concat(rest)),_WithResizable_observer.set(withResizable_assertThisInitialized(_this),void 0),_this.onResize=_this.onResize.bind(withResizable_assertThisInitialized(_this)),_this.listenForResize=_this.listenForResize.bind(withResizable_assertThisInitialized(_this)),_this}return function withResizable_createClass(Constructor,protoProps,staticProps){return protoProps&&withResizable_defineProperties(Constructor.prototype,protoProps),staticProps&&withResizable_defineProperties(Constructor,staticProps),Object.defineProperty(Constructor,"prototype",{writable:!1}),Constructor}(WithResizable,[{key:"connectedCallback",value:function connectedCallback(){this.listenForResize(),_get(withResizable_getPrototypeOf(WithResizable.prototype),"connectedCallback",this).call(this)}},{key:"disconnectedCallback",value:function disconnectedCallback(){(0,tslib_es6.Q_)(this,_WithResizable_observer,"f")&&(0,tslib_es6.Q_)(this,_WithResizable_observer,"f").unobserve(this),_get(withResizable_getPrototypeOf(WithResizable.prototype),"disconnectedCallback",this).call(this)}},{key:"onResize",value:function onResize(){this.width=this.offsetWidth}},{key:"listenForResize",value:function listenForResize(){(0,tslib_es6.YH)(this,_WithResizable_observer,new ResizeObserver(this.onResize),"f"),(0,tslib_es6.Q_)(this,_WithResizable_observer,"f").observe(this)}}]),WithResizable}(src_withDimensions(superClass));return _WithResizable_observer=new WeakMap,WithResizable};function withManager_classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function withManager_defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}function withManager_get(){return withManager_get="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function _get(target,property,receiver){var base=withManager_superPropBase(target,property);if(base){var desc=Object.getOwnPropertyDescriptor(base,property);return desc.get?desc.get.call(arguments.length<3?target:receiver):desc.value}},withManager_get.apply(this,arguments)}function withManager_superPropBase(object,property){for(;!Object.prototype.hasOwnProperty.call(object,property)&&null!==(object=withManager_getPrototypeOf(object)););return object}function withManager_setPrototypeOf(o,p){return withManager_setPrototypeOf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function _setPrototypeOf(o,p){return o.__proto__=p,o},withManager_setPrototypeOf(o,p)}function withManager_createSuper(Derived){var hasNativeReflectConstruct=function withManager_isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function _createSuperInternal(){var result,Super=withManager_getPrototypeOf(Derived);if(hasNativeReflectConstruct){var NewTarget=withManager_getPrototypeOf(this).constructor;result=Reflect.construct(Super,arguments,NewTarget)}else result=Super.apply(this,arguments);return withManager_possibleConstructorReturn(this,result)}}function withManager_possibleConstructorReturn(self,call){if(call&&("object"==typeof call||"function"==typeof call))return call;if(void 0!==call)throw new TypeError("Derived constructors may only return object or undefined");return function withManager_assertThisInitialized(self){if(void 0===self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return self}(self)}function withManager_getPrototypeOf(o){return withManager_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)},withManager_getPrototypeOf(o)}const src_withManager=function withManager(superClass){var WithManager=function(_superClass){!function withManager_inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function");subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:!0,configurable:!0}}),Object.defineProperty(subClass,"prototype",{writable:!1}),superClass&&withManager_setPrototypeOf(subClass,superClass)}(WithManager,_superClass);var _super=withManager_createSuper(WithManager);function WithManager(){return withManager_classCallCheck(this,WithManager),_super.apply(this,arguments)}return function withManager_createClass(Constructor,protoProps,staticProps){return protoProps&&withManager_defineProperties(Constructor.prototype,protoProps),staticProps&&withManager_defineProperties(Constructor,staticProps),Object.defineProperty(Constructor,"prototype",{writable:!1}),Constructor}(WithManager,[{key:"connectedCallback",value:function connectedCallback(){var _this=this;this.closest("nightingale-manager")&&customElements.whenDefined("nightingale-manager").then((function(){_this.manager=_this.closest("nightingale-manager"),_this.manager&&_this.manager.register(_this)})),withManager_get(withManager_getPrototypeOf(WithManager.prototype),"connectedCallback",this).call(this)}},{key:"disconnectedCallback",value:function disconnectedCallback(){this.manager&&this.manager.unregister(this),withManager_get(withManager_getPrototypeOf(WithManager.prototype),"disconnectedCallback",this).call(this)}}]),WithManager}(superClass);return WithManager};__webpack_require__("./node_modules/core-js/modules/es.array.join.js"),__webpack_require__("./node_modules/core-js/modules/es.array.map.js"),__webpack_require__("./node_modules/core-js/modules/es.string.split.js"),__webpack_require__("./node_modules/core-js/modules/es.regexp.exec.js"),__webpack_require__("./node_modules/core-js/modules/es.number.is-nan.js"),__webpack_require__("./node_modules/core-js/modules/es.array.is-array.js"),__webpack_require__("./node_modules/core-js/modules/es.symbol.js"),__webpack_require__("./node_modules/core-js/modules/es.symbol.description.js"),__webpack_require__("./node_modules/core-js/modules/es.symbol.iterator.js"),__webpack_require__("./node_modules/core-js/modules/es.array.slice.js"),__webpack_require__("./node_modules/core-js/modules/es.function.name.js"),__webpack_require__("./node_modules/core-js/modules/es.array.from.js");function _slicedToArray(arr,i){return function _arrayWithHoles(arr){if(Array.isArray(arr))return arr}(arr)||function _iterableToArrayLimit(arr,i){var _i=null==arr?null:"undefined"!=typeof Symbol&&arr[Symbol.iterator]||arr["@@iterator"];if(null==_i)return;var _s,_e,_arr=[],_n=!0,_d=!1;try{for(_i=_i.call(arr);!(_n=(_s=_i.next()).done)&&(_arr.push(_s.value),!i||_arr.length!==i);_n=!0);}catch(err){_d=!0,_e=err}finally{try{_n||null==_i.return||_i.return()}finally{if(_d)throw _e}}return _arr}(arr,i)||function _unsupportedIterableToArray(o,minLen){if(!o)return;if("string"==typeof o)return _arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);"Object"===n&&o.constructor&&(n=o.constructor.name);if("Map"===n||"Set"===n)return Array.from(o);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return _arrayLikeToArray(o,minLen)}(arr,i)||function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _arrayLikeToArray(arr,len){(null==len||len>arr.length)&&(len=arr.length);for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2}function Region_classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function Region_defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}var Region=function(){function Region(){var _ref=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},_ref$min=_ref.min,min=void 0===_ref$min?-1/0:_ref$min,_ref$max=_ref.max,max=void 0===_ref$max?1/0:_ref$max;Region_classCallCheck(this,Region),this.segments=[],this.max=max,this.min=min,this.regionString=null}return function Region_createClass(Constructor,protoProps,staticProps){return protoProps&&Region_defineProperties(Constructor.prototype,protoProps),staticProps&&Region_defineProperties(Constructor,staticProps),Object.defineProperty(Constructor,"prototype",{writable:!1}),Constructor}(Region,[{key:"encode",value:function encode(){var _this=this,full=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return this.segments.map((function(_ref2){var start=_ref2.start,end=_ref2.end;return full?start+":"+end:(start===_this.min?"":start)+":"+(end===_this.max?"":end)})).join(",")}},{key:"decode",value:function decode(regionString){var _this2=this;void 0!==regionString&&(this.regionString=regionString),this.regionString?this.segments=this.regionString.split(",").map((function(region){var _region$split2=_slicedToArray(region.split(":"),3),_start=_region$split2[0],_end=_region$split2[1];if(void 0!==_region$split2[2])throw new Error("there should be at most 1 ':' per region. Region: "+region);var start=_start?Number(_start):_this2.min,end=_end?Number(_end):_this2.max;if(start>end){var _ref3=[end,start];start=_ref3[0],end=_ref3[1]}if(start<_this2.min&&(start=_this2.min),end>_this2.max&&(end=_this2.max),Number.isNaN(start))throw new Error("The parsed value of "+_start+" is NaN. Region: "+region);if(Number.isNaN(end))throw new Error("The parsed value of "+_end+" is NaN. Region: "+region);return{start,end}})):this.segments=[]}}]),Region}();function withHighlight_classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function withHighlight_defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}function withHighlight_createClass(Constructor,protoProps,staticProps){return protoProps&&withHighlight_defineProperties(Constructor.prototype,protoProps),staticProps&&withHighlight_defineProperties(Constructor,staticProps),Object.defineProperty(Constructor,"prototype",{writable:!1}),Constructor}function withHighlight_get(){return withHighlight_get="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function _get(target,property,receiver){var base=withHighlight_superPropBase(target,property);if(base){var desc=Object.getOwnPropertyDescriptor(base,property);return desc.get?desc.get.call(arguments.length<3?target:receiver):desc.value}},withHighlight_get.apply(this,arguments)}function withHighlight_superPropBase(object,property){for(;!Object.prototype.hasOwnProperty.call(object,property)&&null!==(object=withHighlight_getPrototypeOf(object)););return object}function withHighlight_inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function");subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:!0,configurable:!0}}),Object.defineProperty(subClass,"prototype",{writable:!1}),superClass&&withHighlight_setPrototypeOf(subClass,superClass)}function withHighlight_setPrototypeOf(o,p){return withHighlight_setPrototypeOf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function _setPrototypeOf(o,p){return o.__proto__=p,o},withHighlight_setPrototypeOf(o,p)}function withHighlight_createSuper(Derived){var hasNativeReflectConstruct=function withHighlight_isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function _createSuperInternal(){var result,Super=withHighlight_getPrototypeOf(Derived);if(hasNativeReflectConstruct){var NewTarget=withHighlight_getPrototypeOf(this).constructor;result=Reflect.construct(Super,arguments,NewTarget)}else result=Super.apply(this,arguments);return withHighlight_possibleConstructorReturn(this,result)}}function withHighlight_possibleConstructorReturn(self,call){if(call&&("object"==typeof call||"function"==typeof call))return call;if(void 0!==call)throw new TypeError("Derived constructors may only return object or undefined");return withHighlight_assertThisInitialized(self)}function withHighlight_assertThisInitialized(self){if(void 0===self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return self}function withHighlight_getPrototypeOf(o){return withHighlight_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)},withHighlight_getPrototypeOf(o)}var combineRegions=function combineRegions(region1,region2){return region1?region2?region1+","+region2:region1:region2};const src_withHighlight=function withHighlight(superClass){var _WithHighlight_fixedHighlight,options=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{highlight:null,"highlight-color":"#FFEB3B66"},WithHighlight=function(_superClass){withHighlight_inherits(WithHighlight,_superClass);var _super=withHighlight_createSuper(WithHighlight);function WithHighlight(){var _this;withHighlight_classCallCheck(this,WithHighlight);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++)args[_key]=arguments[_key];return(_this=_super.call.apply(_super,[this].concat(args))).highlight=options.highlight,_this["highlight-color"]=options["highlight-color"],_WithHighlight_fixedHighlight.set(withHighlight_assertThisInitialized(_this),void 0),_this.highlightedRegion=new Region({min:1}),(0,tslib_es6.YH)(withHighlight_assertThisInitialized(_this),_WithHighlight_fixedHighlight,null,"f"),_this}return withHighlight_createClass(WithHighlight,[{key:"fixedHighlight",set:function set(value){(0,tslib_es6.YH)(this,_WithHighlight_fixedHighlight,value,"f"),this.highlightedRegion.decode(combineRegions(this.highlight||"",(0,tslib_es6.Q_)(this,_WithHighlight_fixedHighlight,"f")||"")),this.updateHighlight()}},{key:"attributeChangedCallback",value:function attributeChangedCallback(name,oldValue,newValue){withHighlight_get(withHighlight_getPrototypeOf(WithHighlight.prototype),"attributeChangedCallback",this).call(this,name,oldValue,newValue),"null"===newValue&&(newValue=null),oldValue!==newValue&&("length"===name&&(this.highlightedRegion.max=Number(newValue)),"highlight"===name&&this.highlightedRegion.decode(combineRegions(newValue||"",(0,tslib_es6.Q_)(this,_WithHighlight_fixedHighlight,"f")||"")))}},{key:"updateHighlight",value:function updateHighlight(){}}]),WithHighlight}(superClass);return _WithHighlight_fixedHighlight=new WeakMap,(0,tslib_es6.gn)([(0,decorators.Cb)({type:String})],WithHighlight.prototype,"highlight",void 0),(0,tslib_es6.gn)([(0,decorators.Cb)({type:String})],WithHighlight.prototype,"highlight-color",void 0),WithHighlight};__webpack_require__("./node_modules/core-js/modules/es.array.includes.js");var src=__webpack_require__("./node_modules/d3/src/index.js");function withZoom_slicedToArray(arr,i){return function withZoom_arrayWithHoles(arr){if(Array.isArray(arr))return arr}(arr)||function withZoom_iterableToArrayLimit(arr,i){var _i=null==arr?null:"undefined"!=typeof Symbol&&arr[Symbol.iterator]||arr["@@iterator"];if(null==_i)return;var _s,_e,_arr=[],_n=!0,_d=!1;try{for(_i=_i.call(arr);!(_n=(_s=_i.next()).done)&&(_arr.push(_s.value),!i||_arr.length!==i);_n=!0);}catch(err){_d=!0,_e=err}finally{try{_n||null==_i.return||_i.return()}finally{if(_d)throw _e}}return _arr}(arr,i)||function withZoom_unsupportedIterableToArray(o,minLen){if(!o)return;if("string"==typeof o)return withZoom_arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);"Object"===n&&o.constructor&&(n=o.constructor.name);if("Map"===n||"Set"===n)return Array.from(o);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return withZoom_arrayLikeToArray(o,minLen)}(arr,i)||function withZoom_nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function withZoom_arrayLikeToArray(arr,len){(null==len||len>arr.length)&&(len=arr.length);for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2}function withZoom_classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function withZoom_defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}function withZoom_get(){return withZoom_get="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function _get(target,property,receiver){var base=withZoom_superPropBase(target,property);if(base){var desc=Object.getOwnPropertyDescriptor(base,property);return desc.get?desc.get.call(arguments.length<3?target:receiver):desc.value}},withZoom_get.apply(this,arguments)}function withZoom_superPropBase(object,property){for(;!Object.prototype.hasOwnProperty.call(object,property)&&null!==(object=withZoom_getPrototypeOf(object)););return object}function withZoom_setPrototypeOf(o,p){return withZoom_setPrototypeOf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function _setPrototypeOf(o,p){return o.__proto__=p,o},withZoom_setPrototypeOf(o,p)}function withZoom_createSuper(Derived){var hasNativeReflectConstruct=function withZoom_isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function _createSuperInternal(){var result,Super=withZoom_getPrototypeOf(Derived);if(hasNativeReflectConstruct){var NewTarget=withZoom_getPrototypeOf(this).constructor;result=Reflect.construct(Super,arguments,NewTarget)}else result=Super.apply(this,arguments);return withZoom_possibleConstructorReturn(this,result)}}function withZoom_possibleConstructorReturn(self,call){if(call&&("object"==typeof call||"function"==typeof call))return call;if(void 0!==call)throw new TypeError("Derived constructors may only return object or undefined");return withZoom_assertThisInitialized(self)}function withZoom_assertThisInitialized(self){if(void 0===self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return self}function withZoom_getPrototypeOf(o){return withZoom_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)},withZoom_getPrototypeOf(o)}var ATTRIBUTES_THAT_TRIGGER_REFRESH=["length","width","height"];const src_withZoom=function withZoom(superClass){var WithZoom=function(_withMargin){!function withZoom_inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function");subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:!0,configurable:!0}}),Object.defineProperty(subClass,"prototype",{writable:!1}),superClass&&withZoom_setPrototypeOf(subClass,superClass)}(WithZoom,_withMargin);var _super=withZoom_createSuper(WithZoom);function WithZoom(){var _this;withZoom_classCallCheck(this,WithZoom);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++)args[_key]=arguments[_key];(_this=_super.call.apply(_super,[this].concat(args)))._updateScaleDomain=_this._updateScaleDomain.bind(withZoom_assertThisInitialized(_this)),_this._initZoom=_this._initZoom.bind(withZoom_assertThisInitialized(_this)),_this.zoomed=_this.zoomed.bind(withZoom_assertThisInitialized(_this)),_this._applyZoomTranslation=_this.applyZoomTranslation.bind(withZoom_assertThisInitialized(_this));var aboutToApply=!1;return _this.applyZoomTranslation=function(){aboutToApply||(aboutToApply=!0,requestAnimationFrame((function(){aboutToApply=!1,_this._applyZoomTranslation()})))},_this}return function withZoom_createClass(Constructor,protoProps,staticProps){return protoProps&&withZoom_defineProperties(Constructor.prototype,protoProps),staticProps&&withZoom_defineProperties(Constructor,staticProps),Object.defineProperty(Constructor,"prototype",{writable:!1}),Constructor}(WithZoom,[{key:"connectedCallback",value:function connectedCallback(){this._updateScaleDomain(),this.xScale&&(this._originXScale=this.xScale.copy()),this._initZoom(),withZoom_get(withZoom_getPrototypeOf(WithZoom.prototype),"connectedCallback",this).call(this)}},{key:"disconnectedCallback",value:function disconnectedCallback(){withZoom_get(withZoom_getPrototypeOf(WithZoom.prototype),"disconnectedCallback",this).call(this)}},{key:"xScale",get:function get(){return this._xScale},set:function set(xScale){this._xScale=xScale}},{key:"zoom",get:function get(){return this._zoom}},{key:"svg",get:function get(){return this._svg},set:function set(svg){svg&&this._zoom&&(this._svg=svg,svg.call(this._zoom),this.applyZoomTranslation())}},{key:"_updateScaleDomain",value:function _updateScaleDomain(){this.xScale=(0,src.BYU)().domain([1,(this.length||0)+1]).range([0,this.getWidthWithMargins()])}},{key:"_initZoom",value:function _initZoom(){this._zoom=(0,src.sPX)().scaleExtent([1,1/0]).translateExtent([[0,0],[this.getWidthWithMargins(),0]]).extent([[0,0],[this.getWidthWithMargins(),0]]).on("zoom",this.zoomed)}},{key:"attributeChangedCallback",value:function attributeChangedCallback(name,oldValue,newValue){var _a;(withZoom_get(withZoom_getPrototypeOf(WithZoom.prototype),"attributeChangedCallback",this).call(this,name,oldValue,newValue),this.zoom)&&(oldValue!==("null"===newValue?null:newValue)&&(ATTRIBUTES_THAT_TRIGGER_REFRESH.includes(name)&&(this._updateScaleDomain(),this._originXScale=null===(_a=this.xScale)||void 0===_a?void 0:_a.copy()),this.applyZoomTranslation()))}},{key:"zoomed",value:function zoomed(d3Event){var _a;this._originXScale&&(this.xScale=d3Event.transform.rescaleX(this._originXScale));var _ref2=withZoom_slicedToArray((null===(_a=null==this?void 0:this.xScale)||void 0===_a?void 0:_a.domain())||[0,0],2),start=_ref2[0],end=_ref2[1];!this.dontDispatch&&this.xScale&&this.dispatchEvent(new CustomEvent("change",{detail:{"display-start":Math.max(1,start),"display-end":Math.min(this.length||0,Math.max(end-1,start+1))},bubbles:!0,cancelable:!0}))}},{key:"applyZoomTranslation",value:function applyZoomTranslation(){if(this.svg&&this._originXScale){var k=Math.max(1,(this.length||0)/(1+(this["display-end"]||0)-(this["display-start"]||0))),dx=-this._originXScale(this["display-start"]||0);this.dontDispatch=!0,this.zoom&&this.svg.call(this.zoom.transform,src.CRH.scale(k).translate(dx,0)),this.dontDispatch=!1,this.zoomRefreshed()}}},{key:"zoomRefreshed",value:function zoomRefreshed(){withZoom_get(withZoom_getPrototypeOf(WithZoom.prototype),"render",this).call(this)}},{key:"render",value:function render(){return this.applyZoomTranslation(),withZoom_get(withZoom_getPrototypeOf(WithZoom.prototype),"render",this).call(this)}},{key:"getXFromSeqPosition",value:function getXFromSeqPosition(position){return this.xScale?this["margin-left"]+this.xScale(position):-1}},{key:"getSingleBaseWidth",value:function getSingleBaseWidth(){return this.xScale?this.xScale(2)-this.xScale(1):-1}}]),WithZoom}(src_withMargin(src_withPosition(src_withDimensions(superClass))));return WithZoom};function createEvent(type){var feature=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,withHighlight=arguments.length>2&&void 0!==arguments[2]&&arguments[2],withId=arguments.length>3&&void 0!==arguments[3]&&arguments[3],start=arguments.length>4?arguments[4]:void 0,end=arguments.length>5?arguments[5]:void 0,target=arguments.length>6?arguments[6]:void 0,event=arguments.length>7?arguments[7]:void 0,element=arguments.length>8?arguments[8]:void 0;feature&&(feature=(null==feature?void 0:feature.feature)||feature);var detail={eventType:type,feature,target,parentEvent:event};return withHighlight&&((null==feature?void 0:feature.fragments)?detail.highlight=((null==feature?void 0:feature.fragments)||[]).map((function(fr){return fr.start+":"+fr.end})).join(","):(null==event?void 0:event.shiftKey)&&(null==element?void 0:element.highlight)?detail.highlight=element.highlight+","+start+":"+end:detail.highlight=start&&end?start+":"+end:void 0),withId&&(detail.selectedId=null==feature?void 0:feature.protvistaFeatureId),new CustomEvent("change",{detail,bubbles:!0,cancelable:!0})}function bindEvents(feature,element){feature.on("mouseover",(function(event,datum){var _a,_b;element.dispatchEvent(createEvent("mouseover",datum,"onmouseover"===element.getAttribute("highlight-event"),!1,null!==(_a=datum.start)&&void 0!==_a?_a:datum.position,null!==(_b=datum.end)&&void 0!==_b?_b:datum.position,this,event))})).on("mouseout",(function(){element.dispatchEvent(createEvent("mouseout",null,"onmouseover"===element.getAttribute("highlight-event")))})).on("click",(function(event,datum){var _a,_b;element.dispatchEvent(createEvent("click",datum,"onclick"===element.getAttribute("highlight-event"),!0,null!==(_a=datum.start)&&void 0!==_a?_a:datum.position,null!==(_b=datum.end)&&void 0!==_b?_b:datum.position,this,event,element))}))}const decorators_customElementOnce=function customElementOnce(tagName){return function(classOrDescriptor){window.customElements.get(tagName)||(0,decorators.Mo)(tagName)(classOrDescriptor)}};function nightingale_base_element_classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function nightingale_base_element_defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}function nightingale_base_element_setPrototypeOf(o,p){return nightingale_base_element_setPrototypeOf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function _setPrototypeOf(o,p){return o.__proto__=p,o},nightingale_base_element_setPrototypeOf(o,p)}function nightingale_base_element_createSuper(Derived){var hasNativeReflectConstruct=function nightingale_base_element_isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function _createSuperInternal(){var result,Super=nightingale_base_element_getPrototypeOf(Derived);if(hasNativeReflectConstruct){var NewTarget=nightingale_base_element_getPrototypeOf(this).constructor;result=Reflect.construct(Super,arguments,NewTarget)}else result=Super.apply(this,arguments);return nightingale_base_element_possibleConstructorReturn(this,result)}}function nightingale_base_element_possibleConstructorReturn(self,call){if(call&&("object"==typeof call||"function"==typeof call))return call;if(void 0!==call)throw new TypeError("Derived constructors may only return object or undefined");return function nightingale_base_element_assertThisInitialized(self){if(void 0===self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return self}(self)}function nightingale_base_element_getPrototypeOf(o){return nightingale_base_element_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)},nightingale_base_element_getPrototypeOf(o)}const nightingale_new_core_src=function(_LitElement){!function nightingale_base_element_inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function");subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:!0,configurable:!0}}),Object.defineProperty(subClass,"prototype",{writable:!1}),superClass&&nightingale_base_element_setPrototypeOf(subClass,superClass)}(NightingaleElement,_LitElement);var _super=nightingale_base_element_createSuper(NightingaleElement);function NightingaleElement(){return nightingale_base_element_classCallCheck(this,NightingaleElement),_super.apply(this,arguments)}return function nightingale_base_element_createClass(Constructor,protoProps,staticProps){return protoProps&&nightingale_base_element_defineProperties(Constructor.prototype,protoProps),staticProps&&nightingale_base_element_defineProperties(Constructor,staticProps),Object.defineProperty(Constructor,"prototype",{writable:!1}),Constructor}(NightingaleElement,[{key:"createRenderRoot",value:function createRenderRoot(){return this}}]),NightingaleElement}(__webpack_require__("./node_modules/lit/index.js").oi)},"./packages/nightingale-track/src/index.ts":(__unused_webpack_module,__unused_webpack___webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__("./node_modules/core-js/modules/es.reflect.construct.js"),__webpack_require__("./node_modules/core-js/modules/es.object.create.js"),__webpack_require__("./node_modules/core-js/modules/es.object.define-property.js"),__webpack_require__("./node_modules/core-js/modules/es.reflect.get.js"),__webpack_require__("./node_modules/core-js/modules/es.object.get-own-property-descriptor.js"),__webpack_require__("./node_modules/core-js/modules/es.array.slice.js"),__webpack_require__("./node_modules/core-js/modules/es.array.includes.js"),__webpack_require__("./node_modules/core-js/modules/es.string.starts-with.js"),__webpack_require__("./node_modules/core-js/modules/es.array.fill.js"),__webpack_require__("./node_modules/core-js/modules/es.array.map.js"),__webpack_require__("./node_modules/core-js/modules/es.object.assign.js"),__webpack_require__("./node_modules/core-js/modules/es.array.reduce.js"),__webpack_require__("./node_modules/core-js/modules/es.array.concat.js"),__webpack_require__("./node_modules/core-js/modules/es.weak-map.js"),__webpack_require__("./node_modules/core-js/modules/es.object.to-string.js"),__webpack_require__("./node_modules/core-js/modules/es.string.iterator.js"),__webpack_require__("./node_modules/core-js/modules/es.array.iterator.js"),__webpack_require__("./node_modules/core-js/modules/web.dom-collections.iterator.js"),__webpack_require__("./node_modules/core-js/modules/es.object.set-prototype-of.js"),__webpack_require__("./node_modules/core-js/modules/es.function.bind.js"),__webpack_require__("./node_modules/core-js/modules/es.object.get-prototype-of.js");var _FeatureShape_instances,_FeatureShape_ftLength,_FeatureShape_ftHeight,_FeatureShape_ftWidth,_FeatureShape_getMiddleLine,_FeatureShape_getBrokenEnd,_FeatureShape_getBrokenStart,tslib_es6=__webpack_require__("./node_modules/tslib/tslib.es6.js"),src=__webpack_require__("./node_modules/d3/src/index.js"),nightingale_new_core_src=__webpack_require__("./packages/nightingale-new-core/src/index.ts"),lit=__webpack_require__("./node_modules/lit/index.js"),decorators=__webpack_require__("./node_modules/lit/decorators.js");__webpack_require__("./node_modules/core-js/modules/es.weak-set.js");function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}var FeatureShape=function(){function FeatureShape(){!function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,FeatureShape),_FeatureShape_instances.add(this),_FeatureShape_ftLength.set(this,1),_FeatureShape_ftHeight.set(this,1),_FeatureShape_ftWidth.set(this,1)}return function _createClass(Constructor,protoProps,staticProps){return protoProps&&_defineProperties(Constructor.prototype,protoProps),staticProps&&_defineProperties(Constructor,staticProps),Object.defineProperty(Constructor,"prototype",{writable:!1}),Constructor}(FeatureShape,[{key:"shape2function",value:function shape2function(shape){var _this=this;switch(shape){case"rectangle":default:return function(){return _this.rectangle()};case"roundRectangle":return function(){return _this.roundRectangle()};case"line":return function(){return _this.line()};case"bridge":return function(){return _this.bridge()};case"diamond":return function(){return _this.diamond()};case"chevron":return function(){return _this.chevron()};case"catFace":return function(){return _this.catFace()};case"triangle":return function(){return _this.triangle()};case"wave":return function(){return _this.wave()};case"hexagon":return function(){return _this.hexagon()};case"pentagon":return function(){return _this.pentagon()};case"circle":return function(){return _this.circle()};case"arrow":return function(){return _this.arrow()};case"doubleBar":return function(){return _this.doubleBar()};case"discontinuosStart":return function(){return _this.discontinuosStart()};case"discontinuos":return function(){return _this.discontinuos()};case"discontinuosEnd":return function(){return _this.discontinuosEnd()};case"helix":return function(){return _this.helix()};case"strand":return function(){return _this.strand()}}}},{key:"getFeatureShape",value:function getFeatureShape(aaWidth,ftHeight,ftLength,shape){return shape=shape||"rectangle",(0,tslib_es6.YH)(this,_FeatureShape_ftLength,ftLength,"f"),(0,tslib_es6.YH)(this,_FeatureShape_ftHeight,ftHeight,"f"),(0,tslib_es6.YH)(this,_FeatureShape_ftWidth,aaWidth*ftLength,"f"),this.shape2function(shape)()}},{key:"rectangle",value:function rectangle(){return"M0,0L"+(0,tslib_es6.Q_)(this,_FeatureShape_ftWidth,"f")+",0L"+(0,tslib_es6.Q_)(this,_FeatureShape_ftWidth,"f")+","+(0,tslib_es6.Q_)(this,_FeatureShape_ftHeight,"f")+"L0,"+(0,tslib_es6.Q_)(this,_FeatureShape_ftHeight,"f")+"Z"}},{key:"roundRectangle",value:function roundRectangle(){return"M6,0h"+((0,tslib_es6.Q_)(this,_FeatureShape_ftWidth,"f")-12)+",0a6,6 0 0 1 6,6v"+((0,tslib_es6.Q_)(this,_FeatureShape_ftHeight,"f")-12)+"a6,6 0 0 1 "+"-6,6h"+(12-(0,tslib_es6.Q_)(this,_FeatureShape_ftWidth,"f"))+"a6,6 0 0 1 "+"-6,"+"-6v"+(12-(0,tslib_es6.Q_)(this,_FeatureShape_ftHeight,"f"))+"a6,6 0 0 1 6,"+"-6Z"}},{key:"line",value:function line(){return"M0,"+(0,tslib_es6.Q_)(this,_FeatureShape_ftHeight,"f")/2+" L"+(0,tslib_es6.Q_)(this,_FeatureShape_ftWidth,"f")+","+(0,tslib_es6.Q_)(this,_FeatureShape_ftHeight,"f")/2}},{key:"bridge",value:function bridge(){return 1!==(0,tslib_es6.Q_)(this,_FeatureShape_ftLength,"f")?"M0,"+(0,tslib_es6.Q_)(this,_FeatureShape_ftHeight,"f")+"L0,0L"+(0,tslib_es6.Q_)(this,_FeatureShape_ftWidth,"f")+",0L"+(0,tslib_es6.Q_)(this,_FeatureShape_ftWidth,"f")+","+(0,tslib_es6.Q_)(this,_FeatureShape_ftHeight,"f")+"L"+(0,tslib_es6.Q_)(this,_FeatureShape_ftWidth,"f")+",2L0,2Z":"M0,"+(0,tslib_es6.Q_)(this,_FeatureShape_ftHeight,"f")+"L0,"+(0,tslib_es6.Q_)(this,_FeatureShape_ftHeight,"f")/2+"L"+(0,tslib_es6.Q_)(this,_FeatureShape_ftWidth,"f")/2+","+(0,tslib_es6.Q_)(this,_FeatureShape_ftHeight,"f")/2+"L"+(0,tslib_es6.Q_)(this,_FeatureShape_ftWidth,"f")/2+",0L"+(0,tslib_es6.Q_)(this,_FeatureShape_ftWidth,"f")/2+","+(0,tslib_es6.Q_)(this,_FeatureShape_ftHeight,"f")/2+"L"+(0,tslib_es6.Q_)(this,_FeatureShape_ftWidth,"f")+","+(0,tslib_es6.Q_)(this,_FeatureShape_ftHeight,"f")/2+"L"+(0,tslib_es6.Q_)(this,_FeatureShape_ftWidth,"f")+","+(0,tslib_es6.Q_)(this,_FeatureShape_ftHeight,"f")+"Z"}},{key:"diamond",value:function diamond(){var m=(0,tslib_es6.Q_)(this,_FeatureShape_ftWidth,"f")/2,shape="M"+m+",0L"+(m+5)+",5L"+m+",10L"+(m-5)+",5";return 1!==(0,tslib_es6.Q_)(this,_FeatureShape_ftLength,"f")?shape+(0,tslib_es6.Q_)(this,_FeatureShape_instances,"m",_FeatureShape_getMiddleLine).call(this,5):shape+"Z"}},{key:"chevron",value:function chevron(){var m=(0,tslib_es6.Q_)(this,_FeatureShape_ftWidth,"f")/2,shape="M"+m+",5L"+(5+m)+",0L"+(5+m)+",5L"+m+",10L"+(-5+m)+",5L"+(-5+m)+",0";return 1!==(0,tslib_es6.Q_)(this,_FeatureShape_ftLength,"f")?shape+"L"+m+",5"+(0,tslib_es6.Q_)(this,_FeatureShape_instances,"m",_FeatureShape_getMiddleLine).call(this,5)+"Z":shape+"Z"}},{key:"catFace",value:function catFace(){var m=(0,tslib_es6.Q_)(this,_FeatureShape_ftWidth,"f")/2,shape="M"+(-5+m)+",0L"+(-5+m)+",6L"+(-2+m)+",10L"+(2+m)+",10L"+(5+m)+",6L"+(5+m)+",0L"+(2+m)+",4L"+(-2+m)+",4";return 1!==(0,tslib_es6.Q_)(this,_FeatureShape_ftLength,"f")?shape+"M"+m+",0"+(0,tslib_es6.Q_)(this,_FeatureShape_instances,"m",_FeatureShape_getMiddleLine).call(this,5)+"Z":shape+"Z"}},{key:"triangle",value:function triangle(){var m=(0,tslib_es6.Q_)(this,_FeatureShape_ftWidth,"f")/2,shape="M"+m+",0L"+(5+m)+",10L"+(-5+m)+",10";return 1!==(0,tslib_es6.Q_)(this,_FeatureShape_ftLength,"f")?shape+"L"+m+",0"+(0,tslib_es6.Q_)(this,_FeatureShape_instances,"m",_FeatureShape_getMiddleLine).call(this,5)+"Z":shape+"Z"}},{key:"wave",value:function wave(){var m=(0,tslib_es6.Q_)(this,_FeatureShape_ftWidth,"f")/2,shape="M"+(-5+m)+",5A2.5,5 0 1,1 "+m+",5A2.5,5 0 1,0 "+(5+m)+",5";return 1!==(0,tslib_es6.Q_)(this,_FeatureShape_ftLength,"f")?shape+(0,tslib_es6.Q_)(this,_FeatureShape_instances,"m",_FeatureShape_getMiddleLine).call(this,5)+"Z":shape+"Z"}},{key:"getPolygon",value:function getPolygon(sidesNumber){for(var polygon="M ",m=(0,tslib_es6.Q_)(this,_FeatureShape_ftWidth,"f")/2,i=0;i<sidesNumber;i++)polygon+=5*Math.cos(2*Math.PI*i/sidesNumber)+m+","+(5*Math.sin(2*Math.PI*i/sidesNumber)+5)+" ";return 1!==(0,tslib_es6.Q_)(this,_FeatureShape_ftLength,"f")?polygon+" "+(5*Math.cos(0)+m)+","+(5*Math.sin(0)+5)+" "+(0,tslib_es6.Q_)(this,_FeatureShape_instances,"m",_FeatureShape_getMiddleLine).call(this,5)+"Z":polygon+"Z"}},{key:"hexagon",value:function hexagon(){return this.getPolygon(6)}},{key:"pentagon",value:function pentagon(){return this.getPolygon(5)}},{key:"circle",value:function circle(){var m=(0,tslib_es6.Q_)(this,_FeatureShape_ftWidth,"f")/2,r=Math.sqrt(10/Math.PI),shape="M"+m+",0A"+r+","+r+" 0 1,1 "+m+",10A"+r+","+r+" 0 1,1 "+m+",0";return 1!==(0,tslib_es6.Q_)(this,_FeatureShape_ftLength,"f")?shape+(0,tslib_es6.Q_)(this,_FeatureShape_instances,"m",_FeatureShape_getMiddleLine).call(this,5)+"Z":shape+"Z"}},{key:"arrow",value:function arrow(){var m=(0,tslib_es6.Q_)(this,_FeatureShape_ftWidth,"f")/2,shape="M"+m+",0L"+(-1+m)+",0L"+(-5+m)+",4L"+(-1+m)+","+(0,tslib_es6.Q_)(this,_FeatureShape_ftHeight,"f")+"L"+m+","+(0,tslib_es6.Q_)(this,_FeatureShape_ftHeight,"f")+"L"+(4+m)+",4";return 1!==(0,tslib_es6.Q_)(this,_FeatureShape_ftLength,"f")?shape+"L"+m+",0"+(0,tslib_es6.Q_)(this,_FeatureShape_instances,"m",_FeatureShape_getMiddleLine).call(this,5)+"Z":shape+"Z"}},{key:"doubleBar",value:function doubleBar(){var m=(0,tslib_es6.Q_)(this,_FeatureShape_ftWidth,"f")/2,shape="M"+m+",0L"+(-5+m)+",10L"+m+",10L"+(5+m)+",0";return 1!==(0,tslib_es6.Q_)(this,_FeatureShape_ftLength,"f")?shape+"L"+m+",0"+(0,tslib_es6.Q_)(this,_FeatureShape_instances,"m",_FeatureShape_getMiddleLine).call(this,5)+"Z":shape+"Z"}},{key:"discontinuosStart",value:function discontinuosStart(){return"M0,0L"+(0,tslib_es6.Q_)(this,_FeatureShape_ftWidth,"f")+",0L"+(0,tslib_es6.Q_)(this,_FeatureShape_ftWidth,"f")+","+(0,tslib_es6.Q_)(this,_FeatureShape_ftHeight,"f")+"L0,"+(0,tslib_es6.Q_)(this,_FeatureShape_ftHeight,"f")+(0,tslib_es6.Q_)(this,_FeatureShape_instances,"m",_FeatureShape_getBrokenStart).call(this)+"Z"}},{key:"discontinuos",value:function discontinuos(){return"M0,0L"+(0,tslib_es6.Q_)(this,_FeatureShape_ftWidth,"f")+",0"+(0,tslib_es6.Q_)(this,_FeatureShape_instances,"m",_FeatureShape_getBrokenEnd).call(this)+"L0,"+(0,tslib_es6.Q_)(this,_FeatureShape_ftHeight,"f")+(0,tslib_es6.Q_)(this,_FeatureShape_instances,"m",_FeatureShape_getBrokenStart).call(this)+"Z"}},{key:"discontinuosEnd",value:function discontinuosEnd(){return"M0,0L"+(0,tslib_es6.Q_)(this,_FeatureShape_ftWidth,"f")+",0"+(0,tslib_es6.Q_)(this,_FeatureShape_instances,"m",_FeatureShape_getBrokenEnd).call(this)+"L0,"+(0,tslib_es6.Q_)(this,_FeatureShape_ftHeight,"f")+"Z"}},{key:"helix",value:function helix(){for(var y=2.5,center=2.5,nw=Math.round((0,tslib_es6.Q_)(this,_FeatureShape_ftWidth,"f")/5),loop="",i=0;i<nw;i++){loop+="M"+(-2.5+center)+","+(0,tslib_es6.Q_)(this,_FeatureShape_ftHeight,"f")+" C"+(center+y)+",7.5 "+(2.5+center)+","+y+" "+center+", 0 C"+(center-y)+","+y+" "+center+",7.5 "+(2.5+center)+","+(0,tslib_es6.Q_)(this,_FeatureShape_ftHeight,"f"),center+=5}return loop}},{key:"strand",value:function strand(){var rl=0;(0,tslib_es6.Q_)(this,_FeatureShape_ftWidth,"f")>5&&(rl=(0,tslib_es6.Q_)(this,_FeatureShape_ftWidth,"f")-5);var qh=(0,tslib_es6.Q_)(this,_FeatureShape_ftHeight,"f")/4;return"M0,"+qh+"L"+rl+","+qh+"L"+rl+","+3*qh+"L0,"+3*qh+"L0,"+qh+("M"+rl+",0L"+(0,tslib_es6.Q_)(this,_FeatureShape_ftWidth,"f")+","+2*qh+"L"+rl+","+(0,tslib_es6.Q_)(this,_FeatureShape_ftHeight,"f")+"Z")}}],[{key:"isContinuous",value:function isContinuous(shape){return"bridge"!==shape.toLowerCase()}}]),FeatureShape}();_FeatureShape_ftLength=new WeakMap,_FeatureShape_ftHeight=new WeakMap,_FeatureShape_ftWidth=new WeakMap,_FeatureShape_instances=new WeakSet,_FeatureShape_getMiddleLine=function _FeatureShape_getMiddleLine(centerx){return"M0,"+centerx+"L"+(0,tslib_es6.Q_)(this,_FeatureShape_ftWidth,"f")+","+centerx+"Z"},_FeatureShape_getBrokenEnd=function _FeatureShape_getBrokenEnd(){var qh=(0,tslib_es6.Q_)(this,_FeatureShape_ftHeight,"f")/4;return"L"+((0,tslib_es6.Q_)(this,_FeatureShape_ftWidth,"f")-qh)+","+qh+"L"+(0,tslib_es6.Q_)(this,_FeatureShape_ftWidth,"f")+","+2*qh+"L"+((0,tslib_es6.Q_)(this,_FeatureShape_ftWidth,"f")-qh)+","+3*qh+"L"+(0,tslib_es6.Q_)(this,_FeatureShape_ftWidth,"f")+","+(0,tslib_es6.Q_)(this,_FeatureShape_ftHeight,"f")},_FeatureShape_getBrokenStart=function _FeatureShape_getBrokenStart(){var qh=(0,tslib_es6.Q_)(this,_FeatureShape_ftHeight,"f")/4;return"L"+qh+","+3*qh+"L0,"+2*qh+"L"+qh+","+qh};__webpack_require__("./node_modules/core-js/modules/es.number.constructor.js"),__webpack_require__("./node_modules/core-js/modules/es.array.some.js"),__webpack_require__("./node_modules/core-js/modules/es.map.js"),__webpack_require__("./node_modules/core-js/modules/es.array.for-each.js"),__webpack_require__("./node_modules/core-js/modules/web.dom-collections.for-each.js"),__webpack_require__("./node_modules/core-js/modules/es.array.find-index.js");function DefaultLayout_defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}var _NonOverlappingLayout_rows,DefaultLayout=function(){function DefaultLayout(_ref){var layoutHeight=_ref.layoutHeight,_ref$margin=_ref.margin,margin=void 0===_ref$margin?{top:1,bottom:1,left:0,right:0}:_ref$margin,_ref$minHeight=_ref.minHeight,minHeight=void 0===_ref$minHeight?17:_ref$minHeight;!function DefaultLayout_classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,DefaultLayout),this.margin=margin,this.minHeight=minHeight,this.layoutHeight=layoutHeight,this.features=[]}return function DefaultLayout_createClass(Constructor,protoProps,staticProps){return protoProps&&DefaultLayout_defineProperties(Constructor.prototype,protoProps),staticProps&&DefaultLayout_defineProperties(Constructor,staticProps),Object.defineProperty(Constructor,"prototype",{writable:!1}),Constructor}(DefaultLayout,[{key:"init",value:function init(features){this.features=features}},{key:"getFeatureYPos",value:function getFeatureYPos(feature){var featureHeight=this.getFeatureHeight();return this.margin.top+(this.layoutHeight-this.margin.top-this.margin.bottom)/2-featureHeight/2}},{key:"getFeatureHeight",value:function getFeatureHeight(){return Math.max(this.minHeight,this.layoutHeight-this.margin.top-this.margin.bottom)}}]),DefaultLayout}();function NonOverlappingLayout_defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}function _setPrototypeOf(o,p){return _setPrototypeOf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function _setPrototypeOf(o,p){return o.__proto__=p,o},_setPrototypeOf(o,p)}function _createSuper(Derived){var hasNativeReflectConstruct=function _isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function _createSuperInternal(){var result,Super=_getPrototypeOf(Derived);if(hasNativeReflectConstruct){var NewTarget=_getPrototypeOf(this).constructor;result=Reflect.construct(Super,arguments,NewTarget)}else result=Super.apply(this,arguments);return _possibleConstructorReturn(this,result)}}function _possibleConstructorReturn(self,call){if(call&&("object"==typeof call||"function"==typeof call))return call;if(void 0!==call)throw new TypeError("Derived constructors may only return object or undefined");return _assertThisInitialized(self)}function _assertThisInitialized(self){if(void 0===self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return self}function _getPrototypeOf(o){return _getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)},_getPrototypeOf(o)}var featureOvelapsInRow=function featureOvelapsInRow(feature,row){return row.some((function(rowFeature){return function featuresOverlap(feature1,feature2){return!(Number(feature2.start)>Number(feature1.end)||Number(feature2.end)<Number(feature1.start))}(feature,rowFeature)}))},NonOverlappingLayout=function(_DefaultLayout){!function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function");subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:!0,configurable:!0}}),Object.defineProperty(subClass,"prototype",{writable:!1}),superClass&&_setPrototypeOf(subClass,superClass)}(NonOverlappingLayout,_DefaultLayout);var _super=_createSuper(NonOverlappingLayout);function NonOverlappingLayout(options){var _this;return function NonOverlappingLayout_classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,NonOverlappingLayout),(_this=_super.call(this,options)).featuresMap=new Map,_NonOverlappingLayout_rows.set(_assertThisInitialized(_this),void 0),_this.rowHeight=0,_this.minHeight=15,(0,tslib_es6.YH)(_assertThisInitialized(_this),_NonOverlappingLayout_rows,[],"f"),_this}return function NonOverlappingLayout_createClass(Constructor,protoProps,staticProps){return protoProps&&NonOverlappingLayout_defineProperties(Constructor.prototype,protoProps),staticProps&&NonOverlappingLayout_defineProperties(Constructor,staticProps),Object.defineProperty(Constructor,"prototype",{writable:!1}),Constructor}(NonOverlappingLayout,[{key:"init",value:function init(features){var _this2=this;features.forEach((function(feature){var rowIndex=(0,tslib_es6.Q_)(_this2,_NonOverlappingLayout_rows,"f").findIndex((function(row){return!featureOvelapsInRow(feature,row)}));rowIndex>=0?((0,tslib_es6.Q_)(_this2,_NonOverlappingLayout_rows,"f")[rowIndex].push(feature),_this2.featuresMap.set(feature,rowIndex)):((0,tslib_es6.Q_)(_this2,_NonOverlappingLayout_rows,"f").push([feature]),_this2.featuresMap.set(feature,(0,tslib_es6.Q_)(_this2,_NonOverlappingLayout_rows,"f").length-1))})),this.rowHeight=Math.min(this.layoutHeight/(0,tslib_es6.Q_)(this,_NonOverlappingLayout_rows,"f").length,this.minHeight)}},{key:"getOffset",value:function getOffset(){return(0,tslib_es6.Q_)(this,_NonOverlappingLayout_rows,"f").length*this.rowHeight<this.layoutHeight?this.layoutHeight/2-(0,tslib_es6.Q_)(this,_NonOverlappingLayout_rows,"f").length*this.rowHeight/2:0}},{key:"getFeatureYPos",value:function getFeatureYPos(feature){var rowNumber=this.featuresMap.get(feature);return this.getOffset()+this.rowHeight*rowNumber+this.margin.top+this.margin.bottom}},{key:"getFeatureHeight",value:function getFeatureHeight(){return this.rowHeight-this.margin.top-this.margin.bottom}}]),NonOverlappingLayout}(DefaultLayout);_NonOverlappingLayout_rows=new WeakMap;__webpack_require__("./node_modules/core-js/modules/es.array.find.js"),__webpack_require__("./node_modules/core-js/modules/es.object.values.js"),__webpack_require__("./node_modules/core-js/modules/es.function.name.js");var _templateObject,_NightingaleTrack_originalData,_NightingaleTrack_data,_NightingaleTrack_highlighted,_NightingaleTrack_margins,NightingaleTrack_1,config={CHAIN:{name:"chain",label:"Chain",tooltip:"(aka mature region). This describes the extent of a polypeptide chain in the mature protein following processing",shape:"rectangle",color:"#CC9933"},TRANSIT:{name:"transit peptide",label:"Transit peptide",tooltip:"This describes the extent of a transit peptide",shape:"rectangle",color:"#009966"},INIT_MET:{name:"initiator methionine",label:"Initiator methionine",tooltip:"This indicates that the initiator methionine is cleaved from the mature protein",shape:"arrow",color:"#996633"},PROPEP:{name:"propeptide",label:"Propeptide",tooltip:"Part of a protein that is cleaved during maturation or activation",shape:"rectangle",color:"#99CCCC"},PEPTIDE:{name:"peptide",label:"Peptide",tooltip:"The position and length of an active peptide in the mature protein",shape:"rectangle",color:"#006699"},SIGNAL:{name:"signal peptide",label:"Signal peptide",tooltip:"N-terminal signal peptide",shape:"rectangle",color:"#CC0033"},HELIX:{name:"helix",label:"Helix",tooltip:"The positions of experimentally determined helical regions",shape:"rectangle",color:"#FF0066"},STRAND:{name:"strand",label:"Beta strand",tooltip:"The positions of experimentally determined beta strands",shape:"rectangle",color:"#FFCC00"},TURN:{name:"turn",label:"Turn",tooltip:"The positions of experimentally determined hydrogen-bonded turns",shape:"rectangle",color:"#0571AF"},DISULFID:{name:"disulfide bond",label:"Disulfide bond",tooltip:"The positions of cysteine residues participating in disulphide bonds",shape:"bridge",color:"#23B14D"},CROSSLNK:{name:"cross-link",label:"Cross-link",tooltip:"Covalent linkages of various types formed between two proteins or between two parts of the same protein",shape:"bridge",color:"#FF6600"},REGION:{name:"region of interest",label:"Region of interest",tooltip:"Regions in multifunctional enzymes or fusion proteins, or characteristics of a region, e.g., protein-protein interactions mediation",shape:"rectangle",color:"#B33E00"},COILED:{name:"coiled-coil region",label:"Coiled-coil region",tooltip:"Coiled coils are built by two or more alpha-helices that wind around each other to form a supercoil",shape:"rectangle",color:"#006699"},MOTIF:{name:"short sequence motif",label:"Short sequence motif",tooltip:"Short conserved sequence motif of biological significance",shape:"rectangle",color:"#402060"},REPEAT:{name:"repeat",label:"Repeat",tooltip:"Repeated sequence motifs or repeated domains within the protein",shape:"rectangle",color:"#9900FF"},CA_BIND:{name:"calcium-binding region",label:"Calcium-binding region",tooltip:"Calcium-binding regions, such as the EF-hand motif",shape:"rectangle",color:"#FF3399"},DNA_BIND:{name:"DNA-binding region",label:"DNA binding",tooltip:"DNA-binding domains such as AP2/ERF domain, the ETS domain, the Fork-Head domain, the HMG box and the Myb domain",shape:"rectangle",color:"#009933"},DOMAIN:{name:"other domain of interest",label:"Other domain of interest",tooltip:"Specific combination of secondary structures organized into a characteristic three-dimensional structure or fold",shape:"rectangle",color:"#9999FF"},ZN_FING:{name:"zinc finger region",label:"Zinc finger",tooltip:"Small, functional, independently folded domain that coordinates one or more zinc ions",shape:"rectangle",color:"#990066"},NP_BIND:{name:"nucleotide-binding region",label:"Nucleotide-binding region",tooltip:"(aka flavin-binding). Region in the protein which binds nucleotide phosphates",shape:"rectangle",color:"#FF9900"},METAL:{name:"metal ion-binding site",label:"Metal ion-binding site",tooltip:"Binding site for a metal ion",shape:"diamond",color:"#009900"},SITE:{name:"other site of interest",label:"Other site of interest",tooltip:"Any interesting single amino acid site on the sequence",shape:"chevron",color:"#660033"},BINDING:{name:"other binding site",label:"Other binding site",tooltip:"Binding site for any chemical group (co-enzyme, prosthetic group, etc.)",shape:"rectangle",color:"#catFace"},ACT_SITE:{name:"active site",label:"Active site",tooltip:"Amino acid(s) directly involved in the activity of an enzyme",shape:"circle",color:"#FF6666"},MOD_RES:{name:"Post-translationally modified residue",label:"Modified residue",tooltip:"Modified residues such as phosphorylation, acetylation, acylation, methylation",shape:"triangle",color:"#000066"},LIPID:{name:"lipid moiety-binding region",label:"Lipidation",tooltip:"Covalently attached lipid group(s)",shape:"wave",color:"#99CC33"},CARBOHYD:{name:"glycosylation site",label:"Glycosylation",tooltip:"Covalently attached glycan group(s)",shape:"hexagon",color:"#CC3366"},COMPBIAS:{name:"compositionally biased region",label:"Compositionally biased region",tooltip:"Position of regions of compositional bias within the protein and the particular amino acids that are over-represented within those regions",shape:"rectangle",color:"#FF3366"},CONFLICT:{name:"sequence conflict",label:"Sequence conflict",tooltip:"Sequence discrepancies of unknown origin",shape:"rectangle",color:"#6633CC"},NON_CONS:{name:"non-consecutive residues",label:"Non-adjacent residues",tooltip:"Indicates that two residues in a sequence are not consecutive and that there is an undetermined number of unsequenced residues between them",shape:"doubleBar",color:"#FF0033"},NON_TER:{name:"non-terminal residue",label:"Non-terminal residue",tooltip:"The sequence is incomplete. The residue is not the terminal residue of the complete protein",shape:"doubleBar",color:"#339933"},UNSURE:{name:"unsure residue",label:"Sequence uncertainty",tooltip:"Regions of a sequence for which the authors are unsure about the sequence assignment",shape:"rectangle",color:"#33FF00"},NON_STD:{name:"non-standard amino acid",label:"Non-standard residue",tooltip:"Non-standard amino acids (selenocysteine and pyrrolysine)",shape:"pentagon",color:"#330066"},MUTAGEN:{name:"mutagenesis site",label:"Mutagenesis",tooltip:"Site which has been experimentally altered by mutagenesis",shape:"rectangle",color:"#FF9900"},TOPO_DOM:{name:"topological domain",label:"Topological domain",tooltip:"Location of non-membrane regions of membrane-spanning proteins",shape:"rectangle",color:"#CC0000"},TRANSMEM:{name:"transmembrane region",label:"Transmembrane",tooltip:"Extent of a membrane-spanning region",shape:"rectangle",color:"#CC00CC"},INTRAMEM:{name:"intramembrane region",label:"Intramembrane",tooltip:"Extent of a region located in a membrane without crossing it",shape:"rectangle",color:"#0000CC"},VAR_SEQ:{name:"splice variant",label:"Splice variant",tooltip:"",shape:"rectangle",color:"#CC11CC"},VARIANT:{name:"sequence variant",label:"Natural variant",tooltip:"Natural variant of the protein, including polymorphisms, variations between strains, isolates or cultivars, disease-associated mutations and RNA editing events",shape:"circle",color:"black"},UNIQUE:{name:"unique",label:"Unique peptide",tooltip:"",shape:"rectangle",color:"#fc3133"},NON_UNIQUE:{name:"non-unique",label:"Non-unique peptide",tooltip:"",shape:"rectangle",color:"#8585fc"},ANTIGEN:{name:"antigen",label:"Antibody binding sequences",tooltip:"",shape:"rectangle",color:"#996699"},PDBE_COVER:{name:"pdbe coverage",label:"PDBe 3D structure coverage",tooltip:"",shape:"rectangle",color:"#669966"}},getShapeByType=function getShapeByType(type){if(type.toUpperCase()in config)return config[type.toUpperCase()].shape;var info=Object.values(config).find((function(typeInfo){return typeInfo.name.toUpperCase()===type.toUpperCase()}));return info?info.shape:"rectangle"},getColorByType=function getColorByType(type){if(type.toUpperCase()in config)return config[type.toUpperCase()].color;var info=Object.values(config).find((function(typeInfo){return typeInfo.name.toUpperCase()===type.toUpperCase()}));return info||console.log(type),info?info.color:"black"};function nightingale_track_classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function nightingale_track_defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}function _get(){return _get="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function _get(target,property,receiver){var base=_superPropBase(target,property);if(base){var desc=Object.getOwnPropertyDescriptor(base,property);return desc.get?desc.get.call(arguments.length<3?target:receiver):desc.value}},_get.apply(this,arguments)}function _superPropBase(object,property){for(;!Object.prototype.hasOwnProperty.call(object,property)&&null!==(object=nightingale_track_getPrototypeOf(object)););return object}function nightingale_track_setPrototypeOf(o,p){return nightingale_track_setPrototypeOf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function _setPrototypeOf(o,p){return o.__proto__=p,o},nightingale_track_setPrototypeOf(o,p)}function nightingale_track_createSuper(Derived){var hasNativeReflectConstruct=function nightingale_track_isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function _createSuperInternal(){var result,Super=nightingale_track_getPrototypeOf(Derived);if(hasNativeReflectConstruct){var NewTarget=nightingale_track_getPrototypeOf(this).constructor;result=Reflect.construct(Super,arguments,NewTarget)}else result=Super.apply(this,arguments);return nightingale_track_possibleConstructorReturn(this,result)}}function nightingale_track_possibleConstructorReturn(self,call){if(call&&("object"==typeof call||"function"==typeof call))return call;if(void 0!==call)throw new TypeError("Derived constructors may only return object or undefined");return nightingale_track_assertThisInitialized(self)}function nightingale_track_assertThisInitialized(self){if(void 0===self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return self}function nightingale_track_getPrototypeOf(o){return nightingale_track_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)},nightingale_track_getPrototypeOf(o)}var ATTRIBUTES_THAT_TRIGGER_REFRESH=["length","width","height"],nightingale_track_NightingaleTrack=NightingaleTrack_1=function(_withManager){!function nightingale_track_inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function");subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:!0,configurable:!0}}),Object.defineProperty(subClass,"prototype",{writable:!1}),superClass&&nightingale_track_setPrototypeOf(subClass,superClass)}(NightingaleTrack,_withManager);var _super=nightingale_track_createSuper(NightingaleTrack);function NightingaleTrack(){var _this;return nightingale_track_classCallCheck(this,NightingaleTrack),(_this=_super.apply(this,arguments)).featureShape=new FeatureShape,_NightingaleTrack_originalData.set(nightingale_track_assertThisInitialized(_this),[]),_NightingaleTrack_data.set(nightingale_track_assertThisInitialized(_this),[]),_this.filters=null,_NightingaleTrack_highlighted.set(nightingale_track_assertThisInitialized(_this),void 0),_NightingaleTrack_margins.set(nightingale_track_assertThisInitialized(_this),void 0),_this}return function nightingale_track_createClass(Constructor,protoProps,staticProps){return protoProps&&nightingale_track_defineProperties(Constructor.prototype,protoProps),staticProps&&nightingale_track_defineProperties(Constructor,staticProps),Object.defineProperty(Constructor,"prototype",{writable:!1}),Constructor}(NightingaleTrack,[{key:"getLayout",value:function getLayout(){return"non-overlapping"===String(this.layout).toLowerCase()?new NonOverlappingLayout({layoutHeight:this.height}):new DefaultLayout({layoutHeight:this.height,margin:{top:this["margin-top"],bottom:this["margin-bottom"],left:this["margin-left"],right:this["margin-right"]}})}},{key:"connectedCallback",value:function connectedCallback(){_get(nightingale_track_getPrototypeOf(NightingaleTrack.prototype),"connectedCallback",this).call(this),this.layoutObj=this.getLayout(),(0,tslib_es6.Q_)(this,_NightingaleTrack_data,"f")&&this.createTrack()}},{key:"processData",value:function processData(data){(0,tslib_es6.YH)(this,_NightingaleTrack_originalData,NightingaleTrack_1.normalizeLocations(data),"f")}},{key:"data",get:function get(){return(0,tslib_es6.Q_)(this,_NightingaleTrack_data,"f")},set:function set(data){this.processData(data),this.applyFilters(),this.layoutObj=this.getLayout(),this.createTrack()}},{key:"attributeChangedCallback",value:function attributeChangedCallback(name,oldValue,newValue){_get(nightingale_track_getPrototypeOf(NightingaleTrack.prototype),"attributeChangedCallback",this).call(this,name,oldValue,newValue),(ATTRIBUTES_THAT_TRIGGER_REFRESH.includes(name)||name.startsWith("margin-"))&&(this.applyFilters(),this.layoutObj=this.getLayout(),this.createTrack())}},{key:"getFeatureColor",value:function getFeatureColor(f){var _a,_b,_c;return f.color?f.color||"gray":(null===(_a=null==f?void 0:f.feature)||void 0===_a?void 0:_a.color)?(null===(_b=null==f?void 0:f.feature)||void 0===_b?void 0:_b.color)||"gray":this.color?this.color:f.type?getColorByType(f.type):(null===(_c=null==f?void 0:f.feature)||void 0===_c?void 0:_c.type)?getColorByType(f.feature.type):"gray"}},{key:"getFeatureFillColor",value:function getFeatureFillColor(f){var _a;return f.fill?f.fill||"gray":(null===(_a=null==f?void 0:f.feature)||void 0===_a?void 0:_a.fill)?f.feature.fill||"gray":this.getFeatureColor(f)}},{key:"getShape",value:function getShape(f){var _a,_b;return f.shape?f.shape||"rectangle":(null===(_a=null==f?void 0:f.feature)||void 0===_a?void 0:_a.shape)?f.feature.shape||"rectangle":this.shape?this.shape:f.type?getShapeByType(f.type):(null===(_b=f.feature)||void 0===_b?void 0:_b.type)?getShapeByType(f.feature.type):"rectangle"}},{key:"createTrack",value:function createTrack(){var _a,_b;(0,tslib_es6.Q_)(this,_NightingaleTrack_data,"f")&&(null===(_a=this.layoutObj)||void 0===_a||_a.init((0,tslib_es6.Q_)(this,_NightingaleTrack_data,"f")),null===(_b=this.svg)||void 0===_b||_b.selectAll("g").remove(),this.svg=(0,src.Ys)(this).selectAll("svg").attr("width",this.width).attr("height",this.height),this.svg&&(this.seqG=this.svg.append("g").attr("class","sequence-features"),(0,tslib_es6.YH)(this,_NightingaleTrack_highlighted,this.svg.append("g").attr("class","highlighted"),"f"),(0,tslib_es6.YH)(this,_NightingaleTrack_margins,this.svg.append("g").attr("class","margin"),"f"),this.createFeatures()))}},{key:"createFeatures",value:function createFeatures(){var _a,_this2=this;if(this.seqG){var fragmentGroup=this.seqG.selectAll("g.feature-group").data((0,tslib_es6.Q_)(this,_NightingaleTrack_data,"f")).enter().append("g").attr("class","feature-group").attr("id",(function(d){return"g_"+d.accession})).selectAll("g.location-group").data((function(d){return(d.locations||[]).map((function(loc){return Object.assign({},loc,{feature:d})}))})).enter().append("g").attr("class","location-group").selectAll("g.fragment-group").data((function(d){return d.fragments.map((function(loc){return Object.assign({},loc,{feature:d.feature})}))})).enter().append("g").attr("class","fragment-group");fragmentGroup.append("path").attr("class",(function(f){return _this2.getShape(f)+" feature"})).attr("d",(function(f){var _a;return _this2.featureShape.getFeatureShape(_this2.getSingleBaseWidth(),(null===(_a=_this2.layoutObj)||void 0===_a?void 0:_a.getFeatureHeight())||0,f.end?f.end-f.start+1:1,_this2.getShape(f))})).attr("transform",(function(f){var _a;return"translate("+_this2.getXFromSeqPosition(f.start)+","+((null===(_a=_this2.layoutObj)||void 0===_a?void 0:_a.getFeatureYPos(f.feature))||0)+")"})).attr("fill",(function(f){return _this2.getFeatureFillColor(f)})).attr("stroke",(function(f){return _this2.getFeatureColor(f)})).style("fill-opacity",(function(_ref){var feature=_ref.feature;return feature.opacity?feature.opacity:.9})).style("stroke-opacity",(function(_ref2){var feature=_ref2.feature;return feature.opacity?feature.opacity:.9})),fragmentGroup.append("rect").attr("class","outer-rectangle feature").attr("width",(function(f){return _this2.getSingleBaseWidth()*(f.end?f.end-f.start+1:1)})).attr("height",(null===(_a=this.layoutObj)||void 0===_a?void 0:_a.getFeatureHeight())||0).attr("transform",(function(f){var _a;return"translate("+_this2.getXFromSeqPosition(f.start)+","+((null===(_a=_this2.layoutObj)||void 0===_a?void 0:_a.getFeatureYPos(f.feature))||0)+")"})).attr("fill","transparent").attr("stroke","transparent").call(nightingale_new_core_src.sQ,this)}}},{key:"applyFilters",value:function applyFilters(){(this.filters||[]).length<=0&&(0,tslib_es6.YH)(this,_NightingaleTrack_data,(0,tslib_es6.Q_)(this,_NightingaleTrack_originalData,"f"),"f")}},{key:"refresh",value:function refresh(){var _a,_this3=this;if(this.xScale&&this.seqG){var fragmentG=this.seqG.selectAll("g.fragment-group").data((0,tslib_es6.Q_)(this,_NightingaleTrack_data,"f").reduce((function(acc,f){return acc.concat((f.locations||[]).reduce((function(acc2,e){return acc2.concat(e.fragments.map((function(loc){return Object.assign({},loc,{feature:f})})))}),[]))}),[]));fragmentG.selectAll("path.feature").attr("d",(function(f){var _a;return _this3.featureShape.getFeatureShape(_this3.getSingleBaseWidth(),(null===(_a=_this3.layoutObj)||void 0===_a?void 0:_a.getFeatureHeight())||0,(null==f?void 0:f.end)&&(null==f?void 0:f.start)?f.end-f.start+1:1,_this3.getShape(f))})).attr("transform",(function(f){var _a;return"translate("+_this3.getXFromSeqPosition(f.start||0)+","+(null===(_a=_this3.layoutObj)||void 0===_a?void 0:_a.getFeatureYPos(f.feature))+")"})),fragmentG.selectAll("rect.outer-rectangle").attr("width",(function(f){return _this3.getSingleBaseWidth()*((null==f?void 0:f.end)&&(null==f?void 0:f.start)?f.end-f.start+1:1)})).attr("height",(null===(_a=this.layoutObj)||void 0===_a?void 0:_a.getFeatureHeight())||0).attr("transform",(function(f){var _a;return"translate("+_this3.getXFromSeqPosition(f.start||0)+","+((null===(_a=_this3.layoutObj)||void 0===_a?void 0:_a.getFeatureYPos(f.feature))||0)+")"}))}this.updateHighlight(),this.renderMarginOnGroup((0,tslib_es6.Q_)(this,_NightingaleTrack_margins,"f"))}},{key:"updateHighlight",value:function updateHighlight(){var _this4=this;if((0,tslib_es6.Q_)(this,_NightingaleTrack_highlighted,"f")){var highlighs=(0,tslib_es6.Q_)(this,_NightingaleTrack_highlighted,"f").selectAll("rect").data(this.highlightedRegion.segments);highlighs.enter().append("rect").style("pointer-events","none").merge(highlighs).attr("fill",this["highlight-color"]).attr("height",this.height).attr("x",(function(d){return _this4.getXFromSeqPosition(d.start)})).attr("width",(function(d){return _this4.getSingleBaseWidth()*(d.end-d.start+1)})),highlighs.exit().remove()}}},{key:"zoomRefreshed",value:function zoomRefreshed(){this.refresh()}},{key:"firstUpdated",value:function firstUpdated(){this.createTrack()}},{key:"render",value:function render(){return(0,lit.dy)(_templateObject||(_templateObject=function _taggedTemplateLiteralLoose(strings,raw){return raw||(raw=strings.slice(0)),strings.raw=raw,strings}(['<svg class="container"></svg>'])))}}],[{key:"normalizeLocations",value:function normalizeLocations(data){return data.map((function(obj){var locations=obj.locations,start=obj.start,end=obj.end;return locations?obj:Object.assign(obj,{locations:[{fragments:[{start,end}]}]})}))}}]),NightingaleTrack}((0,nightingale_new_core_src.YD)((0,nightingale_new_core_src._5)((0,nightingale_new_core_src.tG)((0,nightingale_new_core_src.vl)((0,nightingale_new_core_src.Ds)((0,nightingale_new_core_src.U6)((0,nightingale_new_core_src.Rn)(nightingale_new_core_src.ZP))))))));_NightingaleTrack_originalData=new WeakMap,_NightingaleTrack_data=new WeakMap,_NightingaleTrack_highlighted=new WeakMap,_NightingaleTrack_margins=new WeakMap,(0,tslib_es6.gn)([(0,decorators.Cb)({type:String})],nightingale_track_NightingaleTrack.prototype,"color",void 0),(0,tslib_es6.gn)([(0,decorators.Cb)({type:String})],nightingale_track_NightingaleTrack.prototype,"shape",void 0),(0,tslib_es6.gn)([(0,decorators.Cb)({type:String})],nightingale_track_NightingaleTrack.prototype,"layout",void 0),nightingale_track_NightingaleTrack=NightingaleTrack_1=(0,tslib_es6.gn)([(0,nightingale_new_core_src.y_)("nightingale-track")],nightingale_track_NightingaleTrack)},"./storybook-init-framework-entry.js":(__unused_webpack_module,__unused_webpack___webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__("./node_modules/@storybook/web-components/dist/esm/client/index.js")},"./stories/NightingaleInterProTrack.stories.mdx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{__namedExportsOrder:()=>__namedExportsOrder,__page:()=>__page,default:()=>NightingaleInterProTrack_stories});__webpack_require__("./node_modules/core-js/modules/es.object.keys.js"),__webpack_require__("./node_modules/core-js/modules/es.array.index-of.js"),__webpack_require__("./node_modules/core-js/modules/es.symbol.js"),__webpack_require__("./node_modules/core-js/modules/es.function.bind.js"),__webpack_require__("./node_modules/core-js/modules/es.object.assign.js"),__webpack_require__("./node_modules/react/index.js");var esm=__webpack_require__("./node_modules/@mdx-js/react/dist/esm.js"),dist_esm=__webpack_require__("./node_modules/@storybook/addon-docs/dist/esm/index.js");var _excluded=["components"];function _extends(){return _extends=Object.assign?Object.assign.bind():function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source)Object.prototype.hasOwnProperty.call(source,key)&&(target[key]=source[key])}return target},_extends.apply(this,arguments)}function _objectWithoutProperties(source,excluded){if(null==source)return{};var key,i,target=function _objectWithoutPropertiesLoose(source,excluded){if(null==source)return{};var key,i,target={},sourceKeys=Object.keys(source);for(i=0;i<sourceKeys.length;i++)key=sourceKeys[i],excluded.indexOf(key)>=0||(target[key]=source[key]);return target}(source,excluded);if(Object.getOwnPropertySymbols){var sourceSymbolKeys=Object.getOwnPropertySymbols(source);for(i=0;i<sourceSymbolKeys.length;i++)key=sourceSymbolKeys[i],excluded.indexOf(key)>=0||Object.prototype.propertyIsEnumerable.call(source,key)&&(target[key]=source[key])}return target}var layoutProps={};function MDXContent(_ref){var components=_ref.components,props=_objectWithoutProperties(_ref,_excluded);return(0,esm.kt)("wrapper",_extends({},layoutProps,props,{components,mdxType:"MDXLayout"}),(0,esm.kt)(dist_esm.h_,{title:"Nightingale/NightingaleInterProTrack/Readme",mdxType:"Meta"}),(0,esm.kt)(dist_esm.dk,{mdxType:"Description"},'# nightingale-interpro-track\n\n[![Published on NPM](https://img.shields.io/npm/v/nightingale-interpro-track.svg)](https://www.npmjs.com/package/nightingale-interpro--track)\n\nInterpro adpation of the track\n\n## Usage\n\n```html\n<nightingale-interpro-track\n  length="456"\n  start="34"\n  end="400"\n></nightingale-interpro-track>\n```\n\n## API Reference\n\n### Properties\n\n#### `length: number`\n\nThe protein or nucleic acid sequence length.\n\n#### `start: number (optional)`\n\nThe start position of the selected region.\n\n#### `end: number (optional)`\n\nThe end position of the selected region.\n\n#### `highlight: string (optional)`\n\nA comma separated list of regions to highlight.\n\nEach region follows the format: `[start]:[end]`, where both `[start]` and `[end]` are optional numbers.\n\n### Events\n'))}MDXContent.isMDXComponent=!0;var __page=function __page(){throw new Error("Docs-only story")};__page.parameters={docsOnly:!0};var componentMeta={title:"Nightingale/NightingaleInterProTrack/Readme",includeStories:["__page"]},mdxStoryNameToKey={};componentMeta.parameters=componentMeta.parameters||{},componentMeta.parameters.docs=Object.assign({},componentMeta.parameters.docs||{},{page:function page(){return(0,esm.kt)(dist_esm.aT,{mdxStoryNameToKey,mdxComponentAnnotations:componentMeta},(0,esm.kt)(MDXContent,null))}});const NightingaleInterProTrack_stories=componentMeta;var __namedExportsOrder=["__page"]},"./stories/NightingaleManager.stories.mdx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{__namedExportsOrder:()=>__namedExportsOrder,__page:()=>__page,default:()=>NightingaleManager_stories});__webpack_require__("./node_modules/core-js/modules/es.object.keys.js"),__webpack_require__("./node_modules/core-js/modules/es.array.index-of.js"),__webpack_require__("./node_modules/core-js/modules/es.symbol.js"),__webpack_require__("./node_modules/core-js/modules/es.function.bind.js"),__webpack_require__("./node_modules/core-js/modules/es.object.assign.js"),__webpack_require__("./node_modules/react/index.js");var esm=__webpack_require__("./node_modules/@mdx-js/react/dist/esm.js"),dist_esm=__webpack_require__("./node_modules/@storybook/addon-docs/dist/esm/index.js");var _excluded=["components"];function _extends(){return _extends=Object.assign?Object.assign.bind():function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source)Object.prototype.hasOwnProperty.call(source,key)&&(target[key]=source[key])}return target},_extends.apply(this,arguments)}function _objectWithoutProperties(source,excluded){if(null==source)return{};var key,i,target=function _objectWithoutPropertiesLoose(source,excluded){if(null==source)return{};var key,i,target={},sourceKeys=Object.keys(source);for(i=0;i<sourceKeys.length;i++)key=sourceKeys[i],excluded.indexOf(key)>=0||(target[key]=source[key]);return target}(source,excluded);if(Object.getOwnPropertySymbols){var sourceSymbolKeys=Object.getOwnPropertySymbols(source);for(i=0;i<sourceSymbolKeys.length;i++)key=sourceSymbolKeys[i],excluded.indexOf(key)>=0||Object.prototype.propertyIsEnumerable.call(source,key)&&(target[key]=source[key])}return target}var layoutProps={};function MDXContent(_ref){var components=_ref.components,props=_objectWithoutProperties(_ref,_excluded);return(0,esm.kt)("wrapper",_extends({},layoutProps,props,{components,mdxType:"MDXLayout"}),(0,esm.kt)(dist_esm.h_,{title:"Nightingale/NightingaleManager/Readme",mdxType:"Meta"}),(0,esm.kt)(dist_esm.dk,{mdxType:"Description"},'# nightingale-manager\n\n[![Published on NPM](https://img.shields.io/npm/v/nightingale-manager.svg)](https://www.npmjs.com/package/nightingale-manager)\n\nIt is a container for all the tracks and other inner components (e.g. nightingale-navigation).\n\nThis component is in charge of capturing the events that its descendent trigger, and adjust registered element attributes accordingly.\n\nThe children should fire events of the type change, and the detail object should contain the attributes `type` and `value`.\n\nAdditionally, there are a set of pre-defined attributes which can be used with this component and will be propagated to descendents: `display-start`, `display-end`, `highlight` and `length`. This is useful if you want to control things like zoom level from outside, for instance directly from your application.\n\nSee it running [Here](https://ebi-webcomponents.github.io/nightingale/#/manager).\n\n## Usage\n\n```html\n<nightingale-manager reflected-attributes="attr1 attr2"></nightingale-manager>\n```\n\nHere is an example of how the child components should fire the events:\n\n```javascript\nthis.dispatchEvent(\n  new CustomEvent("change", {\n    detail: {\n      value: "New value",\n      type: "attr1",\n    },\n  })\n);\n```\n\n## API Reference\n\n### Properties\n\n#### `register(element: NightingaleElement)`: register an element with `nightingale-manager`. Only registered elements get their attributes updated.\n\n#### `unregister(element: NightingaleElement)`: remove an element from the list of registered elements.\n\n### Attributes\n\n#### `reflected-attributes: string`: comma-separated list of attributes which should be reflected on the registered child components.\n\n#### `display-start?: number`\n\n#### `display-end?: number`\n\n#### `highlight?: start:end,start:end,...`\n\n#### `length?: number`\n\nList of attributes that this component will be propagating.\n'))}MDXContent.isMDXComponent=!0;var __page=function __page(){throw new Error("Docs-only story")};__page.parameters={docsOnly:!0};var componentMeta={title:"Nightingale/NightingaleManager/Readme",includeStories:["__page"]},mdxStoryNameToKey={};componentMeta.parameters=componentMeta.parameters||{},componentMeta.parameters.docs=Object.assign({},componentMeta.parameters.docs||{},{page:function page(){return(0,esm.kt)(dist_esm.aT,{mdxStoryNameToKey,mdxComponentAnnotations:componentMeta},(0,esm.kt)(MDXContent,null))}});const NightingaleManager_stories=componentMeta;var __namedExportsOrder=["__page"]},"./stories/NightingaleNavigation.stories.mdx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{__namedExportsOrder:()=>__namedExportsOrder,__page:()=>__page,default:()=>NightingaleNavigation_stories});__webpack_require__("./node_modules/core-js/modules/es.object.keys.js"),__webpack_require__("./node_modules/core-js/modules/es.array.index-of.js"),__webpack_require__("./node_modules/core-js/modules/es.symbol.js"),__webpack_require__("./node_modules/core-js/modules/es.function.bind.js"),__webpack_require__("./node_modules/core-js/modules/es.object.assign.js"),__webpack_require__("./node_modules/react/index.js");var esm=__webpack_require__("./node_modules/@mdx-js/react/dist/esm.js"),dist_esm=__webpack_require__("./node_modules/@storybook/addon-docs/dist/esm/index.js");var _excluded=["components"];function _extends(){return _extends=Object.assign?Object.assign.bind():function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source)Object.prototype.hasOwnProperty.call(source,key)&&(target[key]=source[key])}return target},_extends.apply(this,arguments)}function _objectWithoutProperties(source,excluded){if(null==source)return{};var key,i,target=function _objectWithoutPropertiesLoose(source,excluded){if(null==source)return{};var key,i,target={},sourceKeys=Object.keys(source);for(i=0;i<sourceKeys.length;i++)key=sourceKeys[i],excluded.indexOf(key)>=0||(target[key]=source[key]);return target}(source,excluded);if(Object.getOwnPropertySymbols){var sourceSymbolKeys=Object.getOwnPropertySymbols(source);for(i=0;i<sourceSymbolKeys.length;i++)key=sourceSymbolKeys[i],excluded.indexOf(key)>=0||Object.prototype.propertyIsEnumerable.call(source,key)&&(target[key]=source[key])}return target}var layoutProps={};function MDXContent(_ref){var components=_ref.components,props=_objectWithoutProperties(_ref,_excluded);return(0,esm.kt)("wrapper",_extends({},layoutProps,props,{components,mdxType:"MDXLayout"}),(0,esm.kt)(dist_esm.h_,{title:"Nightingale/NightingaleNavigation/Readme",mdxType:"Meta"}),(0,esm.kt)(dist_esm.dk,{mdxType:"Description"},'# nightingale-navigation\n\n[![Published on NPM](https://img.shields.io/npm/v/nightingale-navigation.svg)](https://www.npmjs.com/package/nightingale-navigation)\n\nThis custom element can be used to zoom and navigate along the sequence displayed in Nightingale. When a user interacts with the component, a `change` event is triggered which <nightingale-manager> uses to change `display-start` and `display-end` values on relevant custom elements.\n\n[Demo](https://ebi-webcomponents.github.io/nightingale/#/navigation)\n\n## Usage\n\n```html\n<nightingale-navigation\n  length="456"\n  display-start="143"\n  display-end="400"\n  highlightStart="23"\n  highlightEnd="45"\n  rulerstart="50"\n/>\n```\n\n## API Reference\n\n#### `length: number`\n\nThe protein or nucleic acid sequence length.\n\n#### `display-start: number (optional)`\n\nThe start position of the selected region.\n\n#### `display-end: number (optional)`\n\nThe end position of the selected region.\n\n#### `highlightStart: number (optional)`\n\nThe start position of the highlighted region.\n\n#### `highlightEnd: number (optional)`\n\nThe end position of the highlighted region.\n\n#### `rulerstart: number (optional)`\n\nThe starting coordinate of the ruler.\n\n#### also see [nightingale-zoomable](https://github.com/ebi-webcomponents/nightingale/blob/master/packages/nightingale-zoomable/README.md#properties)\n'))}MDXContent.isMDXComponent=!0;var __page=function __page(){throw new Error("Docs-only story")};__page.parameters={docsOnly:!0};var componentMeta={title:"Nightingale/NightingaleNavigation/Readme",includeStories:["__page"]},mdxStoryNameToKey={};componentMeta.parameters=componentMeta.parameters||{},componentMeta.parameters.docs=Object.assign({},componentMeta.parameters.docs||{},{page:function page(){return(0,esm.kt)(dist_esm.aT,{mdxStoryNameToKey,mdxComponentAnnotations:componentMeta},(0,esm.kt)(MDXContent,null))}});const NightingaleNavigation_stories=componentMeta;var __namedExportsOrder=["__page"]},"./stories/NightingaleSequence.stories.mdx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{__namedExportsOrder:()=>__namedExportsOrder,__page:()=>__page,default:()=>NightingaleSequence_stories});__webpack_require__("./node_modules/core-js/modules/es.object.keys.js"),__webpack_require__("./node_modules/core-js/modules/es.array.index-of.js"),__webpack_require__("./node_modules/core-js/modules/es.symbol.js"),__webpack_require__("./node_modules/core-js/modules/es.function.bind.js"),__webpack_require__("./node_modules/core-js/modules/es.object.assign.js"),__webpack_require__("./node_modules/react/index.js");var esm=__webpack_require__("./node_modules/@mdx-js/react/dist/esm.js"),dist_esm=__webpack_require__("./node_modules/@storybook/addon-docs/dist/esm/index.js");var _excluded=["components"];function _extends(){return _extends=Object.assign?Object.assign.bind():function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source)Object.prototype.hasOwnProperty.call(source,key)&&(target[key]=source[key])}return target},_extends.apply(this,arguments)}function _objectWithoutProperties(source,excluded){if(null==source)return{};var key,i,target=function _objectWithoutPropertiesLoose(source,excluded){if(null==source)return{};var key,i,target={},sourceKeys=Object.keys(source);for(i=0;i<sourceKeys.length;i++)key=sourceKeys[i],excluded.indexOf(key)>=0||(target[key]=source[key]);return target}(source,excluded);if(Object.getOwnPropertySymbols){var sourceSymbolKeys=Object.getOwnPropertySymbols(source);for(i=0;i<sourceSymbolKeys.length;i++)key=sourceSymbolKeys[i],excluded.indexOf(key)>=0||Object.prototype.propertyIsEnumerable.call(source,key)&&(target[key]=source[key])}return target}var layoutProps={};function MDXContent(_ref){var components=_ref.components,props=_objectWithoutProperties(_ref,_excluded);return(0,esm.kt)("wrapper",_extends({},layoutProps,props,{components,mdxType:"MDXLayout"}),(0,esm.kt)(dist_esm.h_,{title:"Nightingale/NightingaleSequence/Readme",mdxType:"Meta"}),(0,esm.kt)(dist_esm.dk,{mdxType:"Description"},'# nightingale-sequence\n\n[![Published on NPM](https://img.shields.io/npm/v/nightingale-sequence.svg)](https://www.npmjs.com/package/nightingale-sequence)\n\nThis custom element displays the sequence in the selected region if the zoom level allows it, otherwise it displays the axis legend of the selected region. As it inherits from <nightingale-zoomable>, it supports highlighting.\n\n[Demo](https://ebi-webcomponents.github.io/nightingale/#/sequence)\n\n## Usage\n\n#### Setting sequence through property\n\n```html\n<nightingale-sequence length="456" />\n```\n\n```\nconst nightingaleSequence = document.querySelectAll(\'#my-nightingale-sequence-id\');\nnightingaleSequence.sequence = proteinSequence;\n```\n\n#### Setting sequence through attribute\n\n```html\n<nightingale-sequence length="456" sequence="RFQAEGSLKK..." />\n```\n\n## API Reference\n\n### Properties\n\n#### `sequence: string`\n\nThe sequence to display\n\n#### `length: number`\n\nThe protein or nucleic acid sequence length.\n\n#### also see [nightingale-zoomable](https://github.com/ebi-webcomponents/nightingale/blob/master/packages/nightingale-zoomable/README.md#properties)\n'))}MDXContent.isMDXComponent=!0;var __page=function __page(){throw new Error("Docs-only story")};__page.parameters={docsOnly:!0};var componentMeta={title:"Nightingale/NightingaleSequence/Readme",includeStories:["__page"]},mdxStoryNameToKey={};componentMeta.parameters=componentMeta.parameters||{},componentMeta.parameters.docs=Object.assign({},componentMeta.parameters.docs||{},{page:function page(){return(0,esm.kt)(dist_esm.aT,{mdxStoryNameToKey,mdxComponentAnnotations:componentMeta},(0,esm.kt)(MDXContent,null))}});const NightingaleSequence_stories=componentMeta;var __namedExportsOrder=["__page"]},"./stories/NightingaleTrack.stories.mdx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{__namedExportsOrder:()=>__namedExportsOrder,__page:()=>__page,default:()=>NightingaleTrack_stories});__webpack_require__("./node_modules/core-js/modules/es.object.keys.js"),__webpack_require__("./node_modules/core-js/modules/es.array.index-of.js"),__webpack_require__("./node_modules/core-js/modules/es.symbol.js"),__webpack_require__("./node_modules/core-js/modules/es.function.bind.js"),__webpack_require__("./node_modules/core-js/modules/es.object.assign.js"),__webpack_require__("./node_modules/react/index.js");var esm=__webpack_require__("./node_modules/@mdx-js/react/dist/esm.js"),dist_esm=__webpack_require__("./node_modules/@storybook/addon-docs/dist/esm/index.js");var _excluded=["components"];function _extends(){return _extends=Object.assign?Object.assign.bind():function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source)Object.prototype.hasOwnProperty.call(source,key)&&(target[key]=source[key])}return target},_extends.apply(this,arguments)}function _objectWithoutProperties(source,excluded){if(null==source)return{};var key,i,target=function _objectWithoutPropertiesLoose(source,excluded){if(null==source)return{};var key,i,target={},sourceKeys=Object.keys(source);for(i=0;i<sourceKeys.length;i++)key=sourceKeys[i],excluded.indexOf(key)>=0||(target[key]=source[key]);return target}(source,excluded);if(Object.getOwnPropertySymbols){var sourceSymbolKeys=Object.getOwnPropertySymbols(source);for(i=0;i<sourceSymbolKeys.length;i++)key=sourceSymbolKeys[i],excluded.indexOf(key)>=0||Object.prototype.propertyIsEnumerable.call(source,key)&&(target[key]=source[key])}return target}var layoutProps={};function MDXContent(_ref){var components=_ref.components,props=_objectWithoutProperties(_ref,_excluded);return(0,esm.kt)("wrapper",_extends({},layoutProps,props,{components,mdxType:"MDXLayout"}),(0,esm.kt)(dist_esm.h_,{title:"Nightingale/NightingaleTrack/Readme",mdxType:"Meta"}),(0,esm.kt)(dist_esm.dk,{mdxType:"Description"},"# nightingale-track\n\n[![Published on NPM](https://img.shields.io/npm/v/nightingale-track.svg)](https://www.npmjs.com/package/nightingale-track)\n\nThe `nightingale-track` component is used to display protein features. These features have `start` and `end` positions (these can be the same if the feature only spans one amino-acid), a specific shape (rectangle is the default) and a colour. Features are passed through the `data` property. You can specify shapes and colours at an instance level (through a property) or individually in the feature `data` (see `data` below). In order to establish the scale, it is necessary to set the `length` property (length of the protein sequence in amino-acids).\n\nAs `nightingale-track` inherits from `nightingale-zoomable`, it will respond to zooming changes, highlight events and emit events when interacting with features (helpful if you want to display tooltips).\n\nLoading data can be done directly through the `data` property, or through the use of a `load` event emitted by one of `nightingale-track`'s children (e.g. a data adapter with `data-loader`).\n\nThere are two types of display available for `nightingale-track`:\n\n- overlapping will display all the features on one single line. This means that if a feature overlaps another one, it will be indistinguishable. This layout can be useful to display an overview, or when the data is very dense.\n- non-overlapping will calculate the best vertical positions for each feature so that they don't overlap.\n\n[Demo](https://ebi-webcomponents.github.io/nightingale/#/track)\n\n## Usage\n\n```html\n<nightingale-track length=\"456\" />\n```\n\n#### Setting the data through property\n\n```\nconst track = document.querySelector('#my-track-id');\ntrack.data = myDataObject\n```\n\n#### Setting data through &lt;data-loader&gt;\n\n```\n<nightingale-track length=\"770\">\n    <nightingale-feature-adapter id=\"adapter1\">\n        <data-loader>\n          <source src=\"https://www.ebi.ac.uk/proteins/api/features/P05067?categories=PTM\" />\n        </data-loader>\n    </nightingale-feature-adapter>\n</nightingale-track>\n```\n\n## API Reference\n\n### Properties\n\n#### `length: number`\n\nThe protein or nucleic acid sequence length.\n\n#### `data: Array`\n\nArray items take the following shape:\n\n```javascript\n{\n    accession: String,\n    start: Number,\n    end: Number,\n    color?: String,\n    shape?: rectangle|bridge|diamond|chevron|catFace|triangle|wave|hexagon|pentagon|circle|arrow|doubleBar,\n    tooltipContent?: String\n    locations: [\n        {\n            fragments: [\n                {\n                    start: Number,\n                    end: Number\n                }\n            ]\n        }\n    ]\n}\n```\n\n**Note**: `locations` is an alternative to `start`-`stop` attributes, that expresses that a feature can appear in several locations, and also supports the idea of discontinuous features, by allowing to have `fragments`.\n\nSo for example a single continuous feature, that only appears once can be represented in 2 ways. The classic `{accession:'X', start:2, end:4}` or a more verbose version: `{accession:'X', locations: [{fragments: [{start:2, end:4}]}]}` an both should generate a track like this:\n\n```\n-XXX------\n```\n\nIf the same feature appears in 2 places in the sequence, it can be represented using `locations`:\n\n```javascript\n{\n    accession: 'Y',\n    locations: [\n        {fragments: [{start:2, end:4}]},\n        {fragments: [{start:7, end:9}]}\n    ]\n}\n```\n\nTo generate a track like\n\n```\n-YYY--YYY-\n```\n\nFinally a feature can also be discontinuous, to repesent this in our data we use `fragments`:\n\n```javascript\n{\n    accession: 'Z',\n    locations: [\n        {fragments: [\n            {start:2, end:4},\n            {start:7, end:9}]\n        }\n    ]\n}\n```\n\nThis expresses that the same instance of the feature Z is split in 2 fragments, from 2 to 4 and from 7 to 9. Which could be represented as\n\n```\n-ZZZ==ZZZ-\n```\n\n#### `layout?: overlapping(default)|non-overlapping(optional)`\n\nThe track layout. Non-overlapping uses a bumping algorhithm to make sure none of the features overlapp.\n\n#### `shape?: see above`\n\nShape of all features within the track\n\n#### `color?: see above`\n\nColour of all features within the track\n\n#### also see [nightingale-zoomable](https://github.com/ebi-webcomponents/nightingale/blob/master/packages/nightingale-zoomable/README.md#properties)\n"))}MDXContent.isMDXComponent=!0;var __page=function __page(){throw new Error("Docs-only story")};__page.parameters={docsOnly:!0};var componentMeta={title:"Nightingale/NightingaleTrack/Readme",includeStories:["__page"]},mdxStoryNameToKey={};componentMeta.parameters=componentMeta.parameters||{},componentMeta.parameters.docs=Object.assign({},componentMeta.parameters.docs||{},{page:function page(){return(0,esm.kt)(dist_esm.aT,{mdxStoryNameToKey,mdxComponentAnnotations:componentMeta},(0,esm.kt)(MDXContent,null))}});const NightingaleTrack_stories=componentMeta;var __namedExportsOrder=["__page"]},"./stories sync recursive ^\\.(?:(?:^%7C\\/%7C(?:(?:(?%21(?:^%7C\\/)\\.).)*?)\\/)(?%21\\.)(?=.)[^/]*?\\.stories\\.(js%7Cjsx%7Cts%7Ctsx))$":(module,__unused_webpack_exports,__webpack_require__)=>{var map={"./NightingaleInterProTrack.stories.ts":"./stories/NightingaleInterProTrack.stories.ts","./NightingaleManager.stories.ts":"./stories/NightingaleManager.stories.ts","./NightingaleNavigation.stories.ts":"./stories/NightingaleNavigation.stories.ts","./NightingaleSequence.stories.ts":"./stories/NightingaleSequence.stories.ts","./NightingaleTrack.stories.ts":"./stories/NightingaleTrack.stories.ts"};function webpackContext(req){var id=webpackContextResolve(req);return __webpack_require__(id)}function webpackContextResolve(req){if(!__webpack_require__.o(map,req)){var e=new Error("Cannot find module '"+req+"'");throw e.code="MODULE_NOT_FOUND",e}return map[req]}webpackContext.keys=function webpackContextKeys(){return Object.keys(map)},webpackContext.resolve=webpackContextResolve,module.exports=webpackContext,webpackContext.id="./stories sync recursive ^\\.(?:(?:^%7C\\/%7C(?:(?:(?%21(?:^%7C\\/)\\.).)*?)\\/)(?%21\\.)(?=.)[^/]*?\\.stories\\.(js%7Cjsx%7Cts%7Ctsx))$"},"./stories sync recursive ^\\.(?:(?:^%7C\\/%7C(?:(?:(?%21(?:^%7C\\/)\\.).)*?)\\/)(?%21\\.)(?=.)[^/]*?\\.stories\\.mdx)$":(module,__unused_webpack_exports,__webpack_require__)=>{var map={"./NightingaleInterProTrack.stories.mdx":"./stories/NightingaleInterProTrack.stories.mdx","./NightingaleManager.stories.mdx":"./stories/NightingaleManager.stories.mdx","./NightingaleNavigation.stories.mdx":"./stories/NightingaleNavigation.stories.mdx","./NightingaleSequence.stories.mdx":"./stories/NightingaleSequence.stories.mdx","./NightingaleTrack.stories.mdx":"./stories/NightingaleTrack.stories.mdx"};function webpackContext(req){var id=webpackContextResolve(req);return __webpack_require__(id)}function webpackContextResolve(req){if(!__webpack_require__.o(map,req)){var e=new Error("Cannot find module '"+req+"'");throw e.code="MODULE_NOT_FOUND",e}return map[req]}webpackContext.keys=function webpackContextKeys(){return Object.keys(map)},webpackContext.resolve=webpackContextResolve,module.exports=webpackContext,webpackContext.id="./stories sync recursive ^\\.(?:(?:^%7C\\/%7C(?:(?:(?%21(?:^%7C\\/)\\.).)*?)\\/)(?%21\\.)(?=.)[^/]*?\\.stories\\.mdx)$"},"?4f7e":()=>{},"./generated-stories-entry.cjs":(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";module=__webpack_require__.nmd(module),(0,__webpack_require__("./node_modules/@storybook/web-components/dist/esm/client/index.js").configure)([__webpack_require__("./stories sync recursive ^\\.(?:(?:^%7C\\/%7C(?:(?:(?%21(?:^%7C\\/)\\.).)*?)\\/)(?%21\\.)(?=.)[^/]*?\\.stories\\.mdx)$"),__webpack_require__("./stories sync recursive ^\\.(?:(?:^%7C\\/%7C(?:(?:(?%21(?:^%7C\\/)\\.).)*?)\\/)(?%21\\.)(?=.)[^/]*?\\.stories\\.(js%7Cjsx%7Cts%7Ctsx))$")],module,!1)},"./packages/nightingale-interpro-track/tests/mockData/interpro-IPR016039.json":module=>{"use strict";module.exports=JSON.parse('[{"accession":"IPR016039","name":"Thiolase-like","source_database":"interpro","locations":[{"fragments":[{"start":5,"end":389}],"model_acc":null,"seq_feature":null}],"color":"#84862d","type":"homologous_superfamily","k":0}]')},"./packages/nightingale-interpro-track/tests/mockData/interpro-contributors.json":module=>{"use strict";module.exports=JSON.parse('[{"accession":"SSF53901","name":"Thiolase-like","source_database":"ssf","type":"homologous_superfamily","locations":[{"fragments":[{"start":5,"end":262}],"model_acc":"0050445","seq_feature":null},{"fragments":[{"start":266,"end":389}],"model_acc":"0049940","seq_feature":null}],"color":"#bbd279","k":0,"expanded":true},{"accession":"G3DSA:3.40.47.10","name":"G3DSA:3.40.47.10","source_database":"cathgene3d","type":"homologous_superfamily","locations":[{"fragments":[{"start":9,"end":130},{"start":188,"end":260}],"model_acc":"1wdkC01","seq_feature":null},{"fragments":[{"start":138,"end":180},{"start":272,"end":384}],"model_acc":"1wdkC02","seq_feature":null}],"color":"#87c59c","k":1,"expanded":true}]')},"./packages/nightingale-interpro-track/tests/mockData/interpro-residues.json":module=>{"use strict";module.exports=JSON.parse('[{"accession":"cd01991","name":"Asn_Synthase_B_C","source_database":"cdd","locations":[{"description":"Molecular Tunnel","fragments":[{"residues":"L","start":262,"end":262},{"residues":"L","start":263,"end":263},{"residues":"S","start":264,"end":264},{"residues":"A","start":290,"end":290},{"residues":"G","start":291,"end":291},{"residues":"F","start":292,"end":292},{"residues":"V","start":350,"end":350},{"residues":"T","start":363,"end":363},{"residues":"G","start":364,"end":364},{"residues":"D","start":365,"end":365}]},{"description":"Ligand Binding Site","fragments":[{"residues":"L","start":262,"end":262},{"residues":"L","start":263,"end":263},{"residues":"S","start":264,"end":264},{"residues":"A","start":290,"end":290},{"residues":"G","start":291,"end":291},{"residues":"F","start":292,"end":292},{"residues":"V","start":350,"end":350},{"residues":"T","start":363,"end":363},{"residues":"G","start":364,"end":364},{"residues":"D","start":365,"end":365}]}]}]')}},__webpack_require__=>{var __webpack_exec__=moduleId=>__webpack_require__(__webpack_require__.s=moduleId);__webpack_require__.O(0,[571],(()=>(__webpack_exec__("./node_modules/@storybook/core-client/dist/esm/globals/polyfills.js"),__webpack_exec__("./node_modules/@storybook/core-client/dist/esm/globals/globals.js"),__webpack_exec__("./storybook-init-framework-entry.js"),__webpack_exec__("./node_modules/@storybook/web-components/dist/esm/client/preview/config-generated-config-entry.js"),__webpack_exec__("./node_modules/@storybook/web-components/dist/esm/client/docs/config-generated-config-entry.js"),__webpack_exec__("./node_modules/@storybook/addon-links/preview.js-generated-config-entry.js"),__webpack_exec__("./node_modules/@storybook/addon-docs/preview.js-generated-config-entry.js"),__webpack_exec__("./node_modules/@storybook/addon-actions/preview.js-generated-config-entry.js"),__webpack_exec__("./node_modules/@storybook/addon-backgrounds/preview.js-generated-config-entry.js"),__webpack_exec__("./node_modules/@storybook/addon-measure/preview.js-generated-config-entry.js"),__webpack_exec__("./node_modules/@storybook/addon-outline/preview.js-generated-config-entry.js"),__webpack_exec__("./node_modules/@storybook/addon-a11y/preview.js-generated-config-entry.js"),__webpack_exec__("./.storybook/preview.js-generated-config-entry.js"),__webpack_exec__("./generated-stories-entry.cjs"))));__webpack_require__.O()}]);